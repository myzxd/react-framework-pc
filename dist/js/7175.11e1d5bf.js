"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7175],{87175:function(e,r,t){t.r(r);t(52560);var n=t(71577),o=t(15671),i=t(43144),a=t(97326),l=t(60136),c=t(82963),s=t(61120),d=t(4942),u=t(55609),f=t(45697),p=t.n(f),m=t(67294),O=t(34724),x=t(34089),v=t(19556),y=t(80385),C=t(68815);function Z(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)}}var h=function(e){(0,l.Z)(t,e);var r=Z(t);function t(){var e;return(0,o.Z)(this,t),e=r.call(this),(0,d.Z)((0,a.Z)(e),"onInvoiceAdjust",(function(r,t){var n=e.props.location.query.invoiceAdjustId;window.location.href="/#/Expense/Manage/InvoiceAdjustCostOrderForm?orderId=".concat(r,"&invoiceAdjustId=").concat(n,"&costOrderId=").concat(t)})),(0,d.Z)((0,a.Z)(e),"onSuccessCallbackExamineOrderDetail",(function(r){var t=r.flow_id,n=void 0===t?"":t,o=e.props.dispatch;n&&o({type:"expenseExamineFlow/fetchExamineDetail",payload:{id:n}})})),(0,d.Z)((0,a.Z)(e),"onSuccessCallback",(function(){window.location.href="/#/Expense/Manage/ExamineOrder?selectedTabKey=".concat(y.WPs.penddingVerify)})),(0,d.Z)((0,a.Z)(e),"renderContent",(function(){var r=e.props,t=r.examineOrderDetail,n=r.examineDetail,o=r.originalCostOrder;return 0===Object.keys(t).length||0===Object.keys(n).length||0===Object.keys(o).length?null:m.createElement("div",null,e.renderBaseInfo(),e.renderAssociatedInfo(),e.renderCostOrder(),e.renderOperate())})),(0,d.Z)((0,a.Z)(e),"renderBaseInfo",(function(){var r=e.props.examineOrderDetail;return 0===Object.keys(r).length?null:m.createElement(O.Z,{detail:r})})),(0,d.Z)((0,a.Z)(e),"renderAssociatedInfo",(function(){var r=e.props.examineOrderDetail,t=r.id,n=r.relationApplicationOrderIds,o=void 0===n?[]:n;return m.createElement(C.Z,{key:"1",relationApplicationOrderId:o,orderId:t})})),(0,d.Z)((0,a.Z)(e),"renderCostOrder",(function(){var r=e.props,t=r.examineOrderDetail,n=r.examineDetail,o=r.location,i=r.originalCostOrder;return m.createElement(x.Z,{location:o,examineDetail:n,examineOrderDetail:t,originalCostOrder:i,extra:e.renderCollapseExtra})})),(0,d.Z)((0,a.Z)(e),"renderCollapseExtra",(function(r,t){var o=(e.props.originalCostOrder.filter((function(e){return e.id===t}))[0]||{}).refCostOrderInfoList,i=void 0===o?[]:o;if(i.filter((function(e){return e.state!==y.Vm3.close&&e.state!==y.Vm3.delete&&e.type===y.rkq.refund})).length>0)return null;var a=i.filter((function(e){return e.state!==y.Vm3.close&&e.state!==y.Vm3.delete&&e.type===y.rkq.invoiceAdjust})),l=m.createElement("a",{key:"edit",onClick:function(){return e.onInvoiceAdjust(r,t)}},"编辑"),c=m.createElement(n.Z,{key:r,type:"primary",onClick:function(){return e.onInvoiceAdjust(r,t)}},"发起红冲");return a.length>0?l:0===a.length?c:null})),(0,d.Z)((0,a.Z)(e),"renderOperate",(function(){var r=e.props,t=r.location,n=r.examineDetail,o=r.examineOrderDetail,i=r.originalCostOrder,a=t.query.invoiceAdjustId,l=i.map((function(e){return e.refCostOrderInfoList}));return[].concat.apply([],l).filter((function(e){return e.type===y.rkq.invoiceAdjust&&e.state!==y.Vm3.delete&&e.state!==y.Vm3.close&&e.total_money>0})).length>0?m.createElement(v.Z,{orderId:a,action:y.rkq.invoiceAdjust,onSuccessCallback:e.onSuccessCallback,examineDetail:n,examineOrderDetail:o}):null})),e.state={orderId:""},e}return(0,i.Z)(t,[{key:"componentDidMount",value:function(){var e=this.props,r=e.dispatch,t=e.location.query.invoiceAdjustId;void 0!==t&&(r({type:"expenseExamineOrder/fetchExamineOrderDetail",payload:{id:t,flag:!0,onSuccessCallback:this.onSuccessCallbackExamineOrderDetail}}),r({type:"expenseCostOrder/fetchOriginalCostOrder",payload:{orderId:t}}))}},{key:"render",value:function(){return this.renderContent()}}]),t}(m.Component);(0,d.Z)(h,"propTypes",{examineOrderDetail:p().object,examineDetail:p().object,location:p().object,originalCostOrder:p().array}),(0,d.Z)(h,"defaultProps",{examineOrderDetail:{},examineDetail:{},location:{},originalCostOrder:[]}),r.default=(0,u.connect)((function(e){return{examineOrderDetail:e.expenseExamineOrder.examineOrderDetail,examineDetail:e.expenseExamineFlow.examineDetail,originalCostOrder:e.expenseCostOrder.originalCostOrder}}))(h)}}]);