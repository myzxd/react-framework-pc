"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[9495],{79495:function(e,t,a){a.r(t);a(52560);var r=a(71577),l=(a(54071),a(14072)),n=a(4942),o=(a(51838),a(48086)),i=a(15861),p=a(29439),s=(a(29093),a(16317)),c=(a(9070),a(20924)),u=a(87757),m=a.n(u),d=a(93517),f=a.n(d),y=a(67294),v=a(94315),b=a.n(v),g=a(66939),E=(a(98703),a(55609)),C=a(96036),h=a(74962),w=a(8240),Z=a(80385),j=a(48717),O=a(36886);function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var T=c.Z.TextArea,V=s.Z.Option,A=10,D=20;t.default=(0,E.connect)((function(e){return{employeeTurnover:e.employeeTurnover,employeesAll:e.employeeManage.employeesAll}}))(g.Z.create()((function(e){var t=(0,y.useState)(!1),a=(0,p.Z)(t,2),n=a[0],u=a[1],d=(0,y.useState)(void 0),v=(0,p.Z)(d,2),g=v[0],E=v[1],k=(0,y.useState)(void 0),P=(0,p.Z)(k,2),S=P[0],q=P[1],I=(0,y.useState)(A),M=(0,p.Z)(I,2),_=M[0],z=M[1];(0,y.useEffect)((function(){return function(){e.dispatch({type:"employeeManage/resetEmployeesAll"})}}),[]);var N,$,B,F=function(){var t=(0,i.Z)(m().mark((function t(a){var r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(18,18!==a.target.value.length){t.next=7;break}return t.next=4,e.dispatch({type:"employeeManage/fetchEmployees",payload:{identityCardId:a.target.value,state:[1,100,101,102,103]}});case 4:if(r=t.sent,0!==f().get(r,"data",[]).length){t.next=7;break}return t.abrupt("return",o.ZP.error("请输入劳动者身份证号"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),H=function(t){e.form.validateFieldsAndScroll((function(a,r){if(!a){var l,n=r.fileList,o=f().get(e,"employeesAll.data",[]);l=b().not.empty(o)&&b().existy(o)?o[0]._id:void 0;var i=x(x(x({},r),t),{},{employeeId:l,effectDate:g,fileList:n,id:S});_===A&&e.dispatch({type:"employeeTurnover/createEmployeeTurnover",payload:i}),_===D&&e.dispatch({type:"employeeTurnover/updateEmployeeTurnover",payload:i})}}))},L=function(e){u(!0),q(f().get(e,"record._id")),z(D)},K=function(e){e.preventDefault(),H({onSuccessCallback:L})},W=function(e){e.preventDefault(),H({onSuccessCallback:function(){window.location.href="/#/Employee/Turnover"}})},Y=function(){u(!1)},G=function(e,t,a){if(b().not.empty(t)&&b().existy(t)){if(t.length<="5")return void a();a("最多可以输入五个主题标签")}a("请选择主题标签")},J=function(e){return b().not.empty(e)&&b().existy(e)?y.createElement("div",null,e.map((function(e,t){return y.createElement("span",{key:t},e.name)}))):"--"},Q=function(e){return b().not.empty(e)&&b().existy(e)?y.createElement("div",null,e.map((function(e,t){return y.createElement("span",{key:t},e.identity_card_id)}))):"--"},R=function(e){return b().not.empty(e)&&b().existy(e)?y.createElement("div",null,e.map((function(e,t){return y.createElement("span",{key:t},Z.Y0t.description(e.gender_id))}))):"--"},U=function(e,t){E(t)};return y.createElement("div",null,(N=e.form.getFieldDecorator,$=f().get(e,"employeesAll.data",[]),B=[{span:24,layout:{labelCol:{span:2},wrapperCol:{span:5}},label:"调岗人员",form:N("postIdCard",{initialValue:void 0,rules:[{required:!0,validator:w.Hb,message:"您输入的劳动者身份证号有误，请重新输入"}]})(y.createElement(c.Z,{placeholder:"请输入调岗人员身份证号码",onChange:F}))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"姓名",form:N("name",{initialValue:void 0})(y.createElement("div",null,J($)))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"身份证号码",form:N("idCard",{initialValue:void 0})(y.createElement("div",null,Q($)))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"性别",form:N("gender",{initialValue:void 0})(y.createElement("div",null,R($)))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"所属部门",form:N("department",{initialValue:void 0,rules:[{required:!1,message:"请输入所属部门"},{pattern:/^[^\s]+$/g,message:"格式不正确，不能包含空格"},{max:16,message:"输入的长度为1-16个字符"}]})(y.createElement(c.Z,{placeholder:"请输入所属部门"}))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"岗位名称",form:N("postName",{initialValue:void 0,rules:[{required:!0,message:"请输入岗位名称"},{pattern:/^[\u4e00-\u9fa5a-zA-Z-z]+$/g,message:"只能输入字母,汉字"},{max:16,message:"输入的长度为1-16个字符"}]})(y.createElement(c.Z,{placeholder:"请输入岗位名称"}))},{span:24,layout:{labelCol:{span:2},wrapperCol:{span:19}},label:"调岗原因",form:N("postWhy",{initialValue:void 0,rules:[{required:!0,message:"请输入调岗原因"}]})(y.createElement(T,{placeholder:"请输入调岗原因",rows:4}))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"调岗后部门",form:N("afterDepartment",{initialValue:void 0,rules:[{required:!1,message:"请输入调岗后部门"},{pattern:/^[^\s]+$/g,message:"格式不正确，不能包含空格"},{max:16,message:"输入的长度为1-16个字符"}]})(y.createElement(c.Z,{placeholder:"请输入调岗后部门"}))},{span:8,layout:{labelCol:{span:6},wrapperCol:{span:15}},label:"调岗后岗位",form:N("postAfterName",{initialValue:void 0,rules:[{required:!0,message:"请输入调岗后岗位"},{pattern:/^[\u4e00-\u9fa5a-zA-Z-z]+$/g,message:"只能输入字母,汉字"},{max:16,message:"输入的长度为1-16个字符"}]})(y.createElement(c.Z,{placeholder:"请输入调岗后岗位"}))},{span:24,layout:{labelCol:{span:2},wrapperCol:{span:19}},label:"期望生效时间",form:N("expectDate",{initialValue:null,rules:[{required:!0,message:"请选择期望生效时间"}]})(y.createElement(l.Z,{onChange:U}))},{span:24,layout:{labelCol:{span:2},wrapperCol:{span:19}},label:"主题标签",form:N("themeTag",{initialValue:void 0,rules:[{required:!0,validator:G}]})(y.createElement(s.Z,{mode:"tags",style:{width:"100%"},placeholder:"请输入主题标签"},y.createElement(V,{value:Z.cij.promotion},Z.cij.description(Z.cij.promotion)),y.createElement(V,{value:Z.cij.demotion},Z.cij.description(Z.cij.demotion)),y.createElement(V,{value:Z.cij.level},Z.cij.description(Z.cij.level))))},{span:24,layout:{labelCol:{span:2},wrapperCol:{span:19}},label:"备注",form:N("note",{initialValue:void 0,rules:[{required:!0,message:"请输入备注"}]})(y.createElement(T,{placeholder:"请输入备注",rows:4}))}],y.createElement(C.IT,{title:"调岗申请单"},y.createElement(C.KP,{items:B,cols:3}),y.createElement(h.Z,{domain:"staff",form:e.form}))),y.createElement(C.IT,{style:{textAlign:"center"}},y.createElement(r.Z,{type:"primary",className:O.Z["app-comp-employee-turnover-create-submit"],onClick:K},"保存并提交审核"),y.createElement(r.Z,{onClick:function(){window.location.href="/#/Employee/Turnover"}},"返回"),y.createElement(r.Z,{type:"primary",className:O.Z["app-comp-employee-turnover-create-save"],onClick:W},"保存")),y.createElement(j.Z,{onHideModal:Y,isShowModal:n,turnoverId:S}))})))}}]);