"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7743],{37743:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});a(52560);var n=a(71577),r=(a(20186),a(75385)),o=(a(21316),a(75443)),c=(a(51838),a(48086)),i=a(15671),l=a(43144),u=a(97326),d=a(60136),s=a(82963),p=a(61120),m=a(4942),f=(a(29093),a(16317)),h=a(93517),y=a.n(h),v=a(55609),g=a(67294),I=a(66939),_=(a(98703),a(96036)),x=a(80385),Z="PiO5onaqlW2dAkVH5PzG";function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.Z)(this,a)}}var E=f.Z.Option,S=function(e){(0,d.Z)(a,e);var t=k(a);function a(e){var l;return(0,i.Z)(this,a),l=t.call(this,e),(0,m.Z)((0,u.Z)(l),"componentDidMount",(function(){l.props.location.query.isBatch||(l.props.dispatch({type:"approval/fetchSummaryRecordDetail",payload:{id:l.state.recordId}}),l.props.dispatch({type:"approval/fetchSummaryRecordData",payload:{examineflowId:l.state.recordId,limit:30,page:1}}))})),(0,m.Z)((0,u.Z)(l),"onSubmit",(function(){var e=l.state.examineId;if(void 0!==e){var t={examineId:y().get(l.props,"location.query.recordId"),examineflowId:e};l.props.dispatch({type:"approval/submitTypeApplyGroupE",payload:t})}else c.ZP.error("请选择审批流")})),(0,m.Z)((0,u.Z)(l),"onChangeExamine",(function(e){l.setState({examineId:e})})),(0,m.Z)((0,u.Z)(l),"onClickDelete",(function(e){l.props.dispatch({type:"approval/typeApplyDeleteE",payload:{examineId:l.state.recordId,orderId:e,state:-1,onSuccessCallback:l.onSuccessCallback}})})),(0,m.Z)((0,u.Z)(l),"onSuccessCallback",(function(e){e-1==0&&(window.location.href="/#/Expense/Manage/Records")})),(0,m.Z)((0,u.Z)(l),"onChangePage",(function(e){var t=l.state.recordId;l.private.dispatch({type:"fetchSummaryRecordData",payload:{examineflowId:t,limit:30,page:e}})})),(0,m.Z)((0,u.Z)(l),"renderBaseInfo",(function(){var e=l.state,t=e.detail,a=e.examineList,n=[{label:"申请人",form:y().get(t,"account_name","--")},{label:"总金额",form:x.fbc.exchangePriceToMathFormat(y().get(t,"total_money","--"))},{label:"费用分组",form:y().get(t,"costclass_name","--")},{label:"审批流程",form:g.createElement(f.Z,{placeholder:"请选择审批流程",onChange:l.onChangeExamine},a.map((function(e,t){return g.createElement(E,{key:t,value:e._id},e.name)})))}];return g.createElement(_.IT,null,g.createElement(I.Z,{layout:"horizontal"},g.createElement(_.KP,{items:n,cols:4,layout:{labelCol:{span:9},wrapperCol:{span:15}}})))})),(0,m.Z)((0,u.Z)(l),"renderListInfo",(function(){var e=l.state,t=e.dataSource,a=e.houseState,n=[{title:"单笔流水号",dataIndex:"_id",key:"_id"},{title:"供应商",dataIndex:"supplier_name_list",key:"supplier_name_list",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.forEach((function(e){t+=" ".concat(e)})),""===t?"--":t}},{title:"平台",dataIndex:"platform_name_list",key:"platform_name_list",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.forEach((function(e){t+=" ".concat(e)})),""===t?"--":t}},{title:"城市",dataIndex:"city_name_list",key:"city_name_list",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.forEach((function(e){t+=" ".concat(e)})),""===t?"--":t}},{title:"商圈",dataIndex:"district_name_list",key:"district_name_list",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";return e.forEach((function(e){t+=" ".concat(e)})),""===t?"--":t}},{title:"科目",dataIndex:"catalog_name",key:"catalog_name"},{title:"房屋状态",dataIndex:"thing_state",key:"thing_state",render:function(e){return x.Bb4.description(e)}},{title:"金额（元）",dataIndex:"total_money",key:"total_money",render:function(e){return x.fbc.exchangePriceToMathFormat(e)}},{title:"操作",dataIndex:"operation",key:"operation",render:function(e,t){var n=t._id;return g.createElement("div",null,g.createElement("a",{href:"/#/Expense/Manage/Records/Form?recordId=".concat(n,"&houseState=").concat(a),className:Z},"编辑"),g.createElement(o.Z,{title:"确定执行操作？",onConfirm:function(){l.onClickDelete(n)},okText:"确定",cancelText:"取消"},g.createElement("a",{className:Z},"删除")))}}],c={defaultPageSize:30,onChange:l.onChangePage,total:y().get(t,"_meta.result_count",0),showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showSizeChanger:!0};return g.createElement(_.IT,{title:"流水单数据"},g.createElement(r.Z,{rowKey:function(e){return e._id},dataSource:t.data,columns:n,pagination:c,bordered:!0}))})),(0,m.Z)((0,u.Z)(l),"render",(function(){return g.createElement("div",null,l.renderBaseInfo(),l.renderListInfo(),g.createElement(_.IT,{style:{textAlign:"center",backgroundColor:"#ffffff"}},g.createElement(n.Z,{type:"primary",onClick:l.onSubmit},"提交")))})),l.state={recordId:y().get(e,"location.query.recordId"),houseState:y().get(e,"location.query.houseState"),examineId:void 0,detail:y().get(e,"approval.summaryRecordDetail"),dataSource:y().get(e,"approval.summaryRecordData"),examineList:y().get(e,"approval.examineSimpleNameList",[])||[]},l.private={dispatch:e.dispatch},l}return(0,l.Z)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({detail:y().get(e,"approval.summaryRecordDetail"),dataSource:y().get(e,"approval.summaryRecordData"),examineList:y().get(e,"approval.examineSimpleNameList",[])||[]})}}]),a}(g.Component);var C=(0,v.connect)((function(e){return{approval:e.approval}}))(S)}}]);