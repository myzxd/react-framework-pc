"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[3523],{23523:function(e,t,n){n.r(t),n.d(t,{default:function(){return Ge}});n(438);var a=n(14277),r=n(29439),l=(n(9523),n(51752)),o=n(67294),i=n(45430),c=n(97116),s=n(15861),m=n(4942),p=n(87757),d=n.n(p),u=n(55609),f=(n(52560),n(71577)),y=(n(9070),n(20924)),h=(n(35668),n(86585)),E=n(87462),g=(n(29093),n(16317)),w=n(96036),b=n(88144),v=(n(52466),n(10642)),Z=(n(55295),n(69713)),S=(n(36037),n(47933)),_=(n(26574),n(9676)),I=(n(75310),n(76772)),C=n(93517),O=n.n(C),T=n(45697),P=n.n(T),x=n(66939),k=n(68855),M=(n(98703),n(94315)),D=n.n(M),j=n(8240),F=g.Z.Option;var A=(0,u.connect)((function(e){return{teams:e.employeeManage.teams}}))((function(e){var t=e.dispatch,n=e.teams,a=e.namespace,r=e.codeTeamType,l=e.isShowEmpty,i="- -";(0,o.useEffect)((function(){t({type:"employeeManage/fetchGetTeams",payload:{teamTypes:r,namespace:a}})}),[t,a,r]);var c=(0,j.CE)(["dispatch","teams","codeTeamType","namespace","isShowEmpty"],e),s=(n[a]?n[a]:[]).map((function(e){return o.createElement(F,{key:e._id,value:e._id},e.name)})),m=Array.isArray(r)?r:[r];return(l&&(D().not.existy(r)||D().empty(r))||l&&m.includes(i))&&s.unshift(o.createElement(F,{key:i,value:i},"未配置TEAM")),o.createElement(g.Z,c,s)})),Y=g.Z.Option;var R=(0,u.connect)((function(e){return{teamTypes:e.employeeManage.teamTypes}}))((function(e){var t=e.dispatch,n=e.teamTypes,a=e.isShowEmpty,r=e.value,l="- -";(0,o.useEffect)((function(){t({type:"employeeManage/fetchGetTeamTypes",payload:{}})}),[t]);var i=(0,j.CE)(["dispatch","teamTypes","isShowEmpty"],e),c=O().get(n,[]).map((function(e){return o.createElement(Y,{key:e,disabled:D().existy(r)&&D().not.empty(r)&&r.includes(l),value:e},e)}));return a&&c.unshift(o.createElement(Y,{key:l,disabled:D().existy(r)&&D().not.empty(r)&&!r.includes(l),value:l},"未配置TEAM")),o.createElement(g.Z,(0,E.Z)({},i,{mode:"multiple"}),c)})),V=n(80385),q=c.By.isShowCode();function H(e){var t=(0,o.useState)({platforms:"",suppliers:"",cities:"",districts:""}),n=(0,r.Z)(t,2),a=n[0],l=n[1],i=(0,o.useState)(""),c=(0,r.Z)(i,2),s=c[0],m=c[1],p=(0,o.useState)(!0),d=(0,r.Z)(p,2),u=d[0],f=d[1],y=e.onHideModal,h=function(){var t={platforms:"",suppliers:"",cities:"",districts:"",filterDistricts:V.HcC.is,filterArchives:V.HcC.is};l(t),e.form.resetFields()},E=function(t){var n=e.form;a.platforms=t,a.suppliers=[],a.cities=[],a.districts=[],l(a),m([]),n.setFieldsValue({suppliers:[]}),n.setFieldsValue({cities:[]}),n.setFieldsValue({districts:[]})},g=function(t){var n=e.form;a.suppliers=t,a.cities=[],a.districts="",l(a),m([]),n.setFieldsValue({cities:[]}),n.setFieldsValue({districts:[]})},C=function(t,n){var r=e.form,o=n.map((function(e){return O().get(e,"props.spell",[])}));a.cities=t,a.districts=[],l(a),m(o),r.setFieldsValue({districts:[]})},T=function(e){a.districts=e,l(a)},P=function(){e.form.setFieldsValue({codeTeam:void 0})},M=function(t){var n=e.form;f(t.target.value),n.setFieldsValue({districts:[]})},D=e.isShowModal;return o.createElement(v.Z,{title:"导出",visible:D,onOk:function(t){var n=e.fileType;t.preventDefault(),e.form.validateFieldsAndScroll((function(t,a){if(!t){var r=a.platforms,l=a.suppliers,o=a.cities,i=a.districts,c=a.filterDistricts,s=a.filterArchives,m=a.staffTeamRank,p=a.codeTeamType,d=a.codeTeam,u={staffTeamRank:m,platforms:[r],suppliers:l,cities:o,districts:i,fileType:n,filterDistricts:c,filterArchives:s,codeTeamType:p,codeTeam:d};e.dispatch({type:"employeeManage/downloadStaffContractTeam",payload:u}),y&&y(),h()}}))},onCancel:function(){y&&y(),h()},okText:"确定",cancelText:"取消"},o.createElement(w.IT,{style:{backgroundColor:"#FFF"}},o.createElement(I.Z,{message:"导出的excel会根据成员加入的团队（工作信息）来展示信息！请关注任务列表的状态，及时进行下载！",type:"warning",showIcon:!0})),o.createElement(x.Z,null,function(){var t=e.form,n=t.getFieldDecorator,r=t.getFieldValue,l=a.platforms,i=a.suppliers,c=[{label:"团队中的身份",form:n("staffTeamRank",{initialValue:[V.IQ9.first],rules:[{required:!0,message:"请选择"}]})(o.createElement(_.Z.Group,null,o.createElement(_.Z,{value:V.IQ9.first},V.IQ9.description(V.IQ9.first)),o.createElement(_.Z,{value:V.IQ9.second},V.IQ9.description(V.IQ9.second))))},{label:"平台",form:n("platforms",{rules:[{required:!0,message:"请选择平台"}],initialValue:void 0})(o.createElement(b.Yg,{namespace:"export",allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择平台",onChange:E}))},{label:"供应商",form:n("suppliers",{rules:[{required:!1,message:"请选择供应商"}],initialValue:void 0})(o.createElement(b.o2,{namespace:"export",showArrow:!0,mode:"multiple",state:V.Acu.enable,isExpenseModel:!0,enableSelectAll:!0,allowClear:!0,showSearch:!0,optionFilterProp:"children",platforms:l,placeholder:"请选择供应商",onChange:g}))},{label:"城市",form:n("cities",{rules:[{required:!1,message:"请选择城市"}],initialValue:void 0})(o.createElement(b.Wn,{namespace:"export",isExpenseModel:!0,enableSelectAll:!0,showArrow:!0,allowClear:!0,mode:"multiple",showSearch:!0,optionFilterProp:"children",placeholder:"请选择城市",platforms:l,suppliers:i,onChange:C}))},{label:"过滤停用商圈",form:n("filterDistricts",{rules:[{required:!0,message:"是否过滤停用商圈"}],initialValue:V.HcC.is})(o.createElement(S.ZP.Group,{name:"radiogroup",onChange:M},o.createElement(S.ZP,{value:V.HcC.is},V.HcC.description(V.HcC.is)),o.createElement(S.ZP,{value:V.HcC.no},V.HcC.description(V.HcC.no))))},{label:"商圈",form:n("districts",{rules:[{required:!1,message:"请选择商圈"}],initialValue:void 0})(o.createElement(b.Wc,{allowClear:!0,showSearch:!0,mode:"multiple",enableSelectAll:!0,optionFilterProp:"children",placeholder:"请选择商圈",platforms:l,suppliers:i,cities:s,filterDisable:u,onChange:T}))},{label:"过滤已退出成员",form:n("filterArchives",{rules:[{required:!0,message:"是否过滤解约档案"}],initialValue:V.HcC.is})(o.createElement(S.ZP.Group,{name:"radiogroup"},o.createElement(S.ZP,{value:V.HcC.is},V.HcC.description(V.HcC.is)),o.createElement(S.ZP,{value:V.HcC.no},V.HcC.description(V.HcC.no))))}];q&&c.unshift({label:o.createElement("span",null,o.createElement(Z.Z,{overlayStyle:{maxWidth:300},title:"不选择TEAM类型默认导出为全量的TEAM类型数据！"},o.createElement(k.Z,{style:{color:"#faad14"}}))," TEAM类型"),form:n("codeTeamType")(o.createElement(R,{placeholder:"请选择归属team类型",showSearch:!0,showArrow:!0,mode:"multiple",allowClear:!0,optionFilterProp:"children",onChange:P}))},{label:o.createElement("span",null,o.createElement(Z.Z,{overlayStyle:{maxWidth:300},title:"不选择TEAM信息默认导出为全量的TEAM信息数据！"},o.createElement(k.Z,{style:{color:"#faad14"}}))," TEAM信息"),form:n("codeTeam")(o.createElement(A,{placeholder:"请选择TEAM信息",codeTeamType:r("codeTeamType"),showSearch:!0,namespace:"downloadModal",mode:"multiple",showArrow:!0,allowClear:!0,optionFilterProp:"children"}))});return o.createElement("div",null,o.createElement(w.KP,{items:c,cols:1,layout:{labelCol:{span:5},wrapperCol:{span:15}}}))}()))}H.propTypes={isShowModal:P().bool,onHideModal:P().func},H.defaultProps={isShowModal:!1,onHideModal:function(){}};var G=(0,u.connect)((function(e){return{employeeManage:e.employeeManage}}))(x.Z.create()(H)),K=g.Z.Option,z=c.By.isShowCode(),B=function(e){var t=e.onSearch,n=(0,o.useState)({}),a=(0,r.Z)(n,2),l=a[0],c=a[1],s=(0,o.useState)(!1),m=(0,r.Z)(s,2),p=m[0],d=m[1],u={placeholder:"请选择",allowClear:!0,mode:"multiple",optionFilterProp:"children"},v=[o.createElement(h.Z.Item,{label:"平台",name:"platforms"},o.createElement(b.Yg,(0,E.Z)({showArrow:!0,namespace:"second-platforms",onChange:function(){return l&&l.setFieldsValue({suppliers:void 0,cities:void 0,districts:void 0})}},u))),o.createElement(h.Z.Item,{noStyle:!0,key:"suppliers-wrap",shouldUpdate:function(e,t){return e.platforms!==t.platforms}},(function(e){var t=(0,e.getFieldValue)("platforms");return o.createElement(h.Z.Item,{label:"供应商",name:"suppliers"},o.createElement(b.o2,(0,E.Z)({showArrow:!0,namespace:"second-platforms",platforms:t,onChange:function(){return l&&l.setFieldsValue({cities:void 0,districts:void 0})}},u)))})),o.createElement(h.Z.Item,{noStyle:!0,key:"cities-wrap",shouldUpdate:function(e,t){return e.platforms!==t.platforms||e.suppliers!==t.suppliers}},(function(e){var t=e.getFieldValue,n=t("platforms"),a=t("suppliers");return o.createElement(h.Z.Item,{label:"城市",name:"cities"},o.createElement(b.Wn,(0,E.Z)({showArrow:!0,namespace:"second-cities",platforms:n,suppliers:a,isExpenseModel:!0,onChange:function(){return l&&l.setFieldsValue({districts:void 0})}},u)))})),o.createElement(h.Z.Item,{noStyle:!0,key:"districts-wrap",shouldUpdate:function(e,t){return e.platforms!==t.platforms||e.suppliers!==t.suppliers||e.cities!==t.cities}},(function(e){var t=e.getFieldValue,n=t("platforms"),a=t("suppliers"),r=t("cities");return o.createElement(h.Z.Item,{label:"商圈",name:"districts"},o.createElement(b.Wc,(0,E.Z)({showArrow:!0,namespace:"second-districts",platforms:n,suppliers:a,cities:r},u)))})),o.createElement(h.Z.Item,{label:"第三方平台账户ID",name:"customId"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{noStyle:!0,key:"contractFirstPartyInfo-wrap",shouldUpdate:function(e,t){return e.suppliers!==t.suppliers||e.platforms!==t.platforms}},(function(e){var t=e.getFieldValue,n=t("suppliers"),a=t("platforms");return o.createElement(h.Z.Item,{label:"合同甲方",name:"contractFirstPartyInfo"},o.createElement(b.rf,(0,E.Z)({showArrow:!0,isNoState:!0,suppliers:n,platforms:a},u)))})),o.createElement(h.Z.Item,{label:"姓名",name:"name"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"手机号",name:"phone"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"身份证号",name:"identityCardId"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"BOSS人员ID",name:"bossMemberId"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"风控检测状态",name:"windControl"},o.createElement(g.Z,{placeholder:"请选择",allowClear:!0},o.createElement(K,{value:!1,style:{color:"green"}},"通过"),o.createElement(K,{value:!0,style:{color:"red"}},"未通过")))];z&&(v[v.length]=o.createElement(h.Z.Item,{label:"TEAM类型",name:"codeTeamType"},o.createElement(R,(0,E.Z)({showArrow:!0,onChange:function(){return l&&l.setFieldsValue({codeTeam:void 0})}},u))),v[v.length]=o.createElement(h.Z.Item,{noStyle:!0,key:"codeTeam-wrap",shouldUpdate:function(e,t){return e.codeTeamType!==t.codeTeamType}},(function(e){var t=(0,e.getFieldValue)("codeTeamType");return o.createElement(h.Z.Item,{label:"TEAM信息",name:"codeTeam"},o.createElement(A,(0,E.Z)({showArrow:!0,namespace:"secondSearch",codeTeamType:t},u)))})));var Z={items:v,operations:i.ZP.canOperateEmployeeSearchExportExcel()?o.createElement(f.Z,{type:"primary",onClick:function(){return d(!0)}},"导出EXCEL"):null,onSearch:t,onReset:t,onHookForm:function(e){return c(e)}};return o.createElement(w.IT,{className:"affairs-flow-basic"},o.createElement(w.j6,Z),function(){if(p)return o.createElement(G,{onHideModal:function(){return d(!1)},isShowModal:p,fileType:"second"})}())},L=(n(20186),n(75385)),N=n(44654),U=(n(51838),n(48086)),W=n(30381),Q=n.n(W),X=g.Z.Option;var $=(0,u.connect)((function(e){return{teams:e.employeeManage.teams}}))((function(e){var t=e.dispatch,n=e.teams,a=e.namespace,r=e.codeTeamType,l=e.initCostTeamType,i=e.initCostTeamInfo;(0,o.useEffect)((function(){t(r&&a?{type:"employeeManage/fetchGetTeams",payload:{teamTypes:r,namespace:a}}:{type:"employeeManage/reduceGetTeams",payload:[]})}),[t,r,a]);var c=(0,j.CE)(["dispatch","teams","codeTeamType","namespace"],e),s=n[a]?n[a]:[],m=s.map((function(e){return o.createElement(X,{key:e._id,value:e._id},e.name)}));if(l===r&&D().existy(i)&&D().not.empty(i)){var p={_id:i.team_id,name:i.name};s.map((function(e){return e._id})).includes(p._id)||m.push(o.createElement(X,{disabled:!0,key:p._id,value:p._id},p.name))}return o.createElement(g.Z,c,m)})),J=g.Z.Option;var ee=(0,u.connect)((function(e){return{teamTypes:e.employeeManage.teamTypes}}))((function(e){var t=e.dispatch,n=e.teamTypes,a=e.initCostTeamType;(0,o.useEffect)((function(){t({type:"employeeManage/fetchGetTeamTypes",payload:{}})}),[t]);var r=(0,j.CE)(["dispatch","teamTypes"],e),l=O().get(n,[]),i=l.map((function(e){return o.createElement(J,{key:e,value:e},e)}));return D().existy(a)&&D().not.empty(a)&&(l.includes(a)||i.push(o.createElement(J,{disabled:!0,key:a,value:a},a))),o.createElement(g.Z,r,i)})),te=n(36623);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re={labelCol:{span:5},wrapperCol:{span:16}},le=(0,u.connect)()((function(e){var t,n,a,l,i,c=e.dispatch,m=e.selectedRowKeys,p=e.disabled,u=e.onSuccessCallback,y=e.fileType,g=h.Z.useForm(),w=(0,r.Z)(g,1)[0],b=(0,o.useState)(!1),Z=(0,r.Z)(b,2),S=Z[0],_=Z[1],I=(0,o.useState)(!1),C=(0,r.Z)(I,2),O=C[0],T=C[1],P=(0,o.useState)({}),x=(0,r.Z)(P,2),k=x[0],M=x[1],D=(0,o.useState)(void 0),j=(0,r.Z)(D,2),F=j[0],A=j[1],Y=function(){var e=(0,s.Z)(d().mark((function e(){var t,n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.validateFields();case 2:return t=e.sent,e.next=5,c({type:"employeeManage/changeTeam",payload:ae(ae({},t),{},{ids:m,fileType:y})});case 5:(n=e.sent)&&Object.keys(n).length>0&&!n.zh_message&&(_(!1),w.resetFields(),M(n),T(!0)),n&&n.zh_message&&U.ZP.error(n.zh_message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){T(!1),M({}),u&&u()};return o.createElement(o.Fragment,null,o.createElement(f.Z,{style:{marginRight:5},type:"primary",disabled:p,onClick:function(){return _(!0)}},"批量变更TEAM"),o.createElement(v.Z,{title:"变更TEAM",visible:S,onOk:Y,onCancel:function(){return _(!1)}},o.createElement("div",{className:te.Z["employee-change-team-title"]},"变更后TEAM"),o.createElement(h.Z,{form:w,className:"affairs-flow-basic"},o.createElement(h.Z.Item,(0,E.Z)({label:"变更月份"},re),Q()().format("YYYY-MM")),o.createElement(h.Z.Item,(0,E.Z)({label:"team类型",name:"type"},re),o.createElement(ee,{placeholder:"请选择",showSearch:!0,allowClear:!0,optionFilterProp:"children",onChange:function(e){return A(e)}})),o.createElement(h.Z.Item,(0,E.Z)({label:"team名称",name:"name"},re),o.createElement($,{placeholder:"请选择",codeTeamType:F,namespace:"batchChangeTeam",showSearch:!0,allowClear:!0,optionFilterProp:"children"}))),o.createElement("div",{className:te.Z["employee-change-team-note"]},"staff"===y?"变更team后即时生效，请慎重调整":"仅对本月二线身份的TEAM归属变更生效")),(t=k.success_count,n=void 0===t?0:t,a=k.fail_count,l=void 0===a?0:a,i=k.fail_names,o.createElement(v.Z,{title:"提示",visible:O,onOk:function(){return R()},onCancel:function(){return R()}},o.createElement("div",null,"已成功替换".concat(n,"个")),o.createElement("div",null,"staff"===y?"未成功替换".concat(l,"个"):"不符合变更规则共".concat(l,"个"),Array.isArray(i)&&i.length>0?o.createElement("span",null,"，包含：",i.map((function(e){return e})).join("、")):""))))})),oe=c.By.isShowCode(),ie=i.ZP.canOperateEmployeeSearchUpdateButton(),ce=i.ZP.canOperateEmployeeChangeScendTeam(),se=function(e){var t=e.onShowSizeChange,n=void 0===t?function(){}:t,a=e.onChangePage,l=void 0===a?function(){}:a,i=e.employeesSecond,c=void 0===i?{}:i,s=e.loading,m=e.getSecondList,p=(0,o.useState)([]),d=(0,r.Z)(p,2),u=d[0],f=d[1],y=c.data,h=void 0===y?[]:y,E=c._meta,g=void 0===E?{}:E,b=function(e){if(!e||Array.isArray(e)&&e.length<1)return"--";var t=e.length;return o.createElement(Z.Z,{placement:"top",title:e&&e.toString()},e[0],t>1?"等共".concat(e.length,"条"):"")},v=[{title:"姓名",dataIndex:"name",fixed:"left",width:100},{title:"手机号",dataIndex:"phone",fixed:"left",width:120},{width:100,title:"人员状态",dataIndex:"state",render:function(e){return(t=e)===V.G8O.pending?"待合作":t===V.G8O.normal||t===V.G8O.replace||t===V.G8O.pendingReview||t===V.G8O.repair?"合作中":t===V.G8O.release?"已解除":"--";var t}},{width:100,title:"个户类型",dataIndex:"individual_type",render:function(e){return e?V.EbQ.description(e):"--"}},{width:240,title:"第三方平台账户ID",dataIndex:"custom_id_list",render:function(e){return b(e)}},{width:160,title:"风控检测状态",dataIndex:"within_blacklist",render:function(e){return!0===e?o.createElement("span",{style:{color:"red"}},"未通过"):!1===e?o.createElement("span",{style:{color:"green"}},"通过"):"--"}},{title:"供应商",width:200,dataIndex:"working_supplier_names",render:function(e){return b(e)}},{title:"平台",width:100,dataIndex:"working_platform_names",render:function(e){return b(e)}},{title:"城市",width:150,dataIndex:"working_city_names",render:function(e){return b(e)}},{title:"商圈",width:150,dataIndex:"working_biz_district_names",render:function(e){return b(e)}},{title:"签约类型",width:150,dataIndex:"sign_type",render:function(e){return e?V.B1m.description(e):"--"}},{title:"合同甲方",width:200,dataIndex:"contract_belong_info",render:function(e){return e&&e.name?e.name:"--"}},{title:"操作",dataIndex:"operation",fixed:"right",width:120,render:function(e,t){return function(e,t){var n=o.createElement("a",{href:"/#/Employee/Detail?id=".concat(t._id,"&fileType=second"),target:"_blank",rel:"noopener noreferrer",style:{marginRight:10}},"查看详情"),a=ie&&t.state!==V.G8O.release?o.createElement(N.Link,{to:{pathname:"/Employee/Update",query:{id:t._id,fileType:"second"}},style:{marginRight:10}},"编辑"):"",r=t.sign_type===V.B1m.electronic&&t.state===V.G8O.normal&&t.contract_asset_url?o.createElement("a",{href:t.contract_asset_url,download:!0},"下载合同"):"";return o.createElement(o.Fragment,null,n,a,r)}(0,t)}}];oe&&v.splice(6,0,{width:100,title:"team类型",dataIndex:"cost_team_type",render:function(e){return e||"--"}},{width:100,title:"team信息",dataIndex:["cost_team_info","name"],render:function(e){return e||"--"}});var S={current:g.page||1,defaultPageSize:30,pageSize:g.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:l,onShowSizeChange:n,showTotal:function(e){return"总共".concat(e,"条")},total:g.result_count,pageSizeOptions:["10","20","30","40"]},_={selectedRowKeys:u,columnWidth:60,getCheckboxProps:function(e){return{disabled:e.state===V.P7w.departure}},onChange:function(e){return f(e)}},I=ce?o.createElement(le,{selectedRowKeys:u,disabled:u.length<1,fileType:"second",onSuccessCallback:function(){f([]),m&&m()}}):"";return o.createElement(w.IT,{title:"劳动者档案列表",titleExt:I},o.createElement(L.Z,{rowKey:function(e,t){return e._id||t},columns:v,dataSource:h,pagination:S,rowSelection:_,bordered:!0,loading:s,scroll:{y:500,x:2510}}))};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=(0,u.connect)((function(e){return{employeesSecond:e.employeeManage.employeesSecond}}))((function(e){var t=e.dispatch,n=e.history,a=e.employeesSecond,l=void 0===a?{}:a,i=(0,o.useState)(!0),c=(0,r.Z)(i,2),m=c[0],p=c[1],u=(0,o.useRef)({page:1,limit:30,fileType:"second"});(0,o.useEffect)((function(){return t({type:"employeeManage/fetchEmployees",payload:pe(pe({},u.current),{},{onSuccessCallback:function(){return p(!1)}})}),function(){t({type:"employeeManage/resetEmployees",payload:{fileType:"second"}})}}),[t]);var f=function(){var e=(0,s.Z)(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,t({type:"employeeManage/resetEmployees",payload:{fileType:"second"}});case 3:t({type:"employeeManage/fetchEmployees",payload:pe(pe({},u.current),{},{onSuccessCallback:function(){return p(!1)}})});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(e,t){u.current=pe(pe({},u.current),{},{page:e,limit:t}),f()},h={onSearch:function(e){u.current=pe(pe(pe({},u.current),e),{},{page:1,limit:30,state:e.state?String(e.state).split("&"):void 0}),f()}},E={onChangePage:y,onShowSizeChange:y,dispatch:t,getSecondList:f,loading:m,employeesSecond:l,history:n};return o.createElement(o.Fragment,null,o.createElement(B,h),o.createElement(se,E))})),ue=(n(21316),n(75443)),fe=(n(54071),n(14072));function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ee=g.Z.Option,ge=fe.Z.RangePicker,we=c.By.isShowCode(),be=function(e){var t=e.onSearch,n=e.tabKey,a=e.dispatch,l=(0,o.useState)({}),c=(0,r.Z)(l,2),m=c[0],p=c[1];(0,o.useEffect)((function(){m&&m.resetFields&&m.setFieldsValue({name:void 0,phone:void 0,identityCardId:void 0,state:void 0,searchState:void 0,signType:void 0,applicationChannelId:void 0,applicationCompanyName:void 0,contractFirstPartyInfo:void 0,contractState:void 0,department:void 0,post:void 0,boardDate:null,bossMemberId:void 0,windControl:void 0,codeTeamType:void 0,codeTeam:void 0,regularDate:null,currentEndAtDate:null,departureDate:null})}),[n]);var u=function(){var e=(0,s.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=5;break}return e.next=3,m.validateFields();case 3:t=e.sent,a({type:"employeeManage/exportEmployees",payload:he({tabKey:n,fileType:"staff"},t)});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v={placeholder:"请选择",allowClear:!0,mode:"multiple",optionFilterProp:"children",showArrow:!0},Z=o.createElement(h.Z.Item,{label:"TEAM类型",name:"codeTeamType"},o.createElement(R,(0,E.Z)({onChange:function(){return m&&m.setFieldsValue({codeTeam:void 0})}},v))),S=o.createElement(h.Z.Item,{noStyle:!0,key:"codeTeam-wrap",shouldUpdate:function(e,t){return e.codeTeamType!==t.codeTeamType}},(function(e){var t=(0,e.getFieldValue)("codeTeamType");return o.createElement(h.Z.Item,{label:"TEAM信息",name:"codeTeam"},o.createElement(A,(0,E.Z)({namespace:"staffSearch",codeTeamType:t},v)))})),_=[o.createElement(h.Z.Item,{label:"姓名",name:"name"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"手机号",name:"phone"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"身份证号",name:"identityCardId"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"员工状态",name:"searchState"},o.createElement(g.Z,v,o.createElement(Ee,{value:V.P7w.inService},V.P7w.description(V.P7w.inService)),o.createElement(Ee,{value:V.P7w.departure},V.P7w.description(V.P7w.departure)),o.createElement(Ee,{value:V.P7w.willResign},V.P7w.description(V.P7w.willResign)))),o.createElement(h.Z.Item,{label:"签约类型",name:"signType"},o.createElement(g.Z,(0,E.Z)({onChange:function(){return m&&m.setFieldsValue({contractFirstPartyInfo:void 0})}},v),o.createElement(Ee,{value:V.B1m.electronic},V.B1m.description(V.B1m.electronic)),o.createElement(Ee,{value:V.B1m.paper},V.B1m.description(V.B1m.paper)))),o.createElement(h.Z.Item,{label:"应聘途径",name:"applicationChannelId"},o.createElement(g.Z,{placeholder:"请选择",allowClear:!0,onChange:function(){return m&&m.setFieldsValue({applicationCompanyName:void 0})}},o.createElement(Ee,{value:V.n_7.company},V.n_7.description(V.n_7.company)),o.createElement(Ee,{value:V.n_7.recommend},V.n_7.description(V.n_7.recommend)),o.createElement(Ee,{value:V.n_7.apply},V.n_7.description(V.n_7.apply)),o.createElement(Ee,{value:V.n_7.transfer},V.n_7.description(V.n_7.transfer)),o.createElement(Ee,{value:V.n_7.hr},V.n_7.description(V.n_7.hr)),o.createElement(Ee,{value:V.n_7.other},V.n_7.description(V.n_7.other)))),o.createElement(h.Z.Item,{noStyle:!0,key:"applicationCompanyName-wrap",shouldUpdate:function(e,t){return e.applicationChannelId!==t.applicationChannelId}},(function(e){var t=(0,e.getFieldValue)("applicationChannelId");return o.createElement(h.Z.Item,{label:"公司名称",name:"applicationCompanyName"},o.createElement(y.Z,{disabled:t!==V.n_7.company,allowClear:!0,placeholder:"请输入"}))})),o.createElement(h.Z.Item,{label:"合同甲方",name:"contractFirstPartyInfo"},o.createElement(b.rf,(0,E.Z)({isNoState:!0,type:V.rPv.staffProfile},v))),o.createElement(h.Z.Item,{label:"合同状态",name:"contractState"},o.createElement(g.Z,{allowClear:!0,placeholder:"请选择"},o.createElement(Ee,{value:V.wE_.uploaded},V.wE_.description(V.wE_.uploaded)),o.createElement(Ee,{value:V.wE_.notUpload},V.wE_.description(V.wE_.notUpload)))),o.createElement(h.Z.Item,{label:"部门",name:"department"},o.createElement(b.MG,{allowClear:!0,isAuthorized:!0,placeholder:"请选择",onChange:function(){return m&&m.setFieldsValue({post:void 0})},namespace:"staffSearch",filterTreeNode:function(e,t){return!!(e.trim()&&t&&t.props&&-1!==t.props.title.trim().indexOf(e.trim()))},isAuth:i.ZP.canOperateEmployeeAbolishDepartment()})),o.createElement(h.Z.Item,{noStyle:!0,key:"post-wrap",shouldUpdate:function(e,t){return e.department!==t.department}},(function(e){var t=(0,e.getFieldValue)("department");return o.createElement(h.Z.Item,{label:"岗位",name:"post"},o.createElement(b.b0,{allowClear:!0,placeholder:"请选择",departmentId:t,namespace:"staffSearch",state:V.i7V.enable}))})),o.createElement(h.Z.Item,{label:"入职日期",name:"boardDate"},o.createElement(ge,{style:{width:"100%"},format:"YYYY-MM-DD"})),o.createElement(h.Z.Item,{label:"BOSS人员ID",name:"bossMemberId"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"风控检测状态",name:"windControl"},o.createElement(g.Z,{placeholder:"请选择",allowClear:!0},o.createElement(Ee,{value:!1,style:{color:"green"}},"通过"),o.createElement(Ee,{value:!0,style:{color:"red"}},"未通过")))];we&&(_[_.length]=Z,_[_.length]=S);var I=[o.createElement(h.Z.Item,{label:"姓名",name:"name"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"手机号",name:"phone"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),o.createElement(h.Z.Item,{label:"身份证号",name:"identityCardId"},o.createElement(y.Z,{placeholder:"请输入",allowClear:!0})),n===V.yqw.probation?o.createElement(h.Z.Item,{label:"预计转正日期",name:"regularDate"},o.createElement(ge,{style:{width:"100%"},format:"YYYY-MM-DD"})):n===V.yqw.renew?o.createElement(h.Z.Item,{label:"合同到期日期",name:"currentEndAtDate"},o.createElement(ge,{style:{width:"100%"},format:"YYYY-MM-DD"})):n===V.yqw.resign?o.createElement(h.Z.Item,{label:"离职日期",name:"departureDate"},o.createElement(ge,{style:{width:"100%"},format:"YYYY-MM-DD"})):void 0,Z,S,o.createElement(h.Z.Item,{label:"部门",name:"department"},o.createElement(b.MG,{allowClear:!0,isAuthorized:!0,placeholder:"请选择",onChange:function(){return m&&m.setFieldsValue({post:void 0})},namespace:"staffSearch",filterTreeNode:function(e,t){return!!(e.trim()&&t&&t.props&&-1!==t.props.title.trim().indexOf(e.trim()))},isAuth:i.ZP.canOperateEmployeeAbolishDepartment()})),o.createElement(h.Z.Item,{noStyle:!0,key:"post-wrap"},(function(e){var t=(0,e.getFieldValue)("department");return o.createElement(h.Z.Item,{label:"岗位",name:"post"},o.createElement(b.b0,{allowClear:!0,placeholder:"请选择",departmentId:t,namespace:"staffSearch",state:V.i7V.enable}))}))],C=i.ZP.canOperateEmployeeSearchExportExcel()?o.createElement(ue.Z,{title:"创建下载任务？",onConfirm:function(){return u()},okText:"确认",cancelText:"取消"},o.createElement(f.Z,{type:"primary"},"导出EXCEL")):null,O={items:n===V.yqw.all?_:I,operations:C,onSearch:t,onReset:t,onHookForm:function(e){return p(e)}};return o.createElement(w.IT,{className:"affairs-flow-basic"},o.createElement(w.j6,O))},ve=g.Z.Option;function Ze(e){var t=e.dispatch,n=e.employeesSelectInfo;(0,o.useEffect)((function(){return t({type:"business/fetchBusinessEmployeesSelect"}),function(){t({type:"business/resetBusinessEmployeesSelect"})}}),[t]);var a=O().get(n,"data",[]).map((function(e){return o.createElement(ve,{value:e.account_id,key:e._id},e.name)}));return o.createElement(g.Z,(0,j.CE)(["dispatch","children","employeesSelectInfo"],e),a)}Ze.propTypes={employeesSelectInfo:P().object},Ze.defaultProps={employeesSelectInfo:{}};var Se=(0,u.connect)((function(e){return{employeesSelectInfo:e.business.employeesSelectInfo}}))(Ze),_e=n(90066);function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe={labelCol:{span:6},wrapperCol:{span:12}},Te=(0,u.connect)()((function(e){var t=e.visible,n=e.onCancel,a=e.dispatch,l=e.staffDetail,i=e.getStaffList,m=h.Z.useForm(),p=(0,r.Z)(m,1)[0],u=function(){i&&i(),n&&n()},f=function(){var e=(0,s.Z)(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.validateFields();case 2:t=e.sent,a({type:"employeeManage/employeeOperateDeparture",payload:Ce(Ce({},t),{},{departureDate:t.departureDate.format("YYYYMMDD"),staffName:c.P6.dotOptimal(l,"name"),staffId:c.P6.dotOptimal(l,"_id"),onSuccessCallback:u})});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=[o.createElement(h.Z.Item,(0,E.Z)({label:"离职日期",name:"departureDate",rules:[{required:!0,message:"请选择"}]},Oe),o.createElement(fe.Z,{disabledDate:function(e){var t=l.entry_date;return e<Q()(t,"YYYYMMDD")||e>Q()()}})),o.createElement(h.Z.Item,(0,E.Z)({label:"工作接收人",name:"jobRecipient",rules:[{required:!0,message:"请选择"}]},Oe),o.createElement(Se,{allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择"}))],g={departureDate:Q()()},b=o.createElement("span",null,o.createElement("span",{className:_e.Z["app-comp-employee-manage-menu-common-line-operation-termination"]},"办理离职"),o.createElement("span",null,"员工姓名：",c.P6.dotOptimal(l,"name")));return o.createElement(v.Z,{title:b,visible:t,onOk:f,onCancel:n,destroyOnClose:!0},o.createElement(I.Z,{className:_e.Z["alert-info"],message:"可选择员工办理离职，办理离职后所选员工将进入待离职状态",type:"info",showIcon:!0,closable:!0}),o.createElement(h.Z,{form:p,initialValues:g,className:"affairs-flow-basic"},o.createElement(w.Fp,{items:y,cols:1})))})),Pe=c.By.isShowCode(),xe=i.ZP.canOperateEmployeeSearchUpdateButton(),ke=i.ZP.canOperateEmployeeChangeScendTeam(),Me=i.ZP.canOperateEmployeeResignVerifyForceButton(),De=i.ZP.canOperateEmployeeResignButton(),je=function(e){var t=e.onShowSizeChange,n=void 0===t?function(){}:t,a=e.onChangePage,l=void 0===a?function(){}:a,s=e.staffList,m=void 0===s?{}:s,p=e.loading,d=e.getStaffList,u=e.tabKey,y=(0,o.useState)([]),h=(0,r.Z)(y,2),E=h[0],g=h[1],b=(0,o.useState)(!1),v=(0,r.Z)(b,2),Z=v[0],S=v[1],_=(0,o.useState)({}),I=(0,r.Z)(_,2),C=I[0],O=I[1],T=c.P6.dotOptimal(m,u,{}),P=T.data,x=void 0===P?[]:P,k=T._meta,M=void 0===k?{}:k,D=function(e,t){var n=o.createElement("a",{href:"/#/Employee/Detail?id=".concat(t._id,"&fileType=staff"),target:"_blank",rel:"noopener noreferrer",style:{marginRight:10}},"查看详情"),a=xe&&t.state!==V.G8O.release?o.createElement(N.Link,{to:{pathname:"/Employee/Update",query:{id:t._id,fileType:"staff"}},style:{marginRight:10}},"编辑"):"",r=Me&&t.state!==V.G8O.release&&t.state!==V.P7w.willResign?o.createElement("a",{onClick:function(){return function(e){O(e),S(!0)}(t)}},"办理离职"):"",l=De&&t.state===V.P7w.willResign?o.createElement("a",{href:"/#/Employee/Resign?id=".concat(t._id,"&fileType=staff"),target:"_blank",rel:"noopener noreferrer"},"确认离职"):"";return o.createElement(o.Fragment,null,n,a,r,l)},j=function(e){return o.createElement("a",{href:"/#/Employee/Detail?id=".concat(e,"&fileType=staff"),target:"_blank",rel:"noopener noreferrer",style:{marginRight:10}},"查看详情")},F=function(){var e=[];return u===V.yqw.all&&(e=function(){var e=[{title:"姓名",dataIndex:"name",fixed:"left",width:100},{title:"手机号",dataIndex:"phone",fixed:"left",width:120},{width:150,title:"部门",dataIndex:"department_info_list",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!Array.isArray(e)||e.length<1?"--":e.reduce((function(e,t,n){var a=i.ZP.canOperateEmployeeAbolishDepartment()&&t.state===V.f$m.disable?V.f$m.description(t.state):"";return 0===n?a?"".concat(t.name,"(").concat(a,")"):"".concat(t.name):a?"".concat(e,"，").concat(t.name,"(").concat(a,")"):"".concat(e,"，").concat(t.name)}),"")}},{width:150,title:"岗位",dataIndex:"major_job_info",render:function(e){return c.P6.dotOptimal(e,"name","--")}},{width:100,title:"部门编号",dataIndex:"major_department_info",render:function(e){return c.P6.dotOptimal(e,"code","--")}},{width:160,title:"风控检测状态",dataIndex:"within_blacklist",render:function(e){return!0===e?o.createElement("span",{style:{color:"red"}},"未通过"):!1===e?o.createElement("span",{style:{color:"green"}},"通过"):"--"}},{width:150,title:"员工标签",dataIndex:"work_label",render:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!e||!Array.isArray(e)||e.length<=0?"--":e.map((function(e){return V.ap1.description(e)})).join("、")}},{width:150,title:"签约类型",dataIndex:"sign_type",render:function(e){return e?V.B1m.description(e):"--"}},{width:150,title:"员工状态",dataIndex:"state",render:function(e){return e?V.P7w.description(e):"--"}},{width:150,title:"合同状态",dataIndex:"contract_state",render:function(e){return e?V.wE_.description(e):"--"}},{title:"合同甲方",dataIndex:"contract_belong_info",render:function(e){return e&&e.name?e.name:"--"}},{width:200,title:"应聘途径",dataIndex:"application_channel_id",render:function(e){return e?V.n_7.description(e):"--"}},{title:"操作",dataIndex:"operation",fixed:"right",width:120,render:function(e,t){return D(0,t)}}];return Pe&&e.splice(6,0,{width:100,title:"team类型",dataIndex:"cost_team_type",render:function(e){return e||"--"}},{width:100,title:"team信息",dataIndex:["cost_team_info","name"],render:function(e){return e||"--"}}),e}()),u===V.yqw.probation&&(e=[{title:"姓名",dataIndex:"name",fixed:"left"},{title:"手机号",dataIndex:"phone",fixed:"left"},{title:"部门",dataIndex:"department_info_list",render:function(e){return e.reduce((function(e,t,n){var a=i.ZP.canOperateEmployeeAbolishDepartment()&&t.state===V.f$m.disable?V.f$m.description(t.state):"";return 0===n?a?"".concat(t.name,"(").concat(a,")"):"".concat(t.name):a?"".concat(e,"，").concat(t.name,"(").concat(a,")"):"".concat(e,"，").concat(t.name)}),"")}},{title:"部门编号",dataIndex:"major_department_info",render:function(e){return c.P6.dotOptimal(e,"code","--")}},{title:"岗位",dataIndex:"major_job_info",key:"post_name",render:function(e){return c.P6.dotOptimal(e,"name","--")}},{title:"职级",dataIndex:"major_job_info",key:"post_rank",render:function(e){return c.P6.dotOptimal(e,"rank","--")}},{title:"试用期到期情况",dataIndex:"regular_left_days",render:function(e){return e||0===e?0===e?"今天到期":e>0?"剩余".concat(e,"天"):e<0?"已过期".concat(Math.abs(e),"天"):void 0:"--"}},{title:"入职日期",dataIndex:"entry_date",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"预计转正日期",dataIndex:"regular_date",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"操作",dataIndex:"_id",render:function(e){return j(e)}}]),u===V.yqw.renew&&(e=[{title:"姓名",dataIndex:"name",fixed:"left"},{title:"手机号",dataIndex:"phone",fixed:"left"},{title:"所属部门",dataIndex:"department_info_list",render:function(e){return e.reduce((function(e,t,n){var a=i.ZP.canOperateEmployeeAbolishDepartment()&&t.state===V.f$m.disable?V.f$m.description(t.state):"";return 0===n?a?"".concat(t.name,"(").concat(a,")"):"".concat(t.name):a?"".concat(e,"，").concat(t.name,"(").concat(a,")"):"".concat(e,"，").concat(t.name)}),"")}},{title:"岗位",dataIndex:"major_job_info",key:"post",render:function(e){return c.P6.dotOptimal(e,"name","--")}},{title:"职级",dataIndex:"major_job_info",key:"rank",render:function(e){return c.P6.dotOptimal(e,"rank","--")}},{title:"部门编号",dataIndex:"major_department_info",render:function(e){return c.P6.dotOptimal(e,"code","--")}},{title:"当前合同到期情况",dataIndex:"current_end_left_days",render:function(e){return e||0===e?0===e?"今天到期":e>0?"剩余".concat(e,"天"):e<0?"已过期".concat(Math.abs(e),"天"):void 0:"--"}},{title:"入职日期",dataIndex:"entry_date",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"当前合同生效日期",dataIndex:"current_start_at",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"当前合同结束日期",dataIndex:"current_end_at",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"操作",dataIndex:"_id",render:function(e){return j(e)}}]),u===V.yqw.resign&&(e=[{title:"姓名",dataIndex:"name",fixed:"left"},{title:"手机号",dataIndex:"phone",fixed:"left"},{title:"所属部门",dataIndex:"department_info_list",render:function(e){return e.reduce((function(e,t,n){var a=i.ZP.canOperateEmployeeAbolishDepartment()&&t.state===V.f$m.disable?V.f$m.description(t.state):"";return 0===n?a?"".concat(t.name,"(").concat(a,")"):"".concat(t.name):a?"".concat(e,"，").concat(t.name,"(").concat(a,")"):"".concat(e,"，").concat(t.name)}),"")}},{title:"岗位",dataIndex:"major_job_info",key:"post_name",render:function(e){return c.P6.dotOptimal(e,"name","--")}},{title:"职级",dataIndex:"major_job_info",key:"post_rank",render:function(e){return c.P6.dotOptimal(e,"rank","--")}},{title:"部门编号",dataIndex:"major_department_info",render:function(e){return c.P6.dotOptimal(e,"code","--")}},{title:"入职日期",dataIndex:"entry_date",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"离职日期",dataIndex:"departure_date",render:function(e){return e?Q()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"操作",dataIndex:"_id",render:function(e){return j(e)}}]),e},A={current:M.page||1,defaultPageSize:30,pageSize:M.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:l,onShowSizeChange:n,showTotal:function(e){return"总共".concat(e,"条")},total:M.result_count,pageSizeOptions:["10","20","30","40"]},Y=u===V.yqw.all?{selectedRowKeys:E,columnWidth:60,getCheckboxProps:function(e){return{disabled:e.state===V.P7w.departure}},onChange:function(e){return g(e)}}:null,R=1940;Pe&&(R=2140),u!==V.yqw.all&&(R=!1);var q=u===V.yqw.all?o.createElement(o.Fragment,null,ke?o.createElement(le,{selectedRowKeys:E,disabled:E.length<1,fileType:"staff",onSuccessCallback:function(){g([]),d&&d()}}):"",o.createElement(f.Z,{type:"primary",style:{marginLeft:10},href:"/#/Employee/Create?fileType=staff"},"新增员工档案")):"",H="员工档案列表";return u===V.yqw.probation&&(H="以下列表显示的员工数据范围为：人员档案页面中未到「预计转正日期」的员工"),u===V.yqw.renew&&(H="以下列表显示的员工数据范围为：人员档案页面中合同临近到期的在职和待离职员工"),u===V.yqw.resign&&(H=""),o.createElement(w.IT,{title:H,titleExt:q},o.createElement(L.Z,{rowKey:function(e,t){return e._id||t},columns:F(),dataSource:x,pagination:A,rowSelection:Y,bordered:!0,loading:p,scroll:{y:500,x:R}}),function(){if(Z)return o.createElement(Te,{visible:Z,onCancel:function(){return S(!1)},staffDetail:C,getStaffList:d})}())};function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye=l.Z.TabPane,Re=(0,u.connect)((function(e){return{staffList:e.employeeManage.staffList}}))((function(e){var t=e.dispatch,n=e.staffList,a=void 0===n?{}:n,i=(0,o.useState)(!0),c=(0,r.Z)(i,2),m=c[0],p=c[1],u=(0,o.useState)(V.yqw.all),f=(0,r.Z)(u,2),y=f[0],h=f[1],E=(0,o.useRef)({page:1,limit:30,fileType:"staff",searchState:[V.P7w.inService,V.P7w.departure,V.P7w.willResign]});(0,o.useEffect)((function(){return t({type:"employeeManage/getStaffList",payload:Ae(Ae({},E.current),{},{tabKey:y,onSuccessCallback:function(){return p(!1)}})}),function(){t({type:"employeeManage/resetStafList",payload:{fileType:"staff"}})}}),[t]);var g=function(){var e=(0,s.Z)(d().mark((function e(n){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(!0),t({type:"employeeManage/getStaffList",payload:Ae(Ae({},E.current),{},{tabKey:n||y,onSuccessCallback:function(){return p(!1)}})});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e,t){E.current=Ae(Ae({},E.current),{},{page:e,limit:t}),g()},b={onSearch:function(e){E.current=Ae(Ae(Ae({},E.current),e),{},{page:1,limit:30,state:e.state?String(e.state).split("&"):void 0}),g()},tabKey:y,dispatch:t},v={onChangePage:w,onShowSizeChange:w,dispatch:t,getStaffList:g,loading:m,staffList:a,tabKey:y};return o.createElement(o.Fragment,null,o.createElement(l.Z,{activeKey:y,onChange:function(e){var t=[V.P7w.inService,V.P7w.departure,V.P7w.willResign];e===V.yqw.probation&&(t=[V.P7w.inService]),e===V.yqw.renew&&(t=[V.P7w.inService,V.P7w.willResign]),e===V.yqw.resign&&(t=[V.P7w.departure]),E.current={page:1,limit:30,fileType:"staff",searchState:t},h(e),g(e)}},o.createElement(Ye,{tab:"全部",key:V.yqw.all}),o.createElement(Ye,{tab:"试用期",key:V.yqw.probation}),o.createElement(Ye,{tab:"续签",key:V.yqw.renew}),o.createElement(Ye,{tab:"离职",key:V.yqw.resign})),o.createElement(o.Fragment,null,o.createElement(be,b),o.createElement(je,v)))})),Ve=l.Z.TabPane,qe=i.ZP.canOperateEmployeeFileTypeSecond(),He=i.ZP.canOperateEmployeeFileTypeStaff(),Ge=function(e){var t,n=e.location,i=void 0===n?{}:n;He&&(t="staff"),qe&&(t="second");var s=(0,o.useState)(c.P6.dotOptimal(i,"query.fileType",t)),m=(0,r.Z)(s,2),p=m[0],d=m[1];return qe||He?o.createElement(l.Z,{activeKey:p,onChange:function(e){d(e)}},qe&&o.createElement(Ve,{tab:"劳动者档案",key:"second"},o.createElement(de,null)),He&&o.createElement(Ve,{tab:"员工",key:"staff"},o.createElement(Re,null))):o.createElement(a.Z,null)}},90066:function(e,t){t.Z={"employee-popconfirm-radio-style":"Tun4pziqSIWd4dGXFZOA","app-comp-employee-compareType":"urit6NdXIxqmHXD9HQKm","alert-info":"rg3Eb7GR4t052hKfsruI","app-comp-employee-manage-menu-common-line-operation-termination":"_6dIj51CDEoIcPqdfyLC"}},36623:function(e,t){t.Z={"app-comp-employee-manage-menu-common-line-operation-detail":"zk6pqLd3BE2tsElHzwoA","app-comp-employee-manage_menu-common-line-operation-update":"iFFfkcu8AA4jSyPyK55s","app-comp-employee-manage-menu-common-line-operation-termination-text":"AD_sGiPI4XG4c84jyhlH","app-comp-employee-manage-menu-common-line-operation-termination":"rmBGaOxQrUN0JsWbuysP","app-comp-employee-manage-menu-second-line-coding":"QORTgn8bP2mzHTTCj5uT",boss_employee_manage_menu_second_line_coding:"fmdHCg3nt_yFhyReATwm",boss_employee_manage_menu_staff_search:"pNL0mCHqFJ1KAgc4iMfA",commonLineOperateBtn:"KaRRqPytD8KlOVGUHYWz",firstSearchRecruitmentChannelSelector:"foW4NkgetEjEjmddMTZw",secondSearchRecruitmentChannelSelector:"Wp65YphsHJqdXxYdyF7U","alert-info":"mKWdARnvGfgPZFt3Z1_I","resign-title":"ImbHwb3jIkZ27tCgLlQY","resign-titleExt":"tRLfGXyDMfArvwy1WQf8","resign-jobRecipient":"DcUZWgaEK0j3AKw2go9_","resign-innerbox":"HTKZ8Kh83ORv9rSrWDgL","employee-change-team-title":"Dk7hPw0U69xIhW_uERNz","employee-change-team-note":"lKV4lVG5R3raInVqUI0G"}}}]);