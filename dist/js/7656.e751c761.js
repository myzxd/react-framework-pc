"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7656],{7656:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var r=n(4942),a=n(29439),i=n(55609),l=n(67294),o=n(96036),c=n(80385),u=(n(21316),n(75443)),s=(n(52560),n(71577)),d=(n(35668),n(86585)),p=(n(9070),n(20924)),f=n(15861),w=(n(54071),n(14072)),h=(n(29093),n(16317)),m=n(87757),y=n.n(m),v=n(45430);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=h.Z.Option,D=w.Z.RangePicker,_=function(e){var t=e.onSearch,n=e.onReset,r=e.dispatch,i=e.tabKey,w=e.walletDetailsInvoice,m=void 0===w?[]:w,g=e.searchVal,_=(0,l.useState)({}),I=(0,a.Z)(_,2),E=I[0],j=I[1];(0,l.useEffect)((function(){E&&E.resetFields&&E.resetFields()}),[i,E]);var x=function(){var e=(0,f.Z)(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:t=e.sent,r({type:"wallet/onExportWalletDetails",payload:b(b(b({},g),t),{},{type:i})});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=[l.createElement(d.Z.Item,{label:"姓名",name:"name",initialValue:void 0},l.createElement(p.Z,{placeholder:"请输入",allowClear:!0})),l.createElement(d.Z.Item,{label:"发票抬头",name:"invoice",initialValue:void 0},l.createElement(h.Z,{placeholder:"请选择",allowClear:!0,showSearch:!0},m.map((function(e){return l.createElement(O,{value:e,key:e},e)})))),l.createElement(d.Z.Item,{label:"交易完成时间",name:"time",initialValue:void 0},l.createElement(D,null))];Number(i)===c._iH.withdraw&&S.splice(1,1);var P={items:S,onSearch:t,onReset:n,onHookForm:function(e){return j(e)},operations:v.ZP.canOperateWalletDetailExport()?l.createElement(u.Z,{title:"创建下载任务？",onConfirm:x,okText:"确认",cancelText:"取消"},l.createElement(s.Z,{type:"primary"},"导出报表")):""};return l.createElement(o.IT,null,l.createElement(o.j6,P))},I=(n(20186),n(75385)),E=n(30381),j=n.n(E),x=function(e){var t=e.walletDetails,n=void 0===t?{}:t,r=e.onShowSizeChange,a=void 0===r?function(){}:r,i=e.onChangePage,u=void 0===i?function(){}:i,s=n.data,d=void 0===s?[]:s,p=n._meta,f=void 0===p?{}:p,w=[{title:"姓名",dataIndex:"payee_name",width:100,fixed:"left"},{title:"Q钱包账户",dataIndex:"wallet_account_id",width:200,fixed:"left",render:function(e){return e||"--"}},{title:"BOSS登陆账号",dataIndex:"payee_phone",width:150,fixed:"left",render:function(e){return e||"--"}},{title:"绑定微信",dataIndex:"nick_name",width:150,render:function(e){return e||"--"}},{title:"交易金额",dataIndex:"total_money",width:100,render:function(e){return e?c.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"交易类型",dataIndex:"type",width:100,render:function(e){return e?c._iH.description(e):"--"}},{title:"交易状态",dataIndex:"state",width:100,render:function(e){return e?c.EKV.description(e):"--"}},{title:"发起交易时间",dataIndex:"created_at",width:150,render:function(e){return e?j()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"交易完成时间",dataIndex:"done_at",width:150,render:function(e){return e?j()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"发票抬头",dataIndex:"invoice_title",width:150,render:function(e){return e||"--"}},{title:"备注",dataIndex:"note",width:150,render:function(e){return e||"--"}},{title:"操作",dataIndex:"_id",width:80,render:function(){return"--"}}],h={current:f.page||1,defaultPageSize:30,pageSize:f.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:u,onShowSizeChange:a,showTotal:function(e){return"总共".concat(e,"条")},total:f.result_count,pageSizeOptions:["10","20","30","40"]};return l.createElement(o.IT,null,l.createElement(I.Z,{rowKey:function(e,t){return e._id||t},columns:w,dataSource:d,pagination:h,bordered:!0,scroll:{x:1500,y:500}}))};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=(0,i.connect)((function(e){var t=e.wallet;return{walletDetails:t.walletDetails,walletDetailsInvoice:t.walletDetailsInvoice}}))((function(e){var t=e.dispatch,n=e.walletDetails,r=void 0===n?{}:n,i=e.walletDetailsInvoice,u=void 0===i?[]:i,s=(0,l.useState)(c._iH.all),d=(0,a.Z)(s,2),p=d[0],f=d[1],w=(0,l.useRef)({page:1,limit:30,type:[c._iH.recharge,c._iH.withdraw],isGetInvoice:!0});(0,l.useEffect)((function(){return t({type:"wallet/getWalletDetails",payload:P({},w.current)}),t({type:"wallet/getWalletDetailsInvoice",payload:{}}),function(){t({type:"wallet/resetWalletDetails"}),t({type:"wallet/resetWalletDetailsInvoice"})}}),[t]);var h=function(){t({type:"wallet/getWalletDetails",payload:P(P({},w.current),{},{isGetInvoice:!1})})},m=function(e,t){w.current=P(P({},w.current),{},{page:e,limit:t}),h()},y={onSearch:function(e){w.current=P(P({},w.current),e),h()},onReset:function(e){w.current=P(P(P({},w.current),e),{},{page:1,limit:30}),h()},dispatch:t,tabKey:p,walletDetailsInvoice:u,searchVal:w.current},v={onChangePage:m,onShowSizeChange:m,walletDetails:r},g=function(){return l.createElement(l.Fragment,null,l.createElement(_,y),l.createElement(x,v))},b=[{title:c._iH.description(c._iH.all),content:g(),key:c._iH.all},{title:c._iH.description(c._iH.recharge),content:g(),key:c._iH.recharge},{title:c._iH.description(c._iH.withdraw),content:g(),key:c._iH.withdraw}];return l.createElement(o.DF,{items:b,onChange:function(e){w.current={isGetInvoice:!1,type:e,page:1,limit:30},f(e),h()}})}))}}]);