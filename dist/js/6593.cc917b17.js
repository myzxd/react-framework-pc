"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[6593],{22112:function(e,t,n){var r=n(87462),a=n(93433),i=n(44925),o=(n(29093),n(16317)),c=n(96486),l=n.n(c),u=n(67294),s=n(55609),d=["dispatch","value","onChange","enumeratedValue"],p=o.Z.Option;t.Z=(0,s.connect)((function(e){return{enumeratedValue:e.codeRecord.enumeratedValue}}))((function(e){var t=e.dispatch,n=e.value,c=e.onChange,s=e.enumeratedValue,m=void 0===s?{}:s,f=(0,i.Z)(e,d);(0,u.useEffect)((function(){return t({type:"codeRecord/getEnumeratedValue",payload:{}}),function(){t({type:"codeRecord/resetEnumerateValue",payload:{}})}}),[t]);var y=m.code_invoice_titles||[],v=m.team_invoice_titles||[],h=l().uniqWith([].concat((0,a.Z)(y),(0,a.Z)(v)),(function(e,t){return e.name===t.name}));return u.createElement(o.Z,(0,r.Z)({value:n,onChange:c,dropdownMatchSelectWidth:!1},f),h.map((function(e,t){return u.createElement(p,{value:e.name,key:t},e.name)})))}))},42167:function(e,t,n){var r=n(87462),a=n(44925),i=(n(29093),n(16317)),o=n(96486),c=n.n(o),l=n(55609),u=n(67294),s=["dispatch","mainBodyList","value","onChange"],d=i.Z.Option;t.Z=(0,l.connect)((function(e){return{mainBodyList:e.costAmortization.mainBodyList}}))((function(e){var t=e.dispatch,n=e.mainBodyList,o=void 0===n?{}:n,l=e.value,p=e.onChange,m=(0,a.Z)(e,s);(0,u.useEffect)((function(){return t({type:"costAmortization/getMainBodyList",payload:{}}),function(){t({type:"costAmortization/resetMainBodyList"})}}),[t]);var f=o.data,y=void 0===f?[]:f,v=c().uniqWith(y,(function(e,t){return e.name===t.name}));return u.createElement(i.Z,(0,r.Z)({value:l,onChange:p,dropdownMatchSelectWidth:!1},m),v.map((function(e){return u.createElement(d,{value:e._id,key:e._id},e.name)})))}))},35578:function(e,t,n){var r=n(87462),a=n(44925),i=(n(29093),n(16317)),o=n(55609),c=n(67294),l=["dispatch","platformList","value","onChange"],u=i.Z.Option;t.Z=(0,o.connect)((function(e){return{platformList:e.costAmortization.platformList}}))((function(e){var t=e.dispatch,n=e.platformList,o=void 0===n?{}:n,s=e.value,d=e.onChange,p=(0,a.Z)(e,l);(0,c.useEffect)((function(){return t({type:"costAmortization/getPlatformList",payload:{}}),function(){t({type:"costAmortization/resetPlatformList"})}}),[t]);var m=o.data,f=void 0===m?[]:m;return c.createElement(i.Z,(0,r.Z)({value:s,onChange:d,dropdownMatchSelectWidth:!1},p),f.map((function(e){return c.createElement(u,{value:e._id,key:e._id},e.name)})))}))},63781:function(e,t,n){var r=n(87462),a=n(44925),i=(n(29093),n(16317)),o=n(55609),c=n(67294),l=["dispatch","projectList","value","onChange"],u=i.Z.Option;t.Z=(0,o.connect)((function(e){return{projectList:e.costAmortization.projectList}}))((function(e){var t=e.dispatch,n=e.projectList,o=void 0===n?{}:n,s=e.value,d=e.onChange,p=(0,a.Z)(e,l);(0,c.useEffect)((function(){t({type:"costAmortization/getProjectList",payload:{}})}),[t]);var m=o.data,f=void 0===m?[]:m;return c.createElement(i.Z,(0,r.Z)({value:s,onChange:d,dropdownMatchSelectWidth:!1},p),f.map((function(e){return c.createElement(u,{value:e._id,key:e._id},e.name)})))}))},38225:function(e,t,n){var r=n(87462),a=n(44925),i=(n(29093),n(16317)),o=n(55609),c=n(67294),l=["dispatch","scenesList","value","onChange"],u=i.Z.Option;t.Z=(0,o.connect)((function(e){return{scenesList:e.costAmortization.scenesList}}))((function(e){var t=e.dispatch,n=e.scenesList,o=void 0===n?{}:n,s=e.value,d=e.onChange,p=(0,a.Z)(e,l);(0,c.useEffect)((function(){return t({type:"costAmortization/getScenesList",payload:{}}),function(){t({type:"costAmortization/resetScenesList"})}}),[t]);var m=o.data,f=void 0===m?[]:m;return c.createElement(i.Z,(0,r.Z)({value:s,onChange:d,dropdownMatchSelectWidth:!1},p),f.map((function(e){return c.createElement(u,{value:e._id,key:e._id},e.name)})))}))},54589:function(e,t,n){var r=n(87462),a=n(44925),i=(n(29093),n(16317)),o=n(55609),c=n(67294),l=["dispatch","subjectList","value","onChange","costCenterType","namespace"],u=i.Z.Option;t.Z=(0,o.connect)((function(e){return{subjectList:e.costAmortization.subjectList}}))((function(e){var t=e.dispatch,n=e.subjectList,o=void 0===n?{}:n,s=e.value,d=e.onChange,p=e.costCenterType,m=e.namespace,f=void 0===m?"all_data":m,y=(0,a.Z)(e,l);(0,c.useEffect)((function(){t({type:"costAmortization/getSubjectList",payload:{page:1,limit:9999,type:p,namespace:f}})}),[t,p,f]);var v=o[f]||[];return s&&v.length<1?c.createElement(i.Z,{style:{width:"80%"}}):c.createElement(i.Z,(0,r.Z)({value:s,onChange:d},y),v.map((function(e){return c.createElement(u,{value:e._id,key:e._id,disabled:Array.isArray(s)&&s.includes("*")},e.name,"(",e.ac_code,")")})))}))},42509:function(e,t,n){var r=n(30381),a=n.n(r),i=n(80385);t.Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{attribution:e.cost_center_type,project:e.project_id,flowId:e.flow_id,orderId:e.order_ids,payStatus:e.paid_state,reportAt:e.submit_from_date&&e.submit_end_date?[a()(String(e.submit_from_date)),a()(String(e.submit_end_date))]:null,payAt:e.paid_start_date&&e.paid_end_date?[a()(String(e.paid_start_date)),a()(String(e.paid_end_date))]:null,belongTime:e.belong_month?a()(String(e.belong_month),"YYYY-MM"):null,ticketStatus:e.inspect_bill_state,ticketTag:e.inspect_bill_label_ids,isTicketTag:e.has_inspect_bill_label_ids,themeTag:e.theme_label,processStatus:e.state,applicant:e.apply_account_name,invoiceTitleList:e.invoice_title_list,supplierIds:e.supplier_ids,industryIds:e.industry_ids,platformIds:e.platform_ids,projectIds:e.project_ids,cityCodes:e.city_codes,costAccountingIds:e.cost_accounting_ids,paidMoneyLow:e.paid_money_low?i.fbc.exchangePriceToYuan(e.paid_money_low):void 0,paidMoneyTop:e.paid_money_top?i.fbc.exchangePriceToYuan(e.paid_money_top):void 0}}},86593:function(e,t,n){n.r(t),n.d(t,{default:function(){return de}});n(438);var r=n(14277),a=n(4942),i=n(15861),o=n(29439),c=n(87757),l=n.n(c),u=n(55609),s=n(67294),d=n(94315),p=n.n(d),m=n(93517),f=n.n(m),y=n(96036),v=n(80385),h=n(8240),g=(n(52560),n(71577)),b=(n(36616),n(51368)),Z=(n(52466),n(10642)),_=(n(13062),n(71230)),E=(n(89032),n(15746)),O=(n(26574),n(9676)),w=n(87462),k=(n(9070),n(20924)),x=(n(51838),n(48086)),C=(n(35668),n(86585)),I=(n(54071),n(14072)),T=(n(29093),n(16317)),S=n(30381),L=n.n(S),P=n(15260),j=n(61882),A=n(54589),D=n(38225),z=n(35578),G=n(42167),M=n(63781),F=n(44925),Y=["dispatch","cityList","value","onChange"],K=T.Z.Option,R=(0,u.connect)((function(e){return{cityList:e.costAmortization.cityList}}))((function(e){var t=e.dispatch,n=e.cityList,r=void 0===n?{}:n,a=e.value,i=e.onChange,o=(0,F.Z)(e,Y);(0,s.useEffect)((function(){return t({type:"costAmortization/getCityList",payload:{}}),function(){t({type:"costAmortization/resetCityList"})}}),[t]);var c=r.data,l=void 0===c?[]:c;return s.createElement(T.Z,(0,w.Z)({value:a,onChange:i,dropdownMatchSelectWidth:!1},o),l.map((function(e){return s.createElement(K,{value:e._id,key:e._id},e.city_name)})))})),U=n(22112),N=n(42509);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var H=T.Z.Option,B=I.Z.RangePicker,X=I.Z.MonthPicker,q={labelCol:{span:4},wrapperCol:{span:16}},J=function(e){var t=e.visible,n=e.onCancel,r=e.searchForm,a=void 0===r?{}:r,c=e.dispatch,u=e.tabKey,d=e.onUpdateGroup,m=e.orderSearchGroup,f=void 0===m?[]:m,y=C.Z.useForm(),v=(0,o.Z)(y,1)[0],h=(0,s.useState)(!1),g=(0,o.Z)(h,2),b=g[0],I=g[1];if(t){var T=function(){var e=(0,i.Z)(l().mark((function e(){var t,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.validateFields();case 2:if(t=e.sent,e.t0=a.getFieldsValue,!e.t0){e.next=8;break}return e.next=7,a.getFieldsValue();case 7:e.t0=e.sent;case 8:if((r=e.t0)&&!Object.values(r).every((function(e){return p().not.existy(e)||p().empty(e)}))){e.next=11;break}return e.abrupt("return",x.ZP.error("请添加查询条件"));case 11:return I(!0),e.next=14,c({type:"codeOrder/addIntelligentGroup",payload:W(W({tabKey:u},t),r)});case 14:if(!(i=e.sent)||!i._id){e.next=22;break}if(x.ZP.success("请求成功"),e.t1=d,!e.t1){e.next=21;break}return e.next=21,d();case 21:n&&n();case 22:i&&i.zh_message&&x.ZP.error(i.zh_message),I(!1);case 24:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.createElement(Z.Z,{title:"智能分组",visible:t,onOk:T,onCancel:n,confirmLoading:b},s.createElement(C.Z,{form:v,className:"affairs-flow-basic"},s.createElement(C.Z.Item,(0,w.Z)({label:"分组名称",name:"groupName",rules:[{required:!0,message:"请输入"},{pattern:/^[a-zA-Z0-9_\u4e00-\u9fa5]+$/,message:"分组名称只能是字母数字文字"}]},q),s.createElement(k.Z,{placeholder:"请输入",maxLength:50})),s.createElement(_.Z,null,s.createElement(E.Z,{span:16,offset:4},s.createElement(C.Z.Item,{name:"isDefault"},s.createElement(O.Z.Group,{disabled:f.find((function(e){return e.is_default}))},s.createElement(O.Z,{value:1},"设为默认智能分组")))))))}},Q=function(e){var t,n=e.onSearch,r=e.onReset,i=e.tabKey,c=e.dispatch,l=e.defaultGroup,u=void 0===l?{}:l,d=e.onUpdateGroup,m=e.orderSearchGroup,f=void 0===m?[]:m,h=(0,s.useState)(void 0),Z=(0,o.Z)(h,2),_=Z[0],E=Z[1],O=(0,s.useState)(!1),x=(0,o.Z)(O,2),I=x[0],S=x[1];(0,s.useEffect)((function(){u&&Object.keys(u).length>0&&_&&_.setFieldsValue(W({},u)),u&&Object.keys(u).length<1&&_&&_.setFieldsValue(W({},(0,N.Z)({})))}),[u]);var F={placeholder:"请选择",allowClear:!0,mode:"multiple",optionFilterProp:"children",showArrow:!0},Y=[s.createElement(C.Z.Item,{label:"提报类型",name:"attribution"},s.createElement(T.Z,{placeholder:"请选择",allowClear:!0},s.createElement(H,{value:v.Xr3.code},v.Xr3.description(v.Xr3.code)),s.createElement(H,{value:v.Xr3.team},v.Xr3.description(v.Xr3.team)))),s.createElement(C.Z.Item,{label:"审批流",name:"flowId"},s.createElement(P.Z,null)),s.createElement(C.Z.Item,{label:"审批单号",name:"orderId"},s.createElement(k.Z,{placeholder:"请输入",allowClear:!0}))],K=[s.createElement(C.Z.Item,{label:"付款状态",name:"payStatus"},s.createElement(T.Z,{allowClear:!0,placeholder:"请选择付款状态"},s.createElement(H,{value:v.rTI.done},v.rTI.description(v.rTI.done)),s.createElement(H,{value:v.rTI.abnormal},v.rTI.description(v.rTI.abnormal)),s.createElement(H,{value:v.rTI.untreated},v.rTI.description(v.rTI.untreated)),s.createElement(H,{value:v.rTI.noNeed},v.rTI.description(v.rTI.noNeed)))),s.createElement(C.Z.Item,{label:"提报日期",name:"reportAt"},s.createElement(B,{format:"YYYY-MM-DD",disabledDate:function(e){return e&&e>new Date}})),s.createElement(C.Z.Item,{label:"付款日期",name:"payAt"},s.createElement(B,{format:"YYYY-MM-DD",disabledDate:function(e){return e&&e>new Date}})),s.createElement(C.Z.Item,{label:"记账月份",name:"belongTime"},s.createElement(X,{style:{width:"100%"},placeholder:"请选择记账月份",disabledDate:function(e){return e&&e>L()(new Date).add(1,"M")}})),s.createElement(C.Z.Item,{label:"验票状态",name:"ticketStatus"},s.createElement(T.Z,{allowClear:!0,placeholder:"请选择"},s.createElement(H,{value:v.xTp.already},v.xTp.description(v.xTp.already)),s.createElement(H,{value:v.xTp.waiting},v.xTp.description(v.xTp.waiting)),s.createElement(H,{value:v.xTp.abnormal},v.xTp.description(v.xTp.abnormal)))),s.createElement(C.Z.Item,{noStyle:!0,key:"isTicketTag",shouldUpdate:function(e,t){return e.ticketTag!==t.ticketTag}},(function(e){var t=e.getFieldValue;return s.createElement(C.Z.Item,{label:"是否有验票标签",name:"isTicketTag"},s.createElement(T.Z,{allowClear:!0,placeholder:"请选择",disabled:p().existy(t("ticketTag"))&&p().not.empty(t("ticketTag"))},s.createElement(H,{value:"all"},"全部"),s.createElement(H,{value:!0},"有"),s.createElement(H,{value:!1},"无")))})),s.createElement(C.Z.Item,{noStyle:!0,key:"ticketTag",shouldUpdate:function(e,t){return e.isTicketTag!==t.isTicketTag}},(function(e){var t=e.getFieldValue;return s.createElement(C.Z.Item,{label:"验票标签",name:"ticketTag",key:"order_search_ticketTag"},s.createElement(j.Z,{showSearch:!0,optionFilterProp:"children",disabled:t("isTicketTag")||!1===t("isTicketTag")}))}))],V=s.createElement(C.Z.Item,{label:"主题标签",name:"themeTag"},s.createElement(k.Z,{placeholder:"请输入",allowClear:!0})),Q=s.createElement(C.Z.Item,{label:"流程状态",name:"processStatus"},s.createElement(T.Z,{allowClear:!0,placeholder:"请选择"},s.createElement(H,{value:v.DU5.processing},v.DU5.description(v.DU5.processing)),s.createElement(H,{value:v.DU5.finish},v.DU5.description(v.DU5.finish)),s.createElement(H,{value:v.DU5.close},v.DU5.description(v.DU5.close)))),$=s.createElement(C.Z.Item,{label:"申请人",name:"applicant"},s.createElement(k.Z,{placeholder:"请输入",allowClear:!0})),ee=[s.createElement(C.Z.Item,{label:"场景",name:"industryIds",key:"order_search_scenes"},s.createElement(D.Z,F)),s.createElement(C.Z.Item,{label:"平台",name:"platformIds",key:"order_search_platform"},s.createElement(z.Z,F)),s.createElement(C.Z.Item,{label:"项目",name:"projectIds",key:"order_search_term"},s.createElement(M.Z,F)),s.createElement(C.Z.Item,{label:"主体",name:"supplierIds"},s.createElement(G.Z,F)),s.createElement(C.Z.Item,{label:"城市",name:"cityCodes",key:"order_search_city"},s.createElement(R,F)),s.createElement(C.Z.Item,{label:"科目",name:"costAccountingIds",key:"order_search_subject"},s.createElement(A.Z,F)),s.createElement(C.Z.Item,{label:"费用总金额"},s.createElement("div",{style:{display:"flex"}},s.createElement(C.Z.Item,{name:"paidMoneyLow"},s.createElement(b.Z,{precision:2,min:.01,style:{width:"100%"},placeholder:"请填写金额",formatter:v.fbc.maxMoneyLimitDecimalsFormatter,parser:v.fbc.limitDecimalsParser})),s.createElement("span",{style:{margin:"0px 5px",lineHeight:"30px"}},"-"),s.createElement(C.Z.Item,{name:"paidMoneyTop"},s.createElement(b.Z,{precision:2,min:.01,style:{width:"100%"},placeholder:"请填写金额",formatter:v.fbc.maxMoneyLimitDecimalsFormatter,parser:v.fbc.limitDecimalsParser})))),{span:16,render:s.createElement(C.Z.Item,(0,w.Z)({label:"发票抬头",name:"invoiceTitleList",key:"order_search_invoiceTitle"},q),s.createElement(U.Z,F))}],te=(t={},(0,a.Z)(t,v.nab.awaitReport,[].concat(Y,[V])),(0,a.Z)(t,v.nab.upcoming,[].concat(Y,[$],K,[V],ee)),(0,a.Z)(t,v.nab.meReport,[].concat(Y,[Q],K,[V],ee)),(0,a.Z)(t,v.nab.meHandle,[].concat(Y,[$,Q],K,[V],ee)),(0,a.Z)(t,v.nab.copyGive,[].concat(Y,[$,Q],K,[V],ee)),(0,a.Z)(t,v.nab.all,[].concat(Y,[$,Q],K,[V],ee)),t),ne=i!==v.nab.awaitReport?s.createElement(g.Z,{type:"primary",onClick:function(){return S(!0)},disabled:f&&f.length>4,_event:v.zW2.EventCodeOrderGroupAdd},"加入条件分组"):"",re={items:te[i],onSearch:n,onReset:r,expand:!0,onHookForm:function(e){return E(e)},operations:ne};return s.createElement(y.IT,{className:"affairs-flow-basic"},s.createElement(y.j6,re),function(){if(I){var e={visible:I,onCancel:function(){return S(!1)},searchForm:_,dispatch:c,tabKey:i,onUpdateGroup:d,defaultGroup:u,orderSearchGroup:f};return s.createElement(J,e)}}())},$=(n(20186),n(75385)),ee=(n(21316),n(75443)),te=(n(55295),n(69713)),ne=n(97116),re=n(45430),ae=(0,u.connect)()((function(e){var t=e.onShowSizeChange,n=void 0===t?function(){}:t,r=e.onChangePage,a=void 0===r?function(){}:r,c=e.approveOrderList,u=void 0===c?{}:c,d=e.getApproveOrderList,m=void 0===d?function(){}:d,f=e.dispatch,h=e.tabKey,b=e.loading,Z=(0,s.useState)([]),_=(0,o.Z)(Z,2),E=_[0],O=_[1],w=u.data,k=void 0===w?[]:w,C=u._meta,I=void 0===C?{}:C;(0,s.useEffect)((function(){O([])}),[h,u]);var T,S,P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e._id?m&&m():e.zh_message&&x.ZP.error(e.zh_message)},j=function(){var e=(0,i.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({type:"codeOrder/deleteOrder",payload:{orderId:t}});case 2:n=e.sent,P(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,i.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({type:"codeOrder/recallOrder",payload:{orderId:t}});case 2:n=e.sent,P(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=(0,i.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f({type:"codeOrder/closeOrder",payload:{orderId:t}});case 2:n=e.sent,P(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e,t){if(Array.isArray(e)&&e.length>3){var n="inspect"===t?e.map((function(e){return e.name})).join(" 、 "):e.map((function(e){return e})).join(" 、 ");return s.createElement(te.Z,{title:n},s.createElement("div",null,"inspect"===t?e.slice(0,3).map((function(e){return e.name})).join(" 、 "):e.slice(0,3).map((function(e){return e})).join(" 、 "),"..."))}return Array.isArray(e)&&e.length<=3&&e.length>0?s.createElement("div",null,"inspect"===t?e.map((function(e){return e.name})).join("、"):e.map((function(e){return e})).join("、")):"--"},G=function(){f({type:"codeOrder/updateUserAction",payload:{tabKey:h,page:I.page,pageSize:I.page_size}})},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.createElement("a",{onClick:G,href:"/#/Code/PayOrder/Detail?orderId=".concat(e._id)},"查看")},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.createElement("a",{onClick:G,href:"/#/Code/PayOrder/Update?orderId=".concat(e._id),className:"common-table-list-operate"},"编辑")},Y=function(e){return s.createElement(ee.Z,{title:"您是否确定删除该审批单？",onConfirm:function(){return j(e._id)},okText:"确定",cancelText:"取消"},s.createElement("a",{className:"common-table-list-operate"},"删除"))},K=function(e){return s.createElement(ee.Z,{title:"您是否确定撤回该审批单？",onConfirm:function(){return A(e._id)},okText:"确定",cancelText:"取消"},s.createElement("a",{className:"common-table-list-operate"},"撤回"))},R=function(e){return s.createElement(ee.Z,{title:"您是否确定关闭该审批单？",onConfirm:function(){return D(e._id)},okText:"确定",cancelText:"取消"},s.createElement("a",{className:"common-table-list-operate"},"关闭"))},U=[{title:"审批单标题",dataIndex:"name",fixed:"left",render:function(e){return e||"--"}},{title:"审批单号",dataIndex:"_id",fixed:"left"},{title:"主题标签",dataIndex:"theme_label_list",render:function(e){return z(e)}},{title:"提报类型",dataIndex:"cost_center_type",render:function(e){return e?v.Xr3.description(e):"--"}},{title:"费用总金额",dataIndex:"paid_money",render:function(e){return e?v.fbc.exchangePriceCentToMathFormat(e):"0.00"}},{title:"当前审批节点",dataIndex:["current_node","name"],render:function(e){return e||"--"}},{title:"流程状态",dataIndex:"state",render:function(e){return e?v.DU5.description(e):"--"}},{title:"付款状态",dataIndex:"paid_state",render:function(e){return e?v.rTI.description(e):"--"}},{title:"验票状态",dataIndex:"inspect_bill_state",render:function(e){return e?v.A1w.description(e):"--"}},{title:"审批流",dataIndex:["flow_info","name"],render:function(e){return e||"--"}},{title:"验票标签",dataIndex:"inspect_bill_label_list",render:function(e){return z(e,"inspect")}},{title:"场景",dataIndex:"industry_list",render:function(e,t){return Array.isArray(e)&&e.length>0?e.map((function(e){return e.name})).join(" 、 "):ne.P6.dotOptimal(t,"industry_name","--")}},{title:"主体",dataIndex:"supplier_list",render:function(e,t){return Array.isArray(e)&&e.length>0?e.map((function(e){return e.name})).join(" 、 "):ne.P6.dotOptimal(t,"supplier_name","--")}},{title:"申请人",dataIndex:"apply_account_info",render:function(e){return p().existy(e)&&p().not.empty(e)?e.state===v.m3m.off?e.name?"".concat(e.name,"(").concat(v.m3m.description(e.state),")"):"--":e.name?e.name:"--":"--"}},{title:"提报日期",dataIndex:"submit_at",render:function(e){return e?L()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"记账月份",dataIndex:"belong_month",render:function(e){return e||"--"}},{title:"付款日期",dataIndex:"paid_at",render:function(e){return e?L()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"验票日期",dataIndex:"inspect_bill_at",render:function(e){return e?L()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"操作",dataIndex:"_id",fixed:"right",key:"operate",render:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.handle_list,n=void 0===t?[]:t,r=re.ZP.canOperateOperateCodeApproveOrderOp(),a=re.ZP.canOperateModuleCodeOrderDetail()&&n.includes("view")&&!n.includes("edit"),i=r&&n.includes("edit"),o=r&&n.includes("delete"),c=r&&n.includes("withdraw"),l=r&&n.includes("close");return s.createElement(s.Fragment,null,a&&M(e),i&&F(e),o&&Y(e),c&&K(e),l&&R(e))}(t)}}],N={current:I.page||1,defaultPageSize:30,pageSize:I.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:a,onShowSizeChange:n,showTotal:function(e){return"总共".concat(e,"条")},total:I.result_count,pageSizeOptions:["10","20","30","40"]},V=h&&Number(h)!==v.nab.awaitReport;return V&&(T=s.createElement(s.Fragment,null,s.createElement(g.Z,{type:"primary",onClick:function(){var e=JSON.stringify(E);return E.length<1?x.ZP.warning("请先选择需要打印审批单"):E.length>20?x.ZP.warning("最多同时打印20份,你已选择: ".concat(E.length,"份")):void(window.location.href="/#/Code/Print?selectedRowKeys=".concat(e,"&tabKey=").concat(h))}},"批量打印"))),h===v.nab.awaitReport&&(T="若审批单不再编辑，请及时删除"),s.createElement(y.IT,{title:"审批列表",titleExt:T},s.createElement($.Z,{rowKey:function(e,t){return e._id||t},columns:U,dataSource:k,pagination:N,bordered:!0,rowSelection:(S=null,h&&Number(h)!==v.nab.awaitReport&&(S={selectedRowKeys:E,onChange:function(e){return O(e)},columnWidth:60,getCheckboxProps:function(e){return{disabled:e.plugin_app_id}}}),S),loading:b,scroll:{x:V?2260:2200,y:500}}))})),ie=(n(56022),n(60331));function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var le=function(e){var t=e.dispatch,n=e.orderSearchGroup,r=void 0===n?[]:n,a=e.onUpdateGroup,c=e.resetState,u=(0,s.useState)(void 0),d=(0,o.Z)(u,2),p=d[0],m=d[1];(0,s.useEffect)((function(){if(Array.isArray(r)&&r.length>0){var e=r.find((function(e){return e.is_default}))||{};m(e._id)}else m(void 0)}),[r]),(0,s.useEffect)((function(){c&&m(void 0)}),[c]);var f=function(){var e=(0,i.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne.ap.track({event:v.zW2.EventCodeOrderGroupDelete}),e.next=3,t({type:"codeOrder/onDeleteGroup",payload:{groupId:n}});case 3:(r=e.sent)&&r._id&&(x.ZP.success("请求成功"),a&&a()),r&&r.zh_message&&x.ZP.error(r.zh_message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)(l().mark((function e(n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne.ap.track({event:v.zW2.EventCodeOrderGroupSet}),e.next=3,t({type:"codeOrder/onSetDefaultGroup",payload:{groupId:p,isDefault:n}});case 3:(r=e.sent)&&r._id&&(x.ZP.success("请求成功"),a&&a()),r&&r.zh_message&&x.ZP.error(r.zh_message);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b="条件分组【".concat(r.length,"/5】(如果设置有默认分组，列表中的数据为满足条件分组的数据)"),Z={backgroundColor:"rgba(255, 119, 0, 0.1)",borderColor:"rgb(255, 119, 0)",color:"rgb(255, 119, 0)"},_={margin:10,borderRadius:"15px",height:30,lineHeight:"30px",cursor:"pointer"},E=s.createElement(s.Fragment,null,s.createElement(ee.Z,{title:"确定设为默认条件分组？",disabled:!p,onConfirm:function(){return h(!0)}},s.createElement(g.Z,{type:"link",disabled:!p},"设为默认分组")),s.createElement(ee.Z,{title:"确定取消默认条件分组？",disabled:!p,onConfirm:function(){return h(!1)}},s.createElement(g.Z,{type:"link",style:{marginLeft:10},disabled:!p},"取消默认选中分组")));return s.createElement(y.IT,{title:b,titleExt:E},r.map((function(e,t){var n=p===e._id;return s.createElement(ie.Z,{key:e._id||t,closable:!0,onClose:function(){return f(e._id)},onClick:function(){return t=e._id,ne.ap.track({event:v.zW2.EventCodeOrderGroupChange}),m(t),void(a&&a({groupId:t}));var t},style:n?ce(ce({},_),Z):ce({},_)},s.createElement("span",{style:{padding:"0 10px"}},e.name))})))};function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=(0,u.connect)((function(e){var t=e.codeOrder;return{approveOrderList:t.approveOrderList,orderSearchGroup:t.orderSearchGroup,prePageAction:t.prePageAction}}))((function(e){var t=e.dispatch,n=e.approveOrderList,a=void 0===n?{}:n,c=e.location,u=void 0===c?{}:c,d=e.orderSearchGroup,m=void 0===d?[]:d,g=e.prePageAction,b=u.query.tabKey,Z=(0,s.useState)(b||v.nab.awaitReport),_=(0,o.Z)(Z,2),E=_[0],O=_[1],w=(0,s.useState)(!0),k=(0,o.Z)(w,2),x=k[0],C=k[1],I=(0,s.useState)({}),T=(0,o.Z)(I,2),S=T[0],L=T[1],P=(0,s.useState)(void 0),j=(0,o.Z)(P,2),A=j[0],D=j[1],z=(0,s.useRef)({page:1,limit:30,tabKey:E});(0,s.useEffect)((function(){p().not.existy(g)||p().empty(g)||(z.current={page:g.page,limit:g.pageSize,tabKey:g.tabKey},p().existy(g.tabKey)&&O(g.tabKey))}),[g]);var G=function(){var e=(0,i.Z)(l().mark((function e(){var n,r,a,i,o,c,u,s=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.length>0&&void 0!==s[0]?s[0]:{},r=n.tabType,a=void 0===r?E:r,i=n.groupId,t({type:"codeOrder/resetApproveOrderList"}),C(!0),Number(a)===v.nab.awaitReport){e.next=18;break}if(!i){e.next=10;break}(o=m.find((function(e){return e._id===i}))||{})&&o.filter_params&&(z.current=se(se({},z.current),(0,N.Z)(o.filter_params)),L(se({},(0,N.Z)(o.filter_params)))),e.next=16;break;case 10:return e.next=12,t({type:"codeOrder/getOrderSearchGroupList",payload:{tabKey:a}});case 12:c=e.sent,(u=Array.isArray(c)?c.find((function(e){return e.is_default})):{})&&u.filter_params&&(z.current=se(se({},z.current),(0,N.Z)(u.filter_params)),L(se({},(0,N.Z)(u.filter_params)))),(!u||Object.keys(u).length<1)&&(z.current={limit:30,page:1,tabKey:a},L({}));case 16:e.next=19;break;case 18:L({});case 19:t({type:"codeOrder/getApproveOrderList",payload:se(se({},z.current),{},{setLoading:function(){return C(!1)}})});case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){return G(),function(){t({type:"codeOrder/resetApproveOrderList"})}}),[t]);var M=function(){t({type:"codeOrder/resetApproveOrderList"}),t({type:"codeOrder/getApproveOrderList",payload:se(se({},z.current),{},{setLoading:function(){return C(!1)}})})},F=function(e){C(!0),z.current=se(se(se({},z.current),e),{},{page:1,limit:30}),M()},Y=function(e){C(!0),D((0,h.xv)(32)),z.current=se(se(se({},z.current),e),{},{page:1,limit:30}),M()},K=function(e,t){z.current=se(se({},z.current),{},{page:e,limit:t}),M()},R=function(){var e=(0,i.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z.current={page:1,limit:30,tabKey:t},O(t),G({tabType:t});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=[];if(re.ZP.canOperateOperateCodeApproveOrderTabOther()&&(U=[{title:v.nab.description(v.nab.awaitReport),key:v.nab.awaitReport},{title:v.nab.description(v.nab.upcoming),key:v.nab.upcoming},{title:v.nab.description(v.nab.meReport),key:v.nab.meReport},{title:v.nab.description(v.nab.meHandle),key:v.nab.meHandle},{title:v.nab.description(v.nab.copyGive),key:v.nab.copyGive}]),re.ZP.canOperateOperateCodeApproveOrderTabAll()&&(U[U.length]={title:v.nab.description(v.nab.all),key:v.nab.all}),U.length.length<1)return s.createElement(r.Z,null);var V,W,H,B=f().get(g,"tabKey",E);return s.createElement(s.Fragment,null,s.createElement(y.DF,{items:U,onChange:R,defaultActiveKey:B}),(V={onSearch:F,onReset:Y,dispatch:t,tabKey:E,searchVal:z.current,defaultGroup:S,onUpdateGroup:G,orderSearchGroup:m},W={onChangePage:K,onShowSizeChange:K,dispatch:t,approveOrderList:a,getApproveOrderList:M,tabKey:E,loading:x},H={dispatch:t,orderSearchGroup:m,tabKey:E,onUpdateGroup:G,resetState:A},s.createElement(s.Fragment,null,s.createElement(Q,V),Number(E)!==v.nab.awaitReport&&s.createElement(le,H),s.createElement(ae,W))))}))},15260:function(e,t,n){n(29093);var r=n(16317),a=n(55609),i=n(67294),o=r.Z.Option;t.Z=(0,a.connect)((function(e){return{flowSelectList:e.codeFlow.flowSelectList}}))((function(e){var t=e.dispatch,n=e.flowSelectList,a=void 0===n?{}:n,c=e.value,l=e.onChange,u=e.type;(0,i.useEffect)((function(){return t({type:"codeFlow/getFlowSelectList",payload:{page:1,limit:9999,type:u}}),function(){t({type:"codeFlow/resetFlowSelectList"})}}),[t,u]);var s=a.data,d=void 0===s?[]:s;return i.createElement(r.Z,{value:c,onChange:l,placeholder:"请选择",allowClear:!0,showSearch:!0,optionFilterProp:"children"},d.map((function(e){return i.createElement(o,{value:e._id,key:e._id,team:e.team},e.name)})))}))},61882:function(e,t,n){var r=n(87462),a=n(44925),i=(n(29093),n(16317)),o=n(67294),c=n(55609),l=["dispatch","ticketTags","disabled","onChange","value"],u=i.Z.Option;t.Z=(0,c.connect)((function(e){return{ticketTags:e.ticketTag.ticketTags}}))((function(e){var t=e.dispatch,n=e.ticketTags,c=e.disabled,s=void 0!==c&&c,d=e.onChange,p=e.value,m=(0,a.Z)(e,l),f=n.data,y=void 0===f?[]:f;return(0,o.useEffect)((function(){t({type:"ticketTag/getTicketTags",payload:{page:1,limit:9999}})}),[t]),o.createElement(i.Z,(0,r.Z)({placeholder:"请选择",allowClear:!0,disabled:s,mode:"multiple",showArrow:!0,onChange:d,value:p},m),y.map((function(e){return o.createElement(u,{value:e._id,key:e._id,title:e.name},e.name)})))}))}}]);