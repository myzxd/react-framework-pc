"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[2442],{62442:function(e,t,n){n.r(t),n.d(t,{default:function(){return be}});var a=n(29439),r=(n(9523),n(51752)),c=n(67294),i=n(15861),l=n(4942),o=n(87757),s=n.n(o),u=n(45697),d=n.n(u),m=n(55609),p=n(80385),f=(n(21316),n(75443)),b=(n(52560),n(71577)),y=(n(35668),n(86585)),h=(n(9070),n(20924)),v=(n(51838),n(48086)),g=(n(54071),n(14072)),E=(n(29093),n(16317)),Z=n(94315),w=n.n(Z),_=n(96036),C=E.Z.Option,x=(0,m.connect)((function(e){return{signUnitList:e.sharedContract.signUnitList}}))((function(e){var t=e.dispatch,n=e.signUnitList,a=void 0===n?{}:n,r=e.onChange,i=e.value,l=a.data,o=void 0===l?[]:l;return(0,c.useEffect)((function(){t({type:"sharedContract/getSharedSignUnit",payload:{_meta:{page:1,limit:9999}}})}),[t]),c.createElement(E.Z,{placeholder:"请选择",allowClear:!0,onChange:r,showSearch:!0,value:i,optionFilterProp:"children"},o.map((function(e){return c.createElement(C,{value:e._id,key:e._id},e.name)})))})),S=n(45430),k=n(90681);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=E.Z.Option,K=g.Z.RangePicker;function L(e){var t=e.onSearch,n=void 0===t?function(){}:t,a=e.dispatch,r=e.tabKey,l=e.onReset,o=e.tabSearchParmas,u=e.setForm,d=e.form,m=e.tabKeyState,g=function(){var e=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.validateFields();case 2:t=e.sent,a({type:"sharedContract/exportSharedContract",payload:{params:O(O({},t),o),onSuccessCallback:function(){return v.ZP.success("创建下载任务成功")},onFailureCallback:function(){return v.ZP.error("导出数据失败")}}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){m&&w().existy(d)&&w().not.empty(d)&&d.resetFields()}),[d,m]);var Z=[c.createElement(y.Z.Item,{label:"BOSS审批单号",name:"order_id",rules:[{validator:function(e,t){return!t||/^[0-9a-z]+$/g.test(t)&&24===t.length?Promise.resolve():Promise.reject(new Error("请输入正确的BOSS审批单号"))}}]},c.createElement(h.Z,{placeholder:"请输入",allowClear:!0})),c.createElement(y.Z.Item,{label:"签订单位",name:"firm_id"},c.createElement(x,null)),c.createElement(y.Z.Item,{label:"合同名称",name:"name"},c.createElement(h.Z,{placeholder:"请输入",allowClear:!0}))];"tab3"===r&&Z.splice(1,0,c.createElement(y.Z.Item,{label:"作废日期",name:"invalid_date"},c.createElement(K,{allowClear:!0}))),"tab1"!==r&&"tab2"!==r&&"tab4"!==r||Z.push(c.createElement(y.Z.Item,{label:"提报人",name:"submit_account"},c.createElement(h.Z,{placeholder:"请输入",allowClear:!0})),c.createElement(y.Z.Item,{label:"提报日期",name:"submit_date"},c.createElement(K,{allowClear:!0}))),"tab1"!==r&&"tab2"!==r||Z.push(c.createElement(y.Z.Item,{label:"合同起始日期",name:"contract_at_date"},c.createElement(K,{allowClear:!0})),c.createElement(y.Z.Item,{label:"合同终止日期",name:"contract_end_date"},c.createElement(K,{allowClear:!0}))),"tab1"!==r&&"tab2"!==r&&"tab3"!==r||Z.push(c.createElement(y.Z.Item,{label:"合同类型",name:"pact_type"},c.createElement(k.Z,{placeholder:"请选择"})),c.createElement(y.Z.Item,{label:"转交状态",name:"is_deliver"},c.createElement(E.Z,{placeholder:"请选择",allowClear:!0},c.createElement(P,{value:!0},"已转交"),c.createElement(P,{value:!1},"未转交"))),c.createElement(y.Z.Item,{label:"盖章状态",name:"owner_is_signed"},c.createElement(E.Z,{placeholder:"请选择",allowClear:!0},c.createElement(P,{value:!0},"已盖章"),c.createElement(P,{value:!1},"未盖章"))),c.createElement(y.Z.Item,{label:"邮寄状态",name:"mail_state"},c.createElement(E.Z,{placeholder:"请选择",allowClear:!0},c.createElement(P,{value:p.GGP.done},p.GGP.description(p.GGP.done)),c.createElement(P,{value:p.GGP.notMail},p.GGP.description(p.GGP.notMail)))),c.createElement(y.Z.Item,{label:"归档状态",name:"is_filed"},c.createElement(E.Z,{placeholder:"请选择",allowClear:!0},c.createElement(P,{value:!0},"已归档"),c.createElement(P,{value:!1},"未归档")))),"tab2"===r&&Z.push(c.createElement(y.Z.Item,{label:"借阅状态",name:"borrow_state"},c.createElement(E.Z,{placeholder:"请选择",allowClear:!0},c.createElement(P,{value:p.Y7o.already},p.Y7o.description(p.Y7o.already)),c.createElement(P,{value:p.Y7o.not},p.Y7o.description(p.Y7o.not)))));var C={operations:c.createElement("span",null,S.ZP.canOperateSharedContractExport()?c.createElement(f.Z,{title:"创建下载任务？",onConfirm:g,okText:"确认",cancelText:"取消"},c.createElement(b.Z,{type:"primary",style:{marginLeft:10}},"导出EXCEL")):""),items:Z,onSearch:n,onReset:l,onHookForm:function(e){u(e)}};return c.createElement(_.IT,null,c.createElement(_.j6,C))}L.propTypes={tabKey:d().string,tabSearchParmas:d().object};var j=(0,m.connect)()(L),N=(n(20186),n(75385)),R=n(30381),D=n.n(R),T=n(97116),z=n(36696),F=(n(52466),n(10642)),G=n(11393);function Y(e){var t=e.data,n=e.visible,r=e.setVisible,i=e.dispatch,l=e.breakContractList,o=(0,c.useState)(!1),s=(0,a.Z)(o,2),u=s[0],d=s[1],m=y.Z.useForm(),p=(0,a.Z)(m,1)[0],f=function(){d(!1),b(),l()},b=function(){r(!1),d(!1)};(0,c.useEffect)((function(){n&&p.setFieldsValue({note:void 0})}),[n]);var v;return c.createElement(F.Z,{visible:n,title:"确认作废合同信息",confirmLoading:u,onOk:function(){p.validateFields().then((function(e){d(!0);var n={_id:t._id,cancel_note:e.note,onCallBack:f,onErrorCallBack:function(){d(!1)}};i({type:"sharedContract/updateVoidContract",payload:n})}))},onCancel:function(){return b&&b(!1)},width:"30%"},(v=[c.createElement(y.Z.Item,{label:"作废原因",style:{display:"flex",margin:"20px 0 0 0"},name:"note",rules:[{required:!0}]},c.createElement(h.Z.TextArea,null))],c.createElement(y.Z,{form:p,name:"control-hooks"},c.createElement("div",null,c.createElement("p",{className:G.Z["sign-modal-info-wrap"]},c.createElement("span",{className:G.Z["sign-modal-lable"]},"合同名称："),c.createElement("span",{className:G.Z["sign-modal-content"]},t.name||"--")),c.createElement("p",{className:G.Z["sign-modal-info-wrap"]},c.createElement("span",{className:G.Z["sign-modal-lable"]},"签订单位："),c.createElement("span",{className:G.Z["sign-modal-content"]},(t.firm_info||{}).name||"--")),c.createElement("p",{className:G.Z["sign-modal-info-wrap"]},c.createElement("span",{className:G.Z["sign-modal-lable"]},"BOSS审批单号："),c.createElement("span",{className:G.Z["sign-modal-content"]},t.application_order_id||"--")),c.createElement("p",{className:G.Z["sign-modal-info-wrap"]},c.createElement("span",{className:G.Z["sign-modal-lable"]},"合同甲方："),c.createElement("span",{className:G.Z["sign-modal-content"]},t.pact_part_a||"--")),c.createElement("p",{className:G.Z["sign-modal-info-wrap"]},c.createElement("span",{className:G.Z["sign-modal-lable"]},"合同乙方："),c.createElement("span",{className:G.Z["sign-modal-content"]},t.pact_part_b||"--"))),c.createElement(_.Fp,{items:v,cols:1}))))}Y.propTypes={dispatch:d().func.isRequired,data:d().object,visible:d().bool,setVisible:d().func,breakContractList:d().func},Y.defaultProps={data:{},visible:!1,setVisible:function(){},breakContractList:function(){}};var M=(0,m.connect)()(Y),q=(n(36037),n(47933)),B=(n(97564),n(87462)),V=n(94184),A=n.n(V),U=n(50344),$=n(65632);function H(e){var t=e.className,n=e.direction,a=e.index,r=e.marginDirection,i=e.children,o=e.split,s=e.wrap,u=c.useContext(W),d=u.horizontalSize,m=u.verticalSize,p=u.latestIndex,f={};return u.supportFlexGap||("vertical"===n?a<p&&(f={marginBottom:d/(o?2:1)}):f=(0,B.Z)((0,B.Z)({},a<p&&(0,l.Z)({},r,d/(o?2:1))),s&&{paddingBottom:m})),null==i?null:c.createElement(c.Fragment,null,c.createElement("div",{className:t,style:f},i),a<p&&o&&c.createElement("span",{className:"".concat(t,"-split"),style:f},o))}var J=n(98082),Q=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},W=c.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),X={small:8,middle:16,large:24};var ee=function(e){var t,n=c.useContext($.E_),r=n.getPrefixCls,i=n.space,o=n.direction,s=e.size,u=void 0===s?(null==i?void 0:i.size)||"small":s,d=e.align,m=e.className,p=e.children,f=e.direction,b=void 0===f?"horizontal":f,y=e.prefixCls,h=e.split,v=e.style,g=e.wrap,E=void 0!==g&&g,Z=Q(e,["size","align","className","children","direction","prefixCls","split","style","wrap"]),w=(0,J.Z)(),_=c.useMemo((function(){return(Array.isArray(u)?u:[u,u]).map((function(e){return function(e){return"string"==typeof e?X[e]:e||0}(e)}))}),[u]),C=(0,a.Z)(_,2),x=C[0],S=C[1],k=(0,U.Z)(p,{keepEmpty:!0}),I=void 0===d&&"horizontal"===b?"center":d,O=r("space",y),P=A()(O,"".concat(O,"-").concat(b),(t={},(0,l.Z)(t,"".concat(O,"-rtl"),"rtl"===o),(0,l.Z)(t,"".concat(O,"-align-").concat(I),I),t),m),K="".concat(O,"-item"),L="rtl"===o?"marginLeft":"marginRight",j=0,N=k.map((function(e,t){return null!=e&&(j=t),c.createElement(H,{className:K,key:"".concat(K,"-").concat(t),direction:b,index:t,marginDirection:L,split:h,wrap:E},e)})),R=c.useMemo((function(){return{horizontalSize:x,verticalSize:S,latestIndex:j,supportFlexGap:w}}),[x,S,j,w]);if(0===k.length)return null;var D={};return E&&(D.flexWrap="wrap",w||(D.marginBottom=-S)),w&&(D.columnGap=x,D.rowGap=S),c.createElement("div",(0,B.Z)({className:P,style:(0,B.Z)((0,B.Z)({},D),v)},Z),c.createElement(W.Provider,{value:R},N))},te=n(44925),ne=["key","name","fieldKey"],ae={style:{display:"flex",marginBottom:12}};function re(e){var t=e._id,n=e.visible,r=e.setVisible,i=e.dispatch,l=e.breakContractList,o=(0,c.useState)(!1),s=(0,a.Z)(o,2),u=s[0],d=s[1],m=(0,c.useRef)([{name:0,key:0,fieldKey:0}]),f=y.Z.useForm(),b=(0,a.Z)(f,1)[0],v=(0,c.useState)(),g=(0,a.Z)(v,2),E=g[0],Z=g[1],w=function(){d(!1),C(),l()},C=function(){r(!1),d(!1),Z()},x=function(e){Z(e.target.value)};(0,c.useEffect)((function(){n&&b.setFieldsValue({isNeedMail:void 0,note:void 0,fastMailInfo:void 0,users:void 0})}),[n]);return c.createElement(F.Z,{visible:n,title:"填写邮寄信息",confirmLoading:u,onOk:function(){b.validateFields().then((function(e){var n=e.note,a=e.users,r=void 0===a?[]:a;d(!0);var c={_id:t,is_need_mail:E,mail_company:(r[0]||{}).first,mail_no:(r[0]||{}).last,mail_note:n,onCallBack:w};i({type:"sharedContract/updateToMail",payload:c})}))},onCancel:function(){return C&&C(!1)},width:"35%"},function(){var e=[c.createElement(y.Z.Item,(0,B.Z)({},ae,{label:"是否需要邮寄",name:"isNeedMail",rules:[{required:!0,message:"请选择是否需要邮寄"}]}),c.createElement(q.ZP.Group,{onChange:x},c.createElement(q.ZP,{value:p.qx6.yes},p.qx6.description(!0)),c.createElement(q.ZP,{value:p.qx6.no},p.qx6.description(!1)))),c.createElement(y.Z.Item,{label:"备注",name:"note"},c.createElement(h.Z.TextArea,null))];if(E){var t=c.createElement(y.Z.Item,{style:{margin:0},label:"快递信息",name:"fastMailInfo"},c.createElement(y.Z.List,{name:"users"},(function(){return c.createElement(c.Fragment,null,m.current.map((function(e){var t=e.key,n=e.name,a=e.fieldKey,r=(0,te.Z)(e,ne);return c.createElement(ee,{key:t,style:{display:"flex",margin:0},align:"baseline"},c.createElement(y.Z.Item,(0,B.Z)({},r,{name:[n,"first"],fieldKey:[a,"first"],rules:[{pattern:/^[a-zA-Z\u4e00-\u9fa5]+$/g,required:!0,message:"请输入汉字或字母"}]}),c.createElement(h.Z,{placeholder:"快递公司"})),"-",c.createElement(y.Z.Item,(0,B.Z)({},r,{name:[n,"last"],fieldKey:[a,"last"],rules:[{pattern:/^[0-9a-zA-Z]+$/g,required:!0,message:"请输入数字或字母"}]}),c.createElement(h.Z,{placeholder:"快递单号"})))})))})));e.splice(1,0,t)}return c.createElement(y.Z,{form:b,name:"control-hooks"},c.createElement(_.Fp,{items:e,cols:1}))}())}re.propTypes={dispatch:d().func.isRequired,_id:d().string,visible:d().bool,setVisible:d().func,breakContractList:d().func},re.defaultProps={_id:"",visible:!1,setVisible:function(){},breakContractList:function(){}};var ce=(0,m.connect)()(re),ie=n(33582);function le(e,t){var n=e.tabKey,r=e.tableLoading,l=e.contractList,o=void 0===l?{}:l,u=e.onShowSizeChange,d=void 0===u?function(){}:u,m=e.onChangePage,y=void 0===m?function(){}:m,h=e.breakContractList,v=e.sharedContractDeliver,g=e.pactTypes,E=void 0===g?{}:g,Z=e.sealTypes,C=void 0===Z?{}:Z,x=(0,c.useState)([]),k=(0,a.Z)(x,2),I=k[0],O=k[1],P=(0,c.useState)(!1),K=(0,a.Z)(P,2),L=K[0],j=K[1],R=(0,c.useRef)(""),F=(0,c.useRef)({}),G=o[n]||{},Y=G.data,q=void 0===Y?[]:Y,B=G._meta,V=void 0===B?{}:B,A=(0,c.useState)({}),U=(0,a.Z)(A,2),$=U[0],H=U[1],J=(0,c.useState)(!1),Q=(0,a.Z)(J,2),W=Q[0],X=Q[1],ee=(0,c.useState)(!1),te=(0,a.Z)(ee,2),ne=te[0],ae=te[1],re=(0,c.useState)(null),le=(0,a.Z)(re,2),oe=le[0],se=le[1],ue=(0,c.useState)(null),de=(0,a.Z)(ue,2),me=de[0],pe=de[1],fe=(0,c.useState)(!1),be=(0,a.Z)(fe,2),ye=be[0],he=be[1];(0,c.useImperativeHandle)(t,(function(){return{setSelectedRowKeys:O}}));var ve=function(){R.current="batchSign",j(!0)},ge=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v({contractId:t});case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:h();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=[{title:"序号",dataIndex:"number",fixed:"left",width:100,render:function(e,t){return T.P6.dotOptimal(t,"number","--")}},{title:"boss审批单号",dataIndex:"application_order_id",fixed:"left",width:150,render:function(e){return e||"--"}},{title:"提报日期",dataIndex:"submit_at",fixed:"left",width:150,render:function(e){return e?D()("".concat(e)).format("YYYY-MM-DD"):"--"}},{title:"提报人",dataIndex:["apply_account_info","name"],fixed:"left",width:100,render:function(e){return e||"--"}},{title:"合同类型",dataIndex:"pact_type",key:"pact_type",width:100,render:function(e){return e&&E&&E[e]?E[e]:"--"}},{title:"签订单位",dataIndex:["firm_info","name"],width:150,render:function(e){return e||"--"}},{title:"盖章类型",dataIndex:"seal_type",width:100,render:function(e){return e?(t=e,n="--",w().existy(C)&&w().not.empty(C)&&w().object(C)&&Object.keys(C).map((function(e){Number(e)===t&&(n=C[e])})),n):"--";var t,n}},{title:"合同名称",dataIndex:"name",width:150,render:function(e){return e||"--"}},{title:"合同份数",dataIndex:"copies",width:100,render:function(e,t){return T.P6.dotOptimal(t,"copies","--")}},{title:"合同甲方",dataIndex:"pact_part_a",width:200,render:function(e){return e||"--"}},{title:"合同乙方",dataIndex:"pact_part_b",width:200,render:function(e){return e||"--"}},{title:"合同丙方",dataIndex:"pact_part_c",width:200,render:function(e){return e||"--"}},{title:"合同丁方",dataIndex:"pact_part_d",width:200,render:function(e){return e||"--"}},{title:"合同起始日期",dataIndex:"from_date",width:120,render:function(e){return e?D()("".concat(e)).format("YYYY-MM-DD"):"--"}},{title:"合同终止日期",dataIndex:"end_date",width:120,render:function(e){return e?D()("".concat(e)).format("YYYY-MM-DD"):"--"}},{title:"转交状态",dataIndex:"is_deliver",width:100,render:function(e){return"boolean"==typeof e?e?"已转交":"未转交":"--"}},{title:"盖章状态",dataIndex:"owner_is_signed",width:100,render:function(e){return"boolean"==typeof e?e?"已盖章":"未盖章":"--"}},{title:"邮寄状态",dataIndex:"mail_state",width:100,render:function(e){return e?p.GGP.description(e):"--"}},{title:"归档状态",dataIndex:"is_filed",width:100,render:function(e){return"boolean"==typeof e?e?"已归档":"未归档":"--"}},{title:"借阅状态",dataIndex:"borrow_state",width:100,render:function(e){return e?p.Y7o.description(e):"--"}},{title:"合同状态",dataIndex:"state",fixed:"right",width:100,render:function(e){return e&&"tab4"!==n?p.pGe.description(e):"--"}},{title:"操作",dataIndex:"_id",fixed:"right",width:150,render:function(e,t){var a="/#/Shared/Contract/Detail?id=".concat(e,"&tabKey=").concat(n);return c.createElement("div",null,t.is_can_deliver?c.createElement(f.Z,{title:"确定转递合同?",onConfirm:function(){ge(t._id)},okText:"是",cancelText:"否"},c.createElement("a",{href:"#!",style:{marginRight:10},onClick:function(e){e.preventDefault()}},"转递合同")):null,t.is_can_sign&&t.keep_account_id===T.Iq.account.id?c.createElement("a",{href:"#!",style:{marginRight:10},onClick:function(e){var n;e.preventDefault(),n=t,F.current=n,R.current="sign",j(!0)}},"盖章"):null,t.is_can_mail?c.createElement("a",{style:{marginRight:10},onClick:function(){return function(e){ae(!0),se(e)}(t._id)}},"邮寄"):null,t.is_can_filed&&t.preserver_id===T.Iq.account.id?c.createElement("a",{style:{marginRight:10},onClick:function(){return function(e,t){pe(e),he(!0),se(t)}(t.number,t._id)}},"归档"):null,S.ZP.canOperateSharedContractDetail()&&t.is_can_get?c.createElement("a",{style:{marginRight:10},href:a,target:"_blank",rel:"noopener noreferrer"},"查看"):null,t.is_can_cancel?c.createElement("a",{style:{marginRight:10},onClick:function(){return H(t),void X(!0)}},"作废"):null)}}],Ze=Ee.map((function(e){return e.width})).reduce((function(e,t){return e+t})),we={current:V.page||1,defaultPageSize:30,pageSize:V.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:function(e,t){y(e,t),O([])},onShowSizeChange:d,showTotal:function(e){return"总共".concat(e,"条")},total:V.result_count,pageSizeOptions:["10","20","30","40"]};return c.createElement(_.IT,{title:"tab1"===n?c.createElement(b.Z,{type:"primary",disabled:!I.length>0,onClick:ve},"批量盖章"):null},c.createElement(N.Z,{rowKey:function(e,t){return e._id||t},columns:Ee,dataSource:q,scroll:{x:Ze},pagination:we,rowSelection:function(){if("tab1"===n)return{selectedRowKeys:I,onChange:function(e){O(e)},getCheckboxProps:function(e){return e.is_can_sign&&e.keep_account_id===T.Iq.account.id?{}:{disabled:!0}}}}(),loading:r,bordered:!0}),function(){if("tab1"===n){var e=q.filter((function(e){return I.includes(e._id)}));return c.createElement(z.Z,{visible:L,setSignModalVisible:j,signType:R.current,signContractInfo:F.current,batchSignContractInfo:e,selectedRowKeys:I,setSelectedRowKeys:O,breakContractList:h})}}(),function(){if(0!==Object.keys($).length)return c.createElement(M,{breakContractList:h,data:$,visible:W,setVisible:X})}(),function(){if(oe)return c.createElement(ce,{breakContractList:h,_id:oe,visible:ne,setVisible:ae})}(),c.createElement(ie.Z,{breakContractList:h,_id:oe,visible:ye,setVisible:he,contractNumber:me}))}le.propTypes={tabKey:d().string,tableLoading:d().bool,breakContractList:d().func};var oe=le;function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}me.propTypes={tabKey:d().string};var de=(0,c.forwardRef)(oe);function me(e){var t=e.tabKey,n=e.contractList,r=e.getSharedContractList,l=e.reduceSharedContractList,o=e.sharedContractDeliver,u=e.getContractEnumerator,d=e.contractTypeData,m=void 0===d?{}:d,f=e.tabKeyState,b={};switch(t){case"tab1":b.state=[p.pGe.toBeEffective],b.stamp_type=[p.bmm.weFirst,p.bmm.weNext];break;case"tab2":b.state=[p.pGe.effective,p.pGe.expired],b.stamp_type=[p.bmm.weFirst,p.bmm.weNext];break;case"tab3":b.state=[p.pGe.invalid],b.stamp_type=[p.bmm.weFirst,p.bmm.weNext];break;case"tab4":b.stamp_type=[p.bmm.unNeed]}var y=(0,c.useRef)(ue({_meta:{page:1,limit:30},contractNameSpace:t},b)),h=(0,c.useState)({}),v=(0,a.Z)(h,2),g=v[0],E=v[1],Z=(0,c.useRef)(),w=(0,c.useState)(!0),_=(0,a.Z)(w,2),C=_[0],x=_[1];(0,c.useEffect)((function(){return(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(ue({},y.current));case 2:x(!1);case 3:case"end":return e.stop()}}),e)})))(),u(),function(){l({contractNameSpace:t,result:{}})}}),[]),(0,c.useEffect)((function(){f&&k()}),[f]);var S=function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),y.current=ue(ue(ue({},y.current),t),{},{_meta:{page:1,limit:30}}),Z.current&&Z.current.setSelectedRowKeys&&Z.current.setSelectedRowKeys.length>0&&Z.current.setSelectedRowKeys([]),e.next=5,r(ue({},y.current));case 5:x(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,i.Z)(s().mark((function e(){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),n=ue({_meta:{page:1,limit:30},contractNameSpace:t},b),y.current=n,Z.current&&Z.current.setSelectedRowKeys&&Z.current.setSelectedRowKeys.length>0&&Z.current.setSelectedRowKeys([]),e.next=6,r(n);case 6:x(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,i.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),y.current=ue(ue({},y.current),{},{_meta:{page:t,limit:n}}),e.next=4,r(ue({},y.current));case 4:x(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=function(){var e=(0,i.Z)(s().mark((function e(t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),y.current=ue(ue({},y.current),{},{_meta:{page:t,limit:n}}),e.next=4,r(ue({},y.current));case 4:x(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return c.createElement("div",null,c.createElement(j,{tabKeyState:f,tabKey:t,onSearch:S,onReset:k,setForm:E,form:g,tabSearchParmas:b}),c.createElement(de,{pactTypes:m.pact_types,sealTypes:m.seal_types,tabKey:t,tableLoading:C,contractList:n,onChangePage:I,onShowSizeChange:O,ref:Z,sharedContractDeliver:o,breakContractList:(0,i.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,r(ue({},y.current));case 3:x(!1);case 4:case"end":return e.stop()}}),e)})))}))}var pe=(0,m.connect)((function(e){return{contractList:e.sharedContract.contractList,contractTypeData:e.expenseExamineFlow.contractTypeData}}),(function(e){return{getSharedContractList:function(t){return e({type:"sharedContract/getSharedContractList",payload:t})},reduceSharedContractList:function(t){return e({type:"sharedContract/reduceSharedContractList",payload:t})},sharedContractDeliver:function(t){return e({type:"sharedContract/sharedContractDeliver",payload:t})},getContractEnumerator:function(){return e({type:"expenseExamineFlow/fetchContractType"})}}}))(me),fe=r.Z.TabPane,be=function(){var e=(0,c.useState)(void 0),t=(0,a.Z)(e,2),n=t[0],i=t[1];return c.createElement("div",null,c.createElement(r.Z,{defaultActiveKey:"tab1",onTabClick:function(e){i(e)}},c.createElement(fe,{tab:"待生效",key:"tab1"},c.createElement(pe,{tabKey:"tab1",tabKeyState:n})),c.createElement(fe,{tab:"生效中/已失效",key:"tab2"},c.createElement(pe,{tabKey:"tab2",tabKeyState:n})),c.createElement(fe,{tab:"已作废",key:"tab3"},c.createElement(pe,{tabKey:"tab3",tabKeyState:n})),c.createElement(fe,{tab:"其他",key:"tab4"},c.createElement(pe,{tabKey:"tab4",tabKeyState:n}))))}}}]);