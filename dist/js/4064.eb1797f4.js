"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4064],{19480:function(e,t,n){n(52466);var a=n(10642),l=n(67294),r=n(38819),i=n(24311);t.Z=function(e){var t=e.visible,n=e.title,c=void 0===n?"批量付款":n,o=e.onCancel;return l.createElement(a.Z,{title:c,visible:t,footer:null,onCancel:o},l.createElement("div",{className:i.Z["wallet-paystate-modal-wrap"]},l.createElement(r.Z,{className:i.Z["wallet-paystate-modal-icon"]}),l.createElement("div",{className:i.Z["wallet-paystate-modal-title"]},"付款完成")))}},44064:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var a=n(55609),l=n(67294),r=(n(35668),n(86585)),i=n(93517),c=n.n(i),o=n(30381),d=n.n(o),u=n(80385),m=n(96036),f=function(e){var t=e.detail,n=void 0===t?{}:t,a=n._id,i=n.type,o=n.state,f=n.created_at,s=n.total_money,p=n.paid_money,_=n.unpaid_money,b=n.paying_money,y=n.cancellation_at,w=[l.createElement(r.Z.Item,{label:"账单编号"},a),l.createElement(r.Z.Item,{label:"账单类型"},i?u.JmV.description(i):"审批单类"),l.createElement(r.Z.Item,{label:"账单生成时间"},f?d()(f).format("YYYY-MM-DD HH:mm:ss"):"--")];o===u.EKV.void&&(w[w.length]=l.createElement(r.Z.Item,{label:"作废时间"},y?d()(y).format("YYYY-MM-DD HH:mm:ss"):"--"),w[w.length]=l.createElement(r.Z.Item,{label:"作废操作人"},c().get(n,"cancellation_operator_info.name","--")));var h=[l.createElement(r.Z.Item,{label:"账单总金额"},s?u.fbc.exchangePriceCentToMathFormat(s):"0.00"),l.createElement(r.Z.Item,{label:"已支付金额"},p?u.fbc.exchangePriceCentToMathFormat(p):"0.00"),l.createElement(r.Z.Item,{label:"未支付金额"},_?u.fbc.exchangePriceCentToMathFormat(_):"0.00"),l.createElement(r.Z.Item,{label:"支付中金额"},b?u.fbc.exchangePriceCentToMathFormat(b):"0.00")];return l.createElement(m.IT,null,l.createElement(r.Z,{className:"wallet-bill-detail-basic-form"},l.createElement(m.Fp,{items:w,cols:3})),l.createElement(r.Z,{layout:"vertical",className:"wallet-bill-detail-basic-form wallet-bill-detail-basic-form-ver"},l.createElement(m.Fp,{items:h,cols:4})))},s=(n(20186),n(75385)),p=(n(438),n(14277)),_=(n(55295),n(69713)),b=n(24311),y=function(e){var t=e.detail,n=void 0===t?{}:t,a=function(e,t){if(Array.isArray(e)&&e.length>3){var n="inspect"===t?e.map((function(e){return e.name})).join(" 、 "):e.map((function(e){return e})).join(" 、 ");return l.createElement(_.Z,{title:n},l.createElement("div",null,"inspect"===t?e.slice(0,3).map((function(e){return e.name})).join(" 、 "):e.slice(0,3).map((function(e){return e})).join(" 、 "),"..."))}return Array.isArray(e)&&e.length<=3&&e.length>0?l.createElement("div",null,"inspect"===t?e.map((function(e){return e.name})).join("、"):e.map((function(e){return e})).join("、")):"--"};return l.createElement(m.IT,{title:l.createElement("span",{className:b.Z["wallet-bill-content-title"]},"审批单信息")},n.type===u.JmV.approval?function(){var e=n.application_order_info,t=void 0===e?{}:e;if(!t)return l.createElement(p.Z,null);var r=[{title:"关联审批单号",dataIndex:"_id",width:150,fixed:"left",render:function(e){return l.createElement("a",{href:"/#/Expense/Manage/ExamineOrder/Detail?orderId=".concat(e)},e)}},{title:"提报人",dataIndex:["apply_account_info","name"],fixed:"left",width:80},{title:"费用总金额",dataIndex:"total_money",width:100,fixed:"left",render:function(e){return e||0===e?u.fbc.exchangePriceCentToMathFormat(e):"0.00"}},{title:"主题标签",dataIndex:"theme_label_list",width:120,render:function(e){return a(e)}},{title:"是否有验票标签",dataIndex:"inspect_bill_label_list",key:"is_inspect_bill_label_list",width:110,render:function(e){return Array.isArray(e)&&e.length>0?"有":"无"}},{title:"验票标签",dataIndex:"inspect_bill_label_list",key:"inspect_bill_label_list",width:120,render:function(e){return a(e,"inspect")}},{title:"提报日期",dataIndex:"submit_at",width:100,render:function(e){return e?d()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"归属周期",dataIndex:"belong_time",width:80,render:function(e){return e||"--"}},{title:"审批流",dataIndex:["flow_info","name"],width:100,render:function(e){return e||"--"}},{title:"审批类型",dataIndex:"application_order_type",width:80,render:function(e){return e?u.ZBL.description(e):"--"}},{title:"流程状态",dataIndex:"state",width:100,render:function(e){return e?u.DU5.description(e):"--"}},{title:"当前节点",dataIndex:["current_flow_node_info","name"],width:100,render:function(e){return e||"--"}},{title:"验票状态",dataIndex:"inspect_bill_state",width:120,render:function(e){return e?u.xTp.description(e):"--"}},{title:"验票日期",dataIndex:"inspect_bill_at",width:120,render:function(e){return e?d()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"验票说明",dataIndex:"inspect_bill_note",render:function(e){return e||"--"}}];return l.createElement(s.Z,{rowKey:function(e,t){return e._id||t},columns:r,dataSource:[t],pagination:!1,bordered:!0,scroll:{x:1700}})}():n.type===u.JmV.code?function(){var e=n.qoa_order_info,t=void 0===e?{}:e;if(!t)return l.createElement(p.Z,null);var r=[{title:"审批单标题",dataIndex:"name",fixed:"left",render:function(e){return e||"--"}},{title:"审批单号",dataIndex:"_id",fixed:"left",render:function(e){return l.createElement("a",{href:"/#/Code/PayOrder/Detail?orderId=".concat(e,"&isShowOperation=true")},e)}},{title:"申请人",dataIndex:["apply_account_info","name"],fixed:"left",width:80,render:function(e){return e||"--"}},{title:"费用总金额",dataIndex:"paid_money",fixed:"left",width:100,render:function(e){return e||0===e?u.fbc.exchangePriceCentToMathFormat(e):"0.00"}},{title:"主题标签",dataIndex:"theme_label_list",render:function(e){return a(e)}},{title:"验票标签",dataIndex:"inspect_bill_label_list",render:function(e){return a(e,"inspect")}},{title:"提报类型",dataIndex:"cost_center_type",render:function(e){return e?u.Xr3.description(e):"--"}},{title:"当前审批节点",dataIndex:["current_node","name"],render:function(e){return e||"--"}},{title:"提报日期",dataIndex:"submit_at",render:function(e){return e?d()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"归属周期",dataIndex:"belong_month",render:function(e){return e||"--"}},{title:"审批流",dataIndex:["flow_info","name"],render:function(e){return e||"--"}},{title:"流程状态",dataIndex:"state",render:function(e){return e?u.DU5.description(e):"--"}},{title:"付款状态",dataIndex:"paid_state",render:function(e){return e?u.rTI.description(e):"--"}},{title:"验票状态",dataIndex:"inspect_bill_state",render:function(e){return e?u.A1w.description(e):"--"}},{title:"验票日期",dataIndex:"inspect_bill_at",render:function(e){return e?d()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}}];return l.createElement(s.Z,{rowKey:function(e,t){return e._id||t},columns:r,dataSource:[t],pagination:!1,bordered:!0,scroll:{x:2200,y:500}})}():null)},w=(n(52560),n(71577)),h=n(29439),x=n(96486),I=n.n(x),E=(n(52466),n(10642)),Z=n(87462),v=n(15861),g=n(87757),Y=n.n(g),D={labelCol:{span:8},wrapperCol:{span:16}},M=function(e){var t=e.visible,n=e.onCancel,a=e.data,i=void 0===a?{}:a,o=e.detail,d=void 0===o?{}:o,m=e.dispatch,f=d._id,s=d.ref_id,p=function(){var e=(0,v.Z)(Y().mark((function e(){var t,a;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i._id,e.next=3,m({type:"wallet/onPayBill",payload:{billDetailIds:[t]}});case 3:(a=e.sent)&&a.ok&&n&&n(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.createElement(E.Z,{title:"确认付款信息",visible:t,onOk:p,onCancel:n},l.createElement(r.Z,{className:"affairs-flow-node-time-line-form"},l.createElement(r.Z.Item,(0,Z.Z)({label:"账单编号"},D),f||"--"),l.createElement(r.Z.Item,(0,Z.Z)({label:"关联审批单号"},D),s||"--"),l.createElement(r.Z.Item,(0,Z.Z)({label:"收款人姓名"},D),c().get(i,"payee_name","--")),l.createElement(r.Z.Item,(0,Z.Z)({label:"收款人所属费用单号"},D),c().get(i,"ref_id","--")),l.createElement(r.Z.Item,(0,Z.Z)({label:"科目"},D),c().get(i,"cost_accounting_name","--")),l.createElement(r.Z.Item,(0,Z.Z)({label:"发票抬头"},D),c().get(i,"invoice_title","--")),l.createElement(r.Z.Item,(0,Z.Z)({label:"付款金额"},D),"￥",u.fbc.exchangePriceCentToMathFormat(c().get(i,"total_money",0)))))},C=n(19480),S=n(45430),T=function(e){var t=e.detail,n=void 0===t?{}:t,a=e.dispatch,r=(0,l.useState)([]),i=(0,h.Z)(r,2),c=i[0],o=i[1],f=(0,l.useState)(!1),p=(0,h.Z)(f,2),_=p[0],y=p[1],x=(0,l.useState)(!1),E=(0,h.Z)(x,2),Z=E[0],v=E[1],g=(0,l.useState)("all"),Y=(0,h.Z)(g,2),D=Y[0],T=Y[1],k=n.oa_payment_bill_detail_list,A=void 0===k?[]:k,H=n.state,B=function(e){var t;y(!1),e&&e.ok&&(t=n._id,a({type:"wallet/getWalletBillDetail",payload:{id:t}}),v(!0))},P=[{title:"收款人姓名",dataIndex:"payee_name",fixed:"left",width:110,render:function(e){return e||"--"}},{title:"收款金额",dataIndex:"total_money",fixed:"left",width:100,render:function(e){return e?u.fbc.exchangePriceCentToMathFormat(e):"0.00"}},{title:"收款人所属费用单号",dataIndex:"ref_id",width:150,render:function(e){return e||"--"}},{title:"科目",dataIndex:"cost_accounting_name",width:120,render:function(e){return e||"--"}},{title:"所属费用单发票抬头",dataIndex:"invoice_title",width:150,render:function(e){return e||"--"}},{title:"收款人BOSS账号",dataIndex:"payee_phone",width:140,render:function(e){return e||"--"}},{title:"所属费用单备注",dataIndex:"note",width:170,render:function(e){return l.createElement("div",{className:b.Z["wallet-bill-batch-pay-footer-money"]},e||"--")}},{title:"付款状态",dataIndex:"state",width:100,render:function(e){return e?u.EKV.description(e):"--"}},{title:"付款时间",dataIndex:"done_at",width:120,render:function(e){return e?d()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"操作",dataIndex:"_id",key:"operate",width:80,render:function(e,t){var n=t.state;return!S.ZP.canOperateWalletBillsPay()||n!==u.EKV.toBePaid&&n!==u.EKV.fail||H===u.EKV.void?"--":l.createElement("a",{onClick:function(){return function(e){o(e),y(!0)}(t)}},"付款")}}],N=[];N="all"===D?A:A.filter((function(e){return e.invoice_title===D}));var F,V=P.map((function(e){return e.width})).reduce((function(e,t){return e+t}));return l.createElement(m.IT,{title:l.createElement("span",{className:b.Z["wallet-bill-content-title"]},"收款人信息")},(F=I().uniqWith(A.filter((function(e){return e.invoice_title})).map((function(e){return e.invoice_title})),I().isEqual),l.createElement("div",{className:b.Z["wallet-pay-detail-payee-btn-wrap"]},l.createElement(w.Z,{type:"all"===D?"primary":null,className:b.Z["wallet-pay-detail-payee-btn"],onClick:function(){return T("all")}},"全部"),F.map((function(e){return l.createElement(w.Z,{type:D===e?"primary":null,onClick:function(){return T(e)},key:e,className:b.Z["wallet-pay-detail-payee-btn"]},e)})))),l.createElement(s.Z,{rowKey:function(e,t){return e._id||t},columns:P,dataSource:N,scroll:{x:V},bordered:!0,pagination:!1}),l.createElement(M,{data:c,detail:n,visible:_,onCancel:B,dispatch:a}),l.createElement(C.Z,{title:"确认付款信息",visible:Z,onCancel:function(){return v(!1)}}))},k=(0,a.connect)((function(e){return{walletBillDetail:e.wallet.walletBillDetail}}))((function(e){var t=e.dispatch,n=e.walletBillDetail,a=void 0===n?{}:n,r=e.location,i=(void 0===r?{}:r).query.id;return(0,l.useEffect)((function(){return i&&t({type:"wallet/getWalletBillDetail",payload:{id:i}}),function(){t({type:"wallet/resetWalletBillDetail"})}}),[t,i]),l.createElement("div",null,l.createElement(f,{detail:a}),l.createElement(y,{detail:a}),l.createElement(T,{detail:a,dispatch:t}))}))},24311:function(e,t){t.Z={"wallet-paystate-modal-wrap":"uygbhEiHxnSixoShiVUB","wallet-paystate-modal-icon":"O4Iu1ZwysQlKyIt1_CAe","wallet-paystate-modal-title":"p59fOGZ2y8jHFYe8lMKA","wallet-pay-detail-payee-btn-wrap":"oYpekOaeRU6TlM6DwwKh","wallet-pay-detail-payee-btn":"DSy0fXXQ6ZgzEUn9G2BS","wallet-bill-content-title":"DxpUdgYn6sMAs5DWjX5c","wallet-bill-batch-pay-money":"yogrmmQdqT9gyP61cjLj","wallet-bill-batch-pay-footer":"oPJfMSS0ccU5AVAVxhXm","wallet-bill-batch-pay-footer-title":"rvTQzACdA9WSFUXndfLQ","wallet-bill-batch-pay-footer-money":"A8cVyER9zuSMTmANEgI7"}}}]);