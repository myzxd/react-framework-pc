"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4115],{24115:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});n(20186);var r=n(75385),a=(n(55295),n(69713)),i=n(4942),c=n(29439),o=n(55609),u=n(67294),d=n(30381),s=n.n(d),l=n(96036),f=(n(52466),n(10642)),p=n(87462),m=(n(54071),n(14072)),h=(n(51838),n(48086)),g=n(15861),y=(n(35668),n(86585)),w=(n(9070),n(20924)),b=n(87757),O=n.n(b);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={labelCol:{span:6},wrapperCol:{span:16}},k=w.Z.TextArea,x=function(e){var t,n=e.dispatch,r=e.visible,a=e.onCancel,i=e.feedBackId,o=y.Z.useForm(),d=(0,c.Z)(o,1)[0],l=(0,u.useState)(!1),w=(0,c.Z)(l,2),b=w[0],v=w[1],x=function(){var e=(0,g.Z)(O().mark((function e(){var t,r;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.validateFields();case 2:return t=e.sent,v(!0),e.next=6,n({type:"systemManage/setDealFeedBack",payload:_({feedBackId:i},t)});case 6:(r=e.sent)&&r.ok?(h.ZP.success("请求成功"),n({type:"systemManage/getFeedBackList",payload:{page:1,limit:30}}),v(!1)):(v(!1),r.zh_message&&h.ZP.error(r.zh_message)),a&&a();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t={handleAt:s()()},u.createElement(f.Z,{title:"处理",visible:r,onOk:x,confirmLoading:b,onCancel:function(){return a()}},u.createElement(y.Z,{form:d,initialValues:t,className:"affairs-flow-basic"},u.createElement(y.Z.Item,(0,p.Z)({label:"处理完成时间",name:"handleAt",rules:[{required:!0,message:"请选择"}]},j),u.createElement(m.Z,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm"})),u.createElement(y.Z.Item,(0,p.Z)({label:"处理备注",name:"handleNote"},j),u.createElement(k,{rows:4}))))};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=(0,o.connect)((function(e){return{feedBackList:e.systemManage.feedBackList}}))((function(e){var t=e.feedBackList,n=void 0===t?{}:t,i=e.dispatch,o=(0,u.useRef)({page:1,limit:30}),d=(0,u.useState)(!1),f=(0,c.Z)(d,2),p=f[0],m=f[1],h=(0,u.useState)(void 0),g=(0,c.Z)(h,2),y=g[0],w=g[1],b=(0,u.useState)(void 0),O=(0,c.Z)(b,2),v=O[0],_=O[1];(0,u.useEffect)((function(){return _(!0),i({type:"systemManage/getFeedBackList",payload:Z(Z({},o.current),{},{setLoading:function(){return _(!1)}})}),function(){i({type:"systemManage/resetFeedBackList"})}}),[i]);var j,k,I,E,P,S,D=function(){w(void 0),m(!1)},B=function(e,t){_(!0),o.current=Z(Z({},o.current),{},{page:e,limit:t}),i({type:"systemManage/getFeedBackList",payload:Z(Z({},o.current),{},{setLoading:function(){return _(!1)}})})},M=function(e,t){_(!0),o.current=Z(Z({},o.current),{},{page:e,limit:t}),i({type:"systemManage/getFeedBackList",payload:Z(Z({},o.current),{},{setLoading:function(){return _(!1)}})})},L=function(e){w(e),m(!0)},Y=function(e){return""!==e&&e?u.createElement("div",null,e.length<=20?e:u.createElement(a.Z,{title:u.createElement("div",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},e)},u.createElement("div",null,e.length<=20?e:"".concat(e.substr(0,20),"...")))):"--"};return u.createElement(u.Fragment,null,(j=n.data,k=void 0===j?[]:j,I=n._meta,P=[{title:"分类",dataIndex:"category",fixed:"left",width:120,render:function(e){return e||"--"}},{title:"提交时间",dataIndex:"created_at",width:180,fixed:"left",render:function(e){return e?s()(String(e)).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"提交人",dataIndex:"account_name",width:100,render:function(e){return e||"--"}},{title:"账号",dataIndex:"account_phone",width:120,render:function(e){return e||"--"}},{title:"部门",dataIndex:"major_department_name",width:120,render:function(e){return e||"--"}},{title:"岗位",dataIndex:"major_job_name",width:120,render:function(e){return e||"--"}},{title:"所在城市",dataIndex:"city_name",width:100,render:function(e){return e||"--"}},{title:"所属主体",dataIndex:"third_part_name",width:150,render:function(e){return e||"--"}},{title:"选择团队",dataIndex:"team_name",width:120,render:function(e){return e||"--"}},{title:"问题描述",dataIndex:"issue_note",width:200,render:function(e){return Y(e)}},{title:"处理状态",dataIndex:"handle_state",width:100,render:function(e){return e||"--"}},{title:"处理人",dataIndex:"handle_account_name",width:100,render:function(e){return e||"--"}},{title:"处理时间",dataIndex:"handle_at",width:180,render:function(e){return e?s()(String(e)).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"备注",dataIndex:"handle_note",render:function(e){return Y(e)}},{title:"操作",dataIndex:"_id",fixed:"right",key:"operate",width:80,render:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.handle_state,r=t._id;return"待处理"===n?u.createElement("a",{onClick:function(){return L(r)}},"处理"):"--"}}],S={current:(E=void 0===I?{}:I).page||1,defaultPageSize:30,pageSize:E.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:B,onShowSizeChange:M,showTotal:function(e){return"总共".concat(e,"条")},total:E.result_count,pageSizeOptions:["10","20","30","40"]},u.createElement(l.IT,{title:"意见反馈"},u.createElement(r.Z,{rowKey:function(e,t){return e._id||t},columns:P,dataSource:k,pagination:S,bordered:!0,loading:v,scroll:{x:1990,y:500}}))),function(){if(p)return u.createElement(x,{visible:p,onCancel:D,feedBackId:y,dispatch:i})}())}))}}]);