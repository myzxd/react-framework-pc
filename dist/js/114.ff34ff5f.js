"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[114],{32022:function(e,n,t){t(29093);var o=t(16317),i=t(55609),a=t(67294),r=o.Z.Option;n.Z=(0,i.connect)((function(e){return{societyPlanList:e.society.societyPlanList}}))((function(e){var n=e.city,t=e.societyPlanList,i=void 0===t?{}:t,c=e.dispatch,l=e.onChange,p=e.initValue,s=void 0===p?void 0:p;(0,a.useEffect)((function(){return c({type:"society/fetchSocietyPlanList",payload:{city:n}}),function(){return c({type:"society/reduceSocietyPlanList",payload:{}})}}),[c,n]);var m=i.data||[];return a.createElement(o.Z,{showSearch:!0,placeholder:"请选择",onChange:function(e){l&&l(e)},allowClear:!0,defaultValue:s,optionFilterProp:"children",filterOption:function(e,n){return n.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m.map((function(e,n){return a.createElement(r,{value:e.name,key:n},e.name)})))}))},5108:function(e,n,t){t(36616);var o=t(51368),i=(t(13062),t(71230)),a=(t(89032),t(15746)),r=t(55609),c=t(67294),l=t(80385),p=t(55306),s=[{title:"养老",key:"old_age_insurance",children:["pensionBaseDown","pensionBaseUp","pensionCompany","pensionPerson"]},{title:"医疗",key:"medical_insurance",children:["medicineBaseDown","medicineBaseUp","medicineCompany","medicinePerson"]},{title:"失业",key:"unemployment_insurance",children:["loseBaseDown","loseBaseUp","loseCompany","losePerson"]},{title:"生育",key:"birth_insurance",children:["birthBaseDown","birthBaseUp","birthCompany","birthPerson"]},{title:"工伤",key:"occupational_insurance",children:["injuryBaseDown","injuryBaseUp","injuryCompany","injuryPerson"]},{title:"公积金",key:"provident_fund",children:["fundBaseDown","fundBaseUp","fundCompany","fundPerson"]}];n.Z=(0,r.connect)((function(e){var n=e.society;return{societyPlanDetail:n.societyPlanDetail,societyPlanList:n.societyPlanList}}))((function(e){var n=e.form,t=e.Item,r=e.isDetail,m=void 0!==r&&r,u=e.societyPlanDetail,y=e.selectPlanName,d=void 0===y?void 0:y,f=e.societyPlanList,h=void 0===f?{}:f;(0,c.useEffect)((function(){if(d){var e=h.data,t=function(e){return e||0===e?l.fbc.exchangePriceToYuan(e):void 0};(void 0===e?[]:e).map((function(e){if(e.name===d){var o=e.birth_insurance,i=void 0===o?{}:o,a=e.old_age_insurance,r=void 0===a?{}:a,c=e.medical_insurance,l=void 0===c?{}:c,p=e.unemployment_insurance,s=void 0===p?{}:p,m=e.occupational_insurance,u=void 0===m?{}:m,y=e.provident_fund,f=void 0===y?{}:y;n.setFieldsValue({pensionBaseDown:t(r.lower_limit),pensionBaseUp:t(r.upper_limit),pensionCompany:r.company_percent,pensionPerson:r.person_percent,medicineBaseDown:t(l.lower_limit),medicineBaseUp:t(l.upper_limit),medicineCompany:l.company_percent,medicinePerson:l.person_percent,loseBaseDown:t(s.lower_limit),loseBaseUp:t(s.upper_limit),loseCompany:s.company_percent,losePerson:s.person_percent,birthBaseDown:t(i.lower_limit),birthBaseUp:t(i.upper_limit),birthCompany:i.company_percent,birthPerson:i.person_percent,injuryBaseDown:t(u.lower_limit),injuryBaseUp:t(u.upper_limit),injuryCompany:u.company_percent,injuryPerson:u.person_percent,fundBaseDown:t(f.lower_limit),fundBaseUp:t(f.upper_limit),fundCompany:f.company_percent,fundPerson:f.person_percent})}}))}}),[d]);var v,_=function(e){var n=String(e).split(".");if(1===n.length)return"".concat(e,"%");var t=n[1].slice(0,2);return"".concat(n[0],".").concat(t,"%")},P=function(e){var n=String(e).split(".");if(1===n.length)return"".concat(e);var t=n[1].slice(0,2);return"".concat(n[0],".").concat(t)};return c.createElement(c.Fragment,null,c.createElement(c.Fragment,null,c.createElement(i.Z,{justify:"center",className:p.Z["app-comp-employee-society-title"]},c.createElement(a.Z,{span:"4",className:p.Z["app-comp-employee-society-tittle"]},"险种"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-tittle"]},"基数下限"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-tittle"]},"基数上限"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-tittle"]},"公司比例"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-tittle"]},"个人比例"))),m?(v=function(e){return e||0===e?l.fbc.exchangePriceToYuan(e):"--"},s.map((function(e,n){return c.createElement(i.Z,{justify:"center",key:n,className:p.Z["app-comp-employee-society-justify"]},c.createElement(a.Z,{span:"4"},e.title),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-bottom"]},u[e.key]?v(u[e.key].lower_limit):"--"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-bottom"]},u[e.key]?v(u[e.key].upper_limit):"--"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-bottom"]},u[e.key]?u[e.key].company_percent:"--"," %"),c.createElement(a.Z,{span:"5",className:p.Z["app-comp-employee-society-bottom"]},u[e.key]?u[e.key].person_percent:"--"," %"))}))):s.map((function(e,r){return c.createElement(i.Z,{justify:"center",key:r,className:p.Z["app-comp-employee-society-justify"]},c.createElement(a.Z,{span:"4"},e.title),c.createElement(a.Z,{span:"5"},c.createElement(t,{name:e.children[0],rules:[{validator:function(t,o){var i=n.getFieldValue(e.children[1]);return(o||0===o)&&i&&i<o?Promise.reject("".concat(e.title,"基数下限不能大于上限")):Promise.resolve()}}]},c.createElement(o.Z,{min:0,placeholder:"请输入",formatter:P,onChange:function(t){n.getFieldValue(e.children[1])>=t&&n.validateFields([e.children[1]])},className:p.Z["app-comp-employee-society-input"]}))),c.createElement(a.Z,{span:"5"},c.createElement(t,{name:e.children[1],rules:[{validator:function(t,o){var i=n.getFieldValue(e.children[0]);return(o||0===o)&&i&&i>o?Promise.reject("".concat(e.title,"基数上限不能小于下限")):Promise.resolve()}}]},c.createElement(o.Z,{min:0,placeholder:"请输入",formatter:P,onChange:function(t){n.getFieldValue(e.children[0])<=t&&n.validateFields([e.children[0]])},className:p.Z["app-comp-employee-society-input"]}))),c.createElement(a.Z,{span:"5"},c.createElement(t,{name:e.children[2],rules:[{validator:function(t,o){var i=n.getFieldValue(e.children[3]);return i&&i+o>100?Promise.reject("".concat(e.title,"公司与个人比例之和不能大于100%")):Promise.resolve()}}]},c.createElement(o.Z,{min:0,max:100,placeholder:"请输入",formatter:_,parser:function(e){return e.replace("%","")},onChange:function(t){n.getFieldValue(e.children[3])+Math.floor(100*Number(t))/100<=100&&n.validateFields([e.children[3]])},className:p.Z["app-comp-employee-society-input"]}))),c.createElement(a.Z,{span:"5"},c.createElement(t,{name:e.children[3],rules:[{validator:function(t,o){var i=n.getFieldValue(e.children[2]);return i&&i+o>100?Promise.reject("".concat(e.title,"公司与个人比例之和不能大于100%")):Promise.resolve()}}]},c.createElement(o.Z,{min:0,max:100,formatter:_,parser:function(e){return e.replace("%","")},onChange:function(t){n.getFieldValue(e.children[2])+Math.floor(100*Number(t))/100<=100&&n.validateFields([e.children[2]])},placeholder:"请输入",className:p.Z["app-comp-employee-society-input"]}))))})))}))},50114:function(e,n,t){t.r(n);t(52466);var o=t(10642),i=(t(52560),t(71577)),a=(t(13062),t(71230)),r=(t(89032),t(15746)),c=(t(55295),t(69713)),l=(t(9070),t(20924)),p=t(4942),s=t(29439),m=(t(35668),t(86585)),u=t(67294),y=t(55609),d=t(1870),f=t(96036),h=t(88144),v=t(80385),_=t(32022),P=t(5108),E=t(55306);function Z(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Z(Object(t),!0).forEach((function(n){(0,p.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var b=m.Z.Item;n.default=(0,y.connect)((function(e){return{societyPlanDetail:e.society.societyPlanDetail}}))((function(e){var n=e.match,t=e.dispatch,p=e.location,y=e.societyPlanDetail,Z=void 0===y?{}:y,w=e.history,C=(0,u.useState)(!1),j=(0,s.Z)(C,2),g=j[0],D=j[1],U=(0,u.useState)(0),k=(0,s.Z)(U,2),N=k[0],F=k[1],S=(0,u.useState)(!0),O=(0,s.Z)(S,2),V=O[0],L=O[1],T=(0,u.useState)(void 0),q=(0,s.Z)(T,2),I=q[0],x=q[1],Y=m.Z.useForm(),z=(0,s.Z)(Y,1)[0];(0,u.useEffect)((function(){if("/Employee/Society/Update"===n.path)return L(!1),t({type:"society/fetchSocietyPlanDetail",payload:{id:p.query.id}}),function(){t({type:"society/reducerSocietyPlanDetail",payload:{}})}}),[n,t,p]),(0,u.useEffect)((function(){!V&&Z._id&&K()}),[Z]);var J,X,A,Q=function(e){return e||0===e?v.fbc.exchangePriceToYuan(e):void 0},K=function(){var e=Z.province_code,n=Z.city_code,t=Z.name,o=Z.old_age_insurance,i=Z.medical_insurance,a=Z.unemployment_insurance,r=Z.occupational_insurance,c=Z.birth_insurance,l=Z.provident_fund,p={city:{province:e,city:n,area:void 0},planName:t,pensionBaseUp:Q(o.upper_limit),pensionBaseDown:Q(o.lower_limit),pensionCompany:o.company_percent,pensionPerson:o.person_percent,medicineBaseUp:Q(i.upper_limit),medicineBaseDown:Q(i.lower_limit),medicineCompany:i.company_percent,medicinePerson:i.person_percent,loseBaseUp:Q(a.upper_limit),loseBaseDown:Q(a.lower_limit),loseCompany:a.company_percent,losePerson:a.person_percent,birthBaseUp:Q(c.upper_limit),birthBaseDown:Q(c.lower_limit),birthCompany:c.company_percent,birthPerson:c.person_percent,injuryBaseUp:Q(r.upper_limit),injuryBaseDown:Q(r.lower_limit),injuryCompany:r.company_percent,injuryPerson:r.person_percent,fundBaseUp:Q(l.upper_limit),fundBaseDown:Q(l.lower_limit),fundCompany:l.company_percent,fundPerson:l.person_percent};z.setFieldsValue(p)},M=function(){z.resetFields()},R=function(e){if(e){var n=String(e).split(".");if(1===n.length)return e;var t=n[1].slice(0,2);return Number("".concat(n[0],".").concat(t))}return e},W=function(){z.validateFields().then((function(e){var n={pensionCompany:R(e.pensionCompany),pensionPerson:R(e.pensionPerson),medicineCompany:R(e.medicineCompany),medicinePerson:R(e.medicinePerson),loseCompany:R(e.loseCompany),losePerson:R(e.losePerson),birthCompany:R(e.birthCompany),birthPerson:R(e.birthPerson),injuryCompany:R(e.injuryCompany),injuryPerson:R(e.injuryPerson),fundCompany:R(e.fundCompany),fundPerson:R(e.fundPerson),pensionBaseDown:R(e.pensionBaseDown),pensionBaseUp:R(e.pensionBaseUp),medicineBaseDown:R(e.medicineBaseDown),medicineBaseUp:R(e.medicineBaseUp),loseBaseDown:R(e.loseBaseDown),loseBaseUp:R(e.loseBaseUp),birthBaseDown:R(e.birthBaseDown),birthBaseUp:R(e.birthBaseUp),injuryBaseDown:R(e.injuryBaseDown),injuryBaseUp:R(e.injuryBaseUp),fundBaseDown:R(e.fundBaseDown),fundBaseUp:R(e.fundBaseUp)};t(V?{type:"society/createSociety",payload:B(B({},e),{},{onComplete:H},n)}:{type:"society/updateSociety",payload:B(B({},e),{},{onComplete:H,id:p.query.id},n)})}))},H=function(e){V||0===e?G():(F(e),D(!0))},G=function(){window.location.href="/#/Employee/Society"},$=function(e){x(e)};return u.createElement("div",null,u.createElement(m.Z,{form:z,name:"society",labelAlign:"right",labelCol:{span:8,offset:2}},(X=[u.createElement(b,{label:"城市",name:"city",rules:[{required:!0,validator:function(e,n){return n&&n.city?Promise.resolve():Promise.reject("请选择城市")}}]},u.createElement(h.TJ,{isHideArea:!0,disabled:!V,style:{province:{width:120,marginRight:10},city:{width:120}}}))],A=[u.createElement(b,{label:"参保方案名称",name:"planName",rules:[{required:!0,validator:function(e,n){return n?n.trim()?Promise.resolve():Promise.reject("请输入非空格名称"):Promise.reject("请输入参保方案名称")}}]},u.createElement(l.Z,{placeholder:"请输入"}))],u.createElement(f.IT,{title:"设置方案基本信息"},u.createElement(f.Fp,{items:A,cols:3}),u.createElement(f.Fp,{items:X,cols:3}))),(J=u.createElement("span",null,"方案名称 ",u.createElement(c.Z,{placement:"top",title:"选择已经成功设置的社保方案，可以复用该方案的基数和比例信息"},u.createElement(d.Z,null))),u.createElement(f.IT,{title:"参保方案配置"},u.createElement(a.Z,null,u.createElement(r.Z,{span:8},u.createElement(b,{label:J,name:"selectPlanTip"},u.createElement(_.Z,{onChange:$})))),u.createElement(P.Z,{Item:b,form:z,selectPlanName:I}))),V?u.createElement("div",{className:E.Z["app-comp-employee-society-form-button-wrap"]},u.createElement(i.Z,{onClick:M},"重置"),u.createElement(i.Z,{type:"primary",onClick:W},"提交")):u.createElement("div",{className:E.Z["app-comp-employee-society-form-button-wrap"]},u.createElement(i.Z,{onClick:function(){w.go(-1)}},"返回"),u.createElement(i.Z,{type:"primary",onClick:W},"保存方案"))),g?u.createElement(o.Z,{title:"提示",visible:!0,onCancel:G,footer:null},u.createElement("p",null,"该方案已修改成功，有",N,"个员工社保基数已经超出当前方案设置的基数区间值，请记得修改"),u.createElement("div",{className:E.Z["app-comp-employee-society-modal-footer"]},u.createElement(i.Z,{onClick:G,type:"primary"},"知道了"))):null)}))},55306:function(e,n){n.Z={"app-comp-employee-society-title":"agDEbjhxVOczLwPXCW7g","app-comp-employee-society-justify":"bT1LuXLznav6PX5Pgz2_","app-comp-employee-society-input":"r00JZljFwQVS8BeqTzug","app-comp-employee-society-top":"KrkBsWJvm2vlMJQSQv5z","app-comp-employee-society-bottom":"oqTejn7FyLvSbEN9lebA","app-comp-employee-society-form-button-wrap":"dIPRpTKIYylptHW0dbS_","app-comp-employee-society-a":"mq4mEnuUADaunIbvwXCF","app-comp-employee-society-modal-footer":"VYyNqo7BB7qR9q9wcKnQ","app-comp-employee-society-tittle":"BXDSndSY28kJpEg_kvh1"}}}]);