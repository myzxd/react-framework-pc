"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[8823],{38823:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var r=n(87462),o=(n(20186),n(75385)),a=n(4942),i=n(29439),c=n(93517),s=n.n(c),u=n(55609),l=n(67294),p=(n(9070),n(20924)),f=n(15671),d=n(97326),m=n(60136),h=n(82963),y=n(61120),O=n(45697),g=n.n(O),b=n(88144),w=n(96036);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var o=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,h.Z)(this,n)}}var S=function(e){(0,m.Z)(n,e);var t=v(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,e),(0,a.Z)((0,d.Z)(r),"onChangeSuppliers",(function(){(0,r.form.setFieldsValue)({cities:[]})})),(0,a.Z)((0,d.Z)(r),"onChangePlatforms",(function(){(0,r.form.setFieldsValue)({suppliers:[],cities:[]})})),(0,a.Z)((0,d.Z)(r),"onSearch",(function(e){var t=r.props.onSearch,n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);t&&t(n)})),(0,a.Z)((0,d.Z)(r),"onReset",(function(){var e=r.props.onSearch;e&&e({})})),(0,a.Z)((0,d.Z)(r),"onHookForm",(function(e){r.form=e})),(0,a.Z)((0,d.Z)(r),"render",(function(){var e={items:[{label:"平台",form:function(e){return e.getFieldDecorator("platforms")(l.createElement(b.Yg,{showSearch:!0,optionFilterProp:"children",placeholder:"请选择平台",onChange:r.onChangePlatforms}))}},{label:"供应商",form:function(e){return e.getFieldDecorator("suppliers")(l.createElement(b.o2,{showSearch:!0,platforms:e.getFieldValue("platforms"),optionFilterProp:"children",placeholder:"请选择供应商",onChange:r.onChangeSuppliers}))}},{label:"城市",form:function(e){return e.getFieldDecorator("cities")(l.createElement(b.Wn,{showSearch:!0,optionFilterProp:"children",isExpenseModel:!0,placeholder:"请选择城市",platforms:e.getFieldValue("platforms"),suppliers:e.getFieldValue("suppliers")}))}},{label:"商圈",form:function(e){return e.getFieldDecorator("name")(l.createElement(p.Z,{placeholder:"请输入商圈名称"}))}},{label:"商圈BOSS ID",form:function(e){return e.getFieldDecorator("bossId")(l.createElement(p.Z,{placeholder:"请输入商圈BOSS ID"}))}}],operations:r.props.operations,expand:!0,onReset:r.onReset,onSearch:r.onSearch,onHookForm:r.onHookForm};return l.createElement(w.IT,null,l.createElement(w.yL,e))})),r.state={},r.form={},r}return n}(l.Component);(0,a.Z)(S,"propTypes",{onSearch:g().func,operations:g().array}),(0,a.Z)(S,"defaultProps",{onSearch:function(){},operations:[]});var P=S,C=n(80385),E=(n(52466),n(10642)),j=(n(35668),n(86585)),D=n(30381),k=n.n(D),I=n(43144),_=n(94315),F=n.n(_),B=n(96486),x=n.n(B),R=n(8240);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,y.Z)(e);if(t){var o=(0,y.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,h.Z)(this,n)}}var V=w.Hr.Option,Y=function(e){(0,m.Z)(n,e);var t=H(n);function n(){var e;(0,f.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,a.Z)((0,d.Z)(e),"onSearch",x().debounce((function(t){t&&e.props.dispatch({type:"ownerBusiness/fetchOwnerId",payload:{name:t}})}),800)),(0,a.Z)((0,d.Z)(e),"onChange",(function(t){var n=e.props.businessOwner,r=(void 0===n?[]:n).filter((function(e){return e._id===t}));e.props.onChange&&e.props.onChange(t,r[0])})),e}return(0,I.Z)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"ownerBusiness/reduceBusinessOwner",payload:{}})}},{key:"componentDidUpdate",value:function(e){this.props.tiemStamp!==e.tiemStamp&&this.props.dispatch({type:"ownerBusiness/reduceBusinessOwner",payload:{}})}},{key:"render",value:function(){var e,t=this.props.businessOwner,n=void 0===t?[]:t;F().not.empty(n)&&F().existy(n)&&(e=n.map((function(e){return l.createElement(V,{value:e._id,key:e._id},"".concat(e.staff_info.name,"（").concat(e._id,"）"))})));var o=T(T({},(0,R.CE)(["dispatch","businessOwner","tiemStamp","platformCode","supplierId"],this.props)),{},{placeholder:"请输入姓名搜索",showSearch:!0,defaultActiveFirstOption:!1,showArrow:!1,allowClear:!0,filterOption:!1,onChange:this.onChange,onSearch:this.onSearch,notFoundContent:null});return l.createElement(w.Hr,(0,r.Z)({},o,{style:{width:260}}),e)}}]),n}(l.Component);(0,a.Z)(Y,"propTypes",{businessOwner:g().array,tiemStamp:g().number}),(0,a.Z)(Y,"defaultProps",{businessOwner:[],tiemStamp:0});var z=(0,u.connect)((function(e){return{businessOwner:e.ownerBusiness.businessOwner}}))(Y);var A=(0,u.connect)((function(e){return{nothingOwnerData:e.nothingOwner.nothingOwnerData}}))((function(e){var t,n,o=j.Z.useForm(),a=(0,i.Z)(o,1)[0],c=(0,l.useState)({}),u=(0,i.Z)(c,2),p=u[0],f=u[1],d=function(){a.resetFields(),f({}),e.onChangeModalParams&&e.onChangeModalParams({})};return l.createElement(E.Z,{title:"添加业务承揽",visible:e.visible,onOk:function(){a.validateFields().then((function(t){var n={id:t.ownerId,districts:e.districtId,effectTime:Number(k()().format("YYYYMMDD")),onSuccessCallBack:function(){e.onSuccessCallBack(),d()}};e.dispatch({type:"teamManager/fetchOwnerCreateScope",payload:n})}))},onCancel:d},l.createElement(j.Z,{form:a},(t={labelCol:{span:4},wrapperCol:{span:16}},n=[l.createElement(j.Z.Item,(0,r.Z)({},t,{label:"业主姓名",name:"ownerId",rules:[{required:!0,message:"请输入业主姓名"}]}),l.createElement(z,{onChange:function(e,t){return f(t)}})),l.createElement(j.Z.Item,(0,r.Z)({},t,{label:"身份证号"}),s().get(p,"staff_info.identity_card_id","--")),l.createElement(j.Z.Item,(0,r.Z)({},t,{label:"手机号"}),s().get(p,"staff_info.phone","--")),l.createElement(j.Z.Item,(0,r.Z)({},t,{label:"人员ID"}),s().get(p,"staff_info._id","--")),l.createElement(j.Z.Item,(0,r.Z)({},t,{label:"生效日期"}),"立即生效")],l.createElement(w.Fp,{cols:1,items:n}))))}));function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q=(0,u.connect)((function(e){return{nothingOwnerData:e.nothingOwner.nothingOwnerData}}))((function(e){var t=e.dispatch,n=(0,l.useState)({page:1,limit:30}),a=(0,i.Z)(n,2),c=a[0],u=a[1],p=(0,l.useState)({}),f=(0,i.Z)(p,2),d=f[0],m=f[1],h=(0,l.useState)({}),y=(0,i.Z)(h,2),O=y[0],g=y[1],b=s().get(e,"nothingOwnerData",{});(0,l.useEffect)((function(){return t({type:"nothingOwner/fetchNothingOwnerList",payload:L({meta:c},O)}),function(){t({type:"nothingOwner/reduceNothingOwner",payload:{}})}}),[t,c,O]);var Z,v,S=function(e){g(e),u({page:1,limit:30})},E=function(e,t){u({page:e,limit:t})},j=function(e,t){u({page:e,limit:t})};return l.createElement(l.Fragment,null,l.createElement(P,{onSearch:S}),(Z=[{title:"商圈名称",dataIndex:"name",key:"name",render:function(e){return e||"--"}},{title:"商圈三方ID",dataIndex:"custom_id",key:"custom_id",render:function(e){return e||"--"}},{title:"商圈BOSS ID",dataIndex:"_id",key:"_id",render:function(e){return e||"--"}},{title:"商圈状态",dataIndex:"state",key:"state",render:function(e){return e?C.hQm.description(e):"--"}},{title:"平台",dataIndex:"platform_name",key:"platform_name",render:function(e){return e||"--"}},{title:"供应商",dataIndex:"supplier_name",key:"supplier_name",render:function(e){return e||"--"}},{title:"城市",dataIndex:"city_name",key:"city_name",render:function(e){return e||"--"}},{title:"操作",dataIndex:"operation",key:"operation",width:150,render:function(e,t){return l.createElement(l.Fragment,null,l.createElement("a",{onClick:function(){return m({visible:!0,districtId:t._id})}},"添加业务承揽"))}}],v={current:c.page,pageSize:c.limit,onChange:E,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:j,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:s().get(b,"_meta.result_count",0)},l.createElement(w.IT,null,l.createElement(o.Z,{rowKey:function(e){return e._id},pagination:v,dataSource:s().get(b,"data",[]),columns:Z,bordered:!0}))),l.createElement(A,(0,r.Z)({},d,{onSuccessCallBack:function(){u({page:1,limit:30})},onChangeModalParams:m})))}))}}]);