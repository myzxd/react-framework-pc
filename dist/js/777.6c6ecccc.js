"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[777],{30777:function(e,t,r){r.r(t),r.d(t,{default:function(){return M}});r(13062);var n=r(71230),a=(r(52560),r(71577)),o=(r(20186),r(75385)),c=(r(18085),r(55241)),i=r(15671),l=r(43144),u=r(97326),s=r(60136),p=r(82963),f=r(61120),h=r(4942),m=r(67294),d=r(55609),y=r(93517),v=r.n(y),g=r(66939),Z=(r(98703),r(44654)),S=r(30381),b=r.n(S),O=r(96036),w=r(97116),C=(r(35668),r(86585)),P=(r(29093),r(16317)),k=r(88144);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var j=P.Z.Option,R=function(e){(0,s.Z)(r,e);var t=E(r);function r(e){var n;return(0,i.Z)(this,r),n=t.call(this,e),(0,h.Z)((0,u.Z)(n),"onReset",(function(){n.state.onSearch&&n.onSearch()})),(0,h.Z)((0,u.Z)(n),"onSearch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.state.onSearch,r=e.platforms,a=e.distributeType,o={platforms:r,distributeType:a,page:1,limit:30};t&&t(o)})),(0,h.Z)((0,u.Z)(n),"onHookForm",(function(e){n.setState({form:e})})),(0,h.Z)((0,u.Z)(n),"render",(function(){var e={items:[m.createElement(C.Z.Item,{label:"平台",name:"platforms"},m.createElement(k.Yg,{allowClear:!0,showSearch:!0,mode:"multiple",showArrow:!0,optionFilterProp:"children",placeholder:"请选择平台",onChange:n.onChangePlatform})),m.createElement(C.Z.Item,{label:"分配情况",name:"distributeType"},m.createElement(P.Z,{allowClear:!0,placeholder:"请选择分配情况",onChange:n.onChangeDistributeType},m.createElement(j,{key:1,value:"1"},"未分配"),m.createElement(j,{key:2,value:"2"},"已分配")))],onReset:n.onReset,onSearch:n.onSearch,onHookForm:n.onHookForm,expand:!0};return m.createElement(O.IT,null,m.createElement(O.j6,e))})),n.state={form:void 0,search:{platforms:[],distributeType:""},onSearch:e.onSearch||void 0},n}return r}(m.Component),D=R,_="EDbWmkmwbp6O5Yd6uGjB";function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){(0,h.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,f.Z)(e);if(t){var a=(0,f.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var B=function(e){(0,s.Z)(r,e);var t=T(r);function r(e){var l;return(0,i.Z)(this,r),l=t.call(this,e),(0,h.Z)((0,u.Z)(l),"onChangePage",(function(e,t){var r=l.private.searchParams;r.page=e,r.limit=t,l.onSearch(r)})),(0,h.Z)((0,u.Z)(l),"onShowSizeChange",(function(e,t){var r=l.private.searchParams;r.page=e,r.limit=t,l.onSearch(r)})),(0,h.Z)((0,u.Z)(l),"onSearch",(function(e){var t=l.private.searchParams;l.private.searchParams=I(I({},t),e),l.props.dispatch({type:"supplierManage/fetchCityDistribution",payload:l.private.searchParams})})),(0,h.Z)((0,u.Z)(l),"renderSearch",(function(){var e=(0,u.Z)(l).onSearch;return m.createElement(D,{onSearch:e})})),(0,h.Z)((0,u.Z)(l),"renderContent",(function(){var e=l.props.dataSource,t=l.private.searchParams,r=t.page,i=[{title:"平台",dataIndex:"platform_code",key:"platform_code",render:function(e){return w.Iq.platformFilter(e)}},{title:"城市",dataIndex:"city_name",key:"city_name",render:function(e){return e||"--"}},{title:"分配状态",dataIndex:"allot",key:"allot",render:function(e){return 1===e?"未分配":"已分配"}},{title:"当前归属供应商",dataIndex:"supplier_name_list",key:"supplier_name_list",render:function(e){var t=e,r=[];if("[object String]"===Object.prototype.toString.call(t)&&(t=[t]),0===t.length)return"--";if(1===t.length&&(r=t[0]),t.length>1){var n=m.createElement("p",{className:_},t.join(","));r=m.createElement(c.Z,{placement:"top",content:n,trigger:"hover"},t[0],"等",t.length,"个供应商")}return r}},{title:"状态",dataIndex:"state",key:"state",render:function(){return"启用"}},{title:"创建时间",dataIndex:"created_at",key:"created_at",render:function(e){return b()(e).format("YYYY-MM-DD HH:mm")}}],u={current:void 0===r?1:r,pageSize:t.limit,onChange:l.onChangePage,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:l.onShowSizeChange,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:v().get(e,"_meta.result_count",0)};return m.createElement(O.IT,null,m.createElement(o.Z,{rowKey:function(e,t){return t},dataSource:v().get(e,"data",[]),columns:i,pagination:u,bordered:!0,scroll:{x:1e3,y:550}}),m.createElement(n.Z,{justify:"center",type:"flex",className:"app-global-mgt16"},m.createElement(a.Z,null,m.createElement(Z.Link,{to:"/System/Supplier/Manage"},"返回"))))})),(0,h.Z)((0,u.Z)(l),"render",(function(){var e=(0,u.Z)(l),t=e.renderSearch,r=e.renderContent;return m.createElement("div",null,t(),r())})),l.private={searchParams:{page:1,limit:30}},l}return(0,l.Z)(r,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"supplierManage/fetchCityDistribution",payload:{page:1,limit:30}})}}]),r}(m.Component);var M=g.Z.create()((0,d.connect)((function(e){var t=e.supplierManage.cityDistributeList;return{dataSource:void 0===t?{}:t}}))(B))}}]);