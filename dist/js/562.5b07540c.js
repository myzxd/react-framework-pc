"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[562],{70562:function(e,t,n){n.r(t);n(20186);var a=n(75385),r=(n(55295),n(69713)),o=n(15671),i=n(43144),c=n(97326),p=n(60136),s=n(82963),u=n(61120),l=n(4942),g=n(30381),f=n.n(g),m=n(67294),h=n(55609),d=n(96036),y=n(80385),Z=n(8260);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var C=function(e){(0,p.Z)(n,e);var t=v(n);function n(){var e;return(0,o.Z)(this,n),e=t.call(this),(0,l.Z)((0,c.Z)(e),"onPaginationChange",(function(t,n){e.private.pageConfig.page=t,e.private.pageConfig.limit=n,e.fetchTableData()})),(0,l.Z)((0,c.Z)(e),"onSizeChange",(function(t,n){e.private.pageConfig.page=1,e.private.pageConfig.limit=n,e.fetchTableData()})),(0,l.Z)((0,c.Z)(e),"fetchTableData",(function(){var t=e.props.location.query.id;if(!t)return!1;e.props.dispatch({type:"districtManage/fetchAssetsChangLog",payload:{pageConfig:e.private.pageConfig,id:t}})})),(0,l.Z)((0,c.Z)(e),"renderTableData",(function(){var t=e.private.pageConfig,n=t.page,o=t.limit,i=e.props.assetsChangeLog,c=i.data,p=void 0===c?[]:c,s=i._meta,u=(s=void 0===s?{}:s).result_count,l=void 0===u?0:u,g=[{title:"变更时间",dataIndex:"created_at",key:"created_at",render:function(e){return e?f()(e).format("YYYY-MM-DD HH:mm"):"--"}},{title:"变更类型",dataIndex:"domain",key:"domain",render:function(e){return e?y.ym0.description(e):"--"}},{title:"变更前信息",dataIndex:"raw_change_info",key:"raw_change_info",render:function(e){return e&&e.length>0?e.map((function(e,t){return e.length>30?m.createElement(r.Z,{title:e},m.createElement("p",{className:Z.Z["app-comp-assets-change-log-p"],key:t},e.slice(0,20),"...")):m.createElement("p",{className:Z.Z["app-comp-assets-change-log-p"],key:t},e)})):"--"}},{title:"变更后信息",dataIndex:"now_change_info",key:"now_change_info",render:function(e){return e&&e.length>0?e.map((function(e,t){return e.length>30?m.createElement(r.Z,{title:e},m.createElement("p",{className:Z.Z["app-comp-assets-change-log-p"],key:t},e.slice(0,20),"...")):m.createElement("p",{className:Z.Z["app-comp-assets-change-log-p"],key:t},e)})):"--"}},{title:"操作人",dataIndex:"creator_info",key:"creator_info.name",render:function(e){return e&&e.name?e.name:"--"}}],h={current:n,pageSize:o,onChange:e.onPaginationChange,showSizeChanger:!0,onShowSizeChange:e.onSizeChange,pageSizeOptions:["10","20","30","40"],total:l};return m.createElement(a.Z,{columns:g,dataSource:p,pagination:h,bordered:!0,rowKey:function(e,t){return e._id||t}})})),e.private={pageConfig:{page:1,limit:30}},e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.fetchTableData()}},{key:"render",value:function(){return m.createElement(d.IT,{title:"变更记录"},this.renderTableData())}}]),n}(m.Component);t.default=(0,h.connect)((function(e){return{assetsChangeLog:e.districtManage.assetsChangeLog}}))(C)},8260:function(e,t){t.Z={"app-comp-system-district-del-btn":"jwD1LvdcMiOq9ISvTQhf","app-comp-system-detail-btn-wrap":"iMh94cAeGHVtBoIPZXCU","app-comp-detail-submit-btn":"ROgN_HyK56SizprERAwh","app-comp-system-create-btn-wrap":"tfTHSqZExFAOKK9c_zyQ","app-comp-system-create-submit-btn":"q7gunAFgBXHJNXMgYytn","app-comp-system-create-next-btn":"tX1_h7uYFDp29Z41QSe9","app-comp-assets-change-log-p":"H8h1eSai6pXBrOWkco7d"}}}]);