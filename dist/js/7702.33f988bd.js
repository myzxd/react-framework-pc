"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7702],{97702:function(e,r,t){t.r(r),t.d(r,{default:function(){return D}});var n=t(15671),a=t(43144),o=t(97326),l=t(60136),p=t(82963),i=t(61120),c=t(4942),f=t(93517),s=t.n(f),u=t(55609),d=t(45697),m=t.n(d),y=t(67294),_=t(80385),b=t(96036),h=(t(19597),t(27279)),g=t(45430);function v(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,i.Z)(e);if(r){var a=(0,i.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,p.Z)(this,t)}}var Z=h.Z.Panel,C=b.KT.CoreFinderList,w=function(e){(0,l.Z)(t,e);var r=v(t);function t(e){var a;return(0,n.Z)(this,t),a=r.call(this,e),(0,c.Z)((0,o.Z)(a),"renderBorrowingPeopleInfo",(function(e){var r=[];g.ZP.canOperateExpenseBorrowOrderDetail()?r.push(y.createElement("a",{key:"detail",href:"/#/Expense/BorrowingRepayments/Borrowing/Detail?approvalId=".concat(e.loan_order_id,"&orderId=").concat(e.loan_order_info.application_order_id),target:"_blank",rel:"noopener noreferrer"},s().get(e,"loan_order_id","--"))):r.push(y.createElement("span",{key:"operate"},s().get(e,"loan_order_id","--")));var t=[{label:"借款单号",span:8,layout:{labelCol:{span:8},wrapperCol:{span:14}},form:y.createElement("span",null,r)},{label:"借款类型",span:8,layout:{labelCol:{span:9},wrapperCol:{span:14}},form:s().get(e,"loan_order_info.loan_type",0)?_.eLy.description(s().get(e,"loan_order_info.loan_type",0)):"--"},{label:"借款事由",span:8,layout:{labelCol:{span:8},wrapperCol:{span:14}},form:s().get(e,"loan_order_info.loan_note","--")},{label:"申请人",span:8,layout:{labelCol:{span:8},wrapperCol:{span:14}},form:s().get(e,"apply_account_info.name","--")},{label:"实际借款人",span:14,layout:{labelCol:{span:5},wrapperCol:{span:14}},form:s().get(e,"loan_order_info.actual_loan_info.name","--")},{label:"借款金额 (元)",span:8,layout:{labelCol:{span:8},wrapperCol:{span:14}},form:_.fbc.exchangePriceCentToMathFormat(s().get(e,"loan_order_info.loan_money",0))},{label:"已还金额 (元)",span:8,layout:{labelCol:{span:9},wrapperCol:{span:14}},form:_.fbc.exchangePriceCentToMathFormat(s().get(e,"loan_order_info.repayment_money",0))},{label:"未还金额 (元)",span:8,layout:{labelCol:{span:8},wrapperCol:{span:14}},form:_.fbc.exchangePriceCentToMathFormat(s().get(e,"loan_order_info.non_repayment_money",0))}];return y.createElement(b.IT,{title:"借款信息"},y.createElement(b.KP,{items:t}))})),(0,c.Z)((0,o.Z)(a),"renderCorePreview",(function(e){if(Array.isArray(e)&&s().get(e,"0.file_url")){var r=e.map((function(e){return{key:e.file_name,url:e.file_url}}));return y.createElement(C,{data:r,enableTakeLatest:!1})}return"--"})),(0,c.Z)((0,o.Z)(a),"renderRepaymentsInfo",(function(e){var r=[{label:"还款方式",form:s().get(e,"loan_order_info.repayment_method",0)?_.d5u.description(s().get(e,"loan_order_info.repayment_method",0)):"--"},{label:"还款周期",form:s().get(e,"loan_order_info.repayment_cycle",0)?_.kHJ.description(s().get(e,"loan_order_info.repayment_cycle",0)):"--"},{label:"还款金额(元)",form:s().get(e,"repayment_money",0)?_.fbc.exchangePriceCentToMathFormat(s().get(e,"repayment_money",0)):"--"},{label:"备注",form:s().get(e,"repayment_note","--")||"--"},{label:"上传附件",form:a.renderCorePreview(s().get(e,"assert_file_list",[]))}];return y.createElement(b.IT,{title:"还款信息"},y.createElement(b.KP,{items:r,cols:3,layout:{labelCol:{span:6},wrapperCol:{span:17}}}))})),(0,c.Z)((0,o.Z)(a),"render",(function(){var e=a.props.repaymentDetail;return 0===Object.keys(e).length?null:y.createElement(b.IT,{title:"还款单"},y.createElement(h.Z,{bordered:!1,defaultActiveKey:["0"]},[e].map((function(e,r){var t="还款单号:".concat(" ",e._id);return y.createElement(Z,{header:t,key:r},a.renderBorrowingPeopleInfo(e),a.renderRepaymentsInfo(e))}))))})),a.state={},a}return t}(y.Component);(0,c.Z)(w,"propTypes",{repaymentDetail:m().object}),(0,c.Z)(w,"defaultProps",{repaymentDetail:{}});var R=w,I=t(2671);function E(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,i.Z)(e);if(r){var a=(0,i.Z)(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return(0,p.Z)(this,t)}}var P=function(e){(0,l.Z)(t,e);var r=E(t);function t(e){var a;return(0,n.Z)(this,t),a=r.call(this,e),(0,c.Z)((0,o.Z)(a),"renderBaseInfo",(function(){var e=a.props.repaymentDetail.application_order_info,r=void 0===e?{}:e,t=[{label:"审批单号",form:s().get(r,"_id","--")},{label:"申请人",form:s().get(r,"apply_account_info.name","--")},{label:"总金额",form:_.fbc.exchangePriceCentToMathFormat(s().get(r,"total_money",0))},{label:"审批类型",form:"".concat(_.ZBL.description(s().get(r,"application_order_type")))},{label:"审批流程",form:s().get(r,"flow_info.name","--")}];return y.createElement(b.IT,null,y.createElement(b.KP,{items:t,cols:4,layout:{labelCol:{span:10},wrapperCol:{span:14}}}))})),(0,c.Z)((0,o.Z)(a),"renderRepaymentsInfo",(function(){var e=a.props.repaymentDetail;return y.createElement(R,{repaymentDetail:e})})),(0,c.Z)((0,o.Z)(a),"renderAuditRecordsInfo",(function(){var e=a.state.orderId,r=a.props,t=r.flowRecordList,n=r.repaymentDetail;if(0===t.length)return null;var o=n.apply_account_id,l=n.operate_accounts_list,p=n.file_url_list,i=n.application_order_info.current_flow_node;return y.createElement(I.Z,{isOpera:!1,applyAccountId:o,orderId:e,data:t,currentFlowNode:i,dispatch:a.props.dispatch,accountList:l,fileUrlList:p})})),(0,c.Z)((0,o.Z)(a),"render",(function(){var e=a.props.repaymentDetail;return 0===Object.keys(e).length?y.createElement("div",null):y.createElement("div",null,a.renderBaseInfo(),a.renderRepaymentsInfo(),a.renderAuditRecordsInfo())})),a.state={orderId:s().get(e,"location.query.orderId",void 0),repaymentOrderId:s().get(e,"location.query.repaymentOrderId",void 0)},a}return(0,a.Z)(t,[{key:"componentDidMount",value:function(){var e=this.state,r=e.repaymentOrderId,t=e.orderId;this.props.dispatch({type:"borrowingRepayment/fetchRepaymentsDetails",payload:{id:r}}),this.props.dispatch({type:"borrowingRepayment/fetchExamineOrderFlowRecordList",payload:{id:t}})}}]),t}(y.Component);(0,c.Z)(P,"propTypes",{repaymentDetail:m().object,flowRecordList:m().array}),(0,c.Z)(P,"defaultProps",{repaymentDetail:{},flowRecordList:[]});var D=(0,u.connect)((function(e){var r=e.borrowingRepayment;return{repaymentDetail:r.repaymentDetail,flowRecordList:r.flowRecordList}}))(P)}}]);