"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4093],{37636:function(e,t,n){n.d(t,{Z:function(){return v}});var o=n(87462),a=n(4942),r=n(67294),i=n(94184),l=n.n(i),c=n(7085),d=n(65632),m=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},p=function(e){var t,n,i=e.prefixCls,c=e.className,p=e.color,s=void 0===p?"blue":p,f=e.dot,u=e.pending,v=void 0!==u&&u,y=(e.position,e.label),_=e.children,g=m(e,["prefixCls","className","color","dot","pending","position","label","children"]),w=(0,r.useContext(d.E_).getPrefixCls)("timeline",i),Z=l()((t={},(0,a.Z)(t,"".concat(w,"-item"),!0),(0,a.Z)(t,"".concat(w,"-item-pending"),v),t),c),E=l()((n={},(0,a.Z)(n,"".concat(w,"-item-head"),!0),(0,a.Z)(n,"".concat(w,"-item-head-custom"),!!f),(0,a.Z)(n,"".concat(w,"-item-head-").concat(s),!0),n));return r.createElement("li",(0,o.Z)({},g,{className:Z}),y&&r.createElement("div",{className:"".concat(w,"-item-label")},y),r.createElement("div",{className:"".concat(w,"-item-tail")}),r.createElement("div",{className:E,style:{borderColor:/blue|red|green|gray/.test(s||"")?void 0:s}},f),r.createElement("div",{className:"".concat(w,"-item-content")},_))},s=n(96159),f=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(e);a<o.length;a++)t.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(e,o[a])&&(n[o[a]]=e[o[a]])}return n},u=function(e){var t,n=r.useContext(d.E_),i=n.getPrefixCls,m=n.direction,u=e.prefixCls,v=e.pending,y=void 0===v?null:v,_=e.pendingDot,g=e.children,w=e.className,Z=e.reverse,E=void 0!==Z&&Z,b=e.mode,h=void 0===b?"":b,C=f(e,["prefixCls","pending","pendingDot","children","className","reverse","mode"]),j=i("timeline",u),N="boolean"==typeof y?null:y,I=y?r.createElement(p,{pending:!!y,dot:_||r.createElement(c.Z,null)},N):null,x=r.Children.toArray(g);x.push(I),E&&x.reverse();var L=function(e,t){return"alternate"===h?"right"===e.props.position?"".concat(j,"-item-right"):"left"===e.props.position?"".concat(j,"-item-left"):"".concat(j,t%2==0?"-item-left":"-item-right"):"left"===h?"".concat(j,"-item-left"):"right"===h||"right"===e.props.position?"".concat(j,"-item-right"):""},A=x.filter((function(e){return!!e})),F=r.Children.count(A),O="".concat(j,"-item-last"),D=r.Children.map(A,(function(e,t){var n=t===F-2?O:"",o=t===F-1?O:"";return(0,s.Tm)(e,{className:l()([e.props.className,!E&&y?n:o,L(e,t)])})})),k=x.some((function(e){var t;return!!(null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.label)})),T=l()(j,(t={},(0,a.Z)(t,"".concat(j,"-pending"),!!y),(0,a.Z)(t,"".concat(j,"-reverse"),!!E),(0,a.Z)(t,"".concat(j,"-").concat(h),!!h&&!k),(0,a.Z)(t,"".concat(j,"-label"),k),(0,a.Z)(t,"".concat(j,"-rtl"),"rtl"===m),t),w);return r.createElement("ul",(0,o.Z)({},C,{className:T}),D)};u.Item=p;var v=u},61605:function(e,t,n){n(97564)},74093:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});n(52560);var o=n(71577),a=(n(62004),n(11382)),r=n(29439),i=n(55609),l=n(67294),c=(n(35668),n(86585)),d=n(87462),m=n(93433),p=(n(438),n(14277)),s=n(94315),f=n.n(s),u=n(80385),v=n(96036),y={labelCol:{span:3},wrapperCol:{span:14}},_=function(e){var t=e.detail,n=void 0===t?{}:t,o=e.originCodeList,a=void 0===o?{}:o,r=e.originTeamList,i=void 0===r?{}:r;if(Object.keys(n).length<1)return l.createElement(v.IT,{title:"审批流详情设置"},l.createElement(p.Z,null));var s=n.name,_=n.application_rule,g=n.cost_center_types,w=void 0===g?[]:g,Z=n.code_list,E=void 0===Z?[]:Z,b=n.team_list,h=void 0===b?[]:b,C=n.note,j=n.final_type,N=n.final_approval_job_tags,I=void 0===N?[]:N,x=n.final_approval_job_list,L=void 0===x?[]:x,A="--";Array.isArray(L)&&L.length>0&&(A=l.createElement("div",null,u.mqh.description(j),"(",L.map((function(e){return e.name})).join("、"),")")),Array.isArray(I)&&I.length>0&&(A=l.createElement("div",null,u.mqh.description(j),"(",I.join("、"),")"));var F="";Array.isArray(w)&&w.length>0&&(F=l.createElement(l.Fragment,null,w.includes(u.Xr3.code)&&Array.isArray(E)?l.createElement(c.Z.Item,(0,d.Z)({label:"适用code"},y),Array.isArray(E)&&E.length>0?function(){var e,t=n.code_list,o=void 0===t?[]:t;if(o.find((function(e){return"*"===e._id})))return[{_id:"*",name:"全部"}];var r=(e=[]).concat.apply(e,(0,m.Z)(Object.values(a)));return o.map((function(e){return r.filter((function(t){return t._id===e._id}))[0]||{}})).filter((function(e){return f().existy(e)&&f().not.empty(e)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f().existy(e)&&f().not.empty(e)?{_id:e._id,name:e.name}:{}}))}().map((function(e){return e.name})).join("，"):"--"):"",w.includes(u.Xr3.team)&&Array.isArray(E)?l.createElement(c.Z.Item,(0,d.Z)({label:"适用team"},y),Array.isArray(h)&&h.length>0?function(){var e,t=n.team_list,o=void 0===t?[]:t;if(o.find((function(e){return"*"===e._id})))return[{_id:"*",name:"全部"}];var a=(e=[]).concat.apply(e,(0,m.Z)(Object.values(i)));return o.map((function(e){return a.filter((function(t){return t._id===e._id}))[0]||{}})).filter((function(e){return f().existy(e)&&f().not.empty(e)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f().existy(e)&&f().not.empty(e)?{_id:e._id,name:e.name}:{}}))}().map((function(e){return e.name})).join("，"):"--"):""));var O=[l.createElement(c.Z.Item,(0,d.Z)({label:"审批流名称"},y),s||"--"),l.createElement(c.Z.Item,(0,d.Z)({label:"审批流类型"},y),l.createElement("span",null,"付款类")),l.createElement(c.Z.Item,(0,d.Z)({label:"适用成本中心类型"},y),Array.isArray(w)&&w.length>0?w.map((function(e){return u.Xr3.description(e)})).join("，"):"--"),F,l.createElement(c.Z.Item,(0,d.Z)({label:"合并审批"},y),_?u.Ni9.description(_):"--"),l.createElement(c.Z.Item,(0,d.Z)({label:"最高审批岗位"},y),A),l.createElement(c.Z.Item,(0,d.Z)({label:"描述"},y),C||"--")];return l.createElement(v.IT,{title:"审批流详情设置"},l.createElement(c.Z,{className:"affairs-flow-detail-basic"},l.createElement(v.Fp,{items:O,cols:1})))},g=(n(61605),n(37636)),w=(n(13062),n(71230)),Z=(n(55295),n(69713)),E=(n(89032),n(15746)),b=n(93517),h=n.n(b),C=n(8240),j=n(88486),N=(0,i.connect)((function(e){var t=e.codeFlow;return{flowNodeList:t.flowNodeList,applicantNodeCcInfo:t.applicantNodeCcInfo}}))((function(e){var t=e.flowId,n=e.dispatch,o=e.flowNodeList,a=void 0===o?{}:o,r=e.applicantNodeCcInfo;(0,l.useEffect)((function(){return t&&n({type:"codeFlow/getFlowNodeList",payload:{flowId:t}}),function(){n({type:"codeFlow/resetFlowNodeList"})}}),[n,t]),(0,l.useEffect)((function(){t&&n({type:"codeFlow/getApplicantNodeCc",payload:{flowId:t}})}),[]);var i=a.data,d=void 0===i?[]:i;if(!Array.isArray(d)||d.length<1)return l.createElement(v.IT,{title:"审批流节点详情"},l.createElement(p.Z,null));var s,f=function(e){var t=e.node_approve_type,n=e.allow_update_money,o=e.approve_mode,a=e.is_payment_node,r=e.is_inspect_bill_node,i=e.name,d=e.approve_department_info,p=void 0===d?{}:d,s=e.approve_department_job_info,f=void 0===s?{}:s,v=e.is_skip,y=e.approve_department_account_type,_=e.cost_update_rule,b="";t===u.gH5.report&&(b="直接领导人"),t===u.gH5.coopera&&(y===u.DXc.principal&&(b=l.createElement("span",null,h().get(p,"name")?"".concat(h().get(p,"name"),"  -  "):"",u.DXc.description(y))),y===u.DXc.post&&(b=l.createElement("span",null,h().get(p,"name",""),h().get(f,"job_info.name",void 0)?"  -  ".concat(h().get(f,"job_info.name")):"")));var N=[].concat((0,m.Z)((0,C.Cg)(e,"carbon_copy_info.fixed_department_list",[])),(0,m.Z)((0,C.Cg)(e,"carbon_copy_info.fixed_department_job_list",[]).map((function(e){return{name:(0,C.Cg)(e,"job_info.name","--")}}))),(0,m.Z)((0,C.Cg)(e,"carbon_copy_info.fixed_account_list",[]))),I=[].concat((0,m.Z)((0,C.Cg)(e,"carbon_copy_info.flexible_department_list",[])),(0,m.Z)((0,C.Cg)(e,"carbon_copy_info.flexible_department_job_list",[]).map((function(e){return{name:(0,C.Cg)(e,"job_info.name","--")}}))),(0,m.Z)((0,C.Cg)(e,"carbon_copy_info.flexible_account_list",[])));return l.createElement(g.Z.Item,{color:"#FF7700"},l.createElement("div",{className:j.Z["code-flow-node-time-title-wrap"]},l.createElement("span",{className:j.Z["code-flow-node-time-name"]},i),l.createElement("span",{className:j.Z["code-flow-node-time-approve-name"]},b)),l.createElement(c.Z,{className:"affairs-flow-node-time-line-form"},l.createElement(w.Z,null,l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"调控"},n?"是":"否",n&&_?u.E_Z.description(_):"")),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"审批规则"},o?u.Fv8.description(o):"--")),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"标记付款"},a?"是":"否")),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"标记验票"},r?"是":"否")),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"条件跳过"},v?"是":"否")),function(e){var t=e.is_skip,n=void 0!==t&&t,o=e.skip_condition,a=(void 0===o?[]:o).find((function(e){return"money"===e.skip_type}));if(!n||!a||Object.keys(a).length<1)return"";var r=a.opt,i=a.num,d="";return d=r!==u.HX5.no?l.createElement("span",null,u.HX5.description(r),u.fbc.exchangePriceCentToMathFormat(i),"元"):u.HX5.description(r),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"金额条件"},d))}(e),function(e){var t=e.is_skip,n=void 0!==t&&t,o=e.skip_condition,a=(void 0===o?[]:o).find((function(e){return"subject"===e.skip_type}));if(!n||!a||Object.keys(a).length<1)return"";var r=a.opt,i=a.data,d="",m=(void 0===i?[]:i).map((function(e){return e.ac_code}));return r===u.HX5.no&&(d=u.HX5.description(r)),Array.isArray(m)&&m.length<=3&&(d="".concat(u.HX5.description(r)).concat(m.map((function(e){return e})))),Array.isArray(m)&&m.length>3&&(d=l.createElement(Z.Z,{title:m.map((function(e){return e})).join(",")},"".concat(u.HX5.description(r)).concat(m.slice(0,3).map((function(e){return e}))),l.createElement("span",{style:{color:"#E86000"}},"  更多"))),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"科目条件"},d))}(e),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"固定抄送"},N.length>0?N.map((function(e){return e.name})).join("、"):"--")),l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"灵活抄送"},I.length>0?I.map((function(e){return e.name})).join("、"):"--")))))};return l.createElement(v.IT,{title:"审批流节点详情"},l.createElement(g.Z,{className:"code-flow-node-time-line"},(s=[].concat((0,m.Z)((0,C.Cg)(r,"fixed_department_list",[])),(0,m.Z)((0,C.Cg)(r,"fixed_department_job_list",[]).map((function(e){return{name:(0,C.Cg)(e,"job_info.name","--")}}))),(0,m.Z)((0,C.Cg)(r,"fixed_account_list",[]))),l.createElement(g.Z.Item,{color:"#FF7700"},l.createElement("div",{className:j.Z["code-flow-node-time-title-wrap"]},l.createElement("span",{className:j.Z["code-flow-node-time-name"]},"申请人")),l.createElement(c.Z,{className:"affairs-flow-node-time-line-form"},l.createElement(w.Z,null,l.createElement(E.Z,{span:6},l.createElement(c.Z.Item,{label:"固定抄送"},s.length>0?s.map((function(e){return e.name})).join("、"):"--")))))),d.map((function(e){return f(e)}))))})),I=(0,i.connect)((function(e){var t=e.codeFlow,n=t.flowDetail,o=t.originTeamList;return{flowDetail:n,originCodeList:t.originCodeList,originTeamList:o}}))((function(e){var t=e.dispatch,n=e.flowDetail,i=void 0===n?{}:n,c=e.location,d=void 0===c?{}:c,m=e.originCodeList,p=void 0===m?{}:m,s=e.originTeamList,f=void 0===s?{}:s,u=d.query.flowId,v=(0,l.useState)(!0),y=(0,r.Z)(v,2),g=y[0],w=y[1],Z=(0,l.useState)(!0),E=(0,r.Z)(Z,2),b=E[0],h=E[1],C=(0,l.useState)(!0),j=(0,r.Z)(C,2),I=j[0],x=j[1];return(0,l.useEffect)((function(){return u&&t({type:"codeFlow/getFlowDetail",payload:{id:u,onLoading:function(){w(!1)}}}),t({type:"codeFlow/getFlowCodeList",payload:{onLoading:function(){h(!1)}}}),t({type:"codeFlow/getFlowTeamList",payload:{onLoading:function(){x(!1)}}}),function(){t({type:"codeFlow/resetFlowDetail"}),t({type:"codeFlow/resetFlowCodeList"}),t({type:"codeFlow/resetFlowTeamList"}),w(!0),h(!0),x(!0)}}),[t,u]),g||b||I?l.createElement("div",{style:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}},l.createElement(a.Z,null)):l.createElement(l.Fragment,null,l.createElement(_,{detail:i,originCodeList:p,originTeamList:f}),l.createElement(N,{flowId:u}),l.createElement("div",{style:{textAlign:"center"}},l.createElement(o.Z,{type:"default",onClick:function(){window.location.href="/#/Code/BasicSetting/Flow"}},"返回")))}))},88486:function(e,t){t.Z={"code-flow-list-note":"L6LvS5OvWFo47ttMdWzl","code-flow-node-time-title-wrap":"DlJolND_tSk1nt4RZPzZ","code-flow-node-time-name":"pmiUtGLgXBFRjRSTK5vo","code-flow-node-time-approve-name":"AOAJLXHUzIZvcgLR28sX","code-flow-applicant-node":"Fk0ujLOTmjlywN1F9PmS","code-flow-update-node-title":"YGigFsXncpmdCHaN1Mcs","code-flow-update-node-form":"fYfTgvNcTcj_4GzvMTwj","code-flow-node-round":"LlhEWH9UPfoQ19_dtnYb","code-flow-update-node-approve":"DAlGqqbHwGLEVe1JqVw4","code-flow-update-node-mode":"IS0KqfnRDNHtOh0tqpct","code-flow-update-node-operate":"dP203f1sMZ1atZVHPnzK","code-flow-update-node-operate-modify":"flMDUSOLSmEz7hYJOlje","code-flow-update-node-operate-delete":"CI9K88GyyjoByTWAo9mN","code-flow-update-report-node":"kvBa8Ztd4gbucrRpA1lI","code-flow-update-node-arrow":"dLoy0fZ6T2cSQGAkDx9A","code-flow-update-node-wrap":"CQiDaMmctMy7NEP4RELw","code-flow-update-node-create":"li9lMghyDq8HrhzDD_jx","flow-node-radio-form":"FXXUGMr94oYGsobC3vZA","flow-node-radio-form-item":"W9Vqk7vNbvLuDyXZcnVG","flow-node-radio-form-coopera":"lDYY9Kq553vaSsqPuEdg","flow-node-customize-form":"i8_siaSaN5ANy4yRAhG_","flow-enable-error-prompt":"ubBeGPDP4qS48qoxGkSV","code-flow-basic-form-hightest":"mlzTugcGQIKCbRQRELTR","app-expense-examine-flow-cc-title":"Lx25xDAYqw1yIc_xf4kN","app-expense-examine-flow-cc-comment":"TidC9Vz9YQpMmM44IyWe","app-expense-examine-flow-cc-update-title":"tkO0AMpkNWWxMuyJLzXi","affairs-flow-update-node-cc-wrap":"SlSayhLbffNngtwHPjNR","affairs-flow-update-node-cc-info":"C9QBjpR8R7KmYDPTrPc0","affairs-flow-update-node-cc-info-arrow":"rC11BmJDeQVei8qR5LEI"}}}]);