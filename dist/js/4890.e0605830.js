"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4890],{14890:function(e,t,r){r.r(t),r.d(t,{default:function(){return R}});r(20186);var n=r(75385),a=(r(438),r(14277)),i=r(15671),o=r(43144),c=r(97326),u=r(60136),s=r(82963),l=r(61120),d=r(4942),p=r(93517),f=r.n(p),m=r(67294),h=r(55609),Z=r(45697),v=r.n(Z),y=r(28221),g=(r(51838),r(48086)),S=(r(29093),r(16317)),_=(r(54071),r(14072)),k=r(30381),C=r.n(k),P=r(96036),b=r(88144),x=r(80385);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var w=_.Z.MonthPicker,z=S.Z.Option,O=function(e){(0,u.Z)(r,e);var t=I(r);function r(e){var n;return(0,i.Z)(this,r),n=t.call(this,e),(0,d.Z)((0,c.Z)(n),"onSearch",(function(e){var t=n.props.onSearch,r=e.platforms,a=e.suppliers,i=e.cities,o=e.districts,c=e.belongTime,u=e.supplyClass,s=c?C()(c).format("YYYYMM"):"";t&&t({platforms:r,suppliers:a,cities:i,districts:o,page:1,limit:30,belongTime:s,supplyClass:u})})),(0,d.Z)((0,c.Z)(n),"onReset",(function(){var e=n.props.onSearch;e&&e({page:1,limit:30})})),(0,d.Z)((0,c.Z)(n),"onHookForm",(function(e){n.setState({form:e})})),(0,d.Z)((0,c.Z)(n),"onFailureCallback",(function(e){return g.ZP.error(e.zh_message)})),(0,d.Z)((0,c.Z)(n),"onCreateExportTask",(function(){(0,n.props.dispatch)({type:"supplyDeductSummarize/fetchDeductSummarizeExport",payload:{params:(0,n.state.form.getFieldsValue)(),onSuccessCallback:function(){return g.ZP.success("导出数据成功")},onFailureCallback:n.onFailureCallback}})})),(0,d.Z)((0,c.Z)(n),"disableDateOfMonth",(function(e){return e&&e>new Date})),(0,d.Z)((0,c.Z)(n),"render",(function(){var e={items:[{label:"物资分类",form:function(e){return e.getFieldDecorator("supplyClass")(m.createElement(S.Z,{mode:"multiple",showArrow:!0,placeholder:"请选择物资分类"},m.createElement(z,{value:x.IO9.electricCars},x.IO9.description(x.IO9.electricCars)),m.createElement(z,{value:x.IO9.equipment},x.IO9.description(x.IO9.equipment)),m.createElement(z,{value:x.IO9.fixedAssets},x.IO9.description(x.IO9.fixedAssets))))}},{label:"归属时间",form:function(e){return e.getFieldDecorator("belongTime",{initialValue:null})(m.createElement(w,{placeholder:"请选择归属时间",disabledDate:n.disableDateOfMonth}))}}],onReset:n.onReset,onSearch:n.onSearch,onHookForm:n.onHookForm};return m.createElement(P.IT,null,m.createElement(b.p8,e))})),n.state={form:void 0},n}return r}(m.Component);(0,d.Z)(O,"propTypes",{onSearch:v().func,dispatch:v().func}),(0,d.Z)(O,"defaultProps",{onSearch:y.ZT,dispatch:y.ZT});var D=O;function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var T=function(e){(0,u.Z)(r,e);var t=E(r);function r(e){var o;return(0,i.Z)(this,r),o=t.call(this,e),(0,d.Z)((0,c.Z)(o),"onSearch",(function(e){var t=o.props.dispatch;o.private.searchParams=e,o.private.searchParams.page||(o.private.searchParams.page=1),o.private.searchParams.limit||(o.private.searchParams.limit=30),t({type:"supplyDeductSummarize/fetchSupplyDeductSummarizeList",payload:o.private.searchParams})})),(0,d.Z)((0,c.Z)(o),"onChangePage",(function(e,t){o.private.searchParams.page=e,o.private.searchParams.limit=t,o.onSearch(o.private.searchParams)})),(0,d.Z)((0,c.Z)(o),"onShowSizeChange",(function(e,t){o.private.searchParams.page=e,o.private.searchParams.limit=t,o.onSearch(o.private.searchParams)})),(0,d.Z)((0,c.Z)(o),"renderSearch",(function(){var e=(0,c.Z)(o).onSearch,t=o.props.dispatch;return m.createElement(D,{onSearch:e,dispatch:t})})),(0,d.Z)((0,c.Z)(o),"renderContent",(function(){var e=o.private.searchParams,t=e.page,r=e.limit,i=o.props.deductSummarizeList;if(0===Object.keys(i).length)return m.createElement(a.Z,null);var c=i.data,u=i.meta,s=[{title:"平台",dataIndex:"platform_name",key:"platform_name",fixed:"left",width:80,render:function(e){return e||"--"}},{title:"供应商",dataIndex:"supplier_name",key:"supplier_name",fixed:"left",width:180,render:function(e){return e||"--"}},{title:"城市",dataIndex:"city_name",key:"city_name",fixed:"left",width:100,render:function(e){return e||"--"}},{title:"商圈",dataIndex:"biz_district_name",key:"biz_district_name",render:function(e){return e||"--"}},{title:"姓名",dataIndex:"staff_info",key:"staff_info.name",width:100,render:function(e){return e.name||"--"}},{title:"物资分类",dataIndex:"group",key:"group",width:100,render:function(e){return e?x.IO9.description(e):"--"}},{title:"归属时间",dataIndex:"month",key:"month",width:100},{title:"本月累计应扣款(元)",dataIndex:"deduction_deposit",key:"deduction_deposit",width:140,render:function(e,t){var r=(e||0)+f().get(t,"ult_deduction_deposit",0)+f().get(t,"deduction_usage_fee",0)+f().get(t,"ult_deduction_usage_fee",0);return x.fbc.exchangePriceCentToMathFormat(r)}},{title:"本月应扣款(元)",dataIndex:"deduction_usage_fee",key:"deduction_usage_fee",width:120,render:function(e,t){var r=(e||0)+f().get(t,"deduction_deposit",0);return x.fbc.exchangePriceCentToMathFormat(r)}},{title:"上月未扣款(元)",dataIndex:"last_month_debt",key:"last_month_debt",width:120,render:function(e,t){var r=f().get(t,"ult_deduction_usage_fee",0),n=f().get(t,"ult_deduction_deposit",0)+r;return x.fbc.exchangePriceCentToMathFormat(n)}},{title:"操作",dataIndex:"operation",key:"operation",width:100,fixed:"right",render:function(e,t){var r=t._id;return m.createElement("a",{key:"detail",target:"_blank",rel:"noopener noreferrer",href:"/#/Supply/DeductSummarize/Detail?id=".concat(r)},"查看")}}],l={showSizeChanger:!0,showQuickJumper:!0,pageSize:r||30,onShowSizeChange:o.onShowSizeChange,total:u.count,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],onChange:o.onChangePage};return t&&(l.current=t),m.createElement(P.IT,{title:"物资汇总表"},m.createElement(n.Z,{columns:s,pagination:l,rowKey:function(e){return e._id},dataSource:c,bordered:!0,scroll:{x:1290,y:600}}))})),o.state={},o.private={searchParams:{}},o}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"supplyDeductSummarize/fetchSupplyDeductSummarizeList",payload:{}})}},{key:"render",value:function(){return m.createElement("div",null,this.renderSearch(),this.renderContent())}}]),r}(m.Component);(0,d.Z)(T,"propTypes",{deductSummarizeList:v().object,dispatch:v().func}),(0,d.Z)(T,"defaultProps",{deductSummarizeList:{},dispatch:y.ZT});var R=(0,h.connect)((function(e){return{deductSummarizeList:e.supplyDeductSummarize.deductSummarizeList}}))(T)}}]);