"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[3399],{13399:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});n(20186);var a=n(75385),o=(n(55295),n(69713)),r=(n(52560),n(71577)),c=n(4942),i=n(29439),l=n(94315),s=n.n(l),p=n(93517),m=n.n(p),u=n(55609),d=n(67294),f=n(30381),h=n.n(f),g=n(96036),y=n(80385),v=n(45430),E=(n(35668),n(86585)),b=(n(9070),n(20924)),O=(n(29093),n(16317)),w=n(8240),x=g.Hr.Option;var S=(0,u.connect)((function(e){return{positions:e.accountManage.positions}}))((function(e){var t=e.dispatch,n=m().get(e,"positions.result",[]);(0,d.useEffect)((function(){return t({type:"accountManage/fetchAllPosition",payload:{available:[1,0]}}),function(){t({type:"accountManage/reduceAllPosition",payload:{}})}}),[t]);var a=n.map((function(e){return 0===e.available?d.createElement(x,{key:e.gid,value:"".concat(e.gid)},e.name,"(禁用)"):d.createElement(x,{key:e.gid,value:"".concat(e.gid)},e.name)})),o=(0,w.CE)(["dispatch","positions"],e);return d.createElement(g.Hr,o,a)})),Z=O.Z.Option,_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSearch,n=void 0===t?function(){}:t,a=e.operations,o=void 0===a?void 0:a,r=(0,d.useState)(void 0),c=(0,i.Z)(r,2),l=c[0],p=c[1];console.log(l);var m=function(){var e={name:"",phone:"",positions:[],state:"".concat(y.m3m.on)};n&&n(e)},u=function(e){var t=e.name,a=e.phone,o=e.positions,r=e.state,c=e;s().existy(t)&&(c.name=t),s().existy(a)&&(c.phone=a),s().existy(o)&&s().not.empty(o)&&(c.positions=o),s().existy(r)&&(c.state=r),c.page=1,c.limit=30,n&&n(c)},f=function(e){p(e)},h=[d.createElement(E.Z.Item,{name:"name",label:"账户姓名"},d.createElement(b.Z,{placeholder:"请输入姓名"})),d.createElement(E.Z.Item,{name:"phone",label:"手机号"},d.createElement(b.Z,{placeholder:"请输入手机号"})),d.createElement(E.Z.Item,{name:"positions",label:"角色"},d.createElement(S,{allowClear:!0,showArrow:!0,showSearch:!0,mode:"multiple",placeholder:"请选择角色",optionFilterProp:"children"})),d.createElement(E.Z.Item,{name:"state",label:"用户状态"},d.createElement(O.Z,{allowClear:!0,placeholder:"请选择用户状态"},d.createElement(Z,{value:"".concat(y.m3m.on)},y.m3m.description(y.m3m.on)),d.createElement(Z,{value:"".concat(y.m3m.off)},y.m3m.description(y.m3m.off))))],v={items:h,operations:o,onReset:m,onSearch:u,onHookForm:f,expand:!0,initialValues:{state:"".concat(y.m3m.on)}};return d.createElement(g.IT,null,d.createElement(g.j6,v))},I=n(30203);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=(0,u.connect)((function(e){return{dataSource:e.accountManage.accounts}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataSource,n=void 0===t?{}:t,c=e.dispatch,l=e.history,p=(0,d.useState)({page:1,limit:30,state:"".concat(y.m3m.on)}),u=(0,i.Z)(p,2),f=u[0],E=u[1],b=function(){l.push("/System/Account/Manage/Create")},O=function(e,t){E(j(j({},f),{},{page:e,limit:t}));var n=j(j({},f),{},{page:e,limit:t});c({type:"accountManage/fetchAccounts",payload:n})},w=function(e,t){E(j(j({},f),{},{page:e,limit:t}));var n=j(j({},f),{},{page:e,limit:t});c({type:"accountManage/fetchAccounts",payload:n})},x=function(e){E(j(j({},e),{},{page:1,limit:30})),c({type:"accountManage/fetchAccounts",payload:e})},S=function(){var e;return!0===(0,v.tZ)()&&(e=d.createElement(r.Z,{type:"primary",onClick:b},"添加账号")),d.createElement(_,{onSearch:x,operations:e})},Z=function(){var e=f.page,t=[{title:"姓名",dataIndex:"name",fixed:"left",width:100},{title:"手机",dataIndex:"phone",fixed:"left",width:100},{title:"角色",dataIndex:"role_names",render:function(e){return s().not.existy(e)||s().empty(e)?"--":e.length<=2?e.join(", "):d.createElement(o.Z,{title:e.join(", ")},d.createElement("span",null,e.slice(0,2).join(", ")," 等",e.length,"条"))}},{title:"关联员工档案",dataIndex:"is_related_staff",render:function(e){return!0===e||!1===e?e?"是":"否":"--"}},{title:"账号状态",dataIndex:"state",render:function(e){return y.m3m.description(e)}},{title:"创建时间",dataIndex:"created_at",render:function(e){return d.createElement("div",null,h()(e).format("YYYY-MM-DD HH:mm"))}},{title:"最新修改时间",dataIndex:"updated_at",render:function(e){return h()(e).format("YYYY-MM-DD HH:mm")}},{title:"最新操作人",dataIndex:["operator_info","name"],render:function(e){return e||"--"}},{title:"操作",dataIndex:"operation",fixed:"right",width:100,render:function(e,t){var n=[];return!0===(0,v.Be)()&&!0!==t.is_admin&&n.push(d.createElement("a",{href:"/#/System/Account/Manage/Update?id=".concat(t._id,"&state=").concat(t.state)},"编辑")),!0===(0,v.iH)()&&n.push(d.createElement("a",{className:I.Z["app-comp-system-table-operate-detail"],target:"_blank",rel:"noopener noreferrer",href:"/#/System/Account/Manage/Details?id=".concat(t._id)},"详情")),d.createElement("div",null,0===n.length?"--":n)}}],r={current:void 0===e?1:e,pageSize:f.limit||30,onChange:w,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:O,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:m().get(n,"_meta.result_count",0)};return d.createElement(g.IT,null,d.createElement(a.Z,{rowKey:function(e){return e._id},pagination:r,columns:t,dataSource:n.data,bordered:!0,scroll:{x:1470}}))};return d.createElement("div",null,S(),Z())}))},30203:function(e,t){t.Z={"app-comp-system--create-operate-back-col":"AxX93IWPV2EzVUrvO_pT","app-comp-system-create-operate-submit-col":"vy28sq1OeFBDf9Qxei55","app-comp-system-detail-label":"bsvlTO2kA3axmv3nSu5W","app-comp-system-detail-value":"HYnsDEp59EW_55ytprgf","app-comp-system-detail-form-col":"cg2gQKzJ3Zakn81AKFpc","app-comp-system-detail-operate-col":"YdtafoBu7kMKtBJWoUsw","app-comp-system-form-cascade-selector":"Mh9d3eDznaXFQHAVQrsU","app-comp-system-table-operate-detail":"S_EYloo8bVhtEbZGerm_"}}}]);