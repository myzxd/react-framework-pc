"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[5784],{5784:function(e,t,r){r.r(t),r.d(t,{default:function(){return B}});r(20186);var n=r(75385),a=(r(55295),r(69713)),i=r(15671),o=r(43144),c=r(97326),l=r(60136),s=r(82963),u=r(61120),p=r(4942),f=r(93517),d=r.n(f),m=r(45697),h=r.n(m),y=r(68628),v=r(67294),_=r(55609),Z=(r(21316),r(75443)),k=(r(52560),r(71577)),S=(r(51838),r(48086)),g=r(96036),E=r(88144),x=r(45430);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var b=function(e){(0,l.Z)(r,e);var t=w(r);function r(e){var n;return(0,i.Z)(this,r),n=t.call(this,e),(0,p.Z)((0,c.Z)(n),"onSearch",(function(e){var t=n.state.onSearch,r=e.platforms,a=e.suppliers,i=e.cities,o=e.districts;t&&t({platforms:r,suppliers:a,cities:i,districts:o,page:1,limit:30})})),(0,p.Z)((0,c.Z)(n),"onReset",(function(){var e=n.state.onSearch;e&&e({page:1,limit:30})})),(0,p.Z)((0,c.Z)(n),"onHookForm",(function(e){n.setState({form:e})})),(0,p.Z)((0,c.Z)(n),"onFailureExportCallback",(function(){S.ZP.error("导出数据失败")})),(0,p.Z)((0,c.Z)(n),"onCreateExportTask",(function(){var e=n.props.dispatch;n.state.form.validateFields((function(t,r){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r);e({type:"supplyDetails/fetchStandingBookExport",payload:{params:a,onSuccessCallback:n.onSuccessExportCallback,onFailureCallback:n.onFailureExportCallback}})}))})),(0,p.Z)((0,c.Z)(n),"render",(function(){var e="";x.ZP.canOperateSupplyStandBookExport()&&(e=v.createElement(Z.Z,{title:"创建下载任务？",onConfirm:n.onCreateExportTask,okText:"确认",cancelText:"取消"},v.createElement(k.Z,{type:"primary"},"导出EXCEL")));var t={operations:e,onReset:n.onReset,onSearch:n.onSearch,onHookForm:n.onHookForm};return v.createElement(g.IT,null,v.createElement(E.p8,t))})),n.state={form:void 0,search:{},onSearch:e.onSearch},n}return r}(v.Component);var O=(0,_.connect)((function(e){return{supplyDetails:e.supplyDetails}}))(b),C="nY6fISQLXQmMjrW9T7v0",D="SpW6soG8KhV4U3PZqcSt",I="mjiW1TMCHwQM9RqILkKE",q="XawsI8zoOOupYOEFAWvQ",j="ogrXz4LFUjJW35yKA2LN",R="boL7dEIj9i_K2Sq6kfry",T=r(80385);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var F=function(e){(0,l.Z)(r,e);var t=z(r);function r(e){var o;return(0,i.Z)(this,r),o=t.call(this,e),(0,p.Z)((0,c.Z)(o),"onSearch",(function(e){o.private.searchParams=e,o.private.searchParams.page||(o.private.searchParams.page=1),o.private.searchParams.limit||(o.private.searchParams.limit=30),o.props.dispatch({type:"supplyDetails/fetchSupplyDetailsList",payload:o.private.searchParams})})),(0,p.Z)((0,c.Z)(o),"onChangePage",(function(e,t){o.private.searchParams.page=e,o.private.searchParams.limit=t,o.onSearch(o.private.searchParams)})),(0,p.Z)((0,c.Z)(o),"onShowSizeChange",(function(e,t){o.private.searchParams.page=e,o.private.searchParams.limit=t,o.onSearch(o.private.searchParams)})),(0,p.Z)((0,c.Z)(o),"renderSearch",(function(){var e=(0,c.Z)(o).onSearch;return v.createElement(O,{onSearch:e})})),(0,p.Z)((0,c.Z)(o),"renderContent",(function(){var e=o.private.searchParams,t=e.page,r=e.limit,i=o.props.supplyDetailsData,c=void 0===i?{}:i,l=d().get(c,"data",[]),s=d().get(c,"meta.count",0),u=v.createElement("div",null,v.createElement("p",null,"自采: 单价/租金*数量+税费合计"),v.createElement("p",null,"租赁: 单价/租金*租赁周期*数量+押金+税费合计")),p=[{title:"平台",dataIndex:"platform_name",key:"platform_name",fixed:"left",width:70,render:function(e){return e||"--"}},{title:"供应商",dataIndex:"supplier_name",key:"supplier_name",fixed:"left",width:120,render:function(e){return e||"--"}},{title:"城市",dataIndex:"city_name",key:"city_name",fixed:"left",width:70,render:function(e){return e||"--"}},{title:"商圈",dataIndex:"biz_district_name",key:"biz_district_name",fixed:"left",width:120,render:function(e){return e||"--"}},{title:"采购方式",dataIndex:"aquire_type",width:90,key:"aquire_type",render:function(e){return T.JFv.description(e)||"--"}},{title:"物资分类",dataIndex:"material_item_group",key:"material_item_group",render:function(e){return T.IO9.description(e)||"--"}},{title:"物资名称",dataIndex:"material_item_name",key:"material_item_name",width:100,render:function(e){return e||"--"}},{title:"物资编号",dataIndex:"material_item_code",key:"material_item_code",width:120,render:function(e){return e||"--"}},{title:"采购总数",dataIndex:"purchase_history_qty",key:"purchase_history_qty",width:130,render:function(e){return e||"--"}},{title:v.createElement("div",null,v.createElement("span",{className:C},"采购总金额(元)"),v.createElement(a.Z,{title:u},v.createElement(y.Z,{className:D}))),dataIndex:"aquire_total_money",key:"aquire_total_money",width:140,render:function(e){return T.fbc.exchangePriceToYuan(e)||"--"}},{title:"领用出库合计",dataIndex:"dispatch_total_qty",key:"dispatch_total_qty",width:130,render:function(e){return e||0}},{title:"库存",dataIndex:"stock_qty",key:"stock_qty",width:130,render:function(e){return e||"--"}},{title:"退厂出库",dataIndex:"return_factory_qty",key:"return_factory_qty",width:130,render:function(e){return e||"--"}},{title:"报废出库合计",dataIndex:"damage_qty",key:"damage_qty",width:130,render:function(e){return e||"--"}},{title:v.createElement("div",null,v.createElement("span",{className:I},"三方押金(元)"),v.createElement(a.Z,{title:"租赁: 押金合计"},v.createElement(y.Z,{className:q}))),dataIndex:"costom_deposit_money",key:"costom_deposit_money",width:130,render:function(e){return T.fbc.exchangePriceToYuan(e)||0}},{title:v.createElement("div",null,v.createElement("span",{className:j},"人员押金(元)"),v.createElement(a.Z,{title:"自采/租赁: 押金实际扣还款合计"},v.createElement(y.Z,{className:R}))),dataIndex:"staff_deposit_money",key:"staff_deposit_money",width:130,render:function(e){return T.fbc.exchangePriceToYuan(e)}}],f={showSizeChanger:!0,showQuickJumper:!0,pageSize:r||30,onShowSizeChange:o.onShowSizeChange,total:s,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],onChange:o.onChangePage};return t&&(f.current=t),v.createElement(g.IT,{title:"物资台账列表"},v.createElement(n.Z,{columns:p,pagination:f,rowKey:function(e,t){return t},scroll:{x:1860,y:400},dataSource:l,bordered:!0}))})),o.state={},o.private={searchParams:{}},o}return(0,o.Z)(r,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"supplyDetails/fetchSupplyDetailsList"})}},{key:"render",value:function(){return v.createElement("div",null,this.renderSearch(),this.renderContent())}}]),r}(v.Component);(0,p.Z)(F,"propTypes",{supplyDetailsData:h().object}),(0,p.Z)(F,"defaultProps",{supplyDetailsData:{}});var B=(0,_.connect)((function(e){return{supplyDetailsData:e.supplyDetails.supplyDetailsData}}))(F)}}]);