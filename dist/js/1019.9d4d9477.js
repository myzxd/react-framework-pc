"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[1019],{71019:function(e,t,n){n.r(t),n.d(t,{default:function(){return Y}});n(20186);var r=n(75385),a=n(4942),o=n(29439),i=n(94315),c=n.n(i),s=n(93517),u=n.n(s),p=n(67294),l=n(55609),d=n(30381),y=n.n(d),m=n(45430),f=n(96036),h=(n(35668),n(86585)),b=n(45697),g=n.n(b),O=(n(29093),n(16317)),v=n(8240),C=O.Z.Option,w=function(e){var t=e.industryCodes,n=e.namespace,r=e.dispatch,a=e.cityList,o=void 0===a?{}:a;(0,p.useEffect)((function(){return c().existy(t)&&c().not.empty(t)&&r({type:"systemCity/fetchCityList",payload:{industryCodes:t,namespace:n}}),function(){r({type:"systemCity/reduceCityList",payload:{namespace:n,result:{}}})}}),[t,n]);var i=u().get(o,"".concat(n,".data"),[]).map((function(e){return p.createElement(C,{key:e._id,value:"".concat(e._id)},e.name)})),s=(0,v.CE)(["dispatch","cityList","namespace","industryCodes","enableSelectAll"],e);return p.createElement(O.Z,s,i)};w.propTypes={namespace:g().string,industryCodes:g().array},w.defaultProps={allAccounts:[],accountsList:{}};var j=(0,l.connect)((function(e){var t=e.systemCity.cityList;return{cityList:void 0===t?{}:t}}))(w),S=n(88144);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k="Search",_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSearch,n=e.dispatch,r=e.operations,a=void 0===r?void 0:r,i=(0,p.useState)(void 0),c=(0,o.Z)(i,2),s=c[0],u=c[1];console.log(s);var l=function(e){var n=P(P({},e),{},{meta:{page:1,limit:30}});t&&t(n)},d=function(e){u(e)},y=function(){n&&n({type:"systemCity/reduceCityList",payload:{namespace:k,result:{}}}),t&&t({meta:{page:1,limit:30}})},m=function(e){(0,s.setFieldsValue)({platformIds:void 0}),!e&&n&&n({type:"systemCity/reduceCityList",payload:{namespace:k,result:{}}})},b=function(){var e={items:[p.createElement(h.Z.Item,{label:"所属场景",name:"industryCodes"},p.createElement(S.UU,{onChange:m,enumeratedType:"industry"})),p.createElement(h.Z.Item,{key:"platformIds",noStyle:!0,shouldUpdate:function(e,t){return e.industryCodes!==t.industryCodes}},(function(e){var t=e.getFieldValue;return p.createElement(h.Z.Item,{label:"平台",name:"platformIds"},p.createElement(j,{enableSelectAll:!0,allowClear:!0,showSearch:!0,optionFilterProp:"children",namespace:k,placeholder:"请选择平台",industryCodes:t("industryCodes")}))}))],operations:a,expand:!0,onReset:y,onSearch:l,onHookForm:d};return p.createElement(f.IT,null,p.createElement(f.j6,e))};return p.createElement("div",null,b())};_.propTypes={onSearch:g().func.isRequired},_.defaultProps={onSearch:function(){}};var L=(0,l.connect)()(_),D=n(89977);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x="default";var Y=(0,l.connect)((function(e){return{cityList:e.systemCity.cityList}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.cityList,a=void 0===n?{}:n,i=(0,p.useState)({meta:{page:1,limit:30}}),s=(0,o.Z)(i,2),l=s[0],d=s[1];(0,p.useEffect)((function(){t({type:"systemCity/fetchCityList",payload:l})}),[l]);var h=function(e){d(Z(Z({},e),{},{meta:{page:1,limit:30}}))},b=function(e,t){d(Z(Z({},l),{},{meta:{page:e,limit:t}}))},g=function(e,t){d(Z(Z({},l),{},{meta:{page:e,limit:t}}))},O=function(){return p.createElement(L,{onSearch:h,dispatch:t})},v=function(){var e=l.meta,t=e.page,n=e.limit,o=u().get(a,"".concat(x,".data"),[]),i=u().get(a,"".concat(x,"._meta.result_count"),0),s=[{title:"平台",dataIndex:"name",key:"name",render:function(e){return e||"--"}},{title:"所属场景",dataIndex:"industry_name",key:"industry_name",render:function(e){return e||"--"}},{title:"创建时间",dataIndex:"created_at",key:"created_at",render:function(e){return e?y()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"创建者",dataIndex:"creator_info",key:"creator_info",render:function(e){return c().not.existy(e)||c().empty(e)?"--":e.name||"--"}},{title:"最后操作时间",dataIndex:"updated_at",key:"updated_at",render:function(e){return e?y()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"最新操作者",dataIndex:"operator_info",key:"operator_info",render:function(e){return c().not.existy(e)||c().empty(e)?"--":e.name||"--"}},{title:"操作",dataIndex:"operate",key:"operate",render:function(e,t){return p.createElement("div",null,m.ZP.canOperateSystemCityUpdate()?p.createElement("a",{href:"#/System/City/Update?id=".concat(t._id),className:D.Z["app-comp-system-operate-btn"]},"编辑"):"",p.createElement("a",{href:"#/System/City/Detail?id=".concat(t._id),className:D.Z["app-comp-system-operate-btn"]},"查看详情"))}}],d={current:t,defaultPageSize:n,pageSize:n,onChange:g,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:b,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:i||0};return p.createElement(f.IT,{title:"平台城市方案列表"},p.createElement(r.Z,{rowKey:function(e){return e._id},pagination:d,dataSource:o,columns:s}))};return p.createElement("div",null,O(),v())}))},89977:function(e,t){t.Z={"app-comp-system-operate-wrap":"wR3_uLsUrJwPgLp63zst","app-comp-system-detail-back-btn-wrap":"t0hsKN8YngMdcuT5mrHN","app-comp-system-operate-btn":"hSw6MioRCdPNjHwuYDd_",bossDetailBackBtnWrap:"ujyjNcCj08JfRHzTOpnu","app-comp-system-update-operate-btn":"EBdWMNOwymGZEWdNHu9L"}}}]);