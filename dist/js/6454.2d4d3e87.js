"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[6454],{46535:function(e,t,n){n.d(t,{Z:function(){return y}});n(52466);var r=n(10642),a=(n(75310),n(76772)),o=n(87462),i=(n(35668),n(86585)),c=n(29439),l=(n(29093),n(16317)),m=n(96486),u=n.n(m),d=n(93517),f=n.n(d),p=n(30381),s=n.n(p),g=n(55609),h=n(67294),b=n(96036),w="_48Zwj95oylvpECpdD9w",_=l.Z.Option,y=(0,g.connect)((function(e){return{departmentData:e.teamTeacher.partmentData}}))((function(e){var t=e.departmentData,n=e.dispatch,m=e.ownerId,d=e.departmentId,p=e.relationLogId,g=e.onOkCallback,y=e.onCancelCallback,O=i.Z.useForm(),Z=(0,c.Z)(O,1)[0],E=(0,h.useState)({}),I=(0,c.Z)(E,2),v=I[0],P=I[1];(0,h.useEffect)((function(){return function(){n({type:"teamTeacher/resetTeamMonitoringdePartmentList"})}}),[n]);var k,C,j=function(e){if(!e)return Z.setFieldsValue({name:void 0}),P({});var n=t.find((function(t){return t._id===e}));Z.setFieldsValue({name:e}),P(n)},S=u().debounce((function(e){e.trim()&&n({type:"teamTeacher/fetachTeamMonitoringdePartmentList",payload:{name:e}})}),800);return h.createElement(r.Z,{title:"更换私教管理",visible:!0,onOk:function(){Z.validateFields().then((function(){n({type:"modelCoachDepartment/changeOwner",payload:{departmentId:d,newDepartmentId:v._id,ownerId:m,relationLogId:p,effectDate:s()().format("YYYYMMDD"),onSuccessCallback:g}})}))},onCancel:function(){y&&y()},okText:"确定",cancelText:"取消"},h.createElement("span",{className:w},h.createElement(a.Z,{message:"提醒：成功更换私教团队后，该业主团队产生的费用会归集到变更后的私教团队",type:"warning",showIcon:!0})),h.createElement(i.Z,{form:Z,layout:"horizontal"},(k={labelCol:{span:6},wrapperCol:{span:16}},C=[h.createElement(i.Z.Item,(0,o.Z)({label:"私教部门名称",name:"name",rules:[{required:!0,message:"请输入"}]},k),h.createElement(l.Z,{showSearch:!0,placeholder:"请输入私教部门名称搜索",showArrow:!1,onChange:j,onSearch:S,style:{width:240},filterOption:!1,allowClear:!0},t.map((function(e){return h.createElement(_,{key:e._id,value:e._id},"".concat(e.name,"(").concat(e.code,")"))})))),h.createElement(i.Z.Item,(0,o.Z)({label:"私教部门编号"},k),f().get(v,"code","--")),h.createElement(i.Z.Item,(0,o.Z)({label:"私教部门负责人"},k),f().get(v,"administrator_info.name","--"))],h.createElement(b.Fp,{items:C,cols:1}))))}))},96454:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});n(20186);var r=n(75385),a=(n(51838),n(48086)),o=n(4942),i=n(29439),c=n(93517),l=n.n(c),m=n(67294),u=n(55609),d=n(96036),f=(n(35668),n(86585)),p=(n(9070),n(20924));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t,n=e.onSearch,r=function(){n(!1)},a=function(e){var t=g(g({},e),{},{meta:{page:1,limit:30}});n&&n(t)};return m.createElement("div",null,(t={items:[m.createElement(f.Z.Item,{label:"业主姓名",name:"name"},m.createElement(p.Z,{placeholder:"请输入"})),m.createElement(f.Z.Item,{label:"业主手机号",name:"phone"},m.createElement(p.Z,{placeholder:"请输入"})),m.createElement(f.Z.Item,{label:"业主身份证号",name:"idCard"},m.createElement(p.Z,{placeholder:"请输入"})),m.createElement(f.Z.Item,{label:"商圈名称",name:"disName"},m.createElement(p.Z,{placeholder:"请输入"})),m.createElement(f.Z.Item,{label:"业主团队ID",name:"ownerTeamId"},m.createElement(p.Z,{placeholder:"请输入"}))],onReset:r,onSearch:a,expand:!0},m.createElement(d.IT,null,m.createElement(d.j6,t))))},b=n(46535),w=n(97116),_=n(23217),y=n(45430);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=w.Iq.modules().some((function(e){return e.id===_.Z.ModuleTeamManagerUpdate.id})),I=(0,u.connect)((function(e){return{manageLogList:e.teamTeacher.manageLogList}}))((function(e){var t=e.dispatch,n=e.manageLogList,o=void 0===n?{}:n,c=o.data,u=void 0===c?[]:c,f=(0,m.useState)({}),p=(0,i.Z)(f,2),s=p[0],g=p[1],_=(0,m.useState)(!1),O=(0,i.Z)(_,2),I=O[0],v=O[1],P=(0,m.useState)({}),k=(0,i.Z)(P,2),C=k[0],j=k[1],S=(0,m.useState)({page:1,limit:30}),T=(0,i.Z)(S,2),D=T[0],L=T[1];(0,m.useEffect)((function(){return t({type:"teamTeacher/fetchTeamTeacherManageLog",payload:Z({meta:D},s)}),function(){return t({type:"teamTeacher/resetTeamTeacherManageLog"})}}),[t,s,D]);var x,M,z=function(e,t){L({page:e,limit:t})},F=function(e,t){L({page:e,limit:t})},N=function(e){if(!e)return g({}),L({page:1,limit:30}),!1;var t=e.phone,n=e.idCard;if(t&&t.trim()&&!w.P6.isProperPhoneNumber(t))return a.ZP.error("输出的手机号格式有误");if(n&&n.trim()&&!w.P6.isProperIdCardNumber(n))return a.ZP.error("输出的身份证号格式有误");var r=Z({meta:D},e);g(r)},Y=function(){j({}),v(!1)},q={departmentId:C.department_id,ownerId:C.owner_id,relationLogId:C._id,onOkCallback:function(){Y(),N()},onCancelCallback:Y};return m.createElement("div",null,m.createElement(h,{onSearch:N}),(x=[{title:"业主姓名",key:"ownerName",dataIndex:"owner_info",render:function(e,t){return E&&t.owner_id?m.createElement("a",{href:"/#/Team/Manager/Update?id=".concat(t.owner_id),rel:"noopener noreferrer",target:"_blank"},l().get(e,"staff_info.name","--")):l().get(e,"staff_info.name","--")}},{title:"业主团队ID",key:"teamId",dataIndex:"owner_id",render:function(e){return e||"--"}},{title:"业主身份证号",key:"idCard",dataIndex:"owner_info",render:function(e){return l().get(e,"staff_info.identity_card_id","--")}},{title:"业主手机号",key:"phone",dataIndex:"owner_info",render:function(e){return l().get(e,"staff_info.phone","--")}},{title:"平台",dataIndex:"owner_info",key:"owner_info.platform_names",render:function(e){return e&&e.platform_names&&e.platform_names.length>0?e.platform_names.toString():"--"}},{title:"供应商",dataIndex:"owner_info",key:"owner_info.supplier_names",render:function(e){return e&&e.supplier_names&&e.supplier_names.length>0?e.supplier_names.toString():"--"}},{title:"私教部门编号",dataIndex:"department_info",render:function(e){return l().get(e,"code","--")}},{title:"私教部门名称",dataIndex:"department_info",render:function(e){return l().get(e,"name","--")}},{title:"操作",render:function(e,t){return y.ZP.canOperateTeamTeacherManageChange()?m.createElement("a",{onClick:function(){var e;e=t,j({department_id:l().get(e,"department_info._id",void 0),owner_id:l().get(e,"owner_info._id",void 0),_id:e._id}),v(!0)}},"更换私教管理"):null}}],M={current:D.page,pageSize:D.limit,onChange:z,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:F,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:l().get(o,"_meta.result_count",0)},m.createElement(d.IT,null,m.createElement(r.Z,{pagination:M,columns:x,rowKey:function(e,t){return e._id||t},dataSource:u}))),I&&m.createElement(b.Z,q))}))}}]);