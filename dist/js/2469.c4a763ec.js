"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[2469],{22112:function(e,t,n){var a=n(87462),r=n(93433),o=n(44925),c=(n(29093),n(16317)),i=n(96486),u=n.n(i),l=n(67294),s=n(55609),d=["dispatch","value","onChange","enumeratedValue"],m=c.Z.Option;t.Z=(0,s.connect)((function(e){return{enumeratedValue:e.codeRecord.enumeratedValue}}))((function(e){var t=e.dispatch,n=e.value,i=e.onChange,s=e.enumeratedValue,p=void 0===s?{}:s,f=(0,o.Z)(e,d);(0,l.useEffect)((function(){return t({type:"codeRecord/getEnumeratedValue",payload:{}}),function(){t({type:"codeRecord/resetEnumerateValue",payload:{}})}}),[t]);var h=p.code_invoice_titles||[],v=p.team_invoice_titles||[],y=u().uniqWith([].concat((0,r.Z)(h),(0,r.Z)(v)),(function(e,t){return e.name===t.name}));return l.createElement(c.Z,(0,a.Z)({value:n,onChange:i,dropdownMatchSelectWidth:!1},f),y.map((function(e,t){return l.createElement(m,{value:e.name,key:t},e.name)})))}))},42167:function(e,t,n){var a=n(87462),r=n(44925),o=(n(29093),n(16317)),c=n(96486),i=n.n(c),u=n(55609),l=n(67294),s=["dispatch","mainBodyList","value","onChange"],d=o.Z.Option;t.Z=(0,u.connect)((function(e){return{mainBodyList:e.costAmortization.mainBodyList}}))((function(e){var t=e.dispatch,n=e.mainBodyList,c=void 0===n?{}:n,u=e.value,m=e.onChange,p=(0,r.Z)(e,s);(0,l.useEffect)((function(){return t({type:"costAmortization/getMainBodyList",payload:{}}),function(){t({type:"costAmortization/resetMainBodyList"})}}),[t]);var f=c.data,h=void 0===f?[]:f,v=i().uniqWith(h,(function(e,t){return e.name===t.name}));return l.createElement(o.Z,(0,a.Z)({value:u,onChange:m,dropdownMatchSelectWidth:!1},p),v.map((function(e){return l.createElement(d,{value:e._id,key:e._id},e.name)})))}))},35578:function(e,t,n){var a=n(87462),r=n(44925),o=(n(29093),n(16317)),c=n(55609),i=n(67294),u=["dispatch","platformList","value","onChange"],l=o.Z.Option;t.Z=(0,c.connect)((function(e){return{platformList:e.costAmortization.platformList}}))((function(e){var t=e.dispatch,n=e.platformList,c=void 0===n?{}:n,s=e.value,d=e.onChange,m=(0,r.Z)(e,u);(0,i.useEffect)((function(){return t({type:"costAmortization/getPlatformList",payload:{}}),function(){t({type:"costAmortization/resetPlatformList"})}}),[t]);var p=c.data,f=void 0===p?[]:p;return i.createElement(o.Z,(0,a.Z)({value:s,onChange:d,dropdownMatchSelectWidth:!1},m),f.map((function(e){return i.createElement(l,{value:e._id,key:e._id},e.name)})))}))},63781:function(e,t,n){var a=n(87462),r=n(44925),o=(n(29093),n(16317)),c=n(55609),i=n(67294),u=["dispatch","projectList","value","onChange"],l=o.Z.Option;t.Z=(0,c.connect)((function(e){return{projectList:e.costAmortization.projectList}}))((function(e){var t=e.dispatch,n=e.projectList,c=void 0===n?{}:n,s=e.value,d=e.onChange,m=(0,r.Z)(e,u);(0,i.useEffect)((function(){t({type:"costAmortization/getProjectList",payload:{}})}),[t]);var p=c.data,f=void 0===p?[]:p;return i.createElement(o.Z,(0,a.Z)({value:s,onChange:d,dropdownMatchSelectWidth:!1},m),f.map((function(e){return i.createElement(l,{value:e._id,key:e._id},e.name)})))}))},38225:function(e,t,n){var a=n(87462),r=n(44925),o=(n(29093),n(16317)),c=n(55609),i=n(67294),u=["dispatch","scenesList","value","onChange"],l=o.Z.Option;t.Z=(0,c.connect)((function(e){return{scenesList:e.costAmortization.scenesList}}))((function(e){var t=e.dispatch,n=e.scenesList,c=void 0===n?{}:n,s=e.value,d=e.onChange,m=(0,r.Z)(e,u);(0,i.useEffect)((function(){return t({type:"costAmortization/getScenesList",payload:{}}),function(){t({type:"costAmortization/resetScenesList"})}}),[t]);var p=c.data,f=void 0===p?[]:p;return i.createElement(o.Z,(0,a.Z)({value:s,onChange:d,dropdownMatchSelectWidth:!1},m),f.map((function(e){return i.createElement(l,{value:e._id,key:e._id},e.name)})))}))},54589:function(e,t,n){var a=n(87462),r=n(44925),o=(n(29093),n(16317)),c=n(55609),i=n(67294),u=["dispatch","subjectList","value","onChange","costCenterType","namespace"],l=o.Z.Option;t.Z=(0,c.connect)((function(e){return{subjectList:e.costAmortization.subjectList}}))((function(e){var t=e.dispatch,n=e.subjectList,c=void 0===n?{}:n,s=e.value,d=e.onChange,m=e.costCenterType,p=e.namespace,f=void 0===p?"all_data":p,h=(0,r.Z)(e,u);(0,i.useEffect)((function(){t({type:"costAmortization/getSubjectList",payload:{page:1,limit:9999,type:m,namespace:f}})}),[t,m,f]);var v=c[f]||[];return s&&v.length<1?i.createElement(o.Z,{style:{width:"80%"}}):i.createElement(o.Z,(0,a.Z)({value:s,onChange:d},h),v.map((function(e){return i.createElement(l,{value:e._id,key:e._id,disabled:Array.isArray(s)&&s.includes("*")},e.name,"(",e.ac_code,")")})))}))},22469:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});n(20186);var a=n(75385),r=n(4942),o=n(15861),c=n(29439),i=n(87757),u=n.n(i),l=n(67294),s=n(30381),d=n.n(s),m=n(45697),p=n.n(m),f=n(55609),h=n(96036),v=n(97116),y=n(80385),g=n(87462),Z=(n(35668),n(86585)),b=(n(29093),n(16317)),E=(n(54071),n(14072)),L=n(38225),_=n(35578),C=n(42167),w=n(63781),k=n(54589),j=n(22112),O=E.Z.MonthPicker,M=b.Z.Option,I={labelCol:{span:4},wrapperCol:{span:16}};function x(e){var t=e.onSearch,n=e.onReset,a=e.getDefaultBookMonth,r={placeholder:"请选择",allowClear:!0,mode:"multiple",optionFilterProp:"children",showArrow:!0},o=[l.createElement(Z.Z.Item,{label:"场景",name:"scenes"},l.createElement(L.Z,r)),l.createElement(Z.Z.Item,{label:"平台",name:"platform"},l.createElement(_.Z,r)),l.createElement(Z.Z.Item,{label:"主体",name:"mainBody"},l.createElement(C.Z,r)),l.createElement(Z.Z.Item,{label:"项目",name:"project"},l.createElement(w.Z,r)),l.createElement(Z.Z.Item,{label:"记账月份",name:"billMonth"},l.createElement(O,{allowClear:!1,placeholder:"请选择",disabledDate:function(e){return e&&e>a()}})),l.createElement(Z.Z.Item,{label:"科目类型",name:"subjectType"},l.createElement(b.Z,{placeholder:"请选择",allowClear:!0},l.createElement(M,{value:y.Xr3.team},y.Xr3.description(y.Xr3.team)),l.createElement(M,{value:y.Xr3.code},y.Xr3.description(y.Xr3.code)))),l.createElement(Z.Z.Item,{label:"科目名称",name:"subjectName"},l.createElement(k.Z,r)),{key:"invoice",span:16,render:l.createElement(Z.Z.Item,(0,g.Z)({label:"发票抬头",name:"invoiceTitle"},I),l.createElement(j.Z,{showArrow:!0,placeholder:"请选择",allowClear:!0,mode:"multiple",optionFilterProp:"children",dropdownMatchSelectWidth:!1}))}];return l.createElement(h.IT,{className:"affairs-flow-basic"},l.createElement(h.j6,{items:o,onSearch:t,onReset:n,initialValues:{billMonth:d()(a())}}))}x.propTypes={getDefaultBookMonth:p().func};var P=x;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(){var e=Number(d()().get("date"));return e>12?d()():e<=12?d()().subtract(1,"M"):void 0};function T(e){var t=e.ledgerListInfo,n=e.fetchLedgerList,r=e.clearLedgerList,i=(0,l.useState)(!0),s=(0,c.Z)(i,2),d=s[0],m=s[1],p=(0,l.useRef)({page:1,limit:30,billMonth:A()});(0,l.useEffect)((function(){return(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(p.current);case 2:m(!1);case 3:case"end":return e.stop()}}),e)})))(),function(){r()}}),[]);var f,g,Z,b=function(){var e=(0,o.Z)(u().mark((function e(){var t,a=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},m(!0),p.current=z(z({},p.current),t),e.next=5,n(z({},p.current));case 5:m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),p.current={page:1,limit:30,billMonth:A()},e.next=4,n(p.current);case 4:m(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.createElement("div",null,l.createElement(P,{onSearch:b,onReset:E,getDefaultBookMonth:A}),(f=[{title:"科目名称",dataIndex:"cost_accounting_name",key:"cost_accounting_name",render:function(e){return e||"--"}},{title:"应摊总额",dataIndex:"allocation_total_money",key:"allocation_total_money",render:function(e){return e||0===e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"总税金",dataIndex:"tax_money",key:"tax_money",render:function(e){return e||0===e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"本期应摊总额",dataIndex:"allocation_money",key:"allocation_money",render:function(e){return e||0===e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"未摊金额",dataIndex:"accumulated_unallocation_money",key:"accumulated_unallocation_money",render:function(e){return e||0===e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"累计已摊销金额",dataIndex:"accumulated_allocation_money",key:"accumulated_allocation_money",render:function(e){return e||0===e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"预计残值金额",dataIndex:"pre_salvage_money",key:"pre_salvage_money",render:function(e){return e||0===e?y.fbc.exchangePriceCentToMathFormat(e):"--"}}],g=p.current.limit,Z={current:p.current.page||1,pageSize:g||30,onChange:function(e,t){p.current=z(z({},p.current),{},{page:e,limit:t}),b()},showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:function(e,t){p.current=z(z({},p.current),{},{page:e,limit:t}),b()},showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:v.P6.dotOptimal(t,"_meta.result_count",0)},l.createElement(h.IT,{title:"分摊台账表"},l.createElement(a.Z,{rowKey:function(e,t){return e._id||t},columns:f,bordered:!0,dataSource:t.data||[],pagination:Z,loading:d}))))}T.propTypes={ledgerListInfo:p().object};var B=(0,f.connect)((function(e){return{ledgerListInfo:e.costAmortization.ledgerListInfo}}),(function(e){return{fetchLedgerList:function(t){return e({type:"costAmortization/fetchLedgerList",payload:t})},clearLedgerList:function(){return e({type:"costAmortization/reduceLedgerListInfo",payload:{}})}}}))(T)}}]);