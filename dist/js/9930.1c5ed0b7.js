"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[9930],{49930:function(e,t,n){n.r(t),n.d(t,{default:function(){return D}});n(52560);var r=n(71577),a=(n(20186),n(75385)),c=(n(21316),n(75443)),o=n(4942),l=n(29439),i=n(30381),u=n.n(i),s=n(67294),m=n(55609),p=n(96036),f=n(97116),d=n(80385),y=n(45430),h=(n(35668),n(86585)),C=(n(9070),n(20924));var g=function(e){var t,n,r=function(){e.onSearch&&e.onSearch({})};return s.createElement(s.Fragment,null,(t=e.operations,n={items:[s.createElement(h.Z.Item,{label:"合同模版编码",name:"code"},s.createElement(C.Z,{placeholder:"请输入",allowClear:!0})),s.createElement(h.Z.Item,{label:"合同模版名称",name:"name"},s.createElement(C.Z,{placeholder:"请输入",allowClear:!0}))],operations:t,expand:!0,onReset:r,onSearch:e.onSearch},s.createElement(p.IT,null,s.createElement(p.j6,n))))},b=(n(52466),n(10642));function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=(0,m.connect)()((function(e){var t,n=e.dispatch,r=e.visible,a=(0,s.useState)(!1),c=(0,l.Z)(a,2),o=c[0],i=c[1],u=h.Z.useForm(),m=(0,l.Z)(u,1)[0],f=function(){m.resetFields(),i(!1),e.onCancel&&e.onCancel()};return s.createElement(h.Z,{form:m},s.createElement(b.Z,{title:"新增合同模板",visible:r,confirmLoading:o,onOk:function(){m.validateFields().then((function(t){n({type:"systemContractTemplate/createContractTemplates",payload:O(O({},t),{},{onLoading:function(){i(!1)},onSuccessCallback:function(){f(),e.onSuccessCallback&&e.onSuccessCallback()}})})}))},onCancel:f},(t=[s.createElement(h.Z.Item,{label:"合同模板编码",name:"code",rules:[{required:!0,message:"请输入"}]},s.createElement(C.Z,{placeholder:"请输入",allowClear:!0}))],s.createElement(p.Fp,{items:t,cols:1}))))})),w=(n(20559),n(99683)),S=(n(62004),n(11382)),P=n(94315),Z=n.n(P),T=n(67724),k=n(8812);var j=(0,m.connect)((function(e){return{templatesPreview:e.systemContractTemplate.templatesPreview}}))((function(e){var t,n=e.dispatch,r=e.templatesPreview,a=e.previewId,c=(0,s.useState)(!1),o=(0,l.Z)(c,2),i=o[0],u=o[1];return(0,s.useEffect)((function(){return u(!0),n({type:"systemContractTemplate/fetchContractTemplatesPreview",payload:{id:a,onLoading:function(){u(!1)}}}),function(){n({type:"systemContractTemplate/reduceContractTemplatesPreview",payload:{}})}}),[n,a]),s.createElement(b.Z,{title:"预览合同模版",visible:!0,onCancel:function(){e.onCancel&&e.onCancel()},footer:null},s.createElement("div",{style:{width:"100%",height:500,padding:"20px",background:"#f7f7f7",overflowY:"scroll"}},(t=f.P6.dotOptimal(r,"image_url_list",[]),i?s.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}}," ",s.createElement(S.Z,null)):Z().not.existy(t)||Z().empty(t)?s.createElement(w.ZP,{status:"error",title:"请重试"}):t.map((function(e,n){return s.createElement(s.Fragment,{key:n},s.createElement("img",{style:{width:"100%",height:"auto"},src:e,role:"presentation"}),s.createElement("div",{style:{height:25,lineHeight:"25px",textAlign:"center"}},s.createElement(T.Z,null)," ",s.createElement("span",{style:{color:"#1676ff"}},n+1," ")," / ",t.length," ",s.createElement(k.Z,null)))})))))}));function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=(0,m.connect)((function(e){return{contractTemplates:e.systemContractTemplate.contractTemplates}}))((function(e){var t=e.dispatch,n=e.contractTemplates,o={page:1,limit:30},i=(0,s.useState)({meta:o}),m=(0,l.Z)(i,2),h=m[0],C=m[1],b=(0,s.useState)(!1),E=(0,l.Z)(b,2),O=E[0],w=E[1],S=(0,s.useState)(!1),P=(0,l.Z)(S,2),Z=P[0],T=P[1],k=(0,s.useState)(),I=(0,l.Z)(k,2),D=I[0],_=I[1];(0,s.useEffect)((function(){return t({type:"systemContractTemplate/fetchContractTemplates",payload:x({state:d.kXG.on},h)}),function(){t({type:"systemContractTemplate/reduceContractTemplates",payload:{}})}}),[t,h]);var F,z,L,Y,G,H,R=function(e,t){C(x(x({},h),{},{meta:{page:e,limit:t}}))},X=function(){t({type:"systemContractTemplate/fetchContractTemplates",payload:x({state:d.kXG.on},h)})};return s.createElement(s.Fragment,null,s.createElement(g,{onSearch:function(e){C(x(x({},e),{},{meta:o}))},operations:s.createElement(s.Fragment,null,s.createElement(r.Z,{type:"primary",onClick:function(){w(!0)}},"新增合同模板"),y.ZP.canOperateSystemContractTemplateComponentDetail()?s.createElement(r.Z,{type:"primary",style:{marginLeft:10},onClick:function(){window.location.href="/#/System/ContractTemplate/ComponentDetail"}},"查看组件详情"):null)}),(F=h.meta,z=F.page,L=F.limit,Y=f.P6.dotOptimal(n,"data",[]),G=[{title:"编号",dataIndex:"number",key:"number",render:function(e,t,n){var r=L*(z-1)+n+1;return s.createElement("div",null,r)}},{title:"合同模板编码",dataIndex:"_id",render:function(e){return e||"--"}},{title:"合同模板名称",width:450,dataIndex:"name",render:function(e){return e||"--"}},{title:"操作人",dataIndex:["operator_info","name"],render:function(e){return e||"--"}},{title:"操作时间",dataIndex:"updated_at",key:"updated_at",render:function(e){return e?u()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"状态",dataIndex:"state",render:function(e){return d.kXG.description(e)}},{title:"操作",dataIndex:"operate",render:function(e,n){return s.createElement("div",null,s.createElement("a",{style:{marginRight:10},onClick:function(){return function(e){t({type:"systemContractTemplate/fetchRefreshContractTemplate",payload:{id:f.P6.dotOptimal(e,"_id",void 0),onSuccessCallback:X}})}(n)}},"刷新"),s.createElement(c.Z,{title:"您是否确认删除此合同模版？",onConfirm:function(){return function(e){t({type:"systemContractTemplate/deleteContractTemplates",payload:{id:f.P6.dotOptimal(e,"_id",void 0),onSuccessCallback:X}})}(n)}},s.createElement("a",null,"删除")),s.createElement("a",{style:{marginLeft:10},onClick:function(){return function(e){_(e._id),T(!0)}(n)}},"预览合同模板"))}}],H={current:z,defaultPageSize:L,pageSize:L,onChange:R,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:R,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:f.P6.dotOptimal(n,"_meta.result_count",0)},s.createElement(p.IT,{title:"合同模版列表"},s.createElement(a.Z,{rowKey:function(e){return e._id},bordered:!0,pagination:H,dataSource:Y,columns:G}))),Z?s.createElement(j,{onCancel:function(){T(!1),_(void 0)},previewId:D}):null,s.createElement(v,{visible:O,onCancel:function(){w(!1)},onSuccessCallback:X}))}))}}]);