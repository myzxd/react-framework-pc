"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[1783],{11783:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});var n=a(15671),r=a(43144),c=a(97326),o=a(60136),i=a(82963),u=a(61120),l=a(4942),s=a(67294),d=a(93517),f=a.n(d),p=a(55609),m=a(45697),y=a.n(m),Z=(a(20186),a(75385)),h=a(94315),v=a.n(h),I=a(80385);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.Z)(this,a)}}var D=function(e){(0,o.Z)(a,e);var t=g(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,l.Z)((0,c.Z)(e),"componentDidMount",(function(){var t={taskId:e.props.calculateId,type:I.F$Y.district};e.props.dispatch({type:"financePlan/fetchDistrictsDetailData",payload:t})})),(0,l.Z)((0,c.Z)(e),"renderDistrictsContent",(function(){var t=e.props.districtsData,a=[{title:"城市",dataIndex:"cityName",key:"cityName",render:function(e){return e||"--"}},{title:"商圈",dataIndex:"bizDistrictName",key:"bizDistrictName",render:function(e){return e||"--"}},{title:"版本号",dataIndex:"planVersionId",key:"planVersionId",render:function(e){return e||"--"}},{title:"试算月份",dataIndex:"startDate",key:"startDate",render:function(e){return e||"--"}},{title:"完成单量",dataIndex:["data","done_order"],key:"data.done_order",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?e:"--"}},{title:"试算总金额(元)",dataIndex:["data","trial_calculation_amount"],key:"data.trial_calculation_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}},{title:"单量提成(元)",dataIndex:["data","total_order"],key:"data.total_order",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}},{title:"补贴总额(元)",dataIndex:["data","subsidy_amount"],key:"data.subsidy_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}},{title:"管理总额(元)",dataIndex:["data","management_amount"],key:"data.management_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}}],n={showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:30,total:f().get(t,"data",[]).length,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"]};return s.createElement("div",null,s.createElement(Z.Z,{columns:a,rowKey:function(e,t){return t},scroll:{x:1e3},dataSource:f().get(t,"data",[]),pagination:n,bordered:!0}))})),e}return(0,r.Z)(a,[{key:"render",value:function(){return s.createElement("div",null,this.renderDistrictsContent())}}]),a}(s.Component);(0,l.Z)(D,"propTypes",{districtsData:y().object,calculateId:y().string}),(0,l.Z)(D,"defaultProps",{districtsData:{},calculateId:""});var E=(0,p.connect)((function(e){return{districtsData:e.financePlan.districtsData}}))(D);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.Z)(this,a)}}var N=function(e){(0,o.Z)(a,e);var t=b(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,l.Z)((0,c.Z)(e),"componentDidMount",(function(){var t={taskId:e.props.calculateId,type:I.F$Y.knight};e.props.dispatch({type:"financePlan/fetchCourierDetailData",payload:t})})),(0,l.Z)((0,c.Z)(e),"rendercourierContent",(function(){var t=e.props.courierData,a=[{title:"城市",dataIndex:"cityName",key:"cityName",render:function(e){return e||"--"}},{title:"商圈",dataIndex:"bizDistrictName",key:"bizDistrictName",render:function(e){return e||"--"}},{title:"版本号",dataIndex:"planVersionId",key:"planVersionId",render:function(e){return e||"--"}},{title:"骑士姓名/boss工号",dataIndex:["staffInfo","name"],key:"staffInfo.name",render:function(e,t){return s.createElement("span",null,e,"/",t.staffInfo.id)}},{title:"手机号",dataIndex:["staffInfo","phone"],key:"staffInfo.phone",render:function(e){return e||"--"}},{title:"试算月份",dataIndex:"startDate",key:"startDate",render:function(e){return e||"--"}},{title:"完成单量",dataIndex:["data","subsidy_amount"],key:"data.subsidy_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?e:"--"}},{title:"试算总金额(元)",dataIndex:["data","trial_calculation_amount"],key:"data.trial_calculation_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}},{title:"单量提成(元)",dataIndex:["data","total_order"],key:"data.total_order",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}},{title:"补贴总额(元)",dataIndex:["data","subsidy_amount"],key:"data.subsidy_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}},{title:"管理总额(元)",dataIndex:["data","management_amount"],key:"data.management_amount",render:function(e,t){var a=t.state;return v().number(e)&&a!==I.KTU.pendding?I.fbc.exchangePriceToYuan(e):"--"}}],n={showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:30,total:f().get(t,"data",[]).length,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"]};return s.createElement("div",null,s.createElement(Z.Z,{columns:a,rowKey:function(e,t){return t},scroll:{x:1e3},dataSource:f().get(t,"data",[]),pagination:n,bordered:!0}))})),e}return(0,r.Z)(a,[{key:"render",value:function(){return s.createElement("div",null,this.rendercourierContent())}}]),a}(s.Component);(0,l.Z)(N,"propTypes",{courierData:y().object,calculateId:y().string}),(0,l.Z)(N,"defaultProps",{courierData:{},calculateId:""});var x=(0,p.connect)((function(e){return{courierData:e.financePlan.courierData}}))(N),k=(a(13062),a(71230)),P=(a(89032),a(15746)),T=(a(21316),a(75443)),S=(a(52560),a(71577)),_=a(96036),R=a(45430),C="R6lglg6V61Ipd6fPmMRP",Y="iIv_7wQO6_rzlqEs5Ylp",w="jPO5WIhTWzUXeJWRAn5_",z="Sw9FRpl160L9c0jSwCb9",A="RkWJMK0UULIIzwXNS_5b",K="uY_yR2vj0YnXocLVOQar";function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.Z)(this,a)}}var U=function(e){(0,o.Z)(a,e);var t=O(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,l.Z)((0,c.Z)(e),"componentDidMount",(function(){var t={taskId:e.props.calculateId};e.props.dispatch({type:"financePlan/fetchSalaryPlanSummaryData",payload:t})})),(0,l.Z)((0,c.Z)(e),"onExportData",(function(){var t=e.props.calculateSummaryData,a={taskId:f().get(t,"data",[]).map((function(e){return e.id})).join("")};e.props.dispatch({type:"financePlan/downloadSalaryPlanList",payload:a})})),e}return(0,r.Z)(a,[{key:"render",value:function(){var e=this.props.calculateSummaryData,t=s.createElement("span",null,s.createElement(T.Z,{placement:"left",title:"是否导出数据内容?",onConfirm:this.onExportData,okText:"确定",cancelText:"取消"},!R.ZP.canOperateFinancePlanExportData()||s.createElement(S.Z,{type:"primary"},"导出数据")));return s.createElement(_.IT,{title:"试算汇总",titleExt:t},f().get(e,"data",[]).map((function(e,t){return s.createElement(k.Z,{key:t},s.createElement(P.Z,{span:7,className:w},s.createElement(P.Z,{span:8,className:z},"流水号:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},"".concat(e.id)?"".concat(e.id):"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:8,className:z},"城市:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},"".concat(e.cityName)?"".concat(e.cityName):"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:8,className:z},"商圈:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},"".concat(e.bizDistrictName)?"".concat(e.bizDistrictName):"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:6,className:z},"版本号:"),s.createElement(P.Z,{span:"17",className:A,offset:"1"},"".concat(e.planVersionId)?"".concat(e.planVersionId):"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:8,className:z},"试算月份:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},"".concat(e.fromDate)?"".concat(e.fromDate):"--")),s.createElement(P.Z,{span:7,className:w},s.createElement(P.Z,{span:8,className:z},"完成单量:"),s.createElement(P.Z,{span:"14",className:K,offset:"1"},e.computeDataSet.doneOrder[0]?e.computeDataSet.doneOrder[0]:"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:"10",className:z},"试算总金额:"),s.createElement(P.Z,{span:"12",className:A,offset:"1"},I.fbc.exchangePriceToYuan(e.computeDataSet.managementAmount[0])?I.fbc.exchangePriceToYuan(e.computeDataSet.managementAmount[0]):"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:8,className:z},"单量总额:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},e.computeDataSet.totalOrder[0]?e.computeDataSet.totalOrder[0]:"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:8,className:z},"补贴总额:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},I.fbc.exchangePriceToYuan(e.computeDataSet.subsidyAmount[0])?I.fbc.exchangePriceToYuan(e.computeDataSet.subsidyAmount[0]):"--")),s.createElement(P.Z,{span:4,className:w},s.createElement(P.Z,{span:8,className:z},"管理总额:"),s.createElement(P.Z,{span:"14",className:A,offset:"1"},I.fbc.exchangePriceToYuan(e.computeDataSet.managementAmount[0])?I.fbc.exchangePriceToYuan(e.computeDataSet.managementAmount[0]):"--")))})))}}]),a}(s.Component);(0,l.Z)(U,"propTypes",{calculateSummaryData:y().object,calculateId:y().string}),(0,l.Z)(U,"defaultProps",{calculateSummaryData:{},calculateId:""});var B=(0,p.connect)((function(e){return{calculateSummaryData:e.financePlan.calculateSummaryData}}))(U);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,i.Z)(this,a)}}var V=function(e){(0,o.Z)(a,e);var t=j(a);function a(e){var r;return(0,n.Z)(this,a),r=t.call(this,e),(0,l.Z)((0,c.Z)(r),"componentDidMount",(function(){var e={taskId:r.props.location.query.calculateId};r.props.dispatch({type:"financePlan/fetchSalaryPlanAddressInfo",payload:e})})),(0,l.Z)((0,c.Z)(r),"onChange",(function(e){var t=r.props.location.query.calculateId,a=r.state.courier,n={taskId:t,type:I.F$Y.knight},c={taskId:t,type:I.F$Y.district};e===a?r.props.dispatch({type:"financePlan/fetchCourierDetailData",payload:n}):r.props.dispatch({type:"financePlan/fetchDistrictsDetailData",payload:c})})),(0,l.Z)((0,c.Z)(r),"renderAddress",(function(){var e=r.props.addressInfo,t=f().get(e,"data",[]);return s.createElement("div",null,t.map((function(e,t){return s.createElement("h1",{key:t,className:Y}," ",e.bizDistrictName?"".concat(e.cityName,"-").concat(e.bizDistrictName):e.cityName," ")})))})),(0,l.Z)((0,c.Z)(r),"renderCalculateSummary",(function(){var e=r.props.location.query.calculateId;return s.createElement(B,{calculateId:e})})),(0,l.Z)((0,c.Z)(r),"renderTabs",(function(){var e=r.props.location.query.calculateId,t=r.state.districts,a=[{title:"商圈维度明细表",content:s.createElement(E,{type:I.Q_.districts,calculateId:e}),key:"商圈维度明细表"},{title:"骑士维度明细表",content:s.createElement(x,{type:I.Q_.courier,calculateId:e}),key:"骑士维度明细表"}];return s.createElement("div",{className:C},s.createElement(_.IT,{title:"明细表"},s.createElement(_.DF,{items:a,onChange:r.onChange,defaultActiveKey:t})))})),r.state={courier:"骑士维度明细表",districts:"商圈维度明细表"},r}return(0,r.Z)(a,[{key:"render",value:function(){return s.createElement("div",null,this.renderAddress(),this.renderCalculateSummary(),this.renderTabs())}}]),a}(s.Component);(0,l.Z)(V,"propTypes",{addressInfo:y().object}),(0,l.Z)(V,"defaultProps",{addressInfo:{}});var F=(0,p.connect)((function(e){return{addressInfo:e.financePlan.addressInfo}}))(V)}}]);