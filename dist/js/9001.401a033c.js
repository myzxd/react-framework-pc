"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[9001],{93488:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(1413),o=t(67294),l={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},r=t(30076),i=function(e,n){return o.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:l}))};i.displayName="ArrowRightOutlined";var c=o.forwardRef(i)},56862:function(e,n,t){t(13062);var a=t(71230),o=(t(89032),t(15746)),l=t(94315),r=t.n(l),i=t(93517),c=t.n(i),p=t(67294),m=t(55609),s=t(93488),u=t(80385);n.Z=(0,m.connect)((function(e){return{examineFlowInfo:e.relationExamineFlow.examineFlowInfo,contractTypeData:e.business.contractTypeData}}))((function(e){var n=c().get(e,"nodelist",[]),t=function(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!1,l=e.node_approve_type,i=e.approve_department_name,c=e.job_name,m=e.now_approve,d=e.approve_department_account_type,y="";return l===u.gH5.report&&(y="直接领导人"),l===u.gH5.coopera&&(d===u.DXc.principal&&((r().not.existy(m)||r().empty(m))&&(a=!0),y=p.createElement("span",null,i?"".concat(i,"  -  "):"",u.DXc.description(d),Array.isArray(m)&&m.length>0?"  -  ".concat(m.join("、")):"-  无")),d===u.DXc.post&&((r().not.existy(m)||r().empty(m))&&(a=!0),y=p.createElement("span",null,i,c?"  -  ".concat(c):"",Array.isArray(m)&&m.length>0?"  -  ".concat(m.join("、")):"-  无"))),p.createElement(o.Z,{style:{marginLeft:5},key:n},p.createElement("span",{style:{color:a?"red":""}},e.node_name,"（",y,"）"),t?null:p.createElement(s.Z,null))};return p.createElement(p.Fragment,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r().not.existy(e)||r().empty(e)?"--":p.createElement(a.Z,null,p.createElement(o.Z,null,p.createElement("span",null,"申请人")," ",p.createElement(s.Z,null)),e.map((function(n,a){return t(n,a,a===e.length-1)})))}(n))}))},69001:function(e,n,t){t.r(n);t(52560);var a=t(71577),o=(t(75310),t(76772)),l=(t(51838),t(48086)),r=(t(35668),t(86585)),i=t(29439),c=t(93517),p=t.n(c),m=t(67294),s=t(55609),u=t(96036),d=t(80385),y=t(56087),f=t(29796),w=t(56862),E=d.B_f.codeTeam,h=d.RbW.bu3,b=d.RbW.quhuo,g="".concat(E).concat(h),F="".concat(E).concat(b);n.default=(0,s.connect)((function(e){return{examineFlowInfo:e.relationExamineFlow.examineFlowInfo}}))((function(e){var n=e.dispatch,t=e.examineFlowInfo,c=e.location.query,s=void 0===c?{}:c,x=r.Z.useForm(),v=(0,i.Z)(x,1)[0],C=(0,m.useState)(),Z=(0,i.Z)(C,2),_=Z[0],O=Z[1];(0,m.useEffect)((function(){return n({type:"relationExamineFlow/fetchExamineFlowXDInfo",payload:{bizType:E,merchant:h,namespace:g,flowId:s.xdFlowId}}),n({type:"relationExamineFlow/fetchExamineFlowinfo",payload:{bizType:E,merchant:b,namespace:F,flowId:s.qhFlowId}}),function(){n({type:"relationExamineFlow/reduceExamineFlowinfo",payload:{}})}}),[n,s]),(0,m.useEffect)((function(){v.setFieldsValue({bu3ExamineFlow:p().get(t,"".concat(g,"._id"),void 0),examineFlow:p().get(t,"".concat(F,"._id"),void 0)})}),[t,v]);var I,T,j,A,D=function(e){n(e?{type:"relationExamineFlow/fetchExamineFlowinfo",payload:{bizType:E,namespace:g,merchant:h,flowId:e}}:{type:"relationExamineFlow/reduceExamineFlowinfo",payload:{result:{},namespace:g}})},z=function(e){n(e?{type:"relationExamineFlow/fetchExamineFlowinfo",payload:{bizType:E,namespace:F,merchant:b,flowId:e}}:{type:"relationExamineFlow/reduceExamineFlowinfo",payload:{result:{},namespace:F}})},P=function(){l.ZP.success("请求成功"),window.location.href="/#/Expense/RelationExamineFlow?activeKey=".concat(E)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=p().get(e,"final_type",[]),t=p().get(e,"final_approval_jobs",[]),a=p().get(e,"final_approval_job_tags",[]),o="--";return Array.isArray(t)&&t.length>0&&(o=m.createElement("div",null,d.mqh.description(n),"(",t.join("、"),")")),Array.isArray(a)&&a.length>0&&(o=m.createElement("div",null,d.mqh.description(n),"(",a.join("、"),")")),o};return m.createElement(r.Z,{layout:"horizontal",form:v,onFinish:function(){}},m.createElement(o.Z,{showIcon:!0,message:"提示：节点颜色显示红色为节点无审批人，关联关系不能创建成功！",type:"error",style:{margin:"10px 0"}}),m.createElement("h2",null,"code/team审批流关联"),(I=p().get(t,g,{}),T=p().get(I,"node_list",[]),j=p().get(I,"cost_center_types",[]),A=[{span:24,render:m.createElement(r.Z.Item,{labelCol:{span:4},colon:!1,style:{marginBottom:0},label:m.createElement("h3",null,"BU3-code/team审批流：")})},{span:24,render:m.createElement(r.Z.Item,{label:"审批流名称",name:"bu3ExamineFlow",labelCol:{span:2},wrapperCol:{span:12},rules:[{required:!0,message:"请输入审批流名称"}]},m.createElement(f.Z,{onChange:D,name:I.name,state:I.state,initItem:{_id:I._id,name:I.name},bizType:E,merchant:h}))},{span:6,render:m.createElement(r.Z.Item,{label:"成本中心",labelCol:{span:8},wrapperCol:{span:16}},Array.isArray(j)&&j.length>0?j.map((function(e){return d.Xr3.description(e)})).join("、"):"--")},{span:4,render:m.createElement(r.Z.Item,{label:"是否有RS节点",labelCol:{span:14},wrapperCol:{span:8}},p().get(I,"is_rs")?"是":"否")},{span:14,render:m.createElement(r.Z.Item,{label:"最高审批岗",labelCol:{span:4},wrapperCol:{span:20}},m.createElement("span",{className:"noteWrap"},L(I)))},{span:24,render:m.createElement(r.Z.Item,{label:"审批流预览",labelCol:{span:2},wrapperCol:{span:22}},m.createElement(w.Z,{nodelist:T,applyApplicationType:p().get(I,"applyApplicationTypes.0",void 0)}))}],m.createElement(u.IT,null,m.createElement(u.Fp,{items:A,cols:3}))),function(){var e=p().get(t,F,{}),n=p().get(e,"node_list",[]),a=p().get(e,"cost_center_types",[]),o=[{span:24,render:m.createElement(r.Z.Item,{labelCol:{span:4},colon:!1,style:{marginBottom:0},label:m.createElement("h3",null,"趣活-code/team审批流：")})},{span:24,render:m.createElement(r.Z.Item,{label:"审批流名称",name:"examineFlow",labelCol:{span:2},wrapperCol:{span:12},rules:[{required:!0,message:"请输入审批流名称"}]},m.createElement(y.Z,{onChange:z,name:e.name,state:e.state,initItem:{_id:e._id,name:e.name},bizType:E,merchant:b}))},{span:6,render:m.createElement(r.Z.Item,{label:"成本中心",labelCol:{span:8},wrapperCol:{span:16}},Array.isArray(a)&&a.length>0?a.map((function(e){return d.Xr3.description(e)})).join("、"):"--")},{span:18,render:m.createElement(r.Z.Item,{label:"最高审批岗",labelCol:{span:3},wrapperCol:{span:21}},m.createElement("span",{className:"noteWrap"},L(e)))},{span:24,render:m.createElement(r.Z.Item,{label:"审批流预览",labelCol:{span:2},wrapperCol:{span:22}},m.createElement(w.Z,{nodelist:n,applyApplicationType:p().get(e,"applyApplicationTypes.0",void 0)}))}];return m.createElement(u.IT,null,m.createElement(u.Fp,{items:o,cols:3}))}(),m.createElement("div",{style:{textAlign:"center"}},m.createElement(a.Z,{style:{marginRight:15},onClick:function(){window.location.href="/#/Expense/RelationExamineFlow?activeKey=".concat(E)}},"返回"),m.createElement(a.Z,{type:"primary",loading:_,onClick:function(){v.validateFields().then((function(e){O(!0);var t={xdFlowId:e.bu3ExamineFlow,qhFlowId:e.examineFlow,appWatchFlowId:s.appWatchFlowId,pluginId:s.pluginId,bizType:E,onLoading:function(){O(!1)},onSuccessCallback:P};n({type:"relationExamineFlow/updateRelationExamineFlow",payload:t})}))}},"启用")))}))},56087:function(e,n,t){var a=t(4942),o=(t(29093),t(16317)),l=t(94315),r=t.n(l),i=t(93517),c=t.n(i),p=t(67294),m=t(55609),s=t(96486),u=t.n(s),d=t(80385),y=t(8240);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=o.Z.Option;n.Z=(0,m.connect)((function(e){return{examineFlowList:e.relationExamineFlow.examineFlowList}}))((function(e){var n=e.dispatch,t=e.name,a=e.state,l=e.examineFlowList,i=void 0===l?{}:l,m=e.initItem,s=void 0===m?{}:m,f=e.applyApplicationType,h=e.bizType,b=e.merchant,g=c().get(i,"datas",[]),F=(0,p.useRef)(!0);(0,p.useEffect)((function(){t&&!0===F.current&&n({type:"relationExamineFlow/fetchExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:b,applyApplicationType:f}})}),[n,t,h,b,F,f]),(0,p.useEffect)((function(){return f&&n({type:"relationExamineFlow/reduceExamineFlow",payload:{}}),function(){n({type:"relationExamineFlow/reduceExamineFlow",payload:{}})}}),[n,f]);var x=u().debounce((function(t){F.current=!1,t&&n({type:"relationExamineFlow/fetchExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:b,applyApplicationType:f,onReset:function(){e.onChange&&e.onChange()}}})}),800),v=w(w({},(0,y.CE)(["dispatch","examineFlowList","bizType","merchant","applyApplicationType","initItem","state"],e)),{},{placeholder:"请输入",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:!1,onChange:function(t){F.current=!1,t?e.onChange&&e.onChange(t):void 0===t&&(n({type:"relationExamineFlow/reduceExamineFlow",payload:{}}),e.onChange&&e.onChange())},onSearch:x,notFoundContent:null}),C=h===d.B_f.codeTeam?d.ZAv:d.BsX;return F.current&&r().existy(s)&&r().not.empty(s)&&s._id&&!1===g.map((function(e){return e._id})).includes(s._id)&&g.push(w(w({},s),{},{disabled:!0})),p.createElement(o.Z,v,g.map((function(e){return p.createElement(E,{key:e._id,value:e._id,disabled:e.disabled},e.name,e.disabled&&a!==C.normal?"（".concat(C.description(a),"）"):null)})))}))},29796:function(e,n,t){var a=t(4942),o=(t(29093),t(16317)),l=t(94315),r=t.n(l),i=t(93517),c=t.n(i),p=t(67294),m=t(55609),s=t(96486),u=t.n(s),d=t(80385),y=t(8240);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var E=o.Z.Option;n.Z=(0,m.connect)((function(e){return{xdExamineFlowList:e.relationExamineFlow.xdExamineFlowList}}))((function(e){var n=e.dispatch,t=e.name,a=e.state,l=e.xdExamineFlowList,i=void 0===l?{}:l,m=e.initItem,s=void 0===m?{}:m,f=e.applyApplicationType,h=e.bizType,b=e.merchant,g=c().get(i,"datas",[]),F=(0,p.useRef)(!0);(0,p.useEffect)((function(){t&&!0===F.current&&n({type:"relationExamineFlow/fetchXDExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:b,applyApplicationType:f}})}),[n,t,h,b,F,f]),(0,p.useEffect)((function(){return f&&n({type:"relationExamineFlow/reduceXDExamineFlow",payload:{}}),function(){n({type:"relationExamineFlow/reduceXDExamineFlow",payload:{}})}}),[n,f]);var x=u().debounce((function(t){F.current=!1,t&&n({type:"relationExamineFlow/fetchXDExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:b,applyApplicationType:f,onReset:function(){e.onChange&&e.onChange()}}})}),800),v=w(w({},(0,y.CE)(["dispatch","xdExamineFlowList","bizType","merchant","applyApplicationType","initItem","state"],e)),{},{placeholder:"请输入",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:!1,onChange:function(t){F.current=!1,t?e.onChange&&e.onChange(t):void 0===t&&(n({type:"relationExamineFlow/reduceXDExamineFlow",payload:{}}),e.onChange&&e.onChange())},onSearch:x,notFoundContent:null}),C=h===d.B_f.codeTeam?d.ZAv:d.BsX;return F.current&&r().existy(s)&&r().not.empty(s)&&s._id&&!1===g.map((function(e){return e._id})).includes(s._id)&&g.push(w(w({},s),{},{disabled:!0})),p.createElement(o.Z,v,g.map((function(e){return p.createElement(E,{key:e._id,value:e._id,disabled:e.disabled},e.name,e.disabled&&a!==C.normal?"（".concat(C.description(a),"）"):null)})))}))}}]);