"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[310],{85769:function(e,t,r){var n=r(15671),a=r(43144),o=r(97326),i=r(60136),c=r(82963),l=r(61120),s=r(4942),u=(r(29093),r(16317)),p=r(67294),d=r(55609),f=r(45697),m=r.n(f);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,c.Z)(this,r)}}var y=u.Z.Option,g=10,v=function(e){(0,i.Z)(r,e);var t=h(r);function r(){var e;(0,n.Z)(this,r);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),(0,s.Z)((0,o.Z)(e),"onChange",(function(t){var r=e.props.onChange;r&&r(t)})),e}return(0,a.Z)(r,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"districtTag/getDistrictTags",payload:{limit:9999,page:1}})}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:"districtTag/resetDistrictTags",payload:{}})}},{key:"render",value:function(){var e=this.props,t=e.districtTags,r=void 0===t?{}:t,n=e.value,a=void 0===n?void 0:n,o=e.type,i=r.data,c=void 0===i?[]:i;return p.createElement(u.Z,{allowClear:!0,showSearch:!0,mode:o===g?null:"multiple",placeholder:"请选择标签",onChange:this.onChange,value:a,optionFilterProp:"children"},c.map((function(e){return p.createElement(y,{key:e._id},e.name)})))}}]),r}(p.Component);v.propTypes={districtTags:m().object,dispatch:m().func,onChange:m().func,type:m().number},v.defaultProps={districtTags:{},dispatch:function(){},onChange:function(){},type:g},t.Z=(0,d.connect)((function(e){return{districtTags:e.districtTag.districtTags}}))(v)},77417:function(e,t,r){r.d(t,{Z:function(){return O}});r(52560);var n=r(71577),a=(r(1868),r(12028)),o=(r(51838),r(48086)),i=r(4942),c=r(67294),l=r(93517),s=r.n(l),u=r(1413),p={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},d=r(30076),f=function(e,t){return c.createElement(d.Z,(0,u.Z)((0,u.Z)({},e),{},{ref:t,icon:p}))};f.displayName="MinusCircleOutlined";var m=c.forwardRef(f),h=r(49101),y=(r(9070),r(20924)),g=(r(29093),r(16317)),v=r(80385),b=g.Z.Option;var Z=function(e){var t,r=s().get(e,"item",{}),n=s().get(e,"codes",[]).filter((function(e){return e!==r.code})),a=s().get(e,"disabled",!1),o=s().get(e,"disabledItem",!1);return c.createElement(c.Fragment,null,(t=Object.values(v.pat).filter((function(e){return"function"!=typeof e})).map((function(e){return{code:e,name:v.pat.description(e)}})),c.createElement(c.Fragment,null,c.createElement(g.Z,{onChange:e.onChangePlatform,placeholder:"选择平台",disabled:a||o,value:r.code,style:{width:"40%"}},t.map((function(e){return n.includes(e.code)?null:c.createElement(b,{value:e.code},e.name)}))),c.createElement("span",{style:{margin:"0 5px"}},"--"),c.createElement(y.Z,{placeholder:"输入平台中的商圈ID",onChange:e.onChangePlatformId,value:r.id,disabled:a,style:{width:"40%"}}))))};function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,i.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(e){var t=s().get(e,"value.checked",!1),r=s().get(e,"value.items",[]),i=s().get(e,"disabled",!1),l=s().get(e,"disabledSwitch",!1),u=function(t){var r=E(E({},e.value),t);e.onChange&&e.onChange(r)},p=function(){var e=r[r.length-1];if(r.length-1>=0&&Object.values(e).filter((function(e){return""!==e})).length<3)return o.ZP.error("请填写完当前数据，再添加");r.push({disabled:!1}),u({items:r})};return c.createElement(c.Fragment,null,l?null:c.createElement("div",null,c.createElement(a.Z,{checked:t,disabled:i||l,onChange:function(e){u({checked:e,items:[{disabled:!1}]})}})),function(){if(!t)return null;var e=r.map((function(e){return e.code})),a=Object.values(v.pat).filter((function(e){return"function"!=typeof e})).length;return c.createElement(c.Fragment,null,r.map((function(t,n){return c.createElement(c.Fragment,{key:n},c.createElement(Z,{disabled:i,disabledItem:t.disabled,item:t,codes:e,onChangePlatform:function(e){return function(e,t){r[t].code=e,u({items:r})}(e,n)},onChangePlatformId:function(e){return function(e,t){r[t].id=e.target.value,u({items:r})}(e,n)}}),i||t.disabled?null:c.createElement(m,{style:{marginLeft:10},onClick:function(){var e;e=n,r.splice(e,1),u({items:r})}}))})),r.length>=a||i?null:c.createElement(n.Z,{type:"dashed",style:{width:"calc( 80% + 25px)"},onClick:p},c.createElement(h.Z,null)," 添加"))}())}},50310:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});r(52560);var n=r(71577),a=(r(9070),r(20924)),o=r(15671),i=r(43144),c=r(97326),l=r(60136),s=r(82963),u=r(61120),p=r(4942),d=(r(29093),r(16317)),f=r(55609),m=r(67294),h=r(66939),y=(r(98703),r(96036)),g=r(88144),v=r(80385),b=r(97116),Z=r(94315),C=r.n(Z),E=r(45697),O=r.n(E),P=r(8240);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var I=d.Z.Option,k=function(e){(0,l.Z)(r,e);var t=w(r);function r(){var e;(0,o.Z)(this,r);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,p.Z)((0,c.Z)(e),"componentDidMount",(function(){var t=e.props.industryCodes;C().existy(t)&&C().not.empty(t)&&e.props.dispatch({type:"districtManage/fetchPlatformList",payload:{industryCodes:t}})})),(0,p.Z)((0,c.Z)(e),"componentDidUpdate",(function(t){e.props.industryCodes!==t.industryCodes&&e.props.dispatch({type:"districtManage/fetchPlatformList",payload:{industryCodes:e.props.industryCodes}})})),e}return(0,i.Z)(r,[{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:"districtManage/resetPlatformList",payload:{}})}},{key:"render",value:function(){var e=this.props.platformList.map((function(e){return m.createElement(I,{key:e._id,value:"".concat(e.platform_code)},e.name)})),t=(0,P.CE)(["industryCodes","platformList","dispatch"],this.props);return m.createElement(d.Z,t,e)}}]),r}(m.Component);(0,p.Z)(k,"propTypes",{dispatch:O().func,industryCodes:O().number,platformList:O().array}),(0,p.Z)(k,"defaultProps",{dispatch:function(){},industryCodes:void 0,platformList:[]});var D=(0,f.connect)((function(e){return{platformList:e.districtManage.platformList}}))(k),j=r(77417),F=r(85769),B=r(8260);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,p.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.Z)(this,r)}}var M=d.Z.Option,A=20,q=function(e){(0,l.Z)(r,e);var t=R(r);function r(e){var i;return(0,o.Z)(this,r),i=t.call(this,e),(0,p.Z)((0,c.Z)(i),"onChangeBusiness",(function(){i.props.form.setFieldsValue({platformCode:void 0,supplierId:void 0,cityId:void 0})})),(0,p.Z)((0,c.Z)(i),"onChangePlatformCode",(function(e){var t=i.props.form;"meituan"!==e&&t.setFieldsValue({tripartiteId:{}}),t.setFieldsValue({supplierId:void 0,cityId:void 0})})),(0,p.Z)((0,c.Z)(i),"onChangeDistrictState",(function(e){var t=i.props.form.setFieldsValue;Number(e)===v.hQm.preparation&&(t({customId:""}),t({tripartiteId:{}}))})),(0,p.Z)((0,c.Z)(i),"onBack",(function(){i.props.history.push("/Assets/District/Manage")})),(0,p.Z)((0,c.Z)(i),"onSubmit",(function(e){e.preventDefault(),i.props.form.validateFields((function(e,t){if(!e){var r=T(T({},t),{},{onSuccessCallBack:i.onBack});i.props.dispatch({type:"districtManage/createDistrict",payload:r})}}))})),(0,p.Z)((0,c.Z)(i),"onKeepAdd",(function(e){e.preventDefault(),(0,i.props.form.validateFields)((function(e,t){if(!e){var r=T(T({},t),{},{onSuccessCallBack:i.createSuccessCallBack});i.props.dispatch({type:"districtManage/createDistrict",payload:r})}}))})),(0,p.Z)((0,c.Z)(i),"createSuccessCallBack",(function(){(0,i.props.form.resetFields)(["customId","name","tags","tripartiteId"])})),(0,p.Z)((0,c.Z)(i),"renderBusinessAttribution",(function(){var e=i.props.form,t=e.getFieldDecorator,r=e.getFieldValue,n=[{label:"所属场景",form:t("business",{rules:[{required:!0,message:"请选择所属场景"}]})(m.createElement(g.UU,{enumeratedType:"industry",onChange:i.onChangeBusiness}))},{label:"平台",form:t("platformCode",{rules:[{required:!0,message:"请选择平台"}]})(m.createElement(D,{allowClear:!0,showSearch:!0,placeholder:"请选择平台",industryCodes:i.props.form.getFieldValue("business"),onChange:i.onChangePlatformCode}))},{label:"供应商",form:t("supplierId",{rules:[{required:!0,message:"请选择供应商"}]})(m.createElement(g.o2,{enableSelectAll:!0,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择供应商",platforms:r("platformCode")}))},{label:"城市",form:t("cityId",{rules:[{required:!0,message:"请选择城市"}]})(m.createElement(g.Wn,{enableSelectAll:!0,isExpenseModel:!0,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择城市",platforms:r("platformCode")}))}];return m.createElement(y.IT,{title:"业务归属"},m.createElement(y.KP,{items:n,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,p.Z)((0,c.Z)(i),"renderBasicInfo",(function(){var e=i.props.form,t=e.getFieldDecorator,r=e.getFieldValue,n=Number(r("state"))===v.hQm.enable,o=i.props.form.getFieldValue("tripartiteId")&&i.props.form.getFieldValue("tripartiteId").checked,c=!1;n&&!o&&(c=!0);var l=[{label:"状态",form:t("state",{rules:[{required:!0,message:"请选择状态"}]})(m.createElement(d.Z,{placeholder:"请选择状态",onChange:i.onChangeDistrictState},m.createElement(M,{value:"".concat(v.hQm.enable)},v.hQm.description(v.hQm.enable)),m.createElement(M,{value:"".concat(v.hQm.preparation)},v.hQm.description(v.hQm.preparation))))},{label:"商圈名称",form:t("name",{rules:[{required:!0,message:"请输入商圈名称"}]})(m.createElement(a.Z,{placeholder:"请输入商圈名称"}))},{label:"meituan"===r("platformCode")?"平台商圈ID（专送）":"平台商圈ID",span:8,form:t("customId",{rules:[{required:c,validator:b.P6.asyncValidateCustomId}]})(m.createElement(a.Z,{disabled:!n,placeholder:"请输入商圈ID"}))}];"meituan"===r("platformCode")&&r("state")==="".concat(v.hQm.enable)&&l.push({label:"三方平台商圈ID（非专送）",span:15,layout:{labelCol:{span:6},wrapperCol:{span:18}},form:t("tripartiteId",{initialValue:{},rules:[{required:!1,validator:b.P6.asyncValidateTripartiteId}]})(m.createElement(j.Z,null))});return m.createElement(y.IT,{title:"基本信息"},m.createElement(y.KP,{items:l,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,p.Z)((0,c.Z)(i),"renderExtraInfo",(function(){var e=i.props.form.getFieldDecorator,t=[{label:"商圈来源",form:e("source",{rules:[{required:!0,message:"请选择商圈来源"}]})(m.createElement(d.Z,{placeholder:"请选择"},b.P6.transOptions(v.Aj8,M)))},{label:"商圈经营方式",form:e("mode",{rules:[{required:!0,message:"请选择商圈经营方式"}]})(m.createElement(d.Z,{placeholder:"请选择"},b.P6.transOptions(v.XF,M)))}];return m.createElement(y.IT,{title:"额外信息"},m.createElement(y.KP,{items:t,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,p.Z)((0,c.Z)(i),"renderTag",(function(){var e=[{label:"标签名称",form:(0,i.props.form.getFieldDecorator)("tags")(m.createElement(F.Z,{type:A}))}];return m.createElement(y.IT,{title:"标签"},m.createElement(y.KP,{items:e,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,p.Z)((0,c.Z)(i),"renderButton",(function(){return m.createElement("div",{className:B.Z["app-comp-system-create-btn-wrap"]},m.createElement(n.Z,{onClick:i.onBack},"返回"),m.createElement(n.Z,{type:"primary",onClick:i.onSubmit,className:B.Z["app-comp-system-create-submit-btn"]},"提交"),m.createElement(n.Z,{type:"primary",onClick:i.onKeepAdd,className:B.Z["app-comp-system-create-next-btn"]},"提交并添加下一项"))})),i.state={},i}return(0,i.Z)(r,[{key:"render",value:function(){return m.createElement("div",null,m.createElement(h.Z,null,this.renderBusinessAttribution(),this.renderBasicInfo(),this.renderExtraInfo(),this.renderTag(),this.renderButton()))}}]),r}(m.Component),x=h.Z.create()((0,f.connect)()(q))},8260:function(e,t){t.Z={"app-comp-system-district-del-btn":"jwD1LvdcMiOq9ISvTQhf","app-comp-system-detail-btn-wrap":"iMh94cAeGHVtBoIPZXCU","app-comp-detail-submit-btn":"ROgN_HyK56SizprERAwh","app-comp-system-create-btn-wrap":"tfTHSqZExFAOKK9c_zyQ","app-comp-system-create-submit-btn":"q7gunAFgBXHJNXMgYytn","app-comp-system-create-next-btn":"tX1_h7uYFDp29Z41QSe9","app-comp-assets-change-log-p":"H8h1eSai6pXBrOWkco7d"}}}]);