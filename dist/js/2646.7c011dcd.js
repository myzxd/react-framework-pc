"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[2646],{22263:function(e,t,n){n.d(t,{Z:function(){return i}});var a=n(1413),r=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3a32.05 32.05 0 00.6 45.3l183.7 179.1-43.4 252.9a31.95 31.95 0 0046.4 33.7L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}}]},name:"star",theme:"outlined"},c=n(30076),l=function(e,t){return r.createElement(c.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:t,icon:o}))};l.displayName="StarOutlined";var i=r.forwardRef(l)},79166:function(e,t,n){n.d(t,{Z:function(){return E}});var a=n(4942),r=n(71002),o=n(87462),c=n(67294),l=n(60444),i=n(94184),s=n.n(i),p=n(65632),u=n(96159),d=n(29439);function f(e){var t,n=e.prefixCls,a=e.value,r=e.current,o=e.offset,l=void 0===o?0:o;return l&&(t={position:"absolute",top:"".concat(l,"00%"),left:0}),c.createElement("span",{style:t,className:s()("".concat(n,"-only-unit"),{current:r})},a)}function m(e,t,n){for(var a=e,r=0;(a+10)%10!==t;)a+=n,r+=n;return r}function v(e){var t,n,a=e.prefixCls,r=e.count,l=e.value,i=Number(l),s=Math.abs(r),p=c.useState(i),u=(0,d.Z)(p,2),v=u[0],C=u[1],Z=c.useState(s),y=(0,d.Z)(Z,2),g=y[0],b=y[1],h=function(){C(i),b(s)};if(c.useEffect((function(){var e=setTimeout((function(){h()}),1e3);return function(){clearTimeout(e)}}),[i]),v===i||Number.isNaN(i)||Number.isNaN(v))t=[c.createElement(f,(0,o.Z)({},e,{key:i,current:!0}))],n={transition:"none"};else{t=[];for(var E=i+10,D=[],P=i;P<=E;P+=1)D.push(P);var S=D.findIndex((function(e){return e%10===v}));t=D.map((function(t,n){var a=t%10;return c.createElement(f,(0,o.Z)({},e,{key:t,value:a,offset:n-S,current:n===S}))})),n={transform:"translateY(".concat(-m(v,i,g<s?1:-1),"00%)")}}return c.createElement("span",{className:"".concat(a,"-only"),style:n,onTransitionEnd:h},t)}var C=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},Z=function(e){var t=e.prefixCls,n=e.count,a=e.className,r=e.motionClassName,l=e.style,i=e.title,d=e.show,f=e.component,m=void 0===f?"sup":f,Z=e.children,y=C(e,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),g=(0,c.useContext(p.E_).getPrefixCls)("scroll-number",t),b=(0,o.Z)((0,o.Z)({},y),{"data-show":d,style:l,className:s()(g,a,r),title:i}),h=n;if(n&&Number(n)%1==0){var E=String(n).split("");h=E.map((function(e,t){return c.createElement(v,{prefixCls:g,count:Number(n),value:e,key:E.length-t})}))}return l&&l.borderColor&&(b.style=(0,o.Z)((0,o.Z)({},l),{boxShadow:"0 0 0 1px ".concat(l.borderColor," inset")})),Z?(0,u.Tm)(Z,(function(e){return{className:s()("".concat(g,"-custom-component"),null==e?void 0:e.className,r)}})):c.createElement(m,b,h)},y=n(98787);function g(e){return-1!==y.Y.indexOf(e)}var b=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},h=function(e){var t,n,i=e.prefixCls,d=e.scrollNumberPrefixCls,f=e.children,m=e.status,v=e.text,C=e.color,y=e.count,h=void 0===y?null:y,E=e.overflowCount,D=void 0===E?99:E,P=e.dot,S=void 0!==P&&P,k=e.size,V=void 0===k?"default":k,I=e.title,w=e.offset,T=e.style,O=e.className,R=e.showZero,N=void 0!==R&&R,F=b(e,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","showZero"]),Y=c.useContext(p.E_),x=Y.getPrefixCls,B=Y.direction,j=x("badge",i),M=h>D?"".concat(D,"+"):h,L=null!=m||null!=C,z="0"===M||0===M,A=S&&!z,_=A?"":M,q=(0,c.useMemo)((function(){return(null==_||""===_||z&&!N)&&!A}),[_,z,N,A]),Q=(0,c.useRef)(h);q||(Q.current=h);var U=Q.current,G=(0,c.useRef)(_);q||(G.current=_);var K=G.current,H=(0,c.useRef)(A);q||(H.current=A);var J=(0,c.useMemo)((function(){if(!w)return(0,o.Z)({},T);var e={marginTop:w[1]};return"rtl"===B?e.left=parseInt(w[0],10):e.right=-parseInt(w[0],10),(0,o.Z)((0,o.Z)({},e),T)}),[B,w,T]),W=null!=I?I:"string"==typeof U||"number"==typeof U?U:void 0,X=q||!v?null:c.createElement("span",{className:"".concat(j,"-status-text")},v),$=U&&"object"===(0,r.Z)(U)?(0,u.Tm)(U,(function(e){return{style:(0,o.Z)((0,o.Z)({},J),e.style)}})):void 0,ee=s()((t={},(0,a.Z)(t,"".concat(j,"-status-dot"),L),(0,a.Z)(t,"".concat(j,"-status-").concat(m),!!m),(0,a.Z)(t,"".concat(j,"-status-").concat(C),g(C)),t)),te={};C&&!g(C)&&(te.background=C);var ne=s()(j,(n={},(0,a.Z)(n,"".concat(j,"-status"),L),(0,a.Z)(n,"".concat(j,"-not-a-wrapper"),!f),(0,a.Z)(n,"".concat(j,"-rtl"),"rtl"===B),n),O);if(!f&&L){var ae=J.color;return c.createElement("span",(0,o.Z)({},F,{className:ne,style:J}),c.createElement("span",{className:ee,style:te}),c.createElement("span",{style:{color:ae},className:"".concat(j,"-status-text")},v))}return c.createElement("span",(0,o.Z)({},F,{className:ne}),f,c.createElement(l.Z,{visible:!q,motionName:"".concat(j,"-zoom"),motionAppear:!1},(function(e){var t,n=e.className,r=x("scroll-number",d),l=H.current,i=s()((t={},(0,a.Z)(t,"".concat(j,"-dot"),l),(0,a.Z)(t,"".concat(j,"-count"),!l),(0,a.Z)(t,"".concat(j,"-count-sm"),"small"===V),(0,a.Z)(t,"".concat(j,"-multiple-words"),!l&&K&&K.toString().length>1),(0,a.Z)(t,"".concat(j,"-status-").concat(m),!!m),(0,a.Z)(t,"".concat(j,"-status-").concat(C),g(C)),t)),p=(0,o.Z)({},J);return C&&!g(C)&&((p=p||{}).background=C),c.createElement(Z,{prefixCls:r,show:!q,motionClassName:n,className:i,count:K,title:W,style:p,key:"scrollNumber"},$)})),X)};h.Ribbon=function(e){var t,n=e.className,r=e.prefixCls,l=e.style,i=e.color,u=e.children,d=e.text,f=e.placement,m=void 0===f?"end":f,v=c.useContext(p.E_),C=v.getPrefixCls,Z=v.direction,y=C("ribbon",r),b=g(i),h=s()(y,"".concat(y,"-placement-").concat(m),(t={},(0,a.Z)(t,"".concat(y,"-rtl"),"rtl"===Z),(0,a.Z)(t,"".concat(y,"-color-").concat(i),b),t),n),E={},D={};return i&&!b&&(E.background=i,D.color=i),c.createElement("div",{className:"".concat(y,"-wrapper")},u,c.createElement("div",{className:h,style:(0,o.Z)((0,o.Z)({},E),l)},c.createElement("span",{className:"".concat(y,"-text")},d),c.createElement("div",{className:"".concat(y,"-corner"),style:D})))};var E=h},50916:function(e,t,n){n(97564)},42646:function(e,t,n){n.r(t),n.d(t,{default:function(){return X}});n(50916);var a=n(79166),r=(n(52560),n(71577)),o=n(15671),c=n(43144),l=n(97326),i=n(60136),s=n(82963),p=n(61120),u=n(4942),d=n(55609),f=n(67294),m=n(96036),v=n(80385),C=n(28987),Z=(n(438),n(14277)),y=(n(21316),n(75443)),g=(n(51838),n(48086)),b=n(93517),h=n.n(b),E=n(30381),D=n.n(E),P=n(45697),S=n.n(P),k=n(22263),V=n(45430),I=(n(52466),n(10642)),w=(n(29093),n(16317)),T=n(66939);n(98703);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var R=w.Z.Option,N=function(e){(0,i.Z)(n,e);var t=O(n);function n(){var e;return(0,o.Z)(this,n),e=t.call(this),(0,u.Z)((0,l.Z)(e),"onSuccessCallback",(function(t){var n=e.props,a=n.platformCode,r=n.planVersionId,o=n.planId;t.ok&&t.record._id&&(window.location.href="/#/Finance/Rules/Generator?id=".concat(t.record._id,"&planId=").concat(o,"&planVersionId=").concat(r,"&platformCode=").concat(a))})),(0,u.Z)((0,l.Z)(e),"onFailureCallback",(function(e){if(e.zh_message)return g.ZP.error(e.zh_message)})),(0,u.Z)((0,l.Z)(e),"handleOk",(function(){var t=e.props,n=t.onChangeModalDisplayState,a=t.planVersionId;e.props.form.validateFields((function(t,n){if(!t){var r={planVersionId:a,workType:n.workType,onSuccessCallback:e.onSuccessCallback,onFailureCallback:e.onFailureCallback};e.props.dispatch({type:"financePlan/createRuleCollection",payload:r})}})),n&&n()})),(0,u.Z)((0,l.Z)(e),"handleCancel",(function(){var t=e.props.onChangeModalDisplayState;t&&t()})),(0,u.Z)((0,l.Z)(e),"renderFormItems",(function(){var t=[{label:"个户类型",form:(0,e.props.form.getFieldDecorator)("workType",{initialValue:"".concat(v.EbQ.first),rules:[{required:!0,message:"请选择"}]})(f.createElement(w.Z,{className:"app-global-componenth-width100",placeholder:"请选择"},f.createElement(R,{value:"".concat(v.EbQ.first)},v.EbQ.description(v.EbQ.first)),f.createElement(R,{value:"".concat(v.EbQ.second)},v.EbQ.description(v.EbQ.second))))}];return f.createElement("div",null,f.createElement(m.KP,{items:t,cols:1,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),e.state={},e}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.confirmLoading;return f.createElement("div",null,f.createElement(I.Z,{title:"创建方案",visible:t,onOk:this.handleOk,confirmLoading:n,onCancel:this.handleCancel},f.createElement(T.Z,null,this.renderFormItems())))}}]),n}(f.Component);(0,u.Z)(N,"propTypes",{visible:S().bool,confirmLoading:S().bool,onChangeModalDisplayState:S().func,planVersionId:S().string,planId:S().string,platformCode:S().string});var F=(0,d.connect)()(T.Z.create()(N));n(54071);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var x=n(14072).Z.RangePicker,B=function(e){(0,i.Z)(n,e);var t=Y(n);function n(){var e;return(0,o.Z)(this,n),e=t.call(this),(0,u.Z)((0,l.Z)(e),"onChangeLoading",(function(t){e.setState({confirmLoading:t})})),(0,u.Z)((0,l.Z)(e),"onSuccessCallback",(function(t){var n=e.props.onChangeModalDisplayState;n&&n(),e.onChangeLoading(!1),e.props.dispatch({type:"financePlan/fetchPlanVersionDetailData",payload:{id:t}})})),(0,u.Z)((0,l.Z)(e),"onFailureCallback",(function(){e.onChangeLoading(!1)})),(0,u.Z)((0,l.Z)(e),"handleOk",(function(){var t=e.props.planVersionId;e.props.form.validateFields((function(n,a){if(!n){var r=a.effectiveDate,o={id:t,effectiveStart:r[0].format("YYYYMMDD"),effectiveEnd:r[1].format("YYYYMMDD"),onSuccessCallback:e.onSuccessCallback.bind((0,l.Z)(e),t),onFailureCallback:e.onFailureCallback};e.onChangeLoading(!0),e.props.dispatch({type:"financePlan/updataEffective",payload:o})}}))})),(0,u.Z)((0,l.Z)(e),"handleCancel",(function(){var t=e.props.onChangeModalDisplayState;t&&t()})),(0,u.Z)((0,l.Z)(e),"renderFormItems",(function(){var t=e.props,n=t.fromDate,a=t.toDate,r=[{label:"有效时间",form:(0,e.props.form.getFieldDecorator)("effectiveDate",{initialValue:n&&a&&[D()(n),D()(a)],rules:[{required:!0,message:"请选择有效时间"}]})(f.createElement(x,null))}];return f.createElement("div",null,f.createElement(m.KP,{items:r,cols:1,layout:{labelCol:{span:6},wrapperCol:{span:18}}}))})),e.state={confirmLoading:!1},e}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.state.confirmLoading,t=this.props.visible;return f.createElement("div",null,f.createElement(I.Z,{title:"修改有效时间",visible:t,onOk:this.handleOk,confirmLoading:e,onCancel:this.handleCancel},f.createElement(T.Z,null,this.renderFormItems())))}}]),n}(f.Component);(0,u.Z)(B,"propTypes",{visible:S().bool,onChangeModalDisplayState:S().func,planVersionId:S().string,fromDate:S().string,toDate:S().string}),(0,u.Z)(B,"defaultProps",{visible:!1,onChangeModalDisplayState:function(){},planVersionId:"",fromDate:"",toDate:""});var j=(0,d.connect)()(T.Z.create()(B)),M=n(32430),L=n(33515),z=n(88780),A=n(9583),_=n(67389);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var G=function(e){(0,i.Z)(n,e);var t=U(n);function n(e){var a;return(0,o.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,l.Z)(a),"componentDidMount",(function(){var e=a.props.planVersionId;if(e){var t={id:e};a.props.dispatch({type:"financePlan/fetchPlanVersionDetailData",payload:t})}})),(0,u.Z)((0,l.Z)(a),"onSuccessCallback",(function(e){var t=e.record.plan_id;a.props.dispatch({type:"financePlan/fetchSalaryPlanDetailData",payload:{id:t}})})),(0,u.Z)((0,l.Z)(a),"onFailureCallback",(function(e){if(e.zh_message)return g.ZP.error(e.zh_message)})),(0,u.Z)((0,l.Z)(a),"onSuccessChangeProgramCallback",(function(e){var t=a.props,n=t.planId,r=t.planVersionId,o=h().get(a.props.planVersionDetailData,"".concat(r),{}).platformCode;e.ok&&e.record._id&&(window.location.href="/#/Finance/Rules/Generator?id=".concat(e.record._id,"&planId=").concat(n,"&planVersionId=").concat(r,"&platformCode=").concat(o))})),(0,u.Z)((0,l.Z)(a),"onFailureChangeProgramCallback",(function(e){if(e.zh_message)return g.ZP.error(e.zh_message)})),(0,u.Z)((0,l.Z)(a),"onChangeModalDisplayState",(function(){a.setState(Q(Q({},a.state),{},{addVisible:!a.state.addVisible}))})),(0,u.Z)((0,l.Z)(a),"onChangeEffectiveModalDisplayState",(function(){a.setState({updataVisible:!a.state.updataVisible})})),(0,u.Z)((0,l.Z)(a),"getRuleCollection",(function(){var e,t,n=a.props.planVersionId,r=h().get(a.props.planVersionDetailData,"".concat(n),{});return 0===Object.keys(r).length?{}:(r.rulesList.forEach((function(n){n.workType===v.EbQ.first&&(e=n),n.workType===v.EbQ.second&&(t=n)})),{fullTimeObj:e,partTimeIdObj:t})})),(0,u.Z)((0,l.Z)(a),"changeFullTimeProgram",(function(){var e=a.props,t=e.planId,n=e.planVersionId,r=h().get(a.props.planVersionDetailData,"".concat(n),{}).platformCode,o=a.getRuleCollection();if(0===Object.keys(o).length)return g.ZP.error("无服务费规则");var c=o.fullTimeObj;if(c)window.location.href="/#/Finance/Rules/Generator?id=".concat(c.id,"&planId=").concat(t,"&planVersionId=").concat(n,"&platformCode=").concat(r);else{var l={planVersionId:n,workType:v.EbQ.first,onSuccessCallback:a.onSuccessChangeProgramCallback,onFailureCallback:a.onFailureChangeProgramCallback};a.props.dispatch({type:"financePlan/createRuleCollection",payload:l})}})),(0,u.Z)((0,l.Z)(a),"changePartTimeProgram",(function(){var e=a.props,t=e.planId,n=e.planVersionId,r=h().get(a.props.planVersionDetailData,"".concat(n),{}).platformCode,o=a.getRuleCollection();if(0===Object.keys(o).length)return g.ZP.error("无服务费规则");var c=o.partTimeIdObj;if(c)window.location.href="/#/Finance/Rules/Generator?id=".concat(c.id,"&planId=").concat(t,"&planVersionId=").concat(n,"&&platformCode=").concat(r);else{var l={planVersionId:n,workType:v.EbQ.second,onSuccessCallback:a.onSuccessChangeProgramCallback,onFailureCallback:a.onFailureChangeProgramCallback};a.props.dispatch({type:"financePlan/createRuleCollection",payload:l})}})),(0,u.Z)((0,l.Z)(a),"toDraft",(function(){var e={id:a.props.planVersionId,onSuccessCallback:a.onSuccessCallback,onFailureCallback:a.onFailureCallback};a.props.dispatch({type:"financePlan/backPlanVersion",payload:e})})),(0,u.Z)((0,l.Z)(a),"createDraft",(function(){var e={id:a.props.planVersionId,onSuccessCallback:a.onSuccessCallback,onFailureCallback:a.onFailureCallback};a.props.dispatch({type:"financePlan/adjustSalaryPlan",payload:e})})),(0,u.Z)((0,l.Z)(a),"deleteDraft",(function(){var e={id:a.props.planVersionId,onSuccessCallback:a.onSuccessCallback};a.props.dispatch({type:"financePlan/deletePlanVersion",payload:e})})),(0,u.Z)((0,l.Z)(a),"toCalculate",(function(){var e=a.props,t=e.planVersionId,n=e.onChangeCalculate;n&&n(t)})),(0,u.Z)((0,l.Z)(a),"renderEffective",(function(){var e=a.props.planVersionId,t=h().get(a.props.planVersionDetailData,"".concat(e),{}),n=t.fromDate,r=t.toDate,o=n?D()("".concat(n)).format("LL"):"",c=r?D()("".concat(r)).format("LL"):"";return f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-effective"]},f.createElement("span",null,"有效时间："),f.createElement("span",null,"".concat(o," 至 ").concat(c)))})),(0,u.Z)((0,l.Z)(a),"renderUpdataEffectiveModal",(function(){var e=a.state.updataVisible,t=a.props,n=t.planVersionId,o=t.type,c=h().get(a.props.planVersionDetailData,"".concat(n),{}),l=c.fromDate,i=c.toDate,s=c.canAllowEdit,p={visible:e,planVersionId:n,fromDate:"".concat(l),toDate:"".concat(i),onChangeModalDisplayState:a.onChangeEffectiveModalDisplayState};if(o!==v.YCS.todo&&o!==v.YCS.now)return f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-update-effective"]},s&&V.ZP.canOperateFinancePlanRulesUpdate()&&f.createElement(r.Z,{type:"primary",onClick:a.onChangeEffectiveModalDisplayState},"调整时间"),f.createElement(j,p))})),(0,u.Z)((0,l.Z)(a),"renderAddModal",(function(){var e=a.state,t=e.addVisible,n=e.confirmLoading,o=a.props,c=o.planVersionId,l={visible:t,confirmLoading:n,planVersionId:c,planId:o.planId,platformCode:h().get(a.props.planVersionDetailData,"".concat(c),{}).platformCode,onChangeModalDisplayState:a.onChangeModalDisplayState};if(a.props.type===v.YCS.draft)return f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-add-modal-wrap"]},!V.ZP.canOperateFinancePlanRulesCreate()||f.createElement(r.Z,{type:"primary",onClick:a.onChangeModalDisplayState},"创建方案"),f.createElement(F,l))})),(0,u.Z)((0,l.Z)(a),"renderSubmit",(function(){var e=a.props,t=e.isDelete,n=e.planVersionId,o=h().get(a.props.planVersionDetailData,"".concat(n),{}),c=o.canAllowEdit,l=o.canAllowCompute,i=a.props.type;return i===v.YCS.review?f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-operation-wrap"]},!l||f.createElement(r.Z,{className:_.Z["app-comp-finance-generator-draft-button"],onClick:a.toCalculate},"去试算"),f.createElement(y.Z,{title:"",onConfirm:a.changeFullTimeProgram,onCancel:a.changePartTimeProgram,okText:"甲类",cancelText:"乙类"},!c||!V.ZP.canOperateFinancePlanRulesUpdate()||f.createElement(r.Z,{type:"primary"},"修改方案"))):i===v.YCS.todo?f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-operation-wrap"]},f.createElement(y.Z,{title:"默认返回草稿箱",onConfirm:a.toDraft,okText:"是",cancelText:"否"},!V.ZP.canOperateFinancePlanVersionToDraft()||f.createElement(r.Z,{type:"primary"},"取消生效"))):i===v.YCS.now?f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-operation-wrap"]},!V.ZP.canOperateFinancePlanVersionCreateDraft()||f.createElement(r.Z,{type:"primary",onClick:a.createDraft},"调薪")):i===v.YCS.draft?f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-operation-wrap"]},f.createElement(y.Z,{title:"确定删除此版本？",onConfirm:a.deleteDraft,okText:"是",cancelText:"否"},!t||!V.ZP.canOperateFinancePlanVersionDelete()||f.createElement(r.Z,{className:_.Z["app-comp-finance-generator-draft-button"]},"删除")),!l||f.createElement(r.Z,{className:_.Z["app-comp-finance-generator-draft-button"],type:"primary",onClick:a.toCalculate},"去试算并提交审核")):void 0})),(0,u.Z)((0,l.Z)(a),"renderTitleExt",(function(e){var t=a.props,n=t.planId,r=t.planVersionId,o=a.props.type,c=h().get(a.props.planVersionDetailData,"".concat(r),{}),l=c.platformCode,i=c.fromDate,s="".concat(i).substr(0,4),p="".concat(i).substr(4,2),u="".concat(i).substr(6,2);return o===v.YCS.todo?f.createElement("span",null,f.createElement(k.Z,{className:_.Z["app-comp-finance-generator-draft-title-ext"]}),"生效日期: ","".concat(s,"年").concat(p,"月").concat(u,"日")):o===v.YCS.draft?!V.ZP.canOperateFinancePlanRulesUpdate()||f.createElement("a",{className:_.Z["app-comp-finance-generator-draft-senior-editor"],href:"/#/Finance/Rules/Generator?id=".concat(e,"&planId=").concat(n,"&planVersionId=").concat(r,"&platformCode=").concat(l)},"高级编辑模式"):""})),(0,u.Z)((0,l.Z)(a),"renderContent",(function(){var e=a.getRuleCollection();if(0!==Object.keys(e).length){var t=e.fullTimeObj,n=e.partTimeIdObj;return f.createElement("div",null,f.createElement(m.IT,{title:"甲类",titleExt:t?a.renderTitleExt(t.id):""},t?a.renderRuleTabs(t):a.renderEmptyPage()),f.createElement(m.IT,{title:"乙类",titleExt:n?a.renderTitleExt(n.id):""},n?a.renderRuleTabs(n):a.renderEmptyPage()))}})),(0,u.Z)((0,l.Z)(a),"renderRuleTabs",(function(e){var t=[{title:"单量提成 ".concat(e.orderRules.length),content:a.renderRuleTabContent("单量",e.id),disabled:!e.orderRuleFlag,key:"单量"},{title:"出勤奖罚 ".concat(e.workRules.length),content:a.renderRuleTabContent("出勤",e.id),disabled:!e.workRuleFlag,key:"出勤"},{title:"质量奖罚 ".concat(e.qaRules.length),content:a.renderRuleTabContent("质量",e.id),disabled:!e.qaRuleFlag,key:"质量"},{title:"管理奖罚 ".concat(e.operationRules.length),content:a.renderRuleTabContent("管理",e.id),disabled:!e.operationRuleFlag,key:"管理"}];return f.createElement(m.DF,{items:t,onChange:a.onChange,defaultActiveKey:"单量"})})),(0,u.Z)((0,l.Z)(a),"renderRuleTabContent",(function(e,t){var n=a.props,r=n.type,o=n.planVersionId,c=h().get(a.props.planVersionDetailData,"".concat(o),{}).platformCode;return"单量"===e?f.createElement(M.Z,{platformCode:c,ruleCollectionId:t,type:r}):"出勤"===e?f.createElement(L.Z,{platformCode:c,ruleCollectionId:t,type:r}):"质量"===e?f.createElement(A.Z,{platformCode:c,ruleCollectionId:t,type:r}):"管理"===e?f.createElement(z.Z,{platformCode:c,ruleCollectionId:t,type:r,tags:v.blI.forth}):void 0})),(0,u.Z)((0,l.Z)(a),"renderEmptyPage",(function(){return f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-empty-page"]},f.createElement(Z.Z,null))})),a.state={addVisible:!1,updataVisible:!1,confirmLoading:!1},a}return(0,c.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.planVersionId;if(e.planVersionId!==t){if(!t)return;var n={id:t};this.props.dispatch({type:"financePlan/fetchPlanVersionDetailData",payload:n})}}},{key:"render",value:function(){var e=this.props.planVersionId;return f.createElement("div",null,e?f.createElement("div",null,f.createElement("div",{className:_.Z["app-comp-finance-generator-draft-wrap"]},this.renderEffective(),this.renderUpdataEffectiveModal(),this.renderAddModal()),this.renderContent(),this.renderSubmit()):this.renderEmptyPage())}}]),n}(f.Component);(0,u.Z)(G,"propTypes",{type:S().number,planVersionId:S().string,planId:S().string,onChangeCalculate:S().func,isDelete:S().bool});var K=(0,d.connect)((function(e){return{planVersionDetailData:e.financePlan.planVersionDetailData}}))(G),H=n(26209);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.Z)(e);if(t){var r=(0,p.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.Z)(this,n)}}var W=function(e){(0,i.Z)(n,e);var t=J(n);function n(e){var c;(0,o.Z)(this,n),c=t.call(this,e),(0,u.Z)((0,l.Z)(c),"componentDidMount",(function(){var e={id:c.props.location.query.id};c.props.dispatch({type:"financePlan/fetchSalaryPlanDetailData",payload:e})})),(0,u.Z)((0,l.Z)(c),"onChangeCalculate",(function(e){c.setState({activePlanVersionId:e,activeTab:v.YCS.description(v.YCS.calculate)})})),(0,u.Z)((0,l.Z)(c),"onChange",(function(e){var t,n=c.props.location.query.isReview,a=c.props.salaryPlanDetailData,r=c.private,o=r.FinanceBadgeCacheControl,l=r.FinanceBadge,i=a.activeVersion,s=a.draftVersion,p=a.applicationVersion,u=a.pendingVersion,d=a.id;if(s&&i?t=v.YCS.description(v.YCS.draft):p&&i?t="1"===n?v.YCS.description(v.YCS.now):v.YCS.description(v.YCS.review):u&&i&&(t=v.YCS.description(v.YCS.todo)),e===t){l.isDraftBadge=!1,l.isReviewBadge=!1,l.isTodoBadge=!1,l.isActiveBadge=!1;var f={salaryPlanId:d,isChangeTab:!0};o.set(f)}c.setState({activeTab:e})})),(0,u.Z)((0,l.Z)(c),"onDirectToFinanceConfig",(function(){window.location.href="/#/Finance/Config/Index"})),(0,u.Z)((0,l.Z)(c),"getActiveTab",(function(e){var t,n,a,r=e.location.query.isReview,o=e.salaryPlanDetailData;if(0===Object.keys(o).length)return{activeTab:t,activePlanVersionId:n};var c=o.activeVersion,l=o.draftVersion,i=o.applicationVersion,s=o.pendingVersion;return l&&!c?(t=v.YCS.description(v.YCS.draft),n=l):i&&!c?(t=v.YCS.description(v.YCS.review),n=i):s&&!c?t=v.YCS.description(v.YCS.todo):l&&c?(t=v.YCS.description(v.YCS.now),n=l,a=!0):i&&c?(t="1"===r?v.YCS.description(v.YCS.review):v.YCS.description(v.YCS.now),n=i):s&&c?(t=v.YCS.description(v.YCS.now),a=!0):!c||l||i||s||(t=v.YCS.description(v.YCS.now)),{activeTab:t,activePlanVersionId:n,isDelete:a}})),(0,u.Z)((0,l.Z)(c),"getOperations",(function(e){return e===v.YCS.description(v.YCS.draft)?f.createElement(r.Z,{className:_.Z["app-comp-finance-finance-config"],size:"large",onClick:c.onDirectToFinanceConfig},"指标配置"):""})),(0,u.Z)((0,l.Z)(c),"renderTabs",(function(){var e=c.props.location.query.isReview,t=c.props.salaryPlanDetailData,n=c.private,r=n.FinanceBadgeCacheControl,o=n.FinanceBadge,l=c.props.location.query.id,i=r.get(),s=i.isChangeTab,p=i.salaryPlanId,u=c.state,d=u.activePlanVersionId,C=u.activeTab,Z=u.isDelete,y=c.getOperations(C),g=t.activeVersion,b=t.draftVersion,h=t.applicationVersion,E=t.pendingVersion,D=t.domain,P=t.id;!b||!g||s&&p===P?!h||!g||s&&p===P?!E||!g||s&&p===P||(o.isTodoBadge=!0):"1"===e?o.isActiveBadge=!0:o.isReviewBadge=!0:o.isDraftBadge=!0;var S=o.isDraftBadge,k=o.isReviewBadge,V=o.isTodoBadge,I=o.isActiveBadge,w=[{title:S?f.createElement(a.Z,{dot:!0},f.createElement("span",null,"草稿箱")):"草稿箱",content:f.createElement(K,{onChangeCalculate:c.onChangeCalculate,planVersionId:b,planId:l,type:v.YCS.draft,isDelete:Z}),key:"草稿箱"},{title:k?f.createElement(a.Z,{dot:!0},f.createElement("span",null,"审核中")):"审核中",content:f.createElement(K,{onChangeCalculate:c.onChangeCalculate,planVersionId:h,planId:l,type:v.YCS.review}),key:"审核中"},{title:V?f.createElement(a.Z,{dot:!0},f.createElement("span",null,"待生效")):"待生效",content:f.createElement(K,{planVersionId:E,planId:l,type:v.YCS.todo,isDelete:Z}),key:"待生效"},{title:I?f.createElement(a.Z,{dot:!0},f.createElement("span",null,"已生效")):"已生效",content:f.createElement(K,{planVersionId:g,planId:l,type:v.YCS.now}),key:"已生效"},{title:"试算服务费",content:f.createElement(H.default,{planVersionId:d,planId:l,domain:D,activeTab:C}),key:"试算服务费"}];return f.createElement("div",null,f.createElement("h1",{className:_.Z["app-comp-finance-rule-city"]},t.bizDistrictName?"".concat(t.cityName,"-").concat(t.bizDistrictName):t.cityName),f.createElement(m.DF,{operations:y,items:w,onChange:c.onChange,type:"card",activeKey:C}))}));var i=c.getActiveTab(e),s=i.activeTab,p=i.activePlanVersionId;return c.state={activePlanVersionId:p||"",activeTab:e.location.query.activeTab||s,isDelete:!1},c.private={FinanceBadge:{isDraftBadge:!1,isReviewBadge:!1,isTodoBadge:!1,isActiveBadge:!1},FinanceBadgeCacheControl:new C.Z("aoao.app.cache",{container:"Finance",useSession:!0})},c}return(0,c.Z)(n,[{key:"componentDidUpdate",value:function(e){if(e.salaryPlanDetailData!==this.props.salaryPlanDetailData){var t=this.getActiveTab(this.props),n=t.activeTab,a=t.activePlanVersionId,r=t.isDelete;if(this.setState({isDelete:r}),this.props.location.query.activeTab)return;this.setState({activeTab:n,activePlanVersionId:a})}}},{key:"render",value:function(){return f.createElement("div",null,this.renderTabs())}}]),n}(f.Component);var X=(0,d.connect)((function(e){return{salaryPlanDetailData:e.financePlan.salaryPlanDetailData}}))(W)}}]);