"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4322],{4322:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});n(20186);var r=n(75385),a=(n(21316),n(75443)),o=(n(55295),n(69713)),i=n(15671),l=n(43144),c=n(97326),s=n(60136),p=n(82963),u=n(61120),m=n(4942),d=n(94315),f=n.n(d),h=n(93517),y=n.n(h),_=n(55609),g=n(67294),Z=n(44654),v=n(80385),S=n(96036),E=n(45430),w=(n(9070),n(20924)),k=(n(29093),n(16317)),F=n(88144);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var T=k.Z.Option,b=function(e){(0,s.Z)(n,e);var t=x(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,m.Z)((0,c.Z)(r),"onReset",(function(){var e=r.state.onSearch,t={name:"",phone:"",positions:[],state:[],type:[]};r.setState({search:t}),e&&e(t)})),(0,m.Z)((0,c.Z)(r),"onSearch",(function(e){var t=e,n=r.state.onSearch;t.page=1,t.limit=30,n&&n(t)})),(0,m.Z)((0,c.Z)(r),"onHookForm",(function(e){r.setState({form:e})})),(0,m.Z)((0,c.Z)(r),"render",(function(){var e={items:[{label:"姓名",form:function(e){return e.getFieldDecorator("name")(g.createElement(w.Z,{placeholder:"请输入姓名"}))}},{label:"手机号",form:function(e){return e.getFieldDecorator("phone")(g.createElement(w.Z,{placeholder:"请输入手机号"}))}},{label:"职位",form:function(e){return e.getFieldDecorator("positions")(g.createElement(F.GS,{allowClear:!0,showSearch:!0,optionFilterProp:"children",showArrow:!0,mode:"multiple",placeholder:"请选择职位"}))}},{label:"运力状态",form:function(e){return e.getFieldDecorator("state")(g.createElement(k.Z,{placeholder:"请选择运力状态",showArrow:!0,mode:"multiple"},g.createElement(T,{value:"".concat(v.Sto.working)},v.Sto.description(v.Sto.working)),g.createElement(T,{value:"".concat(v.Sto.waiting)},v.Sto.description(v.Sto.waiting))))}},{label:"工号种类",form:function(e){return e.getFieldDecorator("type")(g.createElement(k.Z,{placeholder:"请选择工号种类",showArrow:!0,mode:"multiple"},g.createElement(T,{value:"".concat(v.Fll.transport)},v.Fll.description(v.Fll.transport)),g.createElement(T,{value:"".concat(v.Fll.exchange)},v.Fll.description(v.Fll.exchange)),g.createElement(T,{value:"".concat(v.Fll.normal)},v.Fll.description(v.Fll.normal))))}}],onReset:r.onReset,onSearch:r.onSearch,onHookForm:r.onHookForm,expand:!0};return g.createElement(S.IT,null,g.createElement(F.p8,e))})),r.state={form:void 0,search:{name:"",phone:"",positions:[],state:[],type:[]},onSearch:e.onSearch||void 0},r}return n}(g.Component),P="oYxiH76rJrUGsnfBNFPa",C="bp5bFXh3SaFAJIhNYjH8",D="YGbD2faFtbVRbp7igagV";function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var R=function(e){(0,s.Z)(n,e);var t=I(n);function n(e){var l;return(0,i.Z)(this,n),l=t.call(this,e),(0,m.Z)((0,c.Z)(l),"onDirectToDetail",(function(e,t){return{id:e,supplierId:y().get(t,"supplier_list.0._id"),supplierName:y().get(t,"supplier_list.0.name"),platformId:y().get(t,"platform_list.0.platform_code"),platformName:y().get(t,"platform_list.0.platform_name"),cityId:y().get(t,"city_list.0.city_spelling"),cityName:y().get(t,"city_list.0.city_name_joint")}})),(0,m.Z)((0,c.Z)(l),"onDirectToUpdate",(function(e,t){return{id:e,supplierId:y().get(t,"supplier_list.0._id"),supplierName:y().get(t,"supplier_list.0.name"),platformId:y().get(t,"platform_list.0.platform_code"),platformName:y().get(t,"platform_list.0.platform_name"),cityId:y().get(t,"city_list.0.city_spelling"),cityName:y().get(t,"city_list.0.city_name_joint")}})),(0,m.Z)((0,c.Z)(l),"onUpdate",(function(e){l.props.dispatch({type:"employeeTransport/updateTransportKnight",payload:{id:e,onSuccessCallback:l.onSuccessCallback}})})),(0,m.Z)((0,c.Z)(l),"onSuccessCallback",(function(){l.props.dispatch({type:"employeeTransport/fetchTransportData",payload:l.private.searchParams})})),(0,m.Z)((0,c.Z)(l),"onShowSizeChange",(function(e,t){var n=l.private.searchParams;n.page=e,n.limit=t,l.onSearch(n)})),(0,m.Z)((0,c.Z)(l),"onChangePage",(function(e,t){var n=l.private.searchParams;n.page=e,n.limit=t,l.onSearch(n)})),(0,m.Z)((0,c.Z)(l),"onSearch",(function(e){l.private.searchParams=e,l.private.searchParams.page||(l.private.searchParams.page=1),l.private.searchParams.limit||(l.private.searchParams.limit=30),l.props.dispatch({type:"employeeTransport/fetchTransportData",payload:l.private.searchParams})})),(0,m.Z)((0,c.Z)(l),"renderSearch",(function(){return g.createElement(b,{onSearch:l.onSearch})})),(0,m.Z)((0,c.Z)(l),"renderContent",(function(){var e=l.state.dataSource,t=l.private.searchParams.page,n=[{title:"姓名",width:100,dataIndex:"name",key:"name"},{title:"手机号",width:100,dataIndex:"phone",key:"phone"},{title:"供应商",width:100,dataIndex:"supplier_list",key:"supplier_list",render:function(e){return f().not.existy(e)||f().empty(e)||f().not.array(e)?"":1===e.length?y().get(e,"0.name"):g.createElement(o.Z,{title:e.map((function(e){return e.name})).join(" , ")},g.createElement("span",null,y().get(e,"0.name")," 等",e.length,"条"))}},{title:"平台",width:100,dataIndex:"platform_list",key:"platform_list",render:function(e){return f().not.existy(e)||f().empty(e)||f().not.array(e)?"":e.map((function(e){return e.platform_name})).join(" , ")}},{title:"城市",width:100,dataIndex:"city_list",key:"city_list",render:function(e){return f().not.existy(e)||f().empty(e)||f().not.array(e)?"":1===e.length?y().get(e,"0.city_name_joint"):g.createElement(o.Z,{title:e.map((function(e){return e.city_name_joint})).join(" , ")},g.createElement("span",null,y().get(e,"0.city_name_joint")," 等",e.length,"条"))}},{title:"商圈",width:100,dataIndex:"biz_district_list",key:"biz_district_list",render:function(e){return f().not.existy(e)||f().empty(e)||f().not.array(e)?"":1===e.length?y().get(e,"0.biz_district_name"):g.createElement(o.Z,{title:e.map((function(e){return e.biz_district_name})).join(" , ")},g.createElement("span",null,y().get(e,"0.biz_district_name")," 等",e.length,"条"))}},{title:"职位",width:100,dataIndex:"position_name",key:"position_name"},{title:"运力状态",width:100,dataIndex:"transport_state",key:"transport_state",render:function(e){return v.Sto.description(e)}},{title:"工号种类",width:100,dataIndex:"transport_type",key:"transport_type",render:function(e){return v.Fll.description(e)}},{title:"操作",width:100,dataIndex:"operate",key:"operate",render:function(e,t){return t.transport_type===v.Fll.transport?g.createElement("div",null,g.createElement(Z.Link,{className:P,to:{pathname:"/Employee/Transport/Detail",query:l.onDirectToDetail(t._id,t)}},"查看详情"),E.ZP.canOperateEmployeeDeliveryStartButton()?g.createElement("div",null,g.createElement(Z.Link,{className:C,to:{pathname:"/Employee/Transport/Update",query:l.onDirectToUpdate(t._id,t)}},"编辑"),g.createElement(a.Z,{title:"是否停用该运力工号?",onConfirm:function(){return l.onUpdate(t._id)},okText:"确认",cancelText:"取消"},g.createElement("a",null,"停用"))):""):t.transport_type===v.Fll.normal&&E.ZP.canOperateEmployeeDeliveryStartButton()?g.createElement(a.Z,{title:"是否启用该骑士成为运力工号?",onConfirm:function(){return l.onUpdate(t._id)},okText:"确认",cancelText:"取消"},g.createElement("a",null,"启用")):g.createElement("div",null,null)}}],i={current:void 0===t?1:t,defaultPageSize:30,onChange:l.onChangePage,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:l.onShowSizeChange,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:y().get(e,"_meta.result_count",0)};return g.createElement(S.IT,{className:D,title:"列表"},g.createElement(r.Z,{rowKey:function(e,t){return t},pagination:i,columns:n,dataSource:e.data,bordered:!0,scroll:{y:500}}))})),l.state={dataSource:y().get(e,"employeeTransport.transportData",{})},l.private={searchParams:{}},l}return(0,l.Z)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({dataSource:y().get(e,"employeeTransport.transportData",{})})}},{key:"render",value:function(){return g.createElement("div",null,this.renderSearch(),this.renderContent())}}]),n}(g.Component),N=(0,_.connect)((function(e){return{employeeTransport:e.employeeTransport}}))(R)}}]);