"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7655],{93488:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(1413),l=t(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"},r=t(30076),i=function(e,n){return l.createElement(r.Z,(0,a.Z)((0,a.Z)({},e),{},{ref:n,icon:o}))};i.displayName="ArrowRightOutlined";var p=l.forwardRef(i)},77655:function(e,n,t){t.r(n);t(52560);var a=t(71577),l=(t(75310),t(76772)),o=t(87462),r=(t(51838),t(48086)),i=(t(35668),t(86585)),p=t(29439),c=t(94315),u=t.n(c),s=t(93517),m=t.n(s),y=t(67294),d=t(55609),f=t(96036),E=t(80385),w=t(88144),h=t(56087),v=t(29796),b=t(96521),g=t(64434),F={labelCol:{span:6},wrapperCol:{span:17}},x=E.B_f.affair,Z=E.RbW.bu3,_=E.RbW.quhuo,T="".concat(x).concat(E.RbW.bu3),C="".concat(x).concat(E.RbW.quhuo);n.default=(0,d.connect)((function(e){return{examineFlowInfo:e.relationExamineFlow.examineFlowInfo,contractTypeData:e.business.contractTypeData}}))((function(e){var n=e.dispatch,t=e.examineFlowInfo,c=void 0===t?{}:t,s=e.contractTypeData,d=void 0===s?{}:s,O=i.Z.useForm(),A=(0,p.Z)(O,1)[0],I=(0,y.useState)(),j=(0,p.Z)(I,2),D=j[0],P=j[1];(0,y.useEffect)((function(){n({type:"business/fetchContractType",payload:{}})}),[n]),(0,y.useEffect)((function(){return function(){n({type:"relationExamineFlow/reduceExamineFlowinfo",payload:{}})}}),[n]);var k,z=function(e){n(e?{type:"relationExamineFlow/fetchExamineFlowXDInfo",payload:{bizType:x,namespace:T,merchant:Z,flowId:e}}:{type:"relationExamineFlow/reduceExamineFlowinfo",payload:{result:{},namespace:T}})},B=function(e){n(e?{type:"relationExamineFlow/fetchExamineFlowinfo",payload:{bizType:x,namespace:C,merchant:_,flowId:e}}:{type:"relationExamineFlow/reduceExamineFlowinfo",payload:{result:{},namespace:C}})},R=function(){n({type:"relationExamineFlow/reduceExamineFlowinfo",payload:{}}),A.setFieldsValue({bu3ExamineFlow:void 0,examineFlow:void 0})},S=function(){r.ZP.success("请求成功"),window.location.href="/#/Expense/RelationExamineFlow?activeKey=".concat(x)},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=m().get(e,"final_type",[]),t=m().get(e,"final_approval_jobs",[]),a=m().get(e,"final_approval_job_tags",[]),l="--";return Array.isArray(t)&&t.length>0&&(l=y.createElement("div",null,E.mqh.description(n),"(",t.join("、"),")")),Array.isArray(a)&&a.length>0&&(l=y.createElement("div",null,E.mqh.description(n),"(",a.join("、"),")")),l},V=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.stamp_types,a=void 0===t?[]:t,l=n.seal_types,r=void 0===l?[]:l,p=n.pact_borrow_types,c=void 0===p?[]:p,s=n.display_types,f=void 0===s?[]:s,h=n.pact_apply_types,v=void 0===h?[]:h,g=n.pact_sub_types,x=void 0===g?[]:g,Z=n.organization_sub_types,_=void 0===Z?[]:Z,T=m().get(n,"apply_application_types.0",void 0),C=d.pact_types_has_sub_types,O=void 0===C?[]:C,A=[],I=[];v.map((function(e){var n=O[e]||{};A.push(n);var t=n.sub_types||{};Object.keys(t).map((function(){x.map((function(e){var n=t[e];u().existy(n)&&u().not.empty(n)&&!I.includes(n)&&I.push(n)}))}))})),303!==T&&309!==T||e.splice(2,0,y.createElement(i.Z.Item,(0,o.Z)({label:"印章类型"},F),y.createElement(b.Z,{type:"flowSealType",value:r,isDetail:!0}))),306===T&&e.splice(2,0,y.createElement(i.Z.Item,(0,o.Z)({label:"类型"},F),y.createElement(b.Z,{type:"license",value:f,isDetail:!0}))),406===T&&e.splice(2,0,y.createElement(i.Z.Item,(0,o.Z)({label:"类型"},F),y.createElement(b.Z,{type:"contract",value:c,isDetail:!0}))),405===T&&e.splice(2,0,y.createElement(i.Z.Item,(0,o.Z)({label:"会审类型"},F),y.createElement(w.gB,{isDetail:!0,showValue:a||a[0]})),y.createElement(i.Z.Item,(0,o.Z)({label:"合同类型"},F),u().empty(A)?"--":A.map((function(e,n){return A.length===n+1?e.name:"".concat(e.name,",")}))),y.createElement(i.Z.Item,(0,o.Z)({label:"合同子类型"},F),u().empty(I)?"--":I.map((function(e,n){return I.length===n+1?e:"".concat(e,",")})))),701===T&&e.splice(2,0,y.createElement(i.Z.Item,(0,o.Z)({label:"调整子类型"},F),Array.isArray(_)&&_.length>0?_.map((function(e){return E.KV8.description(e)})).join(", "):"--"))};return y.createElement(i.Z,{layout:"horizontal",form:A,onFinish:function(){}},y.createElement(l.Z,{showIcon:!0,message:"提示：节点颜色显示红色为节点无审批人，关联关系不能创建成功！",type:"error",style:{margin:"10px 0"}}),(k=[{span:24,render:y.createElement(i.Z.Item,{labelCol:{span:3},colon:!1,style:{marginBottom:0},label:y.createElement("h3",null,"事务类审批流关联")})},y.createElement(i.Z.Item,(0,o.Z)({label:"适用类型",name:"applyApplicationType"},F,{rules:[{required:!0,message:"请选择适用类型"}]}),y.createElement(w.UU,{filterValues:[E.ZBL.oaBusiness],enumeratedType:"affairs",onChange:R}))],y.createElement(y.Fragment,null,y.createElement(f.Fp,{items:k,cols:3}))),function(){var e=m().get(c,T,{}),n=m().get(e,"node_list",[]),t=[{span:24,render:y.createElement(i.Z.Item,{labelCol:{span:3},colon:!1,style:{marginBottom:0},label:y.createElement("h3",null,"BU3-事务审批流：")})},{span:24,render:y.createElement(i.Z.Item,{noStyle:!0,key:"applyApplicationType",shouldUpdate:function(e,n){return e.applyApplicationType!==n.applyApplicationType}},(function(e){var n=e.getFieldValue;return y.createElement(i.Z.Item,{label:"审批流名称",name:"bu3ExamineFlow",labelCol:{span:2},wrapperCol:{span:12},rules:[{required:!0,message:"请输入审批流名称"}]},y.createElement(v.Z,{applyApplicationType:n("applyApplicationType"),onChange:z,bizType:x,merchant:Z}))}))},{span:4,render:y.createElement(i.Z.Item,{label:"是否有RS节点",labelCol:{span:14},wrapperCol:{span:8}},m().get(e,"is_rs")?"是":"否")},{span:12,render:y.createElement(i.Z.Item,{label:"最高审批岗",labelCol:{span:4},wrapperCol:{span:20}},y.createElement("span",{className:"noteWrap"},L(e)))},{span:24,render:y.createElement(i.Z.Item,{label:"审批流预览",labelCol:{span:2},wrapperCol:{span:22}},y.createElement(g.Z,{nodelist:n,applyApplicationType:m().get(e,"apply_application_types.0",void 0)}))}];return V(t,e),y.createElement(f.IT,null,y.createElement(f.Fp,{items:t,cols:3}))}(),function(){var e=m().get(c,C,{}),n=m().get(e,"node_list",[]),t=[{span:24,render:y.createElement(i.Z.Item,{labelCol:{span:3},colon:!1,style:{marginBottom:0},label:y.createElement("h3",null,"趣活-事务审批流：")})},{span:24,render:y.createElement(i.Z.Item,{noStyle:!0,key:"applyApplicationType",shouldUpdate:function(e,n){return e.applyApplicationType!==n.applyApplicationType}},(function(e){var n=e.getFieldValue;return y.createElement(i.Z.Item,{label:"审批流名称",name:"examineFlow",labelCol:{span:2},wrapperCol:{span:12},rules:[{required:!0,message:"请输入审批流名称"}]},y.createElement(h.Z,{onChange:B,bizType:x,applyApplicationType:n("applyApplicationType"),merchant:_}))}))},{span:12,render:y.createElement(i.Z.Item,{label:"最高审批岗",labelCol:{span:4},wrapperCol:{span:20}},y.createElement("span",{className:"noteWrap"},L(e)))},{span:24,render:y.createElement(i.Z.Item,{label:"审批流预览",labelCol:{span:2},wrapperCol:{span:22}},y.createElement(g.Z,{nodelist:n,applyApplicationType:m().get(e,"apply_application_types.0",void 0)}))}];return V(t,e),y.createElement(f.IT,null,y.createElement(f.Fp,{items:t,cols:3}))}(),y.createElement("div",{style:{textAlign:"center"}},y.createElement(a.Z,{style:{marginRight:15},onClick:function(){window.location.href="/#/Expense/RelationExamineFlow?activeKey=".concat(x)}},"返回"),y.createElement(a.Z,{type:"primary",loading:D,onClick:function(){A.validateFields().then((function(e){P(!0);var t=e.bu3ExamineFlow,a=e.examineFlow;n({type:"relationExamineFlow/createRelationExamineFlow",payload:{xdFlowId:t,qhFlowId:a,bizType:x,onLoading:function(){P(!1)},onSuccessCallback:S}})}))}},"启用")))}))},64434:function(e,n,t){t(13062);var a=t(71230),l=(t(89032),t(15746)),o=t(94315),r=t.n(o),i=t(93517),p=t.n(i),c=t(67294),u=t(55609),s=t(93488),m=t(80385),y=[{reportOne:1,reportTwo:1,value:m.agl.actualPerson,name:"实际申请人本部门负责人"},{reportOne:1,reportTwo:2,value:m.agl.actualPersonT,name:"实际申请人上级部门负责人"},{reportOne:2,reportTwo:1,value:m.agl.supPerson,name:"上一节点审批人本部门负责人"},{reportOne:2,reportTwo:2,value:m.agl.supPersonT,name:"上一节点审批人上级部门负责人"}];n.Z=(0,u.connect)((function(e){return{examineFlowInfo:e.relationExamineFlow.examineFlowInfo,contractTypeData:e.business.contractTypeData}}))((function(e){var n=p().get(e,"nodelist",[]),t=p().get(e,"applyApplicationType",void 0),o=function(e,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!1,i=e.node_approve_type,p=e.organization_approve_type,u=e.account_approve_type,d=e.approve_department_name,f=e.approve_job_name,E=e.current_node_apply_account_name,w="";if(i===m.gH5.report){var h=y.find((function(e){return e.value===p}))||{};w=h.name}if(i===m.gH5.coopera){if(p===m.agl.fieldDep){var v={105:m.vA4.description(m.vA4.callIn),102:"增编部门",101:"招聘部门",108:"录用部门",109:"入职部门"};w=v[t]||m.agl.description(p)}else p&&(w=m.agl.description(p));if(u===m.Evl.fieldAccount){var b={405:m.lXD.description(m.lXD.contract),107:"工作接收人",303:"印章保管人",309:"印章保管人",301:"印章保管人",302:"印章保管人",306:"证照保管人",406:"合同保管人"};w=b[t]||m.Evl.description(u)}else u&&(w=m.Evl.description(u))}return p&&p===m.agl.department&&d&&((r().not.existy(E)||r().empty(E))&&(o=!0),w=d,!f&&(w="".concat(d," - 部门负责人 - ").concat(E||"无")),f&&(w="".concat(d," - ").concat(f," - ").concat(E||"无"))),c.createElement(l.Z,{key:n,style:{marginLeft:5}},c.createElement("span",{style:{color:o?"red":""}},e.node_name,"（",w,"）"),a?null:c.createElement(s.Z,null))};return c.createElement(c.Fragment,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r().not.existy(e)||r().empty(e)?"--":c.createElement(a.Z,null,c.createElement(l.Z,null,c.createElement("span",null,"申请人")," ",c.createElement(s.Z,null)),e.map((function(n,t){return o(n,t,t===e.length-1)})))}(n))}))},56087:function(e,n,t){var a=t(4942),l=(t(29093),t(16317)),o=t(94315),r=t.n(o),i=t(93517),p=t.n(i),c=t(67294),u=t(55609),s=t(96486),m=t.n(s),y=t(80385),d=t(8240);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=l.Z.Option;n.Z=(0,u.connect)((function(e){return{examineFlowList:e.relationExamineFlow.examineFlowList}}))((function(e){var n=e.dispatch,t=e.name,a=e.state,o=e.examineFlowList,i=void 0===o?{}:o,u=e.initItem,s=void 0===u?{}:u,f=e.applyApplicationType,h=e.bizType,v=e.merchant,b=p().get(i,"datas",[]),g=(0,c.useRef)(!0);(0,c.useEffect)((function(){t&&!0===g.current&&n({type:"relationExamineFlow/fetchExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:v,applyApplicationType:f}})}),[n,t,h,v,g,f]),(0,c.useEffect)((function(){return f&&n({type:"relationExamineFlow/reduceExamineFlow",payload:{}}),function(){n({type:"relationExamineFlow/reduceExamineFlow",payload:{}})}}),[n,f]);var F=m().debounce((function(t){g.current=!1,t&&n({type:"relationExamineFlow/fetchExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:v,applyApplicationType:f,onReset:function(){e.onChange&&e.onChange()}}})}),800),x=E(E({},(0,d.CE)(["dispatch","examineFlowList","bizType","merchant","applyApplicationType","initItem","state"],e)),{},{placeholder:"请输入",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:!1,onChange:function(t){g.current=!1,t?e.onChange&&e.onChange(t):void 0===t&&(n({type:"relationExamineFlow/reduceExamineFlow",payload:{}}),e.onChange&&e.onChange())},onSearch:F,notFoundContent:null}),Z=h===y.B_f.codeTeam?y.ZAv:y.BsX;return g.current&&r().existy(s)&&r().not.empty(s)&&s._id&&!1===b.map((function(e){return e._id})).includes(s._id)&&b.push(E(E({},s),{},{disabled:!0})),c.createElement(l.Z,x,b.map((function(e){return c.createElement(w,{key:e._id,value:e._id,disabled:e.disabled},e.name,e.disabled&&a!==Z.normal?"（".concat(Z.description(a),"）"):null)})))}))},96521:function(e,n,t){t(29093);var a=t(16317),l=t(55609),o=t(67294),r=a.Z.Option;n.Z=(0,l.connect)((function(e){return{enumeratedValue:e.applicationCommon.enumeratedValue}}))((function(e){var n=e.enumeratedValue,t=void 0===n?{}:n,l=e.value,i=void 0===l?[]:l,p=e.onChange,c=e.type,u=e.dispatch,s=e.isDetail;if((0,o.useEffect)((function(){u({type:"applicationCommon/getEnumeratedValue",payload:{enumeratedType:c}})}),[u,c]),Object.keys(t).length<1||!c)return o.createElement("div",null);var m=t[c]||[];return s?i.length<1?"--":(m.filter((function(e){return i.includes(e.value)}))||[]).map((function(e){return e.name})).join("、"):o.createElement(a.Z,{value:i,placeholder:"请选择",mode:"multiple",showArrow:!0,onChange:p,allowClear:!0,showSearch:!0,optionFilterProp:"children"},m.map((function(e){return o.createElement(r,{value:e.value,key:e.value},e.name)})))}))},29796:function(e,n,t){var a=t(4942),l=(t(29093),t(16317)),o=t(94315),r=t.n(o),i=t(93517),p=t.n(i),c=t(67294),u=t(55609),s=t(96486),m=t.n(s),y=t(80385),d=t(8240);function f(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function E(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?f(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var w=l.Z.Option;n.Z=(0,u.connect)((function(e){return{xdExamineFlowList:e.relationExamineFlow.xdExamineFlowList}}))((function(e){var n=e.dispatch,t=e.name,a=e.state,o=e.xdExamineFlowList,i=void 0===o?{}:o,u=e.initItem,s=void 0===u?{}:u,f=e.applyApplicationType,h=e.bizType,v=e.merchant,b=p().get(i,"datas",[]),g=(0,c.useRef)(!0);(0,c.useEffect)((function(){t&&!0===g.current&&n({type:"relationExamineFlow/fetchXDExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:v,applyApplicationType:f}})}),[n,t,h,v,g,f]),(0,c.useEffect)((function(){return f&&n({type:"relationExamineFlow/reduceXDExamineFlow",payload:{}}),function(){n({type:"relationExamineFlow/reduceXDExamineFlow",payload:{}})}}),[n,f]);var F=m().debounce((function(t){g.current=!1,t&&n({type:"relationExamineFlow/fetchXDExamineFlow",payload:{flowNameKey:t,bizType:h,merchant:v,applyApplicationType:f,onReset:function(){e.onChange&&e.onChange()}}})}),800),x=E(E({},(0,d.CE)(["dispatch","xdExamineFlowList","bizType","merchant","applyApplicationType","initItem","state"],e)),{},{placeholder:"请输入",showSearch:!0,defaultActiveFirstOption:!1,allowClear:!0,filterOption:!1,onChange:function(t){g.current=!1,t?e.onChange&&e.onChange(t):void 0===t&&(n({type:"relationExamineFlow/reduceXDExamineFlow",payload:{}}),e.onChange&&e.onChange())},onSearch:F,notFoundContent:null}),Z=h===y.B_f.codeTeam?y.ZAv:y.BsX;return g.current&&r().existy(s)&&r().not.empty(s)&&s._id&&!1===b.map((function(e){return e._id})).includes(s._id)&&b.push(E(E({},s),{},{disabled:!0})),c.createElement(l.Z,x,b.map((function(e){return c.createElement(w,{key:e._id,value:e._id,disabled:e.disabled},e.name,e.disabled&&a!==Z.normal?"（".concat(Z.description(a),"）"):null)})))}))}}]);