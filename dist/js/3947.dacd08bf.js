"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[3947],{43947:function(e,t,n){n.r(t),n.d(t,{default:function(){return g}});n(20186);var a=n(75385),r=n(93433),o=n(15671),i=n(43144),l=n(97326),d=n(60136),c=n(82963),u=n(61120),s=n(4942),p=n(94315),m=n.n(p),f=n(55609),v=n(67294),y=n(96036),h=n(23095),Z=n(81894),k=n(23217),b=n(90410),x=n(12546),E={"app-comp-admin-developer-no-auth":"h5Co5TGT6uDC1nO5GClr","app-comp-admin-developer-table":"dnc4I_HdfxO4ouf43FPv","app-comp-admin-developer-id-fault":"NrRyREUwlRjP8d5b3qqd","app-comp-admin-developer-not-add-auth":"IGJ_ft7fHyOCByzvTV0b","app-comp-admin-developer-icon-size":"UwnLmeUSpdfQVEetykX6"};function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var I=function(e){(0,d.Z)(n,e);var t=A(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,d=new Array(i),c=0;c<i;c++)d[c]=arguments[c];return e=t.call.apply(t,[this].concat(d)),(0,s.Z)((0,l.Z)(e),"abandonIds",(function(){return["1-1","1-0","1-3","1-2","1-5","1-4","1-7","1-6","3-24","3-20","3-22","3-23","3-5","3-7","3-6","3-8","3-13","3-12","3-10","3-15","3-14","3-17","3-16","3-19","3-18","4-0","5-0","6-20","6-21","6-22","6-1","6-0","6-3","6-2","6-5","6-4","6-7","6-6","6-9","6-8","6-11","6-10","6-13","6-12","6-15","6-14","6-17","6-16","6-19","6-18","7-2","8-17","8-18","8-2","9-34","9-23","9-24","9-26","9-20","9-21","9-3","9-2","9-4","9-9","9-12","9-11","9-15","9-16","9-19","9-31","9-36","9-18","10-27","10-2","10-8","10-13","10-11","10-22","12-1","12-0","12-3","12-2","13-11","13-10","13-13","13-12","13-14","13-1","13-0","13-3","13-2","13-5","13-4","13-7","13-6","13-9","13-8","15-11","15-10","15-13","15-12","15-14","15-1","15-0","15-3","15-2","15-5","15-4","15-7","15-6","15-9","15-8","16-11","16-12","16-8","17-0","19-42","19-12","19-11","19-10","20-1","20-0","20-3","20-2","20-5","20-4","20-7","20-6","22-1","22-3","22-2","22-5","22-4","22-7","22-6","22-9","22-8","22-10","22-12","23-11","23-2","23-8","25-19"]})),(0,s.Z)((0,l.Z)(e),"module",(function(e){var t={id:e};return Object.values(k.Z).forEach((function(n){n.id===e&&(t=n)})),t})),(0,s.Z)((0,l.Z)(e),"isAbandon",(function(t){return e.abandonIds().indexOf(t)>-1})),(0,s.Z)((0,l.Z)(e),"createColumns",(function(){var e=Object.keys(k.Z).map((function(e){var t=k.Z[e];return{title:"".concat(t.title,"(").concat(t.id,")"),dataIndex:t.id,key:t.id,width:170,render:function(e){return e?"√":""}}}));return[].concat([{title:"角色",dataIndex:"roleName",key:"roleName",width:100,fixed:"left",render:function(e){return e||"--"}}],(0,r.Z)(e))})),(0,s.Z)((0,l.Z)(e),"createTableData",(function(){return e.props.permissions.map((function(e){var t={roleName:e.name};return e.permission_class&&e.permission_class.length>0&&e.permission_class.map((function(e){t[e.id]=!0})),t}))})),(0,s.Z)((0,l.Z)(e),"createColumnsRevert",(function(){var t=e.props.roles,n=[];(void 0===t?[]:t).map((function(e){1===e.available&&n.push({title:e.name,dataIndex:"".concat(e.gid),key:"".concat(e.gid),width:120,render:function(e){return e?"√":""}})}));return[{title:"权限名称",dataIndex:"authorName",key:"authorName",fixed:"left",width:170}].concat(n)})),(0,s.Z)((0,l.Z)(e),"createTableDataRevert",(function(){var t=e.props.permissions,n=void 0===t?[]:t;return Object.keys(k.Z).map((function(e){var t=k.Z[e],a={authorName:"".concat(t.title,"(").concat(t.id,")")};return n.map((function(e){e.permission_class&&e.permission_class.length>0&&e.permission_class.map((function(n){t.id===n.id&&(a["".concat(e.gid)]=!0)}))})),a}))})),(0,s.Z)((0,l.Z)(e),"iteration",(function(t){return t.map((function(t){var n=t.module,a=t.routes,r=[];return a&&(r=e.iteration(a)),m().not.empty(r)?(n.children=r,n):n}))})),(0,s.Z)((0,l.Z)(e),"iterationAuth",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t.map((function(t){var a=t.leaf,r=t.node;r.level=n;var o=[];return a&&(o=e.iterationAuth(a,n+1)),m().not.empty(o)?(r.children=o,r):r}))})),(0,s.Z)((0,l.Z)(e),"renderAuthCheck",(function(){var t=e.abandonIds().map((function(t){return e.module(t)}));return v.createElement(y.IT,{title:"废弃模块",style:{backgroundColor:"#FAFAFA"}},v.createElement(a.Z,{columns:[{title:"权限名称",dataIndex:"title",key:"title"},{title:"权限id",dataIndex:"id",key:"id"},{title:"权限key",dataIndex:"key",key:"key"}],dataSource:t,pagination:!1,defaultExpandAllRows:!0,size:"small",bordered:!0,className:E["app-comp-admin-developer-table"]}))})),(0,s.Z)((0,l.Z)(e),"renderAuthTree",(function(){var t=[{title:"权限名称",dataIndex:"title",key:"title"},{title:"权限级别",dataIndex:"level",key:"level"},{title:"权限定义",dataIndex:"description",key:"description"},{title:"权限key",dataIndex:"key",key:"key"},{title:"包含模块",dataIndex:"modules",key:"modules",render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m().empty(t)?v.createElement("span",{className:E["app-comp-admin-developer-no-auth"]},"未添加模块权限"):t.map((function(t,n){var a,r=t.id;return"xxx"===t.id&&(r=v.createElement("span",{className:E["app-comp-admin-developer-no-auth"]},t.id)),v.createElement("div",{key:n},v.createElement("span",null,t.title,"(",(a=t,e.isAbandon(a.id)?v.createElement("span",{style:{color:"red"}},"废弃"):a.isPage?"页面":a.isMenu?"菜单":a.isOperate?"操作":void 0),") / ",r," / ",t.key," "))}))}}],n=e.iterationAuth(x.GZ,1);return v.createElement(y.IT,{title:"权限树",style:{backgroundColor:"#FAFAFA"}},v.createElement(a.Z,{columns:t,dataSource:n,pagination:!1,defaultExpandAllRows:!0,size:"small",bordered:!0,className:E["app-comp-admin-developer-table"]}))})),(0,s.Z)((0,l.Z)(e),"renderNavigation",(function(){var t=e.iteration(b.Z);return v.createElement(y.IT,{title:"菜单树",style:{backgroundColor:"#FAFAFA"}},v.createElement(a.Z,{columns:[{title:"模块名称",dataIndex:"title",key:"title"},{title:"权限id",dataIndex:"id",key:"id"},{title:"访问路径",dataIndex:"path",key:"path"},{title:"模块key",dataIndex:"key",key:"key"}],dataSource:t,pagination:!1,defaultExpandAllRows:!0,size:"small",bordered:!0,className:E["app-comp-admin-developer-table"]}))})),(0,s.Z)((0,l.Z)(e),"renderModules",(function(){var t=[];Object.values(x.xn).forEach((function(e){t=t.concat(e.modules)}));var n=t.map((function(e){return e.id})),r=Object.keys(k.Z).map((function(e){return k.Z[e]})),o=[],i=[];Object.values(k.Z).forEach((function(e){o[e.id]?i.push(e.id):o[e.id]=1}));var l=[{title:"模块名称",dataIndex:"title",key:"title",render:function(e,t){return-1===n.indexOf(t.id)?v.createElement("span",{className:E.bossDeveloperNoAuth},e," ",v.createElement("span",{style:{color:"red"}},"(未添加到权限)")):-1!==i.indexOf(t.id)?v.createElement("span",{className:E["app-comp-admin-developer-id-fault"]},e," (授权id重复或错误)"):v.createElement("span",null,e)}},{title:"类型",dataIndex:"type",key:"type",render:function(t,n){return e.isAbandon(n.id)?v.createElement("span",{style:{color:"red"}},"废弃"):n.isPage?"页面":n.isMenu?"菜单":n.isOperate?"操作":void 0}},{title:"权限id",dataIndex:"id",key:"id",render:function(e){return"xxx"===e?v.createElement("span",{className:E["app-comp-admin-developer-not-add-auth"]},e):v.createElement("span",null,e)}},{title:"访问路径",dataIndex:"path",key:"path",render:function(e,t){var n=Z.Z.breadcrumbByPath("".concat(e));return t.isPage&&m().empty(n)?v.createElement("span",{className:E["app-comp-admin-developer-not-add-auth"]},"导航未配置归属（无面包屑）"):v.createElement(h.Z,{breadcrumb:n})}},{title:"模块key",dataIndex:"key",key:"key"}];return v.createElement(y.IT,{title:"模块定义",style:{backgroundColor:"#FAFAFA"}},v.createElement(a.Z,{dataSource:r,columns:l,pagination:!1,defaultExpandAllRows:!0,size:"small",bordered:!0,className:E["app-comp-admin-developer-table"]}))})),(0,s.Z)((0,l.Z)(e),"renderMapRoleToAuthor",(function(){var t=e.createColumns(),n=e.createTableData();return v.createElement(a.Z,{columns:t,dataSource:n,scroll:{x:2e4,y:1500},bordered:!0})})),(0,s.Z)((0,l.Z)(e),"renderMapAuthorToRole",(function(){var t=e.createColumnsRevert(),n=e.createTableDataRevert();return v.createElement(a.Z,{columns:t,dataSource:n,bordered:!0,scroll:{x:12e3}})})),e}return(0,i.Z)(n,[{key:"render",value:function(){return v.createElement("div",null,this.renderAuthCheck(),this.renderAuthTree(),this.renderNavigation(),this.renderModules())}}]),n}(v.Component);var g=(0,f.connect)((function(e){var t=e.adminManage;return{permissions:t.permissions,roles:t.roles}}))(I)}}]);