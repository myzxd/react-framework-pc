"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[5734],{15734:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});n(55295);var a=n(69713),r=n(15671),o=n(43144),i=n(97326),l=n(60136),c=n(82963),s=n(61120),m=n(4942),p=n(93517),f=n.n(p),d=n(30381),u=n.n(d),h=n(55609),g=n(67294),_=n(80385),w=n(96036),y=(n(20186),n(75385)),C=(n(52560),n(71577)),Z=(n(52466),n(10642)),v=(n(75310),n(76772)),D=(n(36037),n(47933)),S=(n(29093),n(16317)),b=n(45697),k=n.n(b),M=n(66939),E=(n(98703),n(45430)),I=n(97116),O=n(23217),Y=n(46535);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var L=E.ZP.canOperateTeamTeacherManageOwnerCreate(),z=E.ZP.canOperateTeamTeacherManageOwnerChange(),R=E.ZP.canOperateTeamTeacherManageOwnerStop(),B=S.Z.Option,F=new Date,N=F.getFullYear(),j=F.getMonth(),H=new Date(N,j+1,1),A=function(e){(0,l.Z)(n,e);var t=x(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,m.Z)((0,i.Z)(o),"onChangePage",(function(e,t){var n=o.private.searchParams;n.meta.page=e,n.meta.limit=t,o.onSearch()})),(0,m.Z)((0,i.Z)(o),"onShowSizeChange",(function(e,t){var n=o.private.searchParams;n.meta.page=e,n.meta.limit=t,o.onSearch()})),(0,m.Z)((0,i.Z)(o),"onSearch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.private.searchParams,n=o.props.id;o.private.searchParams=T(T(T({},t),e),{},{id:n}),o.props.dispatch({type:"modelCoachDepartment/fetchCoachRelationshipList",payload:o.private.searchParams})})),(0,m.Z)((0,i.Z)(o),"onClickModalOk",(function(e){e.preventDefault(),o.props.form.validateFields((function(e,t){if(!e){var n=t.changeDate===_.D9p.immediately?Number(u()(F).format("YYYYMMDD")):Number(u()(H).format("YYYYMMDD")),a=o.state,r=a.isCreateModal,l=a.ownerData,c=(0,i.Z)(o).onSuccessCallback,s=o.props.id,m=T(T({},t),{},{effectDate:n,ownerId:t.name,departmentId:s,formerOwnerId:l.owner_info?l.owner_info._id:void 0,onSuccessCallback:c,effectTime:Number(u()(F).format("YYYYMMDD"))});r?o.props.dispatch({type:"modelCoachDepartment/relationOwner",payload:m}):o.props.dispatch({type:"modelCoachDepartment/changeOwner",payload:T({relationLogId:l._id?l._id:void 0},m)})}}))})),(0,m.Z)((0,i.Z)(o),"onClickModalCancel",(function(){o.setState({isShowModal:!1,ownerArray:[],ownerDetail:{},ownerData:{}}),o.props.dispatch({type:"modelCoachDepartment/resetOwnerList"})})),(0,m.Z)((0,i.Z)(o),"onSuccessCallback",(function(){o.setState({isShowModal:!1,ownerDetail:{},ownerData:{}}),o.props.dispatch({type:"modelCoachDepartment/resetOwnerList"}),o.props.form.setFieldsValue({name:void 0}),o.onSearch(),o.props.onGetChangeList(!0)})),(0,m.Z)((0,i.Z)(o),"onChangeOwner",(function(e){e?o.setState({isShowModal:!0,isCreateModal:!1,ownerData:e}):o.setState({isShowModal:!0,isCreateModal:!0,ownerData:{}})})),(0,m.Z)((0,i.Z)(o),"onEffectDate",(function(e){e.target.value===_.D9p.immediately?o.setState({effectDate:Number(u()(F).format("YYYYMMDD"))}):o.setState({effectDate:Number(u()(H).format("YYYYMMDD"))})})),(0,m.Z)((0,i.Z)(o),"onHandleSearch",(function(e){if(e.trim()){var t=o.private.flag;o.lastValue=e,t&&(setTimeout((function(){o.props.dispatch({type:"modelCoachDepartment/fetchOwnerList",payload:{name:o.lastValue}}),o.private.flag=!0,o.lastValue=void 0}),200),o.private.flag=!1)}})),(0,m.Z)((0,i.Z)(o),"onHandleChange",(function(e){if(!e)return o.props.form.setFieldsValue({name:void 0}),o.setState({ownerDetail:{}});var t=o.state.ownerArray.find((function(t){return t._id===e}));o.props.form.setFieldsValue({name:e}),o.setState({ownerDetail:t})})),(0,m.Z)((0,i.Z)(o),"onStopManage",(function(e){o.setState({isShowTerminationModal:!0,ownerDetail:e})})),(0,m.Z)((0,i.Z)(o),"onChangeModalOpen",(function(e){o.setState({ownerData:e,displayChangeModal:!0})})),(0,m.Z)((0,i.Z)(o),"onSubmitTermination",(function(e){e.preventDefault(),o.props.form.validateFields((function(e,t){var n=t.terminationDate===_.D9p.immediately?Number(u()(F).format("YYYYMMDD")):Number(u()(H).format("YYYYMMDD"));o.setState({isShowTerminationModal:!1});var a=(0,i.Z)(o).onSuccessCallback,r=o.props.id,l=o.state.ownerDetail,c=T(T({},t),{},{effectDate:n,formerOwnerId:l.owner_info?l.owner_info._id:void 0,relationLogId:l._id?l._id:void 0,departmentId:r,onSuccessCallback:a});o.props.dispatch({type:"modelCoachDepartment/stopManage",payload:c}),o.props.form.resetFields()}))})),(0,m.Z)((0,i.Z)(o),"onTerminationCancel",(function(){o.setState({isShowTerminationModal:!1})})),(0,m.Z)((0,i.Z)(o),"onOkCallback",(function(){o.onCancelCallback(),o.onSearch(),o.props.onGetChangeList(!0)})),(0,m.Z)((0,i.Z)(o),"onCancelCallback",(function(){o.setState({displayChangeModal:!1,ownerData:{}})})),(0,m.Z)((0,i.Z)(o),"checkAuthor",(function(){return I.Iq.modules().some((function(e){return e.id===O.Z.ModuleTeamManagerUpdate.id}))})),(0,m.Z)((0,i.Z)(o),"showMoreStr",(function(e,t){return e.length<=t?e:g.createElement(a.Z,{placement:"right",title:e},"".concat(e.slice(0,t),"..."))})),(0,m.Z)((0,i.Z)(o),"renderTerminationForm",(function(){var e=o.props.form.getFieldDecorator,t=o.state.isShowTerminationModal;if(!t)return null;var n=[{label:"生效日期",form:e("terminationDate",{initialValue:_.D9p.immediately,rules:[{required:!0,message:"请选择生效日期"}]})(g.createElement(D.ZP.Group,{onChange:o.onEffectDate},g.createElement(D.ZP,{value:_.D9p.immediately},_.D9p.description(_.D9p.immediately))))}];return g.createElement(Z.Z,{title:g.createElement(v.Z,{message:"是否确认终止？",type:"warning",showIcon:!0,style:{background:"#fff",border:"none"}}),width:"800px",visible:t,onOk:o.onSubmitTermination,onCancel:o.onTerminationCancel,okText:"确定"},g.createElement(w.KP,{items:n,cols:1,layout:{labelCol:{span:4},wrapperCol:{span:16}}}))})),(0,m.Z)((0,i.Z)(o),"renderRelationshipList",(function(){var e=(0,i.Z)(o).showMoreStr,t=o.props.coachRelationshipList,n=t.data||[],a=t._meta?t._meta.result_count:0,r=o.private.searchParams.meta,l=o.checkAuthor(),c=[{title:"业主姓名",dataIndex:"owner_info",key:"owner_info.staff_info.name",width:100,fixed:"left",render:function(e,t){return l&&t.owner_id?g.createElement("a",{href:"/#/Team/Manager/Update?id=".concat(t.owner_id),rel:"noopener noreferrer",target:"_blank"},f().get(e,"staff_info.name","--")):e&&e.staff_info?e.staff_info.name:"--"}},{title:"业主团队ID",dataIndex:"owner_id",key:"owner_id",width:180,fixed:"left",render:function(e){return e||"--"}},{title:"平台",dataIndex:"owner_info",key:"owner_info.platform_names",render:function(t){var n=t&&t.platform_names&&t.platform_names.length>0?t.platform_names.toString():"--";return e(n,10)}},{title:"供应商",dataIndex:"owner_info",key:"owner_info.supplier_names",render:function(t){var n=t&&t.supplier_names&&t.supplier_names.length>0?t.supplier_names.toString():"--";return e(n,10)}},{title:"城市",dataIndex:"owner_info",key:"owner_info.city_names",render:function(t){var n=t&&t.city_names&&t.city_names.length>0?t.city_names.toString():"--";return e(n,10)}},{title:"商圈",dataIndex:"owner_info",key:"owner_info.biz_district_names",render:function(t){var n=t&&t.biz_district_names&&t.biz_district_names.length>0?t.biz_district_names.toString():"--";return e(n,10)}},{title:"操作人",dataIndex:"operator_info",key:"operator_info.name",width:100,render:function(e){return e&&e.name?e.name:"--"}},{title:"归属月份",dataIndex:"month",key:"month",width:150,render:function(e){return e?u()("".concat(e,"01")).format("YYYY年MM月"):"--"}},{title:"操作",dataIndex:"operation",key:"operation",width:100,fixed:"right",render:function(e,t){return g.createElement(g.Fragment,null,z?g.createElement("span",{className:"app-global-compoments-cursor",onClick:function(){return o.onChangeModalOpen(t)}},"变更"):null,R?g.createElement("span",{onClick:function(){return o.onStopManage(t)},className:"app-global-compoments-cursor"},"终止"):null)}}],s={current:r.page,defaultPageSize:30,pageSize:r.limit,onChange:o.onChangePage,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:o.onShowSizeChange,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:a},m=g.createElement(C.Z,{type:"primary",onClick:o.onChangeOwner.bind(null,!1)},"添加资产管理");return g.createElement(w.IT,{title:"资产隶属关系列表",titleExt:L?m:null},g.createElement(y.Z,{rowKey:function(e,t){return t},pagination:s,dataSource:n,columns:c,bordered:!0,scroll:{x:1380}}))})),(0,m.Z)((0,i.Z)(o),"renderAssetsManageModal",(function(){var e=o.props.form.getFieldDecorator,t=o.state,n=t.isShowModal,a=t.isCreateModal,r=t.ownerArray,i=t.ownerDetail;if(!n)return null;var l,c,s=[{label:"姓名",form:e("name",{rules:[{required:!0,message:"业主姓名不能为空！"}]})(g.createElement(S.Z,{showSearch:!0,placeholder:"请输入业主姓名",showArrow:!1,onChange:o.onHandleChange,onSearch:o.onHandleSearch,style:{width:240},filterOption:!1,allowClear:!0},r.map((function(e){if(e.staff_info)return g.createElement(B,{key:e._id,value:e._id},"".concat(e.staff_info.name,"(").concat(e._id,")"))}))))},{label:"平台",form:i.platform_names&&i.platform_names.length>0?i.platform_names.toString():"--"},{label:"供应商",form:i.supplier_names&&i.supplier_names.length>0?i.supplier_names.toString():"--"},{label:"城市",form:i.city_names&&i.city_names.length>0?i.city_names.toString():"--"},{label:"商圈",form:i.biz_district_names&&i.biz_district_names.length>0?i.biz_district_names.toString():"--"}];return a?(s.push({label:"生效日期",form:"立即生效"}),l="确定",c="关联业主选择"):(l="确定变更",c="变更业主",s.push({label:"生效日期",form:e("changeDate",{initialValue:_.D9p.immediately,rules:[{required:!0,message:"请选择生效日期"}]})(g.createElement(D.ZP.Group,{onChange:o.onEffectDate},g.createElement(D.ZP,{value:_.D9p.immediately},_.D9p.description(_.D9p.immediately))))})),g.createElement(Z.Z,{title:c,visible:n,onOk:o.onClickModalOk,onCancel:o.onClickModalCancel,okText:l},g.createElement(w.KP,{items:s,cols:1,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),o.state={isShowModal:!1,isCreateModal:!0,isShowTerminationModal:!1,displayChangeModal:!1,ownerArray:[],ownerDetail:{},ownerData:{},effectDate:Number(u()(H).format("YYYYMMDD"))},o.private={searchParams:{meta:{page:1,limit:30}},flag:!0},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e={id:this.props.id};this.props.dispatch({type:"modelCoachDepartment/fetchCoachRelationshipList",payload:e})}},{key:"render",value:function(){var e=this.state,t=e.displayChangeModal,n=e.ownerData,a={departmentId:n.department_id,ownerId:n.owner_id,relationLogId:n._id,onOkCallback:this.onOkCallback,onCancelCallback:this.onCancelCallback};return g.createElement("div",null,this.renderRelationshipList(),this.renderAssetsManageModal(),this.renderTerminationForm(),t&&g.createElement(Y.Z,a))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.ownerList.length!==t.ownerArray.length?{ownerArray:e.ownerList}:null}}]),n}(g.Component);(0,m.Z)(A,"propTypes",{coachRelationshipList:k().object}),(0,m.Z)(A,"defaultProps",{coachRelationshipList:{}});var V=(0,h.connect)((function(e){var t=e.modelCoachDepartment;return{coachRelationshipList:t.coachRelationshipList,ownerList:t.ownerList}}))(M.Z.create()(A)),q=(n(21316),n(75443)),K=(n(51838),n(48086));function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var J=E.ZP.canOperateTeamTeacherManageChangeCancel(),Q=function(e){(0,l.Z)(n,e);var t=G(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,m.Z)((0,i.Z)(o),"onSuccessCallBack",(function(){K.ZP.success("取消成功"),o.props.onSearch()})),(0,m.Z)((0,i.Z)(o),"onDetail",(function(e){o.setState({detailData:e,showDetailModal:!0})})),(0,m.Z)((0,i.Z)(o),"onClickModal",(function(){o.setState({detailData:{},showDetailModal:!1})})),(0,m.Z)((0,i.Z)(o),"onChangeCancel",(function(e){var t={id:e._id,onSuccessCallBack:o.onSuccessCallBack};o.props.dispatch({type:"modelCoachDepartment/fetchChangeCancel",payload:t})})),(0,m.Z)((0,i.Z)(o),"showMoreStr",(function(e,t){return e.length<=t?e:g.createElement(a.Z,{placement:"right",title:e},"".concat(e.slice(0,t),"..."))})),(0,m.Z)((0,i.Z)(o),"displayState",(function(e){var t="";switch(e){case _.ivH.effected:t=g.createElement("span",{className:"app-global-compoments-color1"},_.ivH.description(e));break;case _.ivH.effectBefore:t=g.createElement("span",{className:"app-global-compoments-color2"},_.ivH.description(e));break;case _.ivH.lose:t=g.createElement("span",{className:"app-global-compoments-color3"},_.ivH.description(e));break;default:t="--"}return t})),(0,m.Z)((0,i.Z)(o),"renderScope",(function(){var e=(0,i.Z)(o).showMoreStr,t=o.props.teamChangeList,n=t.data||[],a=t._meta?t._meta.result_count:0,r=o.props,l=[{title:"业主姓名",dataIndex:"owner_info",key:"owner_info.staff_info.name",width:100,fixed:"left",render:function(e){return e&&e.staff_info&&e.staff_info.name?e.staff_info.name:"--"}},{title:"业主团队ID",dataIndex:"owner_info",key:"owner_info._id",width:180,fixed:"left",render:function(e){return e&&e._id?e._id:"--"}},{title:"平台",dataIndex:"owner_info",key:"owner_info.platform_names",render:function(t){var n=t&&t.platform_names&&t.platform_names.length>0?t.platform_names.toString():"--";return e(n,10)}},{title:"供应商",dataIndex:"owner_info",key:"owner_info.supplier_names",render:function(t){var n=t&&t.supplier_names&&t.supplier_names.length>0?t.supplier_names.toString():"--";return e(n,10)}},{title:"城市",dataIndex:"owner_info",key:"owner_info.city_names",render:function(t){var n=t&&t.city_names&&t.city_names.length>0?t.city_names.toString():"--";return e(n,10)}},{title:"商圈",dataIndex:"owner_info",key:"owner_info.biz_district_names",render:function(t){var n=t&&t.biz_district_names&&t.biz_district_names.length>0?t.biz_district_names.toString():"--";return e(n,10)}},{title:"最新操作人",dataIndex:"operator_info",key:"operator_info.name",width:100,render:function(e){return e&&e.name?e.name:"--"}},{title:"操作时间",dataIndex:"updated_at",key:"updated_at",width:150,render:function(e){return u()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"动作",dataIndex:"event",key:"event",width:80,render:function(e){return _.KID.description(e)}},{title:"生效状态",dataIndex:"state",key:"state",width:80,render:function(e){return o.displayState(e)}},{title:"生效日期",dataIndex:"plan_done_date",key:"plan_done_date",width:150,render:function(e){return e?u()("".concat(e)).format("YYYY年MM月DD日"):"--"}},{title:"操作",dataIndex:"operation",key:"operation",width:80,fixed:"right",render:function(e,t){return t.state&&t.state===_.ivH.effectBefore&&J?g.createElement(g.Fragment,null,g.createElement(q.Z,{title:"是否确认取消本次变更记录?",onConfirm:o.onChangeCancel.bind((0,i.Z)(o),t),okText:"确定",cancelText:"取消"},g.createElement("span",{className:"app-global-compoments-cursor"},"取消"))):"--"}}],c={current:r.page,defaultPageSize:30,pageSize:r.limit,onChange:r.onChangePage,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:r.onShowSizeChange,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:a},s=g.createElement("span",null,"变更记录  注：以下",g.createElement("span",{className:"app-global-compoments-color4"},"待生效"),"的数据次月1号开始生效");return g.createElement(w.IT,{title:s},g.createElement(y.Z,{rowKey:function(e,t){return t},pagination:c,dataSource:n,columns:l,bordered:!0,scroll:{x:1520}}))})),(0,m.Z)((0,i.Z)(o),"renderDetailModal",(function(){var e=o.state,t=e.showDetailModal,n=e.detailData,a={labelCol:{span:8},wrapperCol:{span:16}},r=[{label:"业主",form:f().get(n,"former_owner_info.staff_info.name","--").toString()},{label:"业主ID",form:f().get(n,"former_owner_info._id","--")},{label:"平台",form:f().get(n,"former_owner_info.platform_names","--").toString()},{label:"供应商",form:f().get(n,"former_owner_info.supplier_names","--").toString()},{label:"城市",form:f().get(n,"former_owner_info.city_names","--").toString()},{label:"商圈",form:f().get(n,"former_owner_info.biz_district_names","--").toString()}],i=[{label:"业主",form:f().get(n,"owner_info.staff_info.name","--").toString()},{label:"业主ID",form:f().get(n,"owner_info._id","--")},{label:"平台",form:f().get(n,"owner_info.platform_names","--").toString()},{label:"供应商",form:f().get(n,"owner_info.supplier_names","--").toString()},{label:"城市",form:f().get(n,"owner_info.city_names","--").toString()},{label:"商圈",form:f().get(n,"owner_info.biz_district_names","--").toString()}];return g.createElement(Z.Z,{title:"变更记录详情",width:"800px",visible:t,onOk:o.onClickModal,onCancel:o.onClickModal,okText:"确定",cancelButtonProps:{style:{display:"none"}}},g.createElement("p",null,"变更前信息"),g.createElement(w.KP,{items:r,cols:2,layout:a}),g.createElement("p",null,"变更后信息"),g.createElement(w.KP,{items:i,cols:2,layout:a}))})),o.state={logData:{},showDetailModal:!1,detailData:{}},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e={id:this.props.id};this.props.dispatch({type:"modelCoachDepartment/fetchChangeLog",payload:e})}},{key:"render",value:function(){return g.createElement("div",null,this.renderScope(),this.renderDetailModal())}}]),n}(g.Component);(0,m.Z)(Q,"propTypes",{teamChangeList:k().object}),(0,m.Z)(Q,"defaultProps",{teamChangeList:{}});var U=(0,h.connect)((function(e){return{teamChangeList:e.modelCoachDepartment.teamChangeList}}))(Q);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.Z)(this,n)}}var X=function(e){(0,l.Z)(n,e);var t=W(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,m.Z)((0,i.Z)(o),"onChangePage",(function(e,t){o.setState((function(){return{page:e,limit:t}}),(function(){o.onSearch()}))})),(0,m.Z)((0,i.Z)(o),"onShowSizeChange",(function(e,t){o.setState((function(){return{page:e,limit:t}}),(function(){o.onSearch()}))})),(0,m.Z)((0,i.Z)(o),"onSearch",(function(e){var t=o.props.location.query.id,n=o.state,a=n.page,r=n.limit;if(e)return o.setState((function(){return{page:1,limit:30}}),(function(){var e={id:t,meta:{page:1,limit:30}};o.props.dispatch({type:"modelCoachDepartment/fetchChangeLog",payload:e})}));var i={id:t,meta:{page:a,limit:r}};o.props.dispatch({type:"modelCoachDepartment/fetchChangeLog",payload:i})})),(0,m.Z)((0,i.Z)(o),"renderBusiness",(function(){var e=o.props.businessTag,t=void 0===e?{}:e,n=t.platform_names,r=void 0===n?[]:n,i=t.supplier_names,l=void 0===i?[]:i,c=t.city_names,s=void 0===c?[]:c,m=t.team_attrs,p=void 0===m?[]:m,f=t.custom_attrs,d=void 0===f?[]:f,u=[];p.length>0&&(u=p.map((function(e){return _.vtJ.description(e)})));var h=[].concat(r,l,s,u,d).toString();return 0===h.length?"--":h.length<=15?h:g.createElement(a.Z,{placement:"rightBottom",title:h},"".concat(h.slice(0,15),"..."))})),(0,m.Z)((0,i.Z)(o),"renderInfo",(function(){var e=o.props.coachDepartmentDetail,t=[{label:"私教部门ID",form:f().get(e,"_id","--")},{label:"私教部门名称",form:f().get(e,"name","--")},{label:"部门负责人",form:f().get(e,"administrator_info.name","--")},{label:"创建时间",form:e.created_at?u()(e.created_at).format("YYYY年MM月DD日"):"--"},{label:"业务信息",form:o.renderBusiness()}];return g.createElement(w.IT,{title:"私教部门信息"},g.createElement(w.KP,{items:t,cols:4,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),o.state={page:1,limit:30},o}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.query.id;this.props.dispatch({type:"modelCoachDepartment/fetchCoachDepartmentDetail",payload:{id:e}}),this.props.dispatch({type:"organizationBusiness/getBusiness",payload:{departmentId:e}})}},{key:"render",value:function(){var e=this.props.location.query.id,t=this.onChangePage,n=this.onShowSizeChange,a=this.onSearch,r=this.state,o={onChangePage:t,onShowSizeChange:n,page:r.page,limit:r.limit,id:e,onSearch:a};return g.createElement("div",null,this.renderInfo(),g.createElement(V,{id:e,onGetChangeList:a}),g.createElement(U,o))}}]),n}(g.Component),$=(0,h.connect)((function(e){return{coachDepartmentDetail:e.modelCoachDepartment.coachDepartmentDetail,businessTag:e.organizationBusiness.businessTag}}))(X)},46535:function(e,t,n){n.d(t,{Z:function(){return C}});n(52466);var a=n(10642),r=(n(75310),n(76772)),o=n(87462),i=(n(35668),n(86585)),l=n(29439),c=(n(29093),n(16317)),s=n(96486),m=n.n(s),p=n(93517),f=n.n(p),d=n(30381),u=n.n(d),h=n(55609),g=n(67294),_=n(96036),w="_48Zwj95oylvpECpdD9w",y=c.Z.Option,C=(0,h.connect)((function(e){return{departmentData:e.teamTeacher.partmentData}}))((function(e){var t=e.departmentData,n=e.dispatch,s=e.ownerId,p=e.departmentId,d=e.relationLogId,h=e.onOkCallback,C=e.onCancelCallback,Z=i.Z.useForm(),v=(0,l.Z)(Z,1)[0],D=(0,g.useState)({}),S=(0,l.Z)(D,2),b=S[0],k=S[1];(0,g.useEffect)((function(){return function(){n({type:"teamTeacher/resetTeamMonitoringdePartmentList"})}}),[n]);var M,E,I=function(e){if(!e)return v.setFieldsValue({name:void 0}),k({});var n=t.find((function(t){return t._id===e}));v.setFieldsValue({name:e}),k(n)},O=m().debounce((function(e){e.trim()&&n({type:"teamTeacher/fetachTeamMonitoringdePartmentList",payload:{name:e}})}),800);return g.createElement(a.Z,{title:"更换私教管理",visible:!0,onOk:function(){v.validateFields().then((function(){n({type:"modelCoachDepartment/changeOwner",payload:{departmentId:p,newDepartmentId:b._id,ownerId:s,relationLogId:d,effectDate:u()().format("YYYYMMDD"),onSuccessCallback:h}})}))},onCancel:function(){C&&C()},okText:"确定",cancelText:"取消"},g.createElement("span",{className:w},g.createElement(r.Z,{message:"提醒：成功更换私教团队后，该业主团队产生的费用会归集到变更后的私教团队",type:"warning",showIcon:!0})),g.createElement(i.Z,{form:v,layout:"horizontal"},(M={labelCol:{span:6},wrapperCol:{span:16}},E=[g.createElement(i.Z.Item,(0,o.Z)({label:"私教部门名称",name:"name",rules:[{required:!0,message:"请输入"}]},M),g.createElement(c.Z,{showSearch:!0,placeholder:"请输入私教部门名称搜索",showArrow:!1,onChange:I,onSearch:O,style:{width:240},filterOption:!1,allowClear:!0},t.map((function(e){return g.createElement(y,{key:e._id,value:e._id},"".concat(e.name,"(").concat(e.code,")"))})))),g.createElement(i.Z.Item,(0,o.Z)({label:"私教部门编号"},M),f().get(b,"code","--")),g.createElement(i.Z.Item,(0,o.Z)({label:"私教部门负责人"},M),f().get(b,"administrator_info.name","--"))],g.createElement(_.Fp,{items:E,cols:1}))))}))}}]);