"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[8696],{24986:function(e,t,n){n(13062);var o=n(71230),a=(n(89032),n(15746)),r=(n(61023),n(11324)),i=(n(52560),n(71577)),c=(n(51838),n(48086)),s=n(15671),l=n(43144),p=n(97326),u=n(60136),d=n(82963),m=n(61120),f=n(4942),h=n(45697),v=n.n(h),y=n(55609),g=n(67294),b=(n(98703),n(84391)),C=n(99124);function Z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw r}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,m.Z)(e);if(t){var a=(0,m.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,d.Z)(this,n)}}var E=function(e){(0,u.Z)(n,e);var t=F(n);function n(e){var o;return(0,s.Z)(this,n),o=t.call(this,e),(0,f.Z)((0,p.Z)(o),"componentWillReceiveProps",(function(e){o.setState({isVerifyFileType:!!e.isVerifyFileType&&e.isVerifyFileType,onSuccess:e.onSuccess?e.onSuccess:void 0,onFailure:e.onFailure?e.onFailure:void 0})})),(0,f.Z)((0,p.Z)(o),"onUpload",(function(){return!1})),(0,f.Z)((0,p.Z)(o),"onCancel",(function(){o.setState(I(I({},o.state),{},{visible:!1}))})),(0,f.Z)((0,p.Z)(o),"onUploadSuccessCallback",(function(e,t){var n=o.props.onSuccess;t&&n&&n(t)})),(0,f.Z)((0,p.Z)(o),"onCheckValue",(function(e,t){var n,o=Z(e);try{for(o.s();!(n=o.n()).done;){if(n.value.uid===t)return!0}}catch(e){o.e(e)}finally{o.f()}return!1})),(0,f.Z)((0,p.Z)(o),"onChange",(function(e){var t=e.file,n=o.state.domain,a=o.state,r=a.isVerifyFileType,i=a.verifyFileType,s=t.name.slice(t.name.lastIndexOf(".")+1),l="";if(t.name&&(l=t.name.slice(0,t.name.lastIndexOf("."))),t.size>=152e5)return c.ZP.error("单个压缩包最大限制为15兆，请重新上传");if(r){if(i.some((function(e){return e===s})))return c.ZP.error("不支持上传压缩文件")}else if(i.some((function(e){return e===s}))&&"zip"!==s)return c.ZP.error("仅支持zip格式压缩包，请重新上传");return o.props.dispatch({type:"applicationFiles/uploadAmazonFile",payload:{file:t,domain:n,fileType:s,fileKey:l,onSuccessCallback:o.onUploadSuccessCallback.bind((0,p.Z)(o),t)}}),!1})),o.state={isVerifyFileType:!!e.isVerifyFileType&&e.isVerifyFileType,verifyFileType:["zip","rar","7z","wim","cab","iso","jar","ace","tar","arj","lzh"],onSuccess:e.onSuccess?e.onSuccess:void 0,onFailure:e.onFailure?e.onFailure:void 0,domain:e.domain},o}return(0,l.Z)(n,[{key:"render",value:function(){var e={action:"",name:"file",onChange:this.onChange,beforeUpload:this.onUpload,showUploadList:!1,multiple:!0};return g.createElement("div",{className:C.Z["app-comp-expense-common-upload-box"]},g.createElement(o.Z,null,g.createElement(a.Z,{sm:17,id:C.Z["app-comp-expense-common-upload-btn "]},g.createElement(r.Z,e,g.createElement(i.Z,{className:C.Z["app-comp-expense-common-upload-reset-hover"]},g.createElement(b.Z,null),"点击上传")),g.createElement("br",null),g.createElement("span",{className:C.Z["upload-style"]},"上传压缩包仅支持zip格式，单个压缩包限制15M"))))}}]),n}(g.Component);(0,f.Z)(E,"propTypes",{domain:v().string}),(0,f.Z)(E,"defaultProps",{domain:"deflateDomain"}),t.Z=(0,y.connect)()(E)},55996:function(e,t,n){var o=n(15671),a=n(43144),r=n(97326),i=n(60136),c=n(82963),s=n(61120),l=n(4942),p=n(96486),u=n.n(p),d=n(93517),m=n.n(d),f=n(45697),h=n.n(f),v=n(67294),y=n(55609),g=n(96036),b=n(80385),C=n(97116),Z=n(8240);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}var F=g.Hr.Option,E=["elem","meituan","relian","zongbu","chengtu","haluo","mobike","chengjing","lailai"],j=function(e){return E.includes(e)},N=function(e){(0,i.Z)(n,e);var t=I(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),(0,l.Z)((0,r.Z)(e),"componentWillUnmount",(function(){e.props.dispatch({type:"expenseCostOrder/resetSubjectBelong",payload:{}})})),(0,l.Z)((0,r.Z)(e),"onSuccessCallback",(function(t,n){var o=e.props,a=o.form,r=o.onChangeCostAttribution;r&&r(t,n);var i=t.cost_center_type,c=void 0===i?void 0:i;a.setFieldsValue({costAttribution:c})})),e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.subjectCode,o=t.platform,a=t.namespace,r={subjectCode:n,namespace:void 0===a?"cost":a,onSuccessCallback:function(t){return e.onSuccessCallback(t,!0)}};n&&C.By.isEnableCostBelongModule()&&j(o)&&this.props.dispatch({type:"expenseCostOrder/fetchSubjectBelong",payload:x({},r)})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.subjectCode,o=t.platform,a=t.namespace,r=void 0===a?"cost":a;!u().isEqual(n,e.subjectCode)&&C.By.isEnableCostBelongModule()&&j(o)&&this.props.dispatch({type:"expenseCostOrder/fetchSubjectBelong",payload:{subjectCode:n,namespace:r,onSuccessCallback:this.onSuccessCallback}})}},{key:"render",value:function(){var e=this.props,t=e.expenseCostOrder,n=e.namespace,o=void 0===n?"cost":n,a=m().get(t,"subjectBelong",{}),r=m().get(a,"".concat(o),{}),i=(r.cost_center_type?[r]:[]).map((function(e){return v.createElement(F,{value:e.cost_center_type,key:e.cost_center_type},b.F$Y.description(e.cost_center_type))})),c=x({},this.props),s=(0,Z.CE)(["subjectCode","onChangeCostAttribution","dispatch","expenseCostOrder"],c);return v.createElement(g.Hr,s,i)}}]),n}(v.Component);(0,l.Z)(N,"propTypes",{subjectCode:h().string,expenseCostOrder:h().object,namespace:h().string}),(0,l.Z)(N,"defaultValue",{subjectCode:"",expenseCostOrder:{},namespace:"belong"}),t.ZP=(0,y.connect)((function(e){return{expenseCostOrder:e.expenseCostOrder}}))(N)},51872:function(e,t,n){n.d(t,{Z:function(){return oe}});n(51838);var o=n(48086),a=n(93433),r=n(15671),i=n(43144),c=n(97326),s=n(60136),l=n(82963),p=n(61120),u=n(4942),d=(n(36037),n(47933)),m=n(96486),f=n.n(m),h=n(94315),v=n.n(h),y=n(93517),g=n.n(y),b=n(45697),C=n.n(b),Z=n(66939),O=(n(98703),n(55609)),x=n(67294),I=n(96036),F=n(80385),E=(n(52560),n(71577)),j=(n(36616),n(51368)),N=(n(55295),n(69713)),S=(n(29093),n(16317)),T=n(30381),Y=n.n(T),D=n(44654),w=n(49101),P=n(1058),A=n(88144),$=n(80458),k=n(26845),R=n(68940),B=n(50498);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var V=S.Z.Option,q=function(e){(0,s.Z)(n,e);var t=M(n);function n(){var e;(0,r.Z)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,c.Z)(e),"onChange",(function(t,n){var o=e.props.onChange;o&&o(t,n)})),e}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.props.id&&this.props.dispatch({type:"expenseExamineOrder/getStaffMember",payload:{staffId:this.props.id,state:[1,100]}})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.id,o=t.value,a=t.staffMember,r=void 0===a?{}:a,i=t.onChange;if(e.id!==n&&this.props.dispatch({type:"expenseExamineOrder/getStaffMember",payload:{staffId:n,state:[1,100]}}),o&&r.data&&r.data.length>0){var c=r.data.find((function(e){return e.identity_card_id===o}))._id;i&&i(void 0,{profileId:c})}}},{key:"render",value:function(){var e=this.props,t=e.staffMember,n=void 0===t?{}:t,o=e.value,a=e.disabled,r=n.data,i=void 0===r?[]:r;return x.createElement(S.Z,{style:{width:"100%"},placeholder:"请选择人员",value:o,onChange:this.onChange,disabled:a,showSearch:!0,optionFilterProp:"children"},i.map((function(e){return x.createElement(V,{profileId:e._id,staffName:e.name,key:e.identity_card_id,value:e.identity_card_id},e.name,"(",e.identity_card_id,")")})))}}]),n}(x.Component);q.protoType={staffList:C().object,onChange:C().func,value:C().string,disabled:C().bool},q.defaultProps={staffList:{},onChange:function(){},value:void 0,disabled:!1};var L=(0,O.connect)((function(e){return{staffMember:e.expenseExamineOrder.staffMember}}))(q);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var K=S.Z.Option,H={platformDisable:"platformDisable",platform:"platform",vendor:"vendor",city:"city",district:"district",costCount:"costCount",operatCreate:"operatCreate",operatDelete:"operatDelete"},J=function(e){(0,s.Z)(n,e);var t=z(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,c.Z)(a),"componentDidMount",(function(){!0!==a.props.isPluginOrder&&a.fetchCostOrderAmountSummay()})),(0,u.Z)((0,c.Z)(a),"onChange",(function(e){var t=a.props,n=t.index,o=t.onChange,r=t.isPluginOrder;o&&o(e,n),a.setState({value:e},(function(){!0!==r&&a.fetchCostOrderAmountSummay()}))})),(0,u.Z)((0,c.Z)(a),"onCreate",(function(){var e=a.props,t=e.onCreate,n=e.index;t&&t(n)})),(0,u.Z)((0,c.Z)(a),"onDelete",(function(){var e=a.props,t=e.onDelete,n=e.index;t&&t(n)})),(0,u.Z)((0,c.Z)(a),"onChangePlatform",(function(e,t){var n=a.props,r=n.location,i=n.platform,c=void 0===i?"":i,s=n.costAttribution;(decodeURIComponent(g().get(r,"query.platformParam",""))||decodeURIComponent(c))!==e&&e&&o.ZP.error("选中的平台与审批流范围内平台不一致，请重新选择平台");var l={platform:e,platformName:g().get(t,"props.children",void 0)};s===F.F$Y.person&&a.props.dispatch({type:"expenseExamineOrder/resetStaffMember"});var p=a.getOnChangeValue(l);a.onChange(p)})),(0,u.Z)((0,c.Z)(a),"onChangeVendor",(function(e,t){var n=a.props,o=n.value,r=void 0===o?{}:o,i=n.costAttribution,c={platform:r.platform,platformName:r.platformName,vendor:e,vendorName:g().get(t,"props.children",void 0)};i===F.F$Y.person&&a.props.dispatch({type:"expenseExamineOrder/resetStaffMember"});var s=a.getOnChangeValue(c);a.onChange(s)})),(0,u.Z)((0,c.Z)(a),"onChangeCity",(function(e,t){var n=a.props,o=n.value,r=void 0===o?{}:o,i=n.costAttribution,c={platform:r.platform,platformName:r.platformName,vendor:r.vendor,vendorName:r.vendorName,city:e,cityName:g().get(t,"props.children",void 0),citySpelling:g().get(t,"props.spell",void 0)};i===F.F$Y.person&&a.props.dispatch({type:"expenseExamineOrder/resetStaffMember"});var s=a.getOnChangeValue(c);a.onChange(s)})),(0,u.Z)((0,c.Z)(a),"onChangeDistrict",(function(e,t){var n=a.props,o=n.value,r=void 0===o?{}:o,i=n.costAttribution,c={platform:r.platform,platformName:r.platformName,vendor:r.vendor,vendorName:r.vendorName,city:r.city,cityName:r.cityName,citySpelling:r.citySpelling,district:e,districtName:g().get(t,"props.children",void 0)};i===F.F$Y.person&&a.props.dispatch({type:"expenseExamineOrder/resetStaffMember"});var s=a.getOnChangeValue(c);a.onChange(s)})),(0,u.Z)((0,c.Z)(a),"onChangeCostCount",(function(e){var t=a.props.value,n=_(_({},void 0===t?{}:t),{},{costCount:e}),o=a.getOnChangeValue(n,!1);a.onChange(o)})),(0,u.Z)((0,c.Z)(a),"onChangeAccount",(function(e,t){var n=a.props.value,o=void 0===n?{}:n,r=t.profileId,i=t.staffName,c=_({},o);e&&(c.staffId=e),i&&(c.staffName=i),r&&(c.teamStaffId=r);var s=a.getOnChangeValue(c);a.onChange(s)})),(0,u.Z)((0,c.Z)(a),"onChangeJobs",(function(e,t){var n=a.props.value,o=void 0===n?{}:n,r=g().get(t,"name",void 0),i=_(_({},o),{},{teamName:r});e&&(i.teamId=e,i.staffId=void 0,i.staffName=void 0),a.setState({teamId:e});var c=a.getOnChangeValue(i);a.onChange(c)})),(0,u.Z)((0,c.Z)(a),"onChangeTeamJob",(function(e,t){var n=a.props.value,o=_({},void 0===n?{}:n);e&&(o.teamId=e);var r=g().get(t,"name",void 0),i=g().get(t,"code",void 0);r&&(o.departmentTeamName=r,o.teamName=r),i&&(o.departmentCode=i,o.teamIdCode=i);var c=a.getOnChangeValue(o);a.onChange(c)})),(0,u.Z)((0,c.Z)(a),"onChangeTeamType",(function(e){var t=a.props.value,n=_(_({},void 0===t?{}:t),{},{teamType:e,teamId:void 0,teamName:void 0,teamIdCode:void 0}),o=a.getOnChangeValue(n);a.onChange(o)})),(0,u.Z)((0,c.Z)(a),"onChangeTeamId",(function(e,t){var n=a.props.value,o=void 0===n?{}:n,r=g().get(t,"props.teamname",void 0),i=g().get(t,"props.teamidcode",void 0),c=_(_({},o),{},{teamId:e,teamName:r,teamIdCode:i}),s=a.getOnChangeValue(c);a.onChange(s)})),(0,u.Z)((0,c.Z)(a),"getOnChangeValue",(function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=["elem","meituan","relian","zongbu","chengtu","haluo","mobike","chengjing","lailai"],o=a.props,r=o.costBelong,i=o.costCenter,c=o.costAttribution,s=o.platform,l=n.findIndex((function(e){return e===s}))>-1,p=e.platform,u=void 0===p?void 0:p,d=e.platformName,m=void 0===d?void 0:d,f=e.vendor,h=void 0===f?void 0:f,v=e.vendorName,y=void 0===v?void 0:v,g=e.city,b=void 0===g?void 0:g,C=e.cityName,Z=void 0===C?void 0:C,O=e.citySpelling,x=void 0===O?void 0:O,I=e.costCount,E=void 0===I?void 0:I,j=e.district,N=void 0===j?void 0:j,S=e.districtName,T=void 0===S?void 0:S,Y=e.teamType,D=void 0===Y?void 0:Y,w=e.teamId,P=void 0===w?void 0:w,A=e.teamName,$=void 0===A?void 0:A,k=e.teamIdCode,R=void 0===k?void 0:k,B=e.teamStaffId,M=void 0===B?void 0:B,V=e.staffName,q=void 0===V?void 0:V,L=e.staffId,U=void 0===L?void 0:L,z=e.departmentName,K=void 0===z?void 0:z,H=e.departmentTeamName,J=void 0===H?void 0:H,W=e.departmentCode,Q=void 0===W?void 0:W,G={platform:u,isCostCountFlag:t};return i!==F.F$Y.project&&i!==F.F$Y.vehicleDirectly&&i!==F.F$Y.vehicleIndirect||(G={platform:u,platformName:m,isCostCountFlag:t}),i===F.F$Y.headquarter&&(G={platform:u,platformName:m,vendor:h,vendorName:y,isCostCountFlag:t}),i===F.F$Y.city&&(G={platform:u,platformName:m,vendor:h,vendorName:y,city:b,cityName:Z,citySpelling:x,isCostCountFlag:t}),i!==F.F$Y.district&&i!==F.F$Y.knight&&c!==F.F$Y.asset||(G={platform:u,platformName:m,vendor:h,vendorName:y,city:b,cityName:Z,citySpelling:x,district:N,districtName:T,isCostCountFlag:t}),i===F.F$Y.headquarters&&(G={}),c===F.F$Y.person&&l&&(G=_(_({},G),{},{teamId:P,staffId:U,staffName:q,teamStaffId:M,teamName:$,departmentName:K})),c===F.F$Y.team&&l&&(G=_(_({},G),{},{teamType:D,teamId:P,teamName:$,teamIdCode:R,teamStaffId:M,departmentTeamName:J,departmentCode:Q})),Number(r)===F.eL2.custom&&(G=_(_({},G),{},{costCount:E,isCostCountFlag:t})),G})),(0,u.Z)((0,c.Z)(a),"getCostTargetId",(function(){var e=a.props,t=e.costCenter,n=e.value,o=e.costAttribution,r=n.platform,i=n.vendor,c=n.city,s=n.district,l=n.staffId,p=n.teamId;return o===F.F$Y.person?l:o===F.F$Y.team?p:o===F.F$Y.asset?s:t===F.F$Y.project?r:t===F.F$Y.headquarter?i:t===F.F$Y.city?c:t===F.F$Y.district||t===F.F$Y.knight?s:void 0})),(0,u.Z)((0,c.Z)(a),"fetchCostOrderAmountSummay",(function(){var e=a.props,t=e.costAccountingId,n=e.costCenter,o=e.costAttribution,r=e.value;if(n!==F.F$Y.headquarters){var i=r.platform,c=r.vendor,s=r.city,l=r.district,p=r.teamId,u=r.staffId,d=r.teamIdCode,m=a.getCostTargetId(),f=g().get(a.props,"location.query.orderId",void 0),h={costTargetId:m,costCenter:o||n,applicationOrderId:f,subjectId:t},v={costCenter:o||n,applicationOrderId:f,accountingId:t,costTargetId:m,platformCode:i||a.props.platform,supplierId:c,cityCode:s,bizDistrictId:l,teamId:p,staffId:u,teamIdCode:d};a.props.dispatch({type:"expenseCostOrder/fetchAmountSummary",payload:h}),a.props.dispatch({type:"expenseCostOrder/fetchSubmitSummary",payload:v})}})),(0,u.Z)((0,c.Z)(a),"renderMoney",(function(e,t,n){var o=a.props.costAttribution===F.F$Y.asset,r=e&&e>0?e:0,i=t&&t>0?t:0,c=0!==r||0!==i?k:R,s=0!==r||0!==i?$.Z["app-comp-expense-manage-common-moneyiconlight"]:$.Z["app-comp-expense-manage-common-moneyicongrey"];return{layout:{labelCol:{span:0},wrapperCol:{span:24}},offset:1,span:o?2:1,label:"",form:x.createElement(N.Z,{title:n},x.createElement("div",{className:$.Z["app-comp-expense-manage-common-moneywrap"]},x.createElement("img",{src:c,alt:"",className:s}),x.createElement("span",{className:0!==i?$.Z["app-comp-expense-manage-common-moneytextlight"]:null},"¥",F.fbc.exchangePriceCentToMathFormat(i)),"   |   ",x.createElement("span",{className:0!==r?$.Z["app-comp-expense-manage-common-moneytextlight"]:null},"¥",F.fbc.exchangePriceCentToMathFormat(r))))}})),(0,u.Z)((0,c.Z)(a),"renderForm",(function(e,t,n){var o=a.props,r=o.config,i=o.index,c=o.isNegative,s=o.isShow,l=o.unique,p=o.value,u=o.costAttribution,d=o.isUpdateRule,m=o.teamTypeList,f=o.costCenter,h=u===F.F$Y.asset,v=p.city,y={label:"平台",span:h?4:3,layout:{labelCol:{span:4,offset:6},wrapperCol:{span:16}},form:x.createElement(A.Yg,{style:{width:"100%"},namespace:"platform-".concat(i,"-").concat(l),value:p.platform,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择平台",onChange:a.onChangePlatform,disabled:s})},g={label:"平台",span:h?4:3,form:x.createElement(A.Yg,{style:{width:"100%"},namespace:"platform-".concat(i,"-").concat(l),value:p.platform,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择平台",onChange:a.onChangePlatform,disabled:!0})},b={label:"供应商",span:h?4:3,layout:{labelCol:{span:6},wrapperCol:{span:18}},form:x.createElement(A.o2,{style:{width:"100%"},namespace:"supplier-".concat(i,"-").concat(l),value:p.vendor,platforms:p.platform,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择供应商",onChange:a.onChangeVendor,disabled:s})},C={label:"城市",span:h?4:3,form:x.createElement(A.Wn,{style:{width:"100%"},namespace:"city-".concat(i,"-").concat(l),value:v?"".concat(v):void 0,allowClear:!0,showSearch:!0,isExpenseModel:!0,optionFilterProp:"children",placeholder:"请选择城市",platforms:p.platform,suppliers:p.vendor,onChange:a.onChangeCity,disabled:d})},Z={label:"商圈",layout:{labelCol:{span:6},wrapperCol:{span:18}},span:h?4:3,form:x.createElement(A.Wc,{className:$.Z["app-comp-expense-manage-common-district"],namespace:"district-".concat(i,"-").concat(l),value:p.district,state:[F.hQm.enable,F.hQm.preparation,F.hQm.waitClose],allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择商圈",platforms:p.platform,suppliers:p.vendor,cities:p.citySpelling,onChange:a.onChangeDistrict,disabled:d})},O=a.renderMoney(t,n,e),I=f===F.F$Y.headquarters?[]:[O],E={label:"分摊金额(元)",span:h?3:2,layout:{labelCol:{span:12},wrapperCol:{span:12}},form:x.createElement(j.Z,{min:c?null:0,value:p.costCount||0,step:.01,formatter:F.fbc.limitDecimals,parser:F.fbc.limitDecimals,onChange:a.onChangeCostCount})},N={label:"团队类型",span:3,form:x.createElement(S.Z,{value:p.teamType,placeholder:"请选择团队类型",onChange:a.onChangeTeamType},m.map((function(e){return x.createElement(K,{key:"".concat(e),value:e},F.TDR.description(e))})))},T={label:"团队",span:5,form:x.createElement(A.OK,{namespace:"teamId-".concat(i,"-").concat(l),value:p.teamId,onChange:a.onChangeTeamId,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择团队",teamType:p.teamType,platform:p.platform,vendor:p.vendor,city:p.city,district:p.district})},Y={label:"人员信息",span:4,form:x.createElement(L,{value:p.staffId,id:p.teamId,onChange:a.onChangeAccount,disabled:d})},D={label:"团队信息",span:4,form:x.createElement(B.Z,{namespace:"team-".concat(i,"-").concat(l),value:p.teamId,onChange:a.onChangeJobs,isAuthorized:!0,disabled:d})},w={label:"团队",span:4,form:x.createElement(B.Z,{namespace:"team-".concat(i,"-").concat(l),value:p.teamId,onChange:a.onChangeTeamJob,disabled:d,isAuthorized:!0,type:p.teamType})};return-1!==r.indexOf(H.platform)&&I.push(y),-1!==r.indexOf(H.platformDisable)&&I.push(g),-1!==r.indexOf(H.vendor)&&I.push(b),-1!==r.indexOf(H.city)&&I.push(C),-1!==r.indexOf(H.district)&&I.push(Z),Number(u)===F.F$Y.team&&(f!==F.F$Y.headquarters&&I.push(N),p.teamType===F.TDR.departmentOwner?I.push(T):I.push(w)),Number(u)===F.F$Y.person&&(I.push(D),I.push(Y)),-1!==r.indexOf(H.costCount)&&I.push(E),I})),(0,u.Z)((0,c.Z)(a),"renderDetail",(function(e,t,n){var o=a.props,r=o.config,i=o.costAttribution,c=o.value,s=o.isNegative,l=o.teamTypeList,p=o.index,u=o.unique,d=o.costCenter,m={label:"团队类型",span:3,form:x.createElement(S.Z,{value:c.teamType,placeholder:"请选择团队类型",onChange:a.onChangeTeamType},l.map((function(e){return x.createElement(K,{key:"".concat(e),value:e},F.TDR.description(e))})))},f={label:"团队",span:4,form:x.createElement(B.Z,{value:c.teamId,onChange:a.onChangeTeamJob,type:c.teamType})},h={label:"团队",span:4,form:x.createElement(A.OK,{namespace:"teamId-".concat(p,"-").concat(u),value:c.teamId,onChange:a.onChangeTeamId,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择团队",teamType:c.teamType,platform:c.platform,vendor:c.vendor,city:c.city,district:c.district})},v=i===F.F$Y.asset,y=a.renderMoney(t,n,e),g=d===F.F$Y.headquarters?[]:[y];if(-1!==r.indexOf(H.platform)&&g.push({label:"平台",span:v?4:3,form:x.createElement("span",null,c.platformName)}),-1!==r.indexOf(H.platformDisable)&&g.push({label:"平台",span:v?4:3,form:x.createElement("span",null,c.platformName)}),-1!==r.indexOf(H.vendor)&&g.push({label:"供应商",span:v?4:3,layout:{labelCol:{span:6},wrapperCol:{span:18}},form:x.createElement("span",null,c.vendorName)}),-1!==r.indexOf(H.city)&&g.push({label:"城市",span:v?4:3,form:x.createElement("span",null,c.cityName)}),-1!==r.indexOf(H.district)&&g.push({label:"商圈",span:v?4:3,layout:{labelCol:{span:6},wrapperCol:{span:18}},form:x.createElement("span",null,c.districtName)}),Number(i)===F.F$Y.team&&(c.teamType&&d!==F.F$Y.headquarters?(g.push({label:"团队类型",span:3,form:x.createElement("span",null,F.TDR.description(Number(c.teamType)))}),c.teamId?g.push({label:"团队",span:4,form:x.createElement("span",null,c.teamName," - ",c.teamId)}):(c.teamType!==F.TDR.departmentCoach&&c.teamType!==F.TDR.departmentCoachTeam&&c.teamType!==F.TDR.departmentSub&&c.teamType!==F.TDR.departmentBusiness||g.push(f),c.teamType===F.TDR.departmentOwner&&g.push(h))):d!==F.F$Y.headquarters&&g.push(m),d===F.F$Y.headquarters&&(g[g.length]={label:"团队",span:4,form:x.createElement("span",null,c.teamName," - ",c.teamId)})),Number(i)===F.F$Y.person&&(g.push({label:"团队信息",span:3,form:x.createElement("span",null,"".concat(c.teamName))}),g.push({label:"人员信息",span:3,form:x.createElement("span",null,"".concat(c.staffName))})),-1!==r.indexOf(H.costCount)){var b=0;c.costCount&&(b=c.costCount),g.push({label:"分摊金额(元)",span:3,layout:{labelCol:{span:12},wrapperCol:{span:12}},form:x.createElement(j.Z,{value:b,step:.01,min:s?null:0,formatter:F.fbc.limitDecimals,parser:F.fbc.limitDecimals,onChange:a.onChangeCostCount})})}return g})),a.state={teamId:void 0},a}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.costAccountingId,n=e.config,o=e.isUpdateRule,a=e.isEdit,r=e.costOrderAmountSummary,i=e.costOrderSubmitSummary,c=e.examineOrderDetail,s=e.costAttribution,l=e.value,p=void 0===l?{}:l,u=p.vendor,d=p.city,m=p.district,f=g().get(c,"submitAt",void 0),h="",v="";f?(h=Y()(f).format("YYYYMM"),v=Y()(f).format("YYYY-MM-DD")):(h=Y()().format("YYYYMM"),v=Y()().format("YYYY-MM-DD"));var y="".concat(Y()(h,"YYYYMM").format("YYYY年MM月费用合计（元）: 已提报 | 已付款 ")),b=this.getCostTargetId(),C="".concat(t,"-").concat(b,"-").concat(h),Z="".concat(t,"-").concat(b,"-").concat(v,"-").concat(m,"-").concat(d,"-").concat(u),O=g().get(r,"".concat(C,".money"),0),j=g().get(i,"".concat(Z,".amountMoney"),0),N=[];if(a&&(N=this.renderForm(y,O,j)),a||(N=this.renderDetail(y,O,j)),-1!==n.indexOf(H.operatCreate)&&-1!==n.indexOf(H.operatDelete)&&!0!==o?N.push({span:2,form:x.createElement("div",null,x.createElement(E.Z,{onClick:this.onCreate,shape:"circle",icon:x.createElement(w.Z,null)}),x.createElement(E.Z,{className:"app-global-mgl8",onClick:this.onDelete,shape:"circle",icon:x.createElement(P.Z,null)}))}):-1!==n.indexOf(H.operatCreate)&&!0!==o?N.push({span:2,form:x.createElement("div",null,x.createElement(E.Z,{onClick:this.onCreate,shape:"circle",icon:x.createElement(w.Z,null)}))}):-1!==n.indexOf(H.operatDelete)&&!0!==o&&N.push({span:2,form:x.createElement("div",null,x.createElement(E.Z,{onClick:this.onDelete,shape:"circle",icon:x.createElement(P.Z,null)}))}),0===N.length)return null;var S=Number(s)===F.F$Y.asset?$.Z["app-comp-expense-manage-common-item"]:$.Z["app-comp-expense-manage-cost-item"];return x.createElement("div",null,x.createElement(I.KP,{items:N,layout:{labelCol:{span:8},wrapperCol:{span:16}},className:S}))}}]),n}(x.Component);(0,u.Z)(J,"propTypes",{index:C().number,config:C().array,value:C().object,costCenter:C().number,isUpdateRule:C().bool,isShow:C().bool,costAccountingId:C().string,isEdit:C().bool,unique:C().string,onChange:C().func,onCreate:C().func,onDelete:C().func,isNegative:C().bool,costAttribution:C().number}),J.CommonItemsType=H;var W=(0,D.withRouter)((0,O.connect)((function(e){var t=e.expenseCostOrder;return{costOrderAmountSummary:t.costOrderAmountSummary,costOrderSubmitSummary:t.costOrderSubmitSummary,examineOrderDetail:e.expenseExamineOrder.examineOrderDetail}}))(J));function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var ee=W.CommonItemsType,te=d.ZP.Group,ne=function(e){(0,s.Z)(n,e);var t=X(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s)),(0,u.Z)((0,c.Z)(e),"onChange",(function(t,n){var o=e.props,r=o.onChange,i=o.value,c=o.getPlatFormVendor,s=g().get(i,"costItems",[{}]),l=g().get(i,"costBelong","".concat(F.eL2.average)),p=(0,a.Z)(s);void 0===n?r&&r(t):(p[n]=t,r&&r({costItems:p,costBelong:l})),t&&t.isCostCountFlag&&c&&c(t)})),(0,u.Z)((0,c.Z)(e),"onChangeCostBelong",(function(t){var n=G(G({},e.state),{},{costBelong:t.target.value,costItems:[{}]});e.onChange(n);var o=e.props.getPlatFormVendor;o&&o(t),e.props.costAttribution===F.F$Y.person&&e.props.dispatch({type:"expenseExamineOrder/resetStaffMember"})})),(0,u.Z)((0,c.Z)(e),"onCreateItem",(function(t){var n=e.props,a=n.costAttribution,r=n.selectedCostCenterType,i=n.value,c=g().get(i,"costItems",[{}]),s=g().get(i,"costBelong","".concat(F.eL2.average));if(!0!==e.isCreateItem(r,c[t],a))return o.ZP.error("您的配置项还没填写完成");var l=c[t];c.push(l);var p=G(G({},e.state),{},{costBelong:s,costItems:c});e.onChange(p)})),(0,u.Z)((0,c.Z)(e),"onDeleteItem",(function(t){var n=e.props.value,o=g().get(n,"costBelong","".concat(F.eL2.average)),a=g().get(n,"costItems",[{}]);a.splice(t,1);var r=G(G({},e.state),{},{costBelong:o,costItems:a});e.onChange(r)})),(0,u.Z)((0,c.Z)(e),"getConfig",(function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=e.props,r=a.costAttribution,i=a.platform,c=a.selectedCostCenterType,s=["elem","meituan","relian","zongbu","chengtu","haluo","mobike","chengjing","lailai"],l=[];switch(Number(c)){case F.F$Y.project:l=[ee.platform];break;case F.F$Y.headquarter:l=[ee.platform,ee.vendor];break;case F.F$Y.city:l=[ee.platform,ee.vendor,ee.city];break;case F.F$Y.district:case F.F$Y.knight:l=[ee.platform,ee.vendor,ee.city,ee.district];break;case F.F$Y.headquarters:l=[];break;default:l=[ee.platform]}var p=s.findIndex((function(e){return e===i}))>-1;return r===F.F$Y.asset&&p&&(l=[ee.platform,ee.vendor,ee.city,ee.district]),Number(t)===F.eL2.custom&&l.push(ee.costCount),n&&c!==F.F$Y.project&&c!==F.F$Y.headquarter&&l.push(ee.operatCreate),!n||c!==F.F$Y.project&&c!==F.F$Y.headquarter||r!==F.F$Y.team&&r!==F.F$Y.person&&r!==F.F$Y.asset||l.push(ee.operatCreate),o&&l.push(ee.operatDelete),l})),(0,u.Z)((0,c.Z)(e),"isCreateItem",(function(t,n,o){var a,r=e.props.platform,i=["elem","meituan","relian","zongbu","chengtu","haluo","mobike","chengjing","lailai"].findIndex((function(e){return e===r}))>-1;switch(Number(t)){case F.F$Y.project:a=v().existy(n.platform);break;case F.F$Y.headquarter:a=v().existy(n.platform)&&v().existy(n.vendor);break;case F.F$Y.city:a=v().existy(n.platform)&&v().existy(n.vendor)&&v().existy(n.city);break;case F.F$Y.district:case F.F$Y.knight:a=v().existy(n.platform)&&v().existy(n.vendor)&&v().existy(n.city)&&v().existy(n.district);break;case F.F$Y.headquarters:a=!0;break;default:a=!1}return Number(o)===F.F$Y.team&&i&&(a=v().existy(n.teamType)&&v().existy(n.teamId),Number(t)===F.F$Y.headquarters&&(a=v().existy(n.teamId))),Number(o)===F.F$Y.person&&i&&(a=v().existy(n.staffId)),Number(o)===F.F$Y.asset&&i&&(a=v().existy(n.platform)&&v().existy(n.vendor)&&v().existy(n.city)&&v().existy(n.district)),a})),(0,u.Z)((0,c.Z)(e),"renderItems",(function(){var t=e.props,n=t.costAttribution,o=t.teamTypeList,a=void 0===o?[]:o,r=t.platform,i=t.isUpdateRule,c=t.selectedCostCenterType,s=t.value,l=t.costAccountingId,p=t.unique,u=t.isNegative,d=t.isPluginOrder,m=g().get(s,"costItems",[{}]),f=g().get(s,"costBelong","".concat(F.eL2.average));return x.createElement("div",{className:$.Z["app-comp-expense-manage-common-expense-project"]},m.map((function(t,o,s){var h=s.length,v=!1,y=[];1===h?(y=e.getConfig(f,!0,!1),v=!1):o===h-1?(y=e.getConfig(f),v=!0):(v=!1,y=e.getConfig(f,!1));var g=!1;0===o&&1===m.length&&(g=!0),o===m.length-1&&(g=!0),!0==!!i&&(g=!1);var b={value:G({},t),isPluginOrder:d,config:y,costBelong:f,isUpdateRule:i,costCenter:c,costAccountingId:l,isEdit:g,unique:p,isShow:v,costAttribution:n,isNegative:u,key:o,index:o,dispatch:e.props.dispatch,platform:r,teamTypeList:a,onCreate:e.onCreateItem,onDelete:e.onDeleteItem,onChange:e.onChange};return x.createElement(W,b)})))})),(0,u.Z)((0,c.Z)(e),"renderSelect",(function(){var t=e.props,n=t.isUpdateRule,o=t.value,a=g().get(o,"costBelong","".concat(F.eL2.average)),r=[{label:"成本分摊",form:(0,e.props.form.getFieldDecorator)("costBelong",{initialValue:"".concat(a),rules:[{required:!0,message:"请选择成本分摊"}]})(x.createElement(te,{onChange:e.onChangeCostBelong,disabled:!!n},x.createElement(d.ZP,{value:"".concat(F.eL2.average)},F.eL2.description(F.eL2.average)),x.createElement(d.ZP,{value:"".concat(F.eL2.custom)},F.eL2.description(F.eL2.custom))))}];return x.createElement(I.KP,{items:r,cols:3,layout:{labelCol:{span:9},wrapperCol:{span:15}}})})),(0,u.Z)((0,c.Z)(e),"render",(function(){var t=e.props.className;return x.createElement("div",{className:t},e.renderSelect(),e.renderItems())})),e}return(0,i.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.costAccountingId,o=t.isCost,a=t.onChange;!f().isEqual(n,e.costAccountingId)&&o&&a({costItems:[{}],costBelong:g().get(this.props,"value.costBelong","".concat(F.eL2.average))})}}]),n}(x.Component);(0,u.Z)(ne,"propTypes",{isUpdateRule:C().bool,selectedCostCenterType:C().number,value:C().object,onChange:C().func,costAccountingId:C().string,unique:C().string,isNegative:C().bool,getPlatFormVendor:C().func}),(0,u.Z)(ne,"defaultProps",{isUpdateRule:!1,value:{},onChange:function(){},isNegative:!1});var oe=Z.Z.create()((0,O.connect)((function(e){return{approval:e.approval,expenseSubject:e.expenseSubject}}))(ne))},75314:function(e,t,n){var o=n(15671),a=n(43144),r=n(97326),i=n(60136),c=n(82963),s=n(61120),l=n(4942),p=(n(29093),n(16317)),u=n(94315),d=n.n(u),m=n(93517),f=n.n(m),h=n(55609),v=n(67294),y=n(45697),g=n.n(y),b=n(66939),C=(n(98703),n(96036)),Z=n(80385),O=n(55996);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}var I=p.Z.Option,F=function(e){(0,i.Z)(n,e);var t=x(n);function n(e){var a;return(0,o.Z)(this,n),a=t.call(this,e),(0,l.Z)((0,r.Z)(a),"componentDidUpdate",(function(e){var t=a.props,n=t.expenseTypeId,o=t.isPluginOrder;n!==e.expenseTypeId&&d().not.empty(n)&&d().existy(n)&&!0!==o&&a.props.dispatch({type:"expenseType/fetchExpenseTypeDetail",payload:{id:n}})})),(0,l.Z)((0,r.Z)(a),"onChange",(function(e,t){var n=a.props,o=n.onChangeSubject,r=n.onChange,i=n.costAttribution,c=n.platform,s=f().get(t,"props.costcentertype",void 0),l=f().get(t,"props.subjectcode",void 0);["elem","meituan","relian","zongbu","chengtu","haluo","mobike","chengjing","lailai"].findIndex((function(e){return e===c}))>-1&&a.setState({subjectCode:l}),void 0===l&&(a.props.form.setFieldsValue({costAttribution:void 0}),a.props.dispatch({type:"expenseCostOrder/reduceSubjectBelong",payload:{namespace:"cost"}})),o&&o(e,s),i===Z.F$Y.person&&a.props.dispatch({type:"expenseExamineOrder/resetStaffMember"}),r&&r({subjectId:e,costAttribution:i})})),(0,l.Z)((0,r.Z)(a),"onChangeCostAttribution",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a.props,o=n.onChangeCostAttribution,r=n.onChange,i=n.selectedSubjectId,c=e.cost_center_type;o&&o(e,t),r&&r({subjectId:i,costAttribution:c})})),a.state={subjectCode:e.subjectCode||void 0},a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.expenseTypeId,n=e.isPluginOrder;d().existy(t)&&d().not.empty(t)&&!0!==n&&this.props.dispatch({type:"expenseType/fetchExpenseTypeDetail",payload:{id:t}})}},{key:"render",value:function(){var e=this.state.subjectCode,t=this.props.form.getFieldDecorator,n=this.props,o=n.expenseTypeDetail,a=n.selectedSubjectId,r=n.disabled,i=n.costAttribution,c=n.platform,s=n.isPluginOrder,l=f().get(o,"accountingList",[]),p=[];p=this.props.showDisabledSubject?l.filter((function(e){return[Z.NF3.normal,Z.NF3.disable].indexOf(e.state)>-1})):l.filter((function(e){return[Z.NF3.normal].indexOf(e.state)>-1}));var u=[{label:"科目",form:t("subjectId",{initialValue:a,rules:[{required:!0,message:"请选择科目"}]})(v.createElement(C.Hr,{allowClear:!0,showSearch:!0,style:{width:"100%"},optionFilterProp:"children",placeholder:"请选择科目",onChange:this.onChange,disabled:r},p.map((function(e){return v.createElement(I,{value:e.id,key:e.id,subjectcode:e.accountingCode,costcentertype:e.costCenterType,disabled:e.state===Z.NF3.disable},"".concat(e.name,"(").concat(e.accountingCode,")").concat(e.state===Z.NF3.disable?"(停用)":""))}))))},{label:"成本归属",form:t("costAttribution",{initialValue:i})(v.createElement(O.ZP,{disabled:r,form:this.props.form,subjectCode:e,platform:c,onChangeCostAttribution:this.onChangeCostAttribution,namespace:"cost"}))}];!0===s&&(u=[],u=[{label:"科目",form:t("subjectId",{initialValue:a,rules:[{required:!0,message:"请选择科目"}]})(v.createElement("span",null,f().get(this.props,"costAccountingInfo.name","")))},{label:"成本归属",form:t("costAttribution",{initialValue:i})(v.createElement("span",null,Z.F$Y.description(i)))}]);return v.createElement("div",null,v.createElement(C.KP,{items:u,cols:3,layout:{labelCol:{span:9},wrapperCol:{span:15}}}))}}]),n}(v.Component);(0,l.Z)(F,"propTypes",{showDisabledSubject:g().bool,disabled:g().bool,selectedSubjectId:g().string,expenseTypeId:g().string,expenseTypeDetail:g().object,onChange:g().func,subjectCode:g().string}),(0,l.Z)(F,"defaultProps",{showDisabledSubject:!1,disabled:!1,expenseTypeId:"",expenseTypeDetail:{},onChange:function(){}}),t.Z=b.Z.create()((0,h.connect)((function(e){var t=e.expenseType;return{expenseTypeDetail:f().get(t,"expenseTypeDetail",{})}}))(F))},50498:function(e,t,n){var o=n(15671),a=n(43144),r=n(97326),i=n(60136),c=n(82963),s=n(61120),l=n(4942),p=(n(29093),n(16317)),u=n(93517),d=n.n(u),m=n(55609),f=n(67294),h=n(45697),v=n.n(h);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(0,c.Z)(this,n)}}var g=p.Z.Option,b=function(e){(0,i.Z)(n,e);var t=y(n);function n(){var e;(0,o.Z)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return e=t.call.apply(t,[this].concat(i)),(0,l.Z)((0,r.Z)(e),"onChange",(function(t,n){var o=e.props.onChange;o&&o(t,n)})),e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.type,o=e.namespace,a=void 0===o?"default":o,r=e.isAuthorized;t({type:"department/getExpenseDepartment",payload:{namespace:a,page:1,limit:9999,teamAttr:n,isAuthorized:void 0!==r&&r}})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.dispatch,o=t.type,a=t.namespace,r=void 0===a?"default":a,i=t.isAuthorized;e.type!==o&&n({type:"department/getExpenseDepartment",payload:{namespace:r,page:1,limit:9999,teamAttr:o,isAuthorized:i}})}},{key:"componentWillUnmount",value:function(){var e=this.props.namespace,t=void 0===e?"default":e;this.props.dispatch({type:"department/resetExpenseDepartment",payload:{namespace:t}})}},{key:"render",value:function(){var e=this.props,t=e.expenseDepartment,n=void 0===t?{}:t,o=e.value,a=e.disabled,r=e.namespace,i=d().get(n,"".concat(r,".data"),[]);return f.createElement(p.Z,{style:{width:"100%"},placeholder:"请选择岗位名称",onChange:this.onChange,value:o,disabled:a,showSearch:!0,optionFilterProp:"children"},i.map((function(e){return f.createElement(g,{key:"".concat(e.code,"+").concat(e.name),name:e.name,code:e.code,value:e._id},e.name,"(",e.code,")")})))}}]),n}(f.Component);b.protoType={expenseDepartment:v().object,onChange:v().func,value:v().string,disabled:v().bool,namespace:v().string},b.defaultProps={expenseDepartment:{},onChange:function(){},value:void 0,disabled:!1,namespace:"default"},t.Z=(0,m.connect)((function(e){return{expenseDepartment:e.department.expenseDepartment}}))(b)},89690:function(e,t,n){n(29093);var o=n(16317),a=n(67294),r=n(55609),i=o.Z.Option;t.Z=(0,r.connect)((function(e){return{invoiceList:e.expenseCostOrder.invoiceList}}))((function(e){var t=e.invoiceList,n=void 0===t?{}:t,r=e.dispatch,c=e.platform,s=e.disabled,l=void 0!==s&&s,p=e.value,u=e.onChange,d=e.isDetail,m=void 0!==d&&d,f=e.invoiceVal,h=void 0===f?void 0:f;if((0,a.useEffect)((function(){return r({type:"expenseCostOrder/getCostInvoiceHeader",payload:{platform:c}}),function(){return r({type:"expenseCostOrder/resetCostInvoiceHeader",payload:{}})}}),[c,r]),!n||Object.keys(n).length<=0||!n.data||Object.keys(n.data).length<=0)return a.createElement("div",null);var v=n.data,y=void 0===v?{}:v,g="zongbu"===c?Object.values(y):y;if(m){var b="--";return h&&(b=h),h&&Number(h)&&(b=g.find((function(e,t){return t+1===Number(h)}))),b}return a.createElement(o.Z,{allowClear:!0,showSearch:!0,placeholder:"请选择发票抬头",optionFilterProp:"children",disabled:l,value:p,onChange:u},"zongbu"===c?g.map((function(e,t){return a.createElement(i,{value:"".concat(t+1),key:t},e)})):g.map((function(e){return a.createElement(i,{value:e.name,key:e._id},e.name)})))}))}}]);