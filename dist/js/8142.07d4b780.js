"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[8142],{68142:function(e,t,n){n(52560);var a=n(71577),r=n(87462),o=(n(54071),n(14072)),c=(n(36616),n(51368)),l=n(4942),i=(n(51838),n(48086)),u=n(15861),s=(n(35668),n(86585)),m=n(29439),p=(n(9070),n(20924)),d=(n(29093),n(16317)),f=n(87757),y=n.n(f),b=n(93517),v=n.n(b),g=n(30381),h=n.n(g),E=n(67294),Z=n(55609),_=n(96036),I=n(86221),C=n(96926),O=n(80385);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=n(97116).Iq.account.staffProfileId,D=d.Z.Option,j=p.Z.TextArea,P={labelCol:{span:9},wrapperCol:{span:15}},x={labelCol:{span:3},wrapperCol:{span:21}};t.Z=(0,Z.connect)((function(e){var t=e.sharedCompany;return{companyDetail:t.companyDetail,companyNature:t.companyNature}}),(function(e){return{getCompanyDetail:function(t){return e({type:"sharedCompany/getSharedCompanyDetail",payload:t})},resetCompanyDetail:function(){return e({type:"sharedCompany/resetSharedCompanyDetail",payload:{}})},updateForm:function(t){return e({type:"sharedCompany/updateSharedCompany",payload:t})},createForm:function(t){return e({type:"sharedCompany/createSharedCompany",payload:t})},getEmployeeDetail:function(){return e({type:"oaCommon/fetchEmployeeDetail",payload:{id:w}})},getSharedCompanyNature:function(){return e({type:"sharedCompany/getSharedCompanyNature",payload:{}})}}}))((function(e){var t=e.location,n=void 0===t?{}:t,l=e.updateForm,f=e.createForm,b=e.getCompanyDetail,g=e.resetCompanyDetail,Z=e.getEmployeeDetail,F=e.getSharedCompanyNature,V=e.companyDetail,M=void 0===V?{}:V,S=e.companyNature,K=e.isUpdate,q=void 0!==K&&K,A=s.Z.useForm(),N=(0,m.Z)(A,1)[0],T=n.query,R=void 0===T?{}:T;if((0,E.useEffect)((function(){return R.id&&b({id:R.id}),function(){return g()}}),[b,g,R.id]),(0,E.useEffect)((function(){w&&Z()}),[]),(0,E.useEffect)((function(){F()}),[]),q&&(!M||Object.keys(M).length<=0))return E.createElement("div",null);var Y=M.registered_capital,B=void 0===Y?void 0:Y,G=M.paid_capital,U=void 0===G?void 0:G,W=M.registered_date,L=void 0===W?void 0:W,z=M.state,J=void 0===z?O.uR3.normal:z,H=function(){var e=(0,u.Z)(y().mark((function e(){var t,n,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.validateFields();case 2:if(t=e.sent,(n=t.lookAccountInfo).state!==O.MmK.section||0!==n.accountInfo.length||0!==n.departmentInfo.length){e.next=6;break}return e.abrupt("return",i.ZP.error("请选择指定范围"));case 6:if(!q){e.next=12;break}return e.next=9,l(k(k({},t),{},{_id:R.id}));case 9:e.t0=e.sent,e.next=15;break;case 12:return e.next=14,f(k({},t));case 14:e.t0=e.sent;case 15:(a=e.t0)&&a._id&&(i.ZP.success("请求成功"),window.location.href="/#/Shared/Company");case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=[E.createElement(s.Z.Item,{name:"name",label:"公司名称",rules:[{required:!0,message:"请填写公司名称"}]},E.createElement(p.Z,{placeholder:"请输入"})),E.createElement(s.Z.Item,{label:"税号"},v().get(M,"tax_number","")?v().get(M,"tax_number"):"--"),E.createElement(s.Z.Item,{name:"firm_nature",label:"公司类型",rules:[{required:!0,message:"请选择公司类型"}]},E.createElement(d.Z,{placeholder:"请选择"},Object.keys(v().get(S,"data",{})).map((function(e){return E.createElement(D,{key:e,value:Number(e)},S.data[e])})))),E.createElement(s.Z.Item,{name:"firm_type",label:"公司性质"},E.createElement(d.Z,{placeholder:"请选择"},E.createElement(D,{value:O.Ft6.child},O.Ft6.description(O.Ft6.child)),E.createElement(D,{value:O.Ft6.points},O.Ft6.description(O.Ft6.points)),E.createElement(D,{value:O.Ft6.joint},O.Ft6.description(O.Ft6.joint)),E.createElement(D,{value:O.Ft6.acquisition},O.Ft6.description(O.Ft6.acquisition)),E.createElement(D,{value:O.Ft6.other},O.Ft6.description(O.Ft6.other)))),E.createElement(s.Z.Item,{name:"registered_addr",label:"注册地址",rules:[{required:!0,message:"请填写注册地址"}]},E.createElement(p.Z,{placeholder:"请输入"})),E.createElement(s.Z.Item,{name:"legal_name",label:"企业代表人",rules:[{required:!0,message:"请填写企业代表人"}]},E.createElement(p.Z,{placeholder:"请输入"})),E.createElement(s.Z.Item,{name:"registered_capital",label:"注册资本（万）",rules:[{required:!0,message:"请填写注册资本"}]},E.createElement(c.Z,{max:99999,min:0,step:.01,placeholder:"请输入"})),E.createElement(s.Z.Item,{name:"paid_capital",label:"实收资本（万）"},E.createElement(c.Z,{max:99999,min:0,step:.01,placeholder:"请输入"})),E.createElement(s.Z.Item,{name:"registered_date",label:"成立日期",rules:[{required:!0,message:"请选择成立日期"}]},E.createElement(o.Z,{placeholder:"请选择"})),E.createElement(s.Z.Item,{name:"share_holder_info",label:"股东"},E.createElement(p.Z,{placeholder:"请输入"}))],X=[E.createElement(s.Z.Item,(0,r.Z)({name:"business_scope",label:"经营范围",rules:[{required:!0,message:"请填写经营范围"}]},x),E.createElement(j,{rows:4,placeholder:"请输入"})),E.createElement(s.Z.Item,(0,r.Z)({name:"note",label:"备注"},x),E.createElement(j,{rows:4,placeholder:"请输入"})),E.createElement(s.Z.Item,(0,r.Z)({label:"状态"},x),J?O.uR3.description(J):"--"),E.createElement(s.Z.Item,(0,r.Z)({label:"附件",name:"asset_keys"},x),E.createElement(I.uA,{domain:I.uA.UploadDomains.OAUploadDomain}))],$={name:v().get(M,"name",void 0),firm_type:v().get(M,"firm_type","")?v().get(M,"firm_type"):void 0,firm_nature:v().get(M,"firm_nature",void 0),registered_addr:v().get(M,"registered_addr",void 0),legal_name:v().get(M,"legal_name",void 0),registered_capital:B>=0?O.fbc.exchangePriceToWanYuan(B):void 0,paid_capital:U>=0?O.fbc.exchangePriceToWanYuan(U):void 0,registered_date:L?h()(String(L)):void 0,share_holder_info:v().get(M,"share_holder_info",void 0),business_scope:v().get(M,"business_scope",void 0),note:v().get(M,"note",void 0),asset_keys:I.uA.getInitialValue(M,"asset_infos",{}),lookAccountInfo:{state:v().get(M,"look_acl",O.MmK.section),accountInfo:v().get(M,"look_account_info_list",[]).map((function(e){return{id:e._id,name:e.name}})),departmentInfo:v().get(M,"look_department_info_list",[]).map((function(e){return{id:e._id,name:e.name}}))}};return E.createElement(s.Z,(0,r.Z)({},P,{form:N,initialValues:$}),E.createElement(_.IT,null,E.createElement(_.Fp,{items:Q}),E.createElement(_.Fp,{items:X,cols:1}),E.createElement(_.IT,{title:"权限"},E.createElement(C.Z,{detail:M})),E.createElement("div",{style:{textAlign:"center"}},E.createElement(a.Z,{type:"primary",onClick:H},"保存"))))}))},96926:function(e,t,n){n.d(t,{Z:function(){return N}});n(35668);var a=n(86585),r=n(87462),o=n(67294),c=n(93517),l=n.n(c),i=n(45697),u=n.n(i),s=n(96036),m=n(80385),p=(n(52560),n(71577)),d=(n(36037),n(47933)),f=n(4942),y=n(29439),b=(n(52466),n(10642)),v=n(93433),g=n(15861),h=n(87757),E=n.n(h),Z=n(88144),_={labelCol:{span:8},wrapperCol:{span:10}},I=function(e){var t=e.visible,n=e.setDepartmentVisible,c=e.changeValue,l=e.departmentInfo,i=a.Z.useForm(),u=(0,y.Z)(i,1)[0],m=(0,o.useRef)([]),p=function(e){var t=[];return e.forEach((function(e){t.some((function(t){return t.id===e.id}))||t.push(e)})),t},d=function(){var e=(0,g.Z)(E().mark((function e(){var t,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.validateFields();case 2:t=m.current,a=[].concat((0,v.Z)(t),(0,v.Z)(l)),c("departmentInfo",p(a)),u.resetFields(),n(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=[o.createElement(a.Z.Item,{name:"departmentIds",label:"添加部门",rules:[{required:!0,message:"请选择"}]},o.createElement(Z.MG,{isAuthorized:!0,multiple:!0,onChange:function(e,t){m.current=e.map((function(e,n){return{id:e,name:t[n]}}))},filterTreeNode:function(e,t){return!!(e.trim()&&t&&t.props&&-1!==t.props.title.trim().indexOf(e.trim()))}}))];return o.createElement(b.Z,{title:"添加部门",visible:t,onOk:d,onCancel:function(){n(!1)}},o.createElement(a.Z,(0,r.Z)({form:u},_),o.createElement(s.Fp,{items:f,cols:1})))},C=function(){};I.propTypes={visible:u().bool,setDepartmentVisible:u().func,changeValue:u().func,departmentInfo:u().array},I.defaultProps={visible:!1,setDepartmentVisible:C,changeValue:C,departmentInfo:[{}]};var O=I,F={labelCol:{span:8},wrapperCol:{span:10}},k=function(e){var t=e.visible,n=e.setAccountVisible,c=e.changeValue,l=e.accountInfo,i=a.Z.useForm(),u=(0,y.Z)(i,1)[0],m=(0,o.useRef)([]),p=function(e){var t=[];return e.forEach((function(e){t.some((function(t){return t.id===e.id}))||t.push(e)})),t},d=function(){var e=(0,g.Z)(E().mark((function e(){var t,a;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.validateFields();case 2:t=m.current.map((function(e){return{id:e.payload.account_id,name:e.payload.name}})),a=[].concat((0,v.Z)(t),(0,v.Z)(l)),c("accountInfo",p(a)),u.resetFields(),n(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=[o.createElement(a.Z.Item,{name:"accountIds",label:"添加成员",rules:[{required:!0,message:"请选择"}]},o.createElement(Z.kl,{mode:"multiple",showArrow:!0,placeholder:"请选择成员",showSearch:!0,optionFilterProp:"children",onChange:function(e,t){m.current=t}}))];return o.createElement(b.Z,{title:"添加成员",visible:t,onOk:d,onCancel:function(){n(!1)}},o.createElement(a.Z,(0,r.Z)({form:u},F),o.createElement(s.Fp,{items:f,cols:1})))},w=function(){};k.propTypes={visible:u().bool,setAccountVisible:u().func,changeValue:u().func,accountInfo:u().array},k.defaultProps={visible:!1,setAccountVisible:w,changeValue:w,accountInfo:[{}]};var D=k,j="yC2Zm4yN4EvDNZioKYs9",P="LRFW8Do9vTZykibh9MxM",x="BZL8_GKS3Yl8JpV1MSq7";function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(e){var t=e.value,n=e.onChange,a=e.authorityDetail,r=(0,o.useState)(!1),c=(0,y.Z)(r,2),l=c[0],i=c[1],u=(0,o.useState)(!1),s=(0,y.Z)(u,2),b=s[0],v=s[1],g=function(){n(M(M({},t),{},{accountInfo:[],departmentInfo:[]}))},h=function(e,a){n(M(M({},t),{},(0,f.Z)({},e,a)))},E=function(e){e.target.value!==m.MmK.all?n({state:e.target.value,accountInfo:a.accountInfo,departmentInfo:a.departmentInfo}):n({state:e.target.value,accountInfo:[],departmentInfo:[]})};(0,o.useEffect)((function(){t.state===m.MmK.all&&g()}),[]);var Z,_,I;return o.createElement(o.Fragment,null,(Z=t.state,_=t.accountInfo,I=t.departmentInfo,o.createElement("div",{className:j},o.createElement("div",null,o.createElement(d.ZP.Group,{defaultValue:Z,onChange:E},o.createElement(d.ZP,{value:m.MmK.all},m.MmK.description(m.MmK.all)),o.createElement(d.ZP,{value:m.MmK.section},m.MmK.description(m.MmK.section)))),o.createElement("div",null,o.createElement(p.Z,{className:P,type:"primary",disabled:Z===m.MmK.all,onClick:function(){i(!0)}},"添加成员"),o.createElement(p.Z,{className:P,type:"primary",disabled:Z===m.MmK.all,onClick:function(){v(!0)}},"添加部门"),o.createElement(p.Z,{type:"primary",disabled:Z===m.MmK.all,onClick:g},"清空")),o.createElement("div",{className:x},function(e,t){return e.concat(t).reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),"")}(_,I)))),o.createElement(D,{accountInfo:t.accountInfo,changeValue:h,visible:l,setAccountVisible:i}),o.createElement(O,{departmentInfo:t.departmentInfo,changeValue:h,visible:b,setDepartmentVisible:v}))};S.propTypes={value:u().object,onChange:u().func,authorityDetail:u().object},S.defaultProps={value:{},onChange:function(){},authorityDetail:{}};var K=S,q={labelCol:{span:5},wrapperCol:{span:19}},A=function(e){var t=e.detail,n={state:l().get(t,"look_acl",m.MmK.section),accountInfo:l().get(t,"look_account_info_list",[]).map((function(e){return{id:e._id,name:e.name}})),departmentInfo:l().get(t,"look_department_info_list",[]).map((function(e){return{id:e._id,name:e.name}}))};return o.createElement(o.Fragment,null,[{item:[o.createElement(a.Z.Item,(0,r.Z)({},q,{name:"lookAccountInfo",label:"可见成员",rules:[{required:!0,message:"请选择"}]}),o.createElement(K,{authorityDetail:n}))]}].map((function(e,t){return o.createElement(s.Fp,{key:t,items:e.item,cols:e.col||2})})))};A.propTypes={detail:u().object},A.defaultProps={detail:{}};var N=A}}]);