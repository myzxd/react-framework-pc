"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4612],{94243:function(e,t,n){var a=n(15671),c=n(97326),r=n(60136),o=n(82963),s=n(61120),i=n(4942),p=n(67294),u=n(96036),l=n(80385),d=n(8240);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var c=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return(0,o.Z)(this,n)}}var v=u.Hr.Option,Z=function(e){(0,r.Z)(n,e);var t=b(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,i.Z)((0,c.Z)(e),"render",(function(){var t=f({},e.props),n=(0,d.CE)(["dispatch","attributionData"],t);return p.createElement(u.Hr,n,p.createElement(v,{value:"".concat(l.F$Y.project)},l.F$Y.description(l.F$Y.project)),p.createElement(v,{value:"".concat(l.F$Y.headquarter)},l.F$Y.description(l.F$Y.headquarter)),p.createElement(v,{value:"".concat(l.F$Y.city)},l.F$Y.description(l.F$Y.city)),p.createElement(v,{value:"".concat(l.F$Y.district)},l.F$Y.description(l.F$Y.district)),p.createElement(v,{value:"".concat(l.F$Y.knight)},l.F$Y.description(l.F$Y.knight)),p.createElement(v,{value:"".concat(l.F$Y.headquarters)},l.F$Y.description(l.F$Y.headquarters)),p.createElement(v,{value:"".concat(l.F$Y.managementCost)},l.F$Y.description(l.F$Y.managementCost)),p.createElement(v,{value:"".concat(l.F$Y.operatingSupport)},l.F$Y.description(l.F$Y.operatingSupport)),p.createElement(v,{value:"".concat(l.F$Y.vehicleDirectly)},l.F$Y.description(l.F$Y.vehicleDirectly)),p.createElement(v,{value:"".concat(l.F$Y.vehicleIndirect)},l.F$Y.description(l.F$Y.vehicleIndirect)))})),e}return n}(p.Component);t.Z=Z},64612:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});n(13062);var a=n(71230),c=(n(89032),n(15746)),r=(n(52560),n(71577)),o=(n(51838),n(48086)),s=n(15671),i=n(43144),p=n(97326),u=n(60136),l=n(82963),d=n(61120),m=n(4942),f=n(93517),b=n.n(f),v=n(45697),Z=n.n(v),j=n(67294),h=n(55609),y=n(66939),S=(n(98703),n(36037),n(47933)),C=(n(29093),n(16317)),g=(n(9070),n(20924)),x=n(94243),P=n(96036),F=n(88144),E=n(80385),O=n(5646);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var c=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return(0,l.Z)(this,n)}}var A=P.Hr.Option,w=g.Z.TextArea,k=function(e){(0,u.Z)(n,e);var t=U(n);function n(e){var a;return(0,s.Z)(this,n),a=t.call(this,e),(0,m.Z)((0,p.Z)(a),"onChangeLevel",(function(e){var t=a.props.form,n=e-1,c={level:[n],page:1,limit:999999,state:[E.NF3.normal]};t.setFieldsValue({attribution:void 0,superior:void 0,coding:void 0}),a.setState({accountingCode:""}),Number(e)===E.xPU.one?a.setState({close:!1,disable:!0}):a.setState({close:!0,disable:!1}),n&&a.props.dispatch({type:"expenseSubject/fetchExpenseSubjects",payload:c})})),(0,m.Z)((0,p.Z)(a),"onChangeSuperior",(function(e){var t=a.props,n=t.form,c=t.subjectsData,r=(c=void 0===c?{}:c).data,o=(void 0===r?[]:r).filter((function(t){return t.id===e}));o&&o.length>0&&(a.setState({accountingCode:o[0].accountingCode}),n.setFieldsValue({attribution:"".concat(o[0].costCenterType||"")})),n.setFieldsValue({coding:void 0})})),(0,m.Z)((0,p.Z)(a),"onChangeCostOf",(function(e){a.props.form.setFieldsValue({attribution:void 0}),e.target.value===E.HcC.no?a.setState({closeCost:!1,disableCost:!0}):a.setState({closeCost:!0,disableCost:!1})})),(0,m.Z)((0,p.Z)(a),"renderAttributionInfo",(function(){var e=a.props,t=e.subjectsData,n=(t=void 0===t?{}:t).data,c=void 0===n?[]:n,r=e.form,o=(void 0===r?{}:r).getFieldDecorator,s=[];s.push(c.map((function(e,t){return j.createElement(A,{key:t,value:e.id},"".concat(e.name,"(").concat(e.accountingCode,")"))})));var i=[{label:"级别 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:o("level",{rules:[{required:!0,message:"请选择科目级别"}],initialValue:void 0})(j.createElement(C.Z,{placeholder:"请选择科目级别",onChange:a.onChangeLevel},j.createElement(A,{value:"".concat(E.xPU.one)},E.xPU.description(E.xPU.one)),j.createElement(A,{value:"".concat(E.xPU.two)},E.xPU.description(E.xPU.two)),j.createElement(A,{value:"".concat(E.xPU.three)},E.xPU.description(E.xPU.three)),j.createElement(A,{value:"".concat(E.xPU.four)},E.xPU.description(E.xPU.four)),j.createElement(A,{value:"".concat(E.xPU.five)},E.xPU.description(E.xPU.five)),j.createElement(A,{value:"".concat(E.xPU.six)},E.xPU.description(E.xPU.six)),j.createElement(A,{value:"".concat(E.xPU.seven)},E.xPU.description(E.xPU.seven)),j.createElement(A,{value:"".concat(E.xPU.eight)},E.xPU.description(E.xPU.eight)),j.createElement(A,{value:"".concat(E.xPU.nine)},E.xPU.description(E.xPU.nine)),j.createElement(A,{value:"".concat(E.xPU.ten)},E.xPU.description(E.xPU.ten))))},{label:"上级科目 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:o("superior",{rules:[{required:a.state.close,message:"请选择上级科目"}],initialValue:void 0})(j.createElement(C.Z,{placeholder:"请选择上级科目",onChange:a.onChangeSuperior,disabled:a.state.disable,showSearch:!0,allowClear:!0,optionFilterProp:"children"},s))},{label:"是否成本类",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:o("costOf",{initialValue:E.HcC.is,rules:[{required:!0,message:"请选择"}]})(j.createElement(S.ZP.Group,{onChange:a.onChangeCostOf},j.createElement(S.ZP,{value:E.HcC.is},E.HcC.description(E.HcC.is)),j.createElement(S.ZP,{value:E.HcC.no},E.HcC.description(E.HcC.no))))},{label:"成本归属",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:o("attribution",{rules:[{required:a.state.closeCost,message:"请选择成本归属"}]})(j.createElement(x.Z,{allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择成本归属"}))},{label:"适用场景",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:o("scense",{rules:[{required:!0,message:"请选择适用场景"}]})(j.createElement(F.UU,{enumeratedType:"subjectScense"}))}];return j.createElement(P.KP,{items:i})})),(0,m.Z)((0,p.Z)(a),"renderBasicInfo",(function(){var e=a.props.form.getFieldDecorator,t=a.state.accountingCode,n=[{label:"科目名称 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:e("name",{rules:[{required:!0,message:"请填写科目名称"},{max:128,message:"长度不得超过128"}],initialValue:void 0})(j.createElement(g.Z,{type:"text",placeholder:"请输入科目名称"}))},{label:"科目编码 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:j.createElement("span",null,t,e("coding",{rules:[{required:!0,message:"请填写科目编码"},{len:2,message:"必须是两位"},{pattern:/\S{2,}/,message:"输入的内容不能为空格"}],initialValue:void 0})(j.createElement(g.Z,{className:O.Z["app-comp-expense-subject-components-coding"],type:"text",placeholder:"请输入科目编码"})))},{label:"科目描述 :",span:23,layout:{labelCol:{span:2},wrapperCol:{span:19}},form:e("describe",{rules:[{required:!1,message:"请输入科目描述"}],initialValue:void 0})(j.createElement(w,{placeholder:"请输入科目描述",className:O.Z["app-comp-expense-subject-components-describe"]}))}];return j.createElement(P.KP,{items:n})})),(0,m.Z)((0,p.Z)(a),"render",(function(){return j.createElement("div",null,j.createElement(P.IT,{title:"归属信息"},a.renderAttributionInfo()),j.createElement(P.IT,{title:"基本信息"},a.renderBasicInfo()))})),a.state={close:!1,disable:!0,closeCost:!0,disableCost:!1,accountingCode:""},a}return n}(j.Component);(0,m.Z)(k,"propTypes",{subjectsData:Z().object,form:Z().object,dispatch:Z().func}),(0,m.Z)(k,"defaultProps",{subjectsData:{},form:{},dispatch:function(){}});var Y=k,D=n(57129);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){(0,m.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var c=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,c)}else n=a.apply(this,arguments);return(0,l.Z)(this,n)}}var H=function(e){(0,u.Z)(n,e);var t=R(n);function n(e){var i;return(0,s.Z)(this,n),i=t.call(this,e),(0,m.Z)((0,p.Z)(i),"onReset",(function(){i.props.form.resetFields()})),(0,m.Z)((0,p.Z)(i),"onSave",(function(){var e=i.props,t=e.form,n=e.subjectsData;t.validateFields((function(e,t){if(!e){var a=I({state:E.NF3.draft},t),c=t.superior,r=b().get(n,"data",[]).filter((function(e){return e.id===c}));r&&r.length>0&&(a.coding="".concat(r[0].accountingCode||"").concat(a.coding)),i.savedSubjectId&&""!==i.savedSubjectId?(a.id=i.savedSubjectId,i.props.dispatch({type:"expenseSubject/updateSubject",payload:{params:a,onSuccessCallback:i.onSuccessSaveUpdate,onFailureCallback:i.onFailureSaveAndAdd}})):i.props.dispatch({type:"expenseSubject/createSubject",payload:{params:a,onSuccessCallback:i.onSuccessSaveCreate,onFailureCallback:i.onFailureSaveAndAdd}})}}))})),(0,m.Z)((0,p.Z)(i),"onSubmit",(function(){var e=i.props,t=e.form,n=e.subjectsData;t.validateFields((function(e,t){if(!e){var a=I({state:E.NF3.normal},t),c=t.superior,r=b().get(n,"data",[]).filter((function(e){return e.id===c}));r&&r.length>0&&(a.coding="".concat(r[0].accountingCode||"").concat(a.coding)),i.savedSubjectId&&""!==i.savedSubjectId?(a.id=i.savedSubjectId,i.props.dispatch({type:"expenseSubject/updateSubject",payload:{params:a,onSuccessCallback:i.onSuccessSubmitUpdate,onFailureCallback:i.onFailureSaveAndAdd}})):i.props.dispatch({type:"expenseSubject/createSubject",payload:{params:a,onSuccessCallback:i.onSuccessSubmitCreate,onFailureCallback:i.onFailureSaveAndAdd}})}}))})),(0,m.Z)((0,p.Z)(i),"onSuccessSaveAndAddCreate",(function(){o.ZP.success("科目创建成功"),i.onReset()})),(0,m.Z)((0,p.Z)(i),"onSuccessSaveAndAddUpdate",(function(){o.ZP.success("科目保存成功"),i.onReset(),i.savedSubjectId=""})),(0,m.Z)((0,p.Z)(i),"onSuccessSaveCreate",(function(e){o.ZP.success("科目创建成功"),i.savedSubjectId=e._id})),(0,m.Z)((0,p.Z)(i),"onSuccessSaveUpdate",(function(){o.ZP.success("科目保存成功")})),(0,m.Z)((0,p.Z)(i),"onSuccessSubmitCreate",(function(){o.ZP.success("科目创建成功"),i.props.history.push("/Expense/Subject")})),(0,m.Z)((0,p.Z)(i),"onSuccessSubmitUpdate",(function(){o.ZP.success("科目保存成功"),i.props.history.push("/Expense/Subject")})),(0,m.Z)((0,p.Z)(i),"onFailureSaveAndAdd",(function(e){o.ZP.error(e.zh_message)})),(0,m.Z)((0,p.Z)(i),"onSaveAndAdd",(function(){var e=i.props,t=e.form,n=e.subjectsData;t.validateFields((function(e,t){if(!e){var a=I({state:E.NF3.normal},t),c=t.superior,r=b().get(n,"data",[]).filter((function(e){return e.id===c}));r&&r.length>0&&(a.coding="".concat(r[0].accountingCode||"").concat(a.coding)),i.savedSubjectId&&""!==i.savedSubjectId?(a.id=i.savedSubjectId,i.props.dispatch({type:"expenseSubject/updateSubject",payload:{params:a,onSuccessCallback:i.onSuccessSaveAndAddUpdate,onFailureCallback:i.onFailureSaveAndAdd}})):i.props.dispatch({type:"expenseSubject/createSubject",payload:{params:a,onSuccessCallback:i.onSuccessSaveAndAddCreate,onFailureCallback:i.onFailureSaveAndAdd}})}}))})),(0,m.Z)((0,p.Z)(i),"renderCreateInfo",(function(){var e=i.props,t=e.form,n=e.subjectsData,a=e.dispatch;return j.createElement(Y,{form:t,dispatch:a,subjectsData:n})})),(0,m.Z)((0,p.Z)(i),"renderOprations",(function(){var e=[j.createElement(c.Z,{key:"save",span:9,className:D.Z["app-comp-expense-subject-create-save"]},j.createElement(r.Z,{type:"primary",size:"large",onClick:i.onSave},"保存"))];return e.push(j.createElement(c.Z,{key:"submit",span:1},j.createElement(r.Z,{type:"primary",size:"large",onClick:i.onSubmit},"提交"))),e.push(j.createElement(c.Z,{key:"submitAdd",span:12,className:D.Z["app-comp-expense-subject-create-primary"]},j.createElement(r.Z,{type:"primary",size:"large",onClick:i.onSaveAndAdd},"提交并添加下一项"))),j.createElement(a.Z,{type:"flex",align:"middle",justify:"space-around",className:D.Z["app-comp-expense-subject-create-button"]},e)})),(0,m.Z)((0,p.Z)(i),"render",(function(){return j.createElement(y.Z,{layout:"horizontal"},i.renderCreateInfo(),i.renderOprations())})),i.state={},i.savedSubjectId="",i}return(0,i.Z)(n,[{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"expenseSubject/resetSubjectsDetail"}),e({type:"expenseSubject/resetSubjects"})}}]),n}(j.Component);(0,m.Z)(H,"propTypes",{subjectsData:Z().object}),(0,m.Z)(H,"defaultProps",{subjectsData:{}});var B=(0,h.connect)((function(e){return{subjectsData:e.expenseSubject.subjectsData}}))(y.Z.create()(H))},5646:function(e,t){t.Z={"app-comp-expense-subject-components-coding":"oKuzPEVGLqeAthCNdIET","app-comp-expense-subject-components-describe":"BiBmO1DMBm5ZCZ99_7DJ"}},57129:function(e,t){t.Z={"app-comp-expense-subject-operation-update":"RpJQ2mLrg7Xi8ec6gsMZ","app-comp-expense-subject":"PN7e9tv0En5YZ_HMkT2O","app-comp-expense-subject-operation-detele":"fn5P_0ya077Nru8ZeKZq","app-comp-expense-subject-operation-enable":"pc8gj8FKRzH6BrevLQGm","app-comp-expense-subject-operation-disable":"fipYabxrAmO8k8eoHmNO","app-comp-expense-subject-update-save":"f2Ex550dRuIQAovMMXgw","app-comp-expense-subject-update-submit":"IWGzV3xSPyTIPE_22TzI","app-comp-expense-subject-update-button":"wNJB1W725VHyFTr415NA","app-comp-expense-subject-create-save":"RUK2U5uLgZm_csoEHFQ4","app-comp-expense-subject-create-primary":"fE0tpD6WcilsXwnB4VwF","app-comp-expense-subject-create-button":"f91EN3DBQNoGu5MOLXTx","app-comp-expense-subject-detail-common-title":"fkLwf_kttofnJHjPWp7v","app-comp-expense-subject-detail-common-content":"uJeeC13TvHh47jG9aLLA","app-comp-expense-subject-detail-common-text":"dukmSL9TTFMXGm0ROaK0","app-comp-expense-subject-detail-common-button":"VHgoFTiAzeXBvSlVtwZJ","app-comp-expense-subject-detail-common-distance":"OpbXe6PevRXzPp5HqRK0"}}}]);