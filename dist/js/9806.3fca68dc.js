"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[9806],{8212:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(1413),a=n(67294),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"},c=n(30076),i=function(e,t){return a.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:o}))};i.displayName="EditOutlined";var l=a.forwardRef(i)},20006:function(e,t,n){n(21316);var r=n(75443),a=(n(13062),n(71230)),o=(n(89032),n(15746)),c=n(15671),i=n(97326),l=n(60136),u=n(82963),s=n(61120),p=n(4942),d=n(45697),f=n.n(d),m=n(67294),y=n(66939),v=(n(98703),n(80385)),h=n(45430),Z=n(94412);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var E=function(){},O=function(e){(0,l.Z)(n,e);var t=C(n);function n(e){var l;return(0,c.Z)(this,n),l=t.call(this,e),(0,p.Z)((0,i.Z)(l),"onChangeEdit",(function(){var e=!l.state.isDisabled;l.setState(b(b({},l.state),{},{isDisabled:e}))})),(0,p.Z)((0,i.Z)(l),"onClickDelete",(function(){var e=l.props,t=e.onClickDelete,n=e.index,r=e.data,a=e.dataSource;t&&t(r,n,a)})),(0,p.Z)((0,i.Z)(l),"onClickMoveUp",(function(){var e=l.props,t=e.onClickMoveUp,n=e.index,r=e.data,a=e.dataSource;t&&t(r,n,a)})),(0,p.Z)((0,i.Z)(l),"onClickMoveDown",(function(){var e=l.props,t=e.onClickMoveDown,n=e.index,r=e.data,a=e.dataSource;t&&t(r,n,a)})),(0,p.Z)((0,i.Z)(l),"onSubmit",(function(){var e=l.props,t=e.onSubmit,n=e.index,r=e.data,a=e.dataSource,o=e.forceValidate;l.props.form.validateFields({force:o},(function(e,o){e||t&&t(r,n,a,o,l.onChangeEdit.bind((0,i.Z)(l)))}))})),(0,p.Z)((0,i.Z)(l),"onChangeExpand",(function(){var e=l.state.expand;l.setState({expand:!e})})),(0,p.Z)((0,i.Z)(l),"renderBaseContent",(function(){var e=l.props,t=e.onRenderTitle,n=e.index,r=e.data,c=e.dataSource,i="";return t&&(i=t(r,n,c)),m.createElement(a.Z,{className:Z.Z["app-comp-finance-content"],type:"flex",justify:"end",align:"middle"},m.createElement(o.Z,{span:1,className:Z.Z["app-comp-finance-component-tc"]},n+1),m.createElement(o.Z,{span:19,className:"app-global-mgt10"},i),m.createElement(o.Z,{span:4},m.createElement(a.Z,{type:"flex",justify:"start",align:"middle"},m.createElement(o.Z,{offset:17},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onChangeExpand},"展开")))))})),(0,p.Z)((0,i.Z)(l),"renderExpandContent",(function(){var e=l.state.isDisabled,t=l.props,n=t.onRenderTitle,c=t.onRenderContent,i=t.data,u=t.index,s=t.dataSource,p=t.type;i.form=l.props.form,i.isDisabled=e;var d="";n&&(d=n(i,u,s));var f="";return c&&(f=c(i,u,s)),m.createElement(a.Z,{className:e?Z.Z["app-comp-finance-collapse-container-normal"]:Z.Z["app-comp-finance-collapse-container"]},m.createElement(o.Z,{span:24},m.createElement(a.Z,{gutter:0,className:Z.Z["app-comp-finance-collapse-title"],type:"flex",justify:"center",align:"middle"},m.createElement(o.Z,{span:1,className:Z.Z["app-comp-finance-component-tc"]},u+1),m.createElement(o.Z,{span:19,className:"app-global-mgt10"},d),m.createElement(o.Z,{span:4},p===v.YCS.generator||p===v.YCS.draft?p===v.YCS.draft?m.createElement(a.Z,{type:"flex",justify:"start",align:"middle"},e?!h.ZP.canOperateFinancePlanRuleUpdate()||m.createElement(o.Z,{offset:11,span:6},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onChangeEdit},"编辑")):"",e?"":m.createElement(o.Z,{offset:11,span:6},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onSubmit},"保存")),m.createElement(o.Z,{span:4},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onChangeExpand},"收起"))):m.createElement(a.Z,{type:"flex",justify:"end",align:"middle"},e?!h.ZP.canOperateFinancePlanRuleUpdate()||m.createElement(o.Z,{span:5},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onChangeEdit},"编辑")):"",e?"":m.createElement(o.Z,{span:5},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onSubmit},"保存")),!h.ZP.canOperateFinancePlanRuleUpdate()||m.createElement(o.Z,{span:5},e?m.createElement(r.Z,{placement:"topRight",title:"您确定删除该服务费卡片规则？",onConfirm:l.onClickDelete,okText:"确定",cancelText:"取消"},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"]},"删除")):m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor2"]},"删除")),!h.ZP.canOperateFinancePlanRuleMove()||m.createElement(o.Z,{span:5,style:{display:0===u?"none":"block"}},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onClickMoveUp},"上移")),!h.ZP.canOperateFinancePlanRuleMove()||m.createElement(o.Z,{span:5,style:{display:u===s.length-1?"none":"block"}},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onClickMoveDown},"下移")),m.createElement(o.Z,{span:4},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onChangeExpand},"收起"))):m.createElement(a.Z,{type:"flex",justify:"start",align:"middle"},m.createElement(o.Z,{offset:17},m.createElement("span",{className:Z.Z["app-comp-finance-component-color-cursor1"],onClick:l.onChangeExpand},"收起"))))),m.createElement(a.Z,null,m.createElement(o.Z,{span:24,className:Z.Z["app-comp-finance-collapse-content"]},f))))})),(0,p.Z)((0,i.Z)(l),"render",(function(){return!0!==l.state.expand?l.renderBaseContent():l.renderExpandContent()})),l.state={expand:!0,isDisabled:!0},l}return n}(m.Component);(0,p.Z)(O,"propTypes",{index:f().number,data:f().object,dataSource:f().array,type:f().number,forceValidate:f().bool,onRenderTitle:f().func,onRenderContent:f().func,onClickDelete:f().func,onClickMoveUp:f().func,onClickMoveDown:f().func,onSubmit:f().func}),(0,p.Z)(O,"defaultProps",{data:{},dataSource:[],forceValidate:!1,onRenderTitle:E,onRenderContent:E,onClickDelete:E,onClickMoveUp:E,onClickMoveDown:E,onSubmit:E}),t.Z=y.Z.create()(O)},93554:function(e,t,n){var r=n(15671),a=n(43144),o=n(97326),c=n(60136),i=n(82963),l=n(61120),u=n(4942),s=n(94315),p=n.n(s),d=n(45697),f=n.n(d),m=n(67294);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var v=function(e){(0,c.Z)(n,e);var t=y(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),(0,u.Z)((0,o.Z)(e),"renderData",(function(t,n,r){var a=e.props.renderData,o=t.id||n;return p().empty(a)||p().not.existy(a)||p().not.function(a)?m.createElement("span",{key:o}):m.createElement("span",{key:"".concat(o)},a(t,n,r))})),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.dataSource;if(p().empty(t)||p().not.array(t))return m.createElement("span",null);var n=t.map((function(n,r){return e.renderData(n,r,t)}));return m.createElement("span",null,n)}}]),n}(m.Component);(0,u.Z)(v,"propTypes",{dataSource:f().array,renderData:f().func}),(0,u.Z)(v,"defaultProps",{dataSource:[],renderData:function(){}}),t.Z=v},49113:function(e,t,n){n(1868);var r=n(12028),a=(n(55295),n(69713)),o=n(15671),c=n(43144),i=n(97326),l=n(60136),u=n(82963),s=n(61120),p=n(4942),d=n(55609),f=n(93517),m=n.n(f),y=n(67294),v=n(1870),h=n(45697),Z=n.n(h),g=n(80385),b=n(45430),C=n(94412);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var O=function(e){(0,l.Z)(n,e);var t=E(n);function n(e){var c;return(0,o.Z)(this,n),c=t.call(this,e),(0,p.Z)((0,i.Z)(c),"componentDidMount",(function(){c.fetchRuleCollectionData()})),(0,p.Z)((0,i.Z)(c),"onSuccessCallback",(function(e){e.ok&&c.fetchRuleCollectionData()})),(0,p.Z)((0,i.Z)(c),"onChange",(function(e){var t=c.props,n=t.ruleCollectionId,r={ruleType:t.ruleType,id:n,exclusive:e?g.yAJ.Exclusion:g.yAJ.Complementary,onSuccessCallback:c.onSuccessCallback};c.props.dispatch({type:"financePlan/updateMutualExclusion",payload:r})})),(0,p.Z)((0,i.Z)(c),"fetchRuleCollectionData",(function(){var e={id:c.props.ruleCollectionId};c.props.dispatch({payload:e,type:"financePlan/fetchRuleCollectionData"})})),(0,p.Z)((0,i.Z)(c),"renderControl",(function(){var e,t=c.props,n=t.type,o=t.ruleType,i=t.ruleCollectionId,l=m().get(c.props.ruleCollectionData,"".concat(i),{});return o===g.cc_.order?e=l.orderRuleRelation:o===g.cc_.attendance?e=l.workRuleRelation:o===g.cc_.quality?e=l.qaRuleRelation:o===g.cc_.management&&(e=l.operationRuleRelation),n===g.YCS.generator||n===g.YCS.draft?y.createElement("div",{className:C.Z["app-comp-finance-MECoh"]},!(n===g.YCS.generator)||y.createElement("span",{className:C.Z["app-comp-finance-MEfl"]},"可以点击后续上下进行排序及删除"),y.createElement("span",{className:C.Z["app-comp-finance-MEfr"]},y.createElement("span",{className:"app-global-mgr8"},"互斥"),y.createElement(a.Z,{title:"互斥：数据计算取互补交集"},y.createElement(v.Z,{className:"app-global-mgr24"})),!b.ZP.canOperateFinancePlanRulesMutualExclusion()||y.createElement(r.Z,{className:C.Z["app-comp-finance-MEmb4"],checked:e===g.yAJ.Exclusion,checkedChildren:"开",unCheckedChildren:"关",onChange:c.onChange}))):y.createElement("div",{className:C.Z["app-comp-finance-MECoh"]},y.createElement("span",{className:C.Z["app-comp-finance-MEfr"]},e===g.yAJ.Exclusion?y.createElement("span",{className:"app-global-mgr8"},"互斥"):y.createElement("span",{className:"app-global-mgr8"},"互补"),y.createElement(a.Z,{title:"互斥：数据计算取互补交集"},y.createElement(v.Z,null))))})),c.state={},c}return(0,c.Z)(n,[{key:"render",value:function(){return y.createElement("div",null,this.renderControl())}}]),n}(y.Component);(0,p.Z)(O,"propTypes",{type:Z().number,ruleCollectionId:Z().string,ruleType:Z().number}),t.Z=(0,d.connect)((function(e){return{ruleCollectionData:e.financePlan.ruleCollectionData}}))(O)},6970:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(15671),a=n(43144),o=n(97326),c=n(60136),i=n(82963),l=n(61120),u=n(4942),s=(n(36037),n(47933)),p=n(45697),d=n.n(p),f=n(67294),m=(n(52560),n(71577)),y=(n(36616),n(51368)),v=(n(51838),n(48086)),h=(n(29093),n(16317)),Z=n(94315),g=n.n(Z),b=n(55609),C=n(1058),E=n(49101),O=n(96036),P=n(80385),k=n(15951);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var D=h.Z.Option,T=function(e){(0,c.Z)(n,e);var t=R(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),(0,u.Z)((0,o.Z)(e),"onChangeIndex",(function(t,n,r){e.triggerOnChange({index:t,unit:n,name:r})})),(0,u.Z)((0,o.Z)(e),"onChangeSymbol",(function(t){e.triggerOnChange({symbol:t})})),(0,u.Z)((0,o.Z)(e),"onChangeNum",(function(t){var n=e.props.unit,r=P.fbc.dynamicValid(t,n);if(!0!==r)return v.ZP.error(r);e.triggerOnChange({num:t})})),(0,u.Z)((0,o.Z)(e),"onPlusItem",(function(){var t=e.props.onPlusItem;t&&t()})),(0,u.Z)((0,o.Z)(e),"onDeleteItem",(function(){var t=e.props.onDeleteItem;t&&t(e.props.itemIndex)})),(0,u.Z)((0,o.Z)(e),"triggerOnChange",(function(t){var n=e.props,r=x(x({},{index:n.index,symbol:n.symbol,num:n.num,unit:n.unit,name:n.name}),t);e.props.onChange&&e.props.onChange(r,e.props.itemIndex)})),(0,u.Z)((0,o.Z)(e),"renderItem",(function(){var t=e.props,n=t.index,r=t.symbol,a=t.num,o=t.config,c=t.dataList,i=t.layout,l=e.props,u=l.disabled,s=l.platformCode,p=l.tags,d=e.props.orderTypes.unitText,v=4,Z=3,b=3;g().existy(i)&&!g().empty(i)&&(v=i.indicators,Z=i.symbol,b=i.num);var P=[{label:"",span:v,layout:{labelCol:{span:0},wrapperCol:{span:24}},form:f.createElement(k.Z,{style:{width:"100%"},value:n,disabled:u,tagList:p,platformCode:s,onChange:e.onChangeIndex,dataList:c})},{label:"",span:Z,layout:{labelCol:{span:0},wrapperCol:{span:24}},form:f.createElement(h.Z,{value:r,onChange:e.onChangeSymbol,disabled:u,className:"app-global-componenth-width-percent100"},f.createElement(D,{value:"<="},"<="),f.createElement(D,{value:">="},">="),f.createElement(D,{value:"<"},"<"),f.createElement(D,{value:">"},">"),f.createElement(D,{value:"!="},"!="),f.createElement(D,{value:"="},"="))}],w={label:"",span:b,layout:{labelCol:{span:0},wrapperCol:{span:24}},form:f.createElement(y.Z,{disabled:u,className:"app-global-componenth-width-percent100",value:a,min:0,onChange:e.onChangeNum,formatter:function(e){return"".concat(e).concat(d[n]||"")},parser:function(e){return e.replace("".concat(d[n]||""),"")}})};g().existy(n)&&g().not.empty(n)&&P.push(w);var x=[];return o.operatDelete&&x.push(f.createElement(m.Z,{key:"minus",shape:"circle",icon:f.createElement(C.Z,null),onClick:e.onDeleteItem,disabled:u,className:"app-global-mgr10"})),o.operatCreate&&x.push(f.createElement(m.Z,{shape:"circle",key:"plus",icon:f.createElement(E.Z,null),onClick:e.onPlusItem,disabled:u})),P.push({span:6,label:"",layout:{labelCol:{span:0},wrapperCol:{span:24}},form:f.createElement("div",null,x)}),f.createElement(O.KP,{items:P,cols:6})})),e}return(0,a.Z)(n,[{key:"render",value:function(){return f.createElement("div",null,this.renderItem())}}]),n}(f.Component);(0,u.Z)(T,"propTypes",{index:d().string,symbol:d().string,num:d().number,config:d().object,dataList:d().array,layout:d().object,unit:d().number,name:d().string}),(0,u.Z)(T,"defaultProps",{config:{},layout:{}});var M=(0,b.connect)((function(e){return{orderTypes:e.financeRulesGenerator.orderTypes}}))(T);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var j=s.ZP.Group,I=function(e){(0,c.Z)(n,e);var t=S(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),(0,u.Z)((0,o.Z)(e),"onChangeRules",(function(t,n){var r=e.props.value,a=Array.isArray(r.rules)&&r.rules.length>0?r.rules:[{}];a[n]=t,e.triggerChange({rules:a})})),(0,u.Z)((0,o.Z)(e),"onChangeConditions",(function(t){e.triggerChange({matchType:t.target.value})})),(0,u.Z)((0,o.Z)(e),"onPlusItem",(function(){var t=e.props.value,n=Array.isArray(t.rules)&&t.rules.length>0?t.rules:[{}];n.push({}),e.triggerChange({rules:n})})),(0,u.Z)((0,o.Z)(e),"onDeleteItem",(function(t){var n=e.props.value,r=Array.isArray(n.rules)&&n.rules.length>0?n.rules:[{}];r.splice(t,1),e.triggerChange({rules:r})})),(0,u.Z)((0,o.Z)(e),"triggerChange",(function(t){var n=e.props.value,r=Array.isArray(n.rules)&&n.rules.length>0?n.rules:[{}],a=n.matchType,o=e.props.onChange;o&&o(Object.assign({},{rules:r,matchType:a},t))})),(0,u.Z)((0,o.Z)(e),"rendeConditions",(function(){var t=e.props,n=t.disabled,r=t.value,a=[{label:"",form:f.createElement(j,{disabled:n,value:r.matchType,onChange:e.onChangeConditions},f.createElement(s.ZP,{value:P.Kbw.meetAll},P.Kbw.description(P.Kbw.meetAll)),f.createElement(s.ZP,{value:P.Kbw.meetAny},P.Kbw.description(P.Kbw.meetAny)))}];return f.createElement(O.KP,{items:a})})),(0,u.Z)((0,o.Z)(e),"renderItems",(function(){var t=e.props.value,n=Array.isArray(t.rules)&&t.rules.length>0?t.rules:[{}],r=e.props,a=r.dataList,o=r.layout,c=e.props,i=c.platformCode,l=c.disabled,u=c.tags;return n.map((function(t,n,r){var c={operatDelete:!0};n===r.length-1&&(c.operatCreate=!0,0===n&&(c.operatDelete=!1));var s=t.index,p=t.symbol,d=t.num,m=t.unit,y=t.name;return f.createElement(M,{key:n,itemIndex:n,tags:u,disabled:l,platformCode:i,index:s,symbol:p,name:y,num:d,unit:m,layout:o,config:c,dataList:a,onChange:e.onChangeRules,onPlusItem:e.onPlusItem,onDeleteItem:e.onDeleteItem})}))})),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props.isHideConditions;return f.createElement("div",null,this.renderItems(),e?"":this.rendeConditions())}}]),n}(f.Component);(0,u.Z)(I,"propTypes",{value:d().object,dataList:d().array,layout:d().object,isHideConditions:d().bool}),(0,u.Z)(I,"defaultProps",{layout:{},isHideConditions:!1});var A=I},3044:function(e,t,n){n(21316);var r=n(75443),a=n(15671),o=n(97326),c=n(60136),i=n(82963),l=n(61120),u=n(4942),s=(n(36037),n(47933)),p=n(45697),d=n.n(p),f=n(67294),m=n(66939),y=(n(98703),n(96036)),v=n(80385),h=n(94412);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var C=s.ZP.Button,E=s.ZP.Group,O=10,P=function(e){(0,c.Z)(n,e);var t=b(n);function n(){var e;(0,a.Z)(this,n);for(var c=arguments.length,i=new Array(c),l=0;l<c;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),(0,u.Z)((0,o.Z)(e),"onConfirmPopconfirm",(function(){var t=e.props.onConfirm;e.props.form.validateFieldsAndScroll((function(e,n){e||t&&t(n.num)}))})),(0,u.Z)((0,o.Z)(e),"renderBtns",(function(){var t=e.props,n=t.num,r=t.unit,a=e.props.form.getFieldDecorator,o=[];if(r===v.fbc.mathPercent)for(var c=0;c<O;c+=1)c<Math.floor(5)?o.push(f.createElement(C,{className:h.Z["app-comp-finance-pbtns-style"],key:c,value:Number("0.".concat(c+1))},"0.".concat(c+1))):o.push(f.createElement(C,{className:h.Z["app-comp-finance-pbtns-style"],key:c,value:c+1-Math.floor(5)},c+1-Math.floor(5)));else for(var i=0;i<O;i+=1)o.push(f.createElement(C,{className:h.Z["app-comp-finance-pbtns-style"],key:i,value:i+1}," ",i+1," "));var l=[{label:"",form:a("num",{initialValue:n})(f.createElement(E,{className:h.Z["app-comp-finance-pbtns-radio-group-style"]},o))}];return f.createElement("div",{className:"app-global-componenth-width-percent100"},f.createElement(y.KP,{items:l,cols:1}))})),(0,u.Z)((0,o.Z)(e),"renderPopconfirm",(function(){var t=e.props,n=t.num;return t.disabled?f.createElement("span",{className:h.Z["app-comp-finance-component-mglr5"]},n):f.createElement(r.Z,{className:":global",placement:"topLeft",title:e.renderBtns(),okText:"确定",cancelText:"取消",onConfirm:e.onConfirmPopconfirm},f.createElement("span",{className:g(g({},h.Z["app-comp-finance-component-mglr5"]),h.Z["app-comp-finance-popover-radiop-content"])},n))})),(0,u.Z)((0,o.Z)(e),"render",(function(){return f.createElement("span",null,e.renderPopconfirm())})),e}return n}(f.Component);(0,u.Z)(P,"propTypes",{num:d().number,disabled:d().bool}),(0,u.Z)(P,"defaultProps",{num:0,disabled:!1}),t.Z=m.Z.create()(P)},88472:function(e,t,n){n(21316);var r=n(75443),a=n(15671),o=n(43144),c=n(97326),i=n(60136),l=n(82963),u=n(61120),s=n(4942),p=(n(36037),n(47933)),d=n(67294),f=n(45697),m=n.n(f),y=n(94412);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var h=p.ZP.Group,Z=function(e){(0,i.Z)(n,e);var t=v(n);function n(e){var o;return(0,a.Z)(this,n),o=t.call(this,e),(0,s.Z)((0,c.Z)(o),"changeCompareType",(function(){var e=o.state.compareType,t=o.props.onChange;t&&t(e)})),(0,s.Z)((0,c.Z)(o),"changeStateCompareType",(function(e){o.setState({compareType:e.target.value})})),(0,s.Z)((0,c.Z)(o),"renderPopover",(function(){var e=o.state.compareType,t=o.props,n=t.compareTypeProps;return t.disabled?d.createElement("div",{className:y.Z["app-comp-finance-popover-radio-disabled"]},d.createElement("span",null,n)):d.createElement(r.Z,{className:":global",title:d.createElement(h,{value:e,onChange:o.changeStateCompareType},d.createElement(p.ZP,{className:y.Z["app-comp-finance-popover-radio-radio1"],value:"<="},"<="),d.createElement(p.ZP,{className:y.Z["app-comp-finance-popover-radio-radiodb"],value:"<"},"<")),onConfirm:o.changeCompareType},d.createElement("div",{className:y.Z["app-comp-finance-popover-radiop-content"]},d.createElement("span",null,n)))})),o.state={compareType:e.compareTypeProps||"<="},o}return(0,o.Z)(n,[{key:"render",value:function(){return d.createElement("div",null,this.renderPopover())}}]),n}(d.Component);(0,s.Z)(Z,"propTypes",{compareTypeProps:m().string,disabled:m().bool,onChange:m().func}),(0,s.Z)(Z,"defaultProps",{disabled:!1}),t.Z=Z},15951:function(e,t,n){var r=n(15671),a=n(43144),o=n(97326),c=n(60136),i=n(82963),l=n(61120),u=n(4942),s=(n(29093),n(16317)),p=n(94315),d=n.n(p),f=n(55609),m=n(67294),y=n(45697),v=n.n(y),h=n(28987),Z=n(8240);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var E=s.Z.Option,O=function(e){(0,c.Z)(n,e);var t=C(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"componentDidMount",(function(){a.fetchGeneratorOrderTypesWithCache(),a.onChangeSalaryIndexUnit(a.props)})),(0,u.Z)((0,o.Z)(a),"onChangeSalaryIndexUnit",(function(e){var t="".concat(e.platformCode).concat(e.tagList);a.private.isUpdateValue&&d().existy(e.value)&&d().not.empty(e.value)&&void 0!==e.orderTypes[t]&&d().existy(e.orderTypes[t].data)&&d().not.empty(e.orderTypes[t].data)&&(a.handleSalaryIndicatorsChange(e.value,e),a.private.isUpdateValue=!1)})),(0,u.Z)((0,o.Z)(a),"onChangeSalaryIndicators",(function(e){var t=a.props,n=t.onChange,r=t.orderTypes,o=t.platformCode,c=t.tagList,i="".concat(o).concat(c);if(void 0!==r[i]){var l=r[i].data.filter((function(t){return e===t.id}))[0],u="未匹配",s=-100,p="";void 0!==l&&(s=l.unit,u=l.name,p=l.unitText),n&&n(e,s,u,p)}})),(0,u.Z)((0,o.Z)(a),"handleSalaryIndicatorsChange",(function(e,t){var n=t.onChange,r=t.orderTypes,a=t.platformCode,o=t.tagList,c="".concat(a).concat(o);if(void 0!==r[c]){var i=r[c].data.filter((function(t){return e===t.id}))[0],l="未匹配",u=-100,s="";void 0!==i&&(u=i.unit,l=i.name,s=i.unitText),n&&n(e,u,l,s)}})),(0,u.Z)((0,o.Z)(a),"fetchGeneratorOrderTypesWithCache",(function(){var e=a.props.dataList;if(!d().array(e)){var t=a.props.orderTypes,n=a.private.orderTypeCacheControl,r=a.props,o=r.platformCode,c=r.tagList,i="".concat(o).concat(c),l=n.get(),u=t[i]?t[i].data:[];l[i]||(l[i]={lastTime:void 0},n.set(l));var s=l[i];void 0!==s.lastTime&&(new Date).getTime()-s.lastTime<5e3||u.length>0||(s.lastTime=(new Date).getTime(),n.set(l),a.fetchGeneratorOrderTypes())}})),(0,u.Z)((0,o.Z)(a),"fetchGeneratorOrderTypes",(function(){var e=a.props,t=e.platformCode,n=e.tagList;a.props.dispatch({type:"financeRulesGenerator/fetchGeneratorOrderTypes",payload:{platformCode:t,tags:n}})})),(0,u.Z)((0,o.Z)(a),"renderSalaryIndicators",(function(){var e=a.props,t=e.value,n=e.dataList,r=a.props,o=r.orderTypes,c=r.platformCode,i=r.tagList,l="".concat(c).concat(i),u=(d().array(n)?n:o[l]?o[l].data:[]).map((function(e,t){return m.createElement(E,{key:t,value:e.id},e.name)})),p=b(b({},a.props),{},{value:t,placeholder:"请选择",onChange:a.onChangeSalaryIndicators,showSearch:!0,optionFilterProp:"children"}),f=(0,Z.CE)(["dispatch","orderTypes","tagList","platformCode","dataList"],p);return m.createElement(s.Z,f,u)})),a.private={isUpdateValue:!0,orderTypeCacheControl:new h.Z("aoao.app.cache",{container:"orderType",useSession:!0})},a}return(0,a.Z)(n,[{key:"componentDidUpdate",value:function(e){e.value!==this.props.value&&this.onChangeSalaryIndexUnit(this.props)}},{key:"componentWillUnmount",value:function(){this.private.isUpdateValue=!0}},{key:"render",value:function(){return m.createElement("div",null,this.renderSalaryIndicators())}}]),n}(m.Component);(0,u.Z)(O,"propTypes",{platformCode:v().string,tagList:v().array,dataList:v().array,value:v().string}),t.Z=(0,f.connect)((function(e){return{orderTypes:e.financeRulesGenerator.orderTypes}}))(O)},7605:function(e,t,n){n(9070);var r=n(20924),a=n(93433),o=(n(26574),n(9676)),c=(n(36616),n(51368)),i=n(15671),l=n(43144),u=n(97326),s=n(60136),p=n(82963),d=n(61120),f=n(4942),m=(n(29093),n(16317)),y=n(93517),v=n.n(y),h=n(67294),Z=n(45697),g=n.n(Z),b=n(68628),C=n(6970),E=n(96036),O=n(3044),P=n(15951),k=n(80385),w=n(94412);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var a=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var R=m.Z.Option,D=k.blI.second,T=function(e){(0,s.Z)(n,e);var t=x(n);function n(e){var l;return(0,i.Z)(this,n),l=t.call(this,e),(0,f.Z)((0,u.Z)(l),"onChangeAutoDecOption",(function(e){var t=e.target.checked,n=l.props.computeLogic,r=l.props.form.setFieldsValue;!1===t&&(r({unitIndex:""}),r({decMinAmount:""}),r({decUnitMoney:""}),n.byOnceParams.decUnitAmount=1,l.setState({computeLogic:n}))})),(0,f.Z)((0,u.Z)(l),"onConfirmBtnDay",(function(e){var t=l.props.computeLogic,n=l.props.onConfirmBtnDay;t.byOnceParams.decUnitAmount=e,l.setState({computeLogic:t}),n&&n(e)})),(0,f.Z)((0,u.Z)(l),"onConfirmIncUnitAmount",(function(e){var t=l.props.computeLogic,n=l.props.onConfirmIncUnitAmount;t.byOrderUnitParams.incUnitAmount=e,l.setState({computeLogic:t}),n&&n(e)})),(0,f.Z)((0,u.Z)(l),"onChangeBizLogic",(function(e){var t=l.props.computeLogic;t.bizLogic=e;var n=l.props.form.setFieldsValue,r=l.state,a=r.totalFlag,o=r.singleFlag,c=r.salaryFlag;e===k.gI$.workLogicByOnce&&(t.byOnceParams.decUnitAmount=1,t.byOrderUnitParams.incUnitAmount=0,a=!0,o=!1,c=!1,n({minAmount:""}),n({orderVarCount:""}),n({incUnitMoney:""}),n({salaryIncMoney:""})),e===k.gI$.workLogicByOrderUnit&&(t.byOnceParams.decUnitAmount=0,t.byOrderUnitParams.incUnitAmount=1,a=!1,o=!0,c=!1,n({onceMoney:""}),n({autoDecOption:!1}),n({unitIndex:""}),n({decMinAmount:""}),n({salaryIncMoney:""}),n({decUnitMoney:""})),e===k.gI$.workLogicBySalaryBase&&(t.byOnceParams.decUnitAmount=0,t.byOrderUnitParams.incUnitAmount=0,a=!1,o=!1,c=!0,n({incUnitMoney:""}),n({decMinAmount:""}),n({autoDecOption:!1}),n({unitIndex:""}),n({salaryIncMoney:""}),n({decUnitMoney:""}),n({onceMoney:""}),n({minAmount:""}),n({orderVarCount:""})),l.setState({computeLogic:t,totalFlag:a,singleFlag:o,salaryFlag:c})})),(0,f.Z)((0,u.Z)(l),"renderRuleFrom",(function(){var e=l.props.form.getFieldDecorator,t=l.props,n=t.disabled,r=t.platformCode,a=l.props.matchFilters,o=[D],c=k.Y9g.description(a,"",!0),i=c.length>=0?c.length-1:0,u=v().get(c,"".concat(i,".groupFilters"),[]),s=[{label:"满足条件",layout:{labelCol:{span:2},wrapperCol:{span:17}},form:e("orderVars",{initialValue:{matchType:v().get(c,"".concat(i,".groupMatch"),k.Kbw.meetAll),rules:u||[{}]}})(h.createElement(C.Z,{tags:o,disabled:n,platformCode:r,layout:{indicators:6,symbol:3,num:3}}))}];return h.createElement(E.KP,{items:s,cols:1})})),(0,f.Z)((0,u.Z)(l),"renderTotalFore",(function(){var e=l.props.form,t=e.getFieldDecorator,n=e.getFieldValue,r=l.state.totalFlag,a=l.props,i=a.disabled,u=a.platformCode,s=a.computeLogic,p=s.byOnceParams?s.byOnceParams:{},d=p.autoDecOption,f=p.decUnitMoney>=0?k.fbc.exchangePriceToYuan(p.decUnitMoney):void 0,m=p.onceMoney>=0?k.fbc.exchangePriceToYuan(p.onceMoney):void 0,y=n("autoDecOption");return[{label:"一次性补贴",span:6,layout:{labelCol:{span:8},wrapperCol:{span:14}},form:t("onceMoney",{initialValue:m,rules:[{required:r,message:"请选择"}]})(h.createElement(c.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],disabled:i,placeholder:"请输入",step:.01,min:0,formatter:function(e){return"".concat(k.fbc.limitDecimals(e),"元")},parser:function(e){return k.fbc.limitDecimals(e.replace("元",""))}}))},{label:"",span:1,layout:{labelCol:{span:0},wrapperCol:{span:1,push:6}},form:t("autoDecOption",{valuePropName:"checked",initialValue:d})(h.createElement(o.Z,{disabled:i,onChange:l.onChangeAutoDecOption}))},{label:"",span:3,layout:{labelCol:{span:2},wrapperCol:{span:22}},form:t("unitIndex",{initialValue:p.unitIndex||void 0,rules:[{required:r&&y,message:"请选择"}]})(h.createElement(P.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],tagList:[D],platformCode:u,disabled:i||!y}))},{label:"不满足",span:4,layout:{labelCol:{span:10},wrapperCol:{span:14}},form:t("decMinAmount",{initialValue:p.decMinAmount,rules:[{required:r&&y,message:"请选择"}]})(h.createElement(c.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],disabled:i||!y,placeholder:"请输入",formatter:function(e){return"".concat(e,"天")},parser:function(e){return e.replace("天","")},precision:0}))},{label:h.createElement("span",null,"每",h.createElement(O.Z,{disabled:i||!y,num:p.decUnitAmount,sum:10,onConfirm:l.onConfirmBtnDay}),"天，扣"),span:5,layout:{labelCol:{span:12},wrapperCol:{span:12}},form:t("decUnitMoney",{initialValue:f,rules:[{required:r&&y,message:"请选择"}]})(h.createElement(c.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],placeholder:"请输入",step:.01,min:0,formatter:function(e){return"".concat(k.fbc.limitDecimals(e),"元")},parser:function(e){return k.fbc.limitDecimals(e.replace("元",""))},disabled:i||!y}))}]})),(0,f.Z)((0,u.Z)(l),"renderAccordingSingle",(function(){var e=l.props.form.getFieldDecorator,t=l.props,n=t.computeLogic,r=t.disabled,a=t.platformCode,o=l.state.singleFlag,i=n.byOrderUnitParams?n.byOrderUnitParams:{},u=i.incUnitMoney>=0?k.fbc.exchangePriceToYuan(i.incUnitMoney):void 0,s=i.incUnitAmount?i.incUnitAmount:1;return[{label:"单量统计指标",span:8,form:e("orderVarCount",{initialValue:i.unitIndex||void 0,rules:[{required:o,message:"请选择单量统计指标"}]})(h.createElement(P.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],tagList:[D],platformCode:a,disabled:r}))},{label:"最小单量(含)",span:6,form:e("minAmount",{initialValue:i.minAmount,rules:[{required:o,message:"请选择最小单量"}]})(h.createElement(c.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],disabled:r,placeholder:"请输入",formatter:function(e){return"".concat(e,"单")},parser:function(e){return e.replace("单","")},precision:0}))},{label:h.createElement("span",null,"每",h.createElement(O.Z,{disabled:r,num:s,sum:10,onConfirm:l.onConfirmIncUnitAmount}),"单补贴"),span:7,form:e("incUnitMoney",{initialValue:u,rules:[{required:o,message:"请选择"}]})(h.createElement(c.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],placeholder:"请输入",step:.01,min:0,formatter:function(e){return"".concat(k.fbc.limitDecimals(e),"元")},parser:function(e){return k.fbc.limitDecimals(e.replace("元",""))},disabled:r}))}]})),(0,f.Z)((0,u.Z)(l),"renderBaseSalary",(function(){var e=l.props.form.getFieldDecorator,t=l.props,n=t.computeLogic,r=t.disabled,a=l.state.salaryFlag,o=n.bySalaryBaseParams?n.bySalaryBaseParams:{};return[{label:"满足条件的骑士拥有底薪保护，底薪设定为",span:10,layout:{labelCol:{span:18},wrapperCol:{span:6}},form:e("salaryIncMoney",{initialValue:o.salaryIncMoney>=0?k.fbc.exchangePriceToYuan(o.salaryIncMoney):void 0,rules:[{required:a,message:"请选择"}]})(h.createElement(c.Z,{className:w.Z["app-comp-finance-attendance-rule-from"],placeholder:"请输入",step:.01,min:0,formatter:function(e){return"".concat(k.fbc.limitDecimals(e),"元")},parser:function(e){return k.fbc.limitDecimals(e.replace("元",""))},disabled:r}))}]})),(0,f.Z)((0,u.Z)(l),"renderTopTit",(function(){return[{label:"",span:18,layout:{labelCol:{span:0},wrapperCol:{span:24}},form:h.createElement("div",{className:w.Z["app-comp-finance-top-tip"]},h.createElement(b.Z,{className:w.Z["icon-info"]}),h.createElement("span",{className:w.Z["app-comp-finance-attendance-rule-from-toptip"]},"当单量提成大于底薪补贴时，实际补贴为0。单量提成小于底薪补贴时，实际补贴为【底薪补贴 - 单量提成】"))}]})),(0,f.Z)((0,u.Z)(l),"renderBaseFrom",(function(){var e=l.props.form.getFieldDecorator,t=l.props,n=t.computeLogic,r=t.disabled,o=n.bizLogic||[k.gI$.workLogicByOnce],c=[{label:"补贴方式",span:6,form:e("bizLogic",{initialValue:o[0],rules:[{required:!0,message:"请选择补贴方式"}]})(h.createElement(m.Z,{placeholder:"请选择补贴方式",onChange:l.onChangeBizLogic,disabled:r,className:w.Z["app-comp-finance-attendance-rule-from"]},h.createElement(R,{value:k.gI$.workLogicByOnce},k.gI$.description(k.gI$.workLogicByOnce)),h.createElement(R,{value:k.gI$.workLogicByOrderUnit},k.gI$.description(k.gI$.workLogicByOrderUnit)),h.createElement(R,{value:k.gI$.workLogicBySalaryBase},k.gI$.description(k.gI$.workLogicBySalaryBase))))}],i=[];!0===o.includes(k.gI$.workLogicByOnce)&&i.push.apply(i,(0,a.Z)(l.renderTotalFore())),!0===o.includes(k.gI$.workLogicByOrderUnit)&&i.push.apply(i,(0,a.Z)(l.renderAccordingSingle())),!0===o.includes(k.gI$.workLogicBySalaryBase)&&(i.push.apply(i,(0,a.Z)(l.renderBaseSalary())),c.push.apply(c,(0,a.Z)(l.renderTopTit())));return h.createElement("div",null,h.createElement(E.KP,{items:c,cols:4,layout:{labelCol:{span:8},wrapperCol:{span:16}}}),h.createElement(E.KP,{items:i}))})),(0,f.Z)((0,u.Z)(l),"renderPayrollMark",(function(){var e=l.props.form.getFieldDecorator,t=l.props,n=t.disabled,a=[{label:"结算单对应列",layout:{labelCol:{span:8},wrapperCol:{span:16}},form:e("payrollMark",{initialValue:t.payrollMark})(h.createElement(r.Z,{placeholder:"请输入结算单对应列(可选)",disabled:n}))}];return h.createElement("div",null,h.createElement(E.KP,{items:a,cols:3}))})),l.state={totalFlag:!0,singleFlag:!0,salaryFlag:!0},l}return(0,l.Z)(n,[{key:"render",value:function(){return h.createElement("div",null,this.renderRuleFrom(),this.renderBaseFrom(),this.renderPayrollMark())}}]),n}(h.Component);(0,f.Z)(T,"propTypes",{computeLogic:g().object,matchFilters:g().array,payrollMark:g().string}),(0,f.Z)(T,"defaultProps",{computeLogic:{},matchFilters:[],payrollMark:""}),t.Z=T},33515:function(e,t,n){var r=n(93433),a=(n(51838),n(48086)),o=n(15671),c=n(43144),i=n(97326),l=n(60136),u=n(82963),s=n(61120),p=n(4942),d=n(94315),f=n.n(d),m=n(93517),y=n.n(m),v=n(55609),h=n(67294),Z=n(66939),g=(n(98703),n(96036)),b=n(93554),C=n(20006),E=n(7605),O=n(49113),P=n(80385);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var R=P.blI.second,D=function(e){(0,l.Z)(n,e);var t=x(n);function n(e){var c;return(0,o.Z)(this,n),c=t.call(this,e),(0,p.Z)((0,i.Z)(c),"componentDidMount",(function(){var e={step:R,ruleCollectionId:c.props.ruleCollectionId};c.props.dispatch({type:"financeRulesGenerator/fetchRulesGeneratorList",payload:e})})),(0,p.Z)((0,i.Z)(c),"onClickDelete",(function(e){var t={id:e.id,onSuccessCallback:c.onSuccessCallback};c.props.dispatch({type:"financeRulesGenerator/deleteFinanceRulesGeneratorList",payload:t})})),(0,p.Z)((0,i.Z)(c),"onClickMoveUp",(function(e,t,n){var r={upId:e.id,downId:n[t-1].id,onSuccessCallback:c.onSuccessCallback};c.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:r})})),(0,p.Z)((0,i.Z)(c),"onClickMoveDown",(function(e,t,n){var r={upId:e.id,downId:n[t+1].id,onSuccessCallback:c.onSuccessCallback};c.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:r})})),(0,p.Z)((0,i.Z)(c),"onCheckAttendanceIndexValueRules",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(f().not.array(e))return a.ZP.error("满足条件的数据格式错误");var t=!1;return e.forEach((function(e){if(!f().empty(e))return!0===Object.keys(e).some((function(t){return f().not.existy(e[t])||f().empty(e[t])}))?(t=!0,!0):void 0;t=!0})),t})),(0,p.Z)((0,i.Z)(c),"onSubmit",(function(e,t,n,r,o){var l=e.matchFilters,u=e.computeLogic,s=u.byOnceParams.decUnitAmount,p=u.byOrderUnitParams.incUnitAmount;e.form.validateFields((function(t,n){if(!t){var r=n.orderVars,u=c.onCheckAttendanceIndexValueRules(r.rules);if(f().empty(r.rules[0])||!0===u)return a.ZP.error("满足条件请填写完整");var d=w(w({matchFilters:l},n),{},{id:e.id,platformCode:c.props.platformCode,step:R,decUnitAmount:s,incUnitAmount:p,onSuccessCallback:c.onSuccessCallback.bind((0,i.Z)(c),o)});c.props.dispatch({type:"financeRulesGenerator/createFinanceRulesGeneratorListOne",payload:d})}}))})),(0,p.Z)((0,i.Z)(c),"onSuccessCallback",(function(e){"function"==typeof e&&e();var t={step:R,ruleCollectionId:c.props.ruleCollectionId};c.props.dispatch({type:"financeRulesGenerator/fetchRulesGeneratorList",payload:t})})),(0,p.Z)((0,i.Z)(c),"getUnitByIndex",(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<t.length;n+=1)if(t[n].id===e)return t[n].unit})),(0,p.Z)((0,i.Z)(c),"renderArrayByConstans",(function(e,t){return!Array.isArray(e)||e.length<=0?"--":e.reduce((function(e,n,r){return 0===r?"".concat(e).concat(t.description(n)):"".concat(e,",").concat(t.description(n))}),"")})),(0,p.Z)((0,i.Z)(c),"renderTitle",(function(e){var t=y().get(e,"matchFilters",[]),n=P.Y9g.description(t,"当月在离职"),r=f().existy(n)&&f().not.empty(n)?n:[P.IWL.all],a=[{label:"骑士分类",form:P.PN2.description(P.PN2.all)},{label:"骑士标签",form:P.JA0.description(P.JA0.all)},{label:"当月在离职",form:c.renderArrayByConstans(r,P.jHs)}];return h.createElement(g.KP,{items:a,cols:4,layout:{labelCol:{span:10},wrapperCol:{span:12}}})})),(0,p.Z)((0,i.Z)(c),"renderContent",(function(e){var t=e,n=c.props,a=n.orderTypes,o=n.platformCode,i=a["".concat(o).concat(R)]||{},l=y().get(t,"matchFilters",[]),u=P.Y9g.description(l,"",!0),s=y().get(u,"0.groupMatch",""),p=y().get(u,"0.groupFilters",[]).map((function(e){var t=c.getUnitByIndex(e.index,i.data);return{name:e.varName,index:e.index,symbol:e.symbol,num:P.fbc.dynamicExchange(e.value,t,!1),unit:t}})),d={payrollMark:t.payrollMark,computeLogic:t.computeLogic,matchFilters:[].concat((0,r.Z)(t.matchFilters),[{groupMatch:s,groupFilters:p}]),form:t.form,disabled:t.isDisabled,platformCode:c.props.platformCode};return h.createElement(E.Z,d)})),(0,p.Z)((0,i.Z)(c),"renderData",(function(e,t,n){var r={data:e,index:t,type:c.props.type,dataSource:n,onRenderTitle:c.renderTitle,onRenderContent:c.renderContent,onClickDelete:c.onClickDelete,onClickMoveUp:c.onClickMoveUp,onClickMoveDown:c.onClickMoveDown,onSubmit:c.onSubmit};return h.createElement(C.Z,r)})),c.state={},c}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.state.title,t=this.props,n=t.type,r=t.ruleCollectionId,a=y().get(this.props.financeRulesGeneratorList,"".concat(r,".").concat(R,".data"),[]);return h.createElement(g.IT,{title:e},h.createElement(O.Z,{ruleCollectionId:r,type:n,ruleType:P.cc_.attendance}),h.createElement(b.Z,{dataSource:a,renderData:this.renderData}))}}]),n}(h.Component);t.Z=(0,v.connect)((function(e){return{financeRulesGeneratorList:e.financeRulesGenerator.financeRulesGeneratorList,knightTags:e.financeConfigTags.knightTags,orderTypes:e.financeRulesGenerator.orderTypes}}))(Z.Z.create()(D))},39513:function(e,t,n){n.d(t,{Z:function(){return O}});n(89032);var r=n(15746),a=(n(36616),n(51368)),o=(n(26574),n(9676)),c=(n(9070),n(20924)),i=n(15671),l=n(97326),u=n(60136),s=n(82963),p=n(61120),d=n(4942),f=n(45697),m=n.n(f),y=n(67294),v=n(96036),h=n(15951),Z=n(80385),g="K_SCJmdmaOzY17dsk96z",b="NOwMtPUtGwejc_za6YMS";function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var E=function(e){(0,u.Z)(n,e);var t=C(n);function n(e){var u;return(0,i.Z)(this,n),u=t.call(this,e),(0,d.Z)((0,l.Z)(u),"componentDidMount",(function(){var e=u.props.onRef;e&&e((0,l.Z)(u))})),(0,d.Z)((0,l.Z)(u),"onChangeSalaryIndicators",(function(e,t,n){u.setState({indicatorName:n})})),(0,d.Z)((0,l.Z)(u),"onResetalaryIndicators",(function(){u.setState({indicatorName:""})})),(0,d.Z)((0,l.Z)(u),"onChangeCheckboxDayFlag",(function(e){var t=e.target.checked,n=u.props.form.setFieldsValue,r=u.state.indicatorName;!1===t&&(n({unitIndex:void 0}),n({unitAmount:void 0}),n({unitMoney:""}),r=""),u.setState({indicatorName:r})})),(0,d.Z)((0,l.Z)(u),"onChangeCheckboxMonthFlag",(function(e){var t=e.target.checked,n=u.props.form.setFieldsValue;!1===t&&n({decMoney:void 0})})),(0,d.Z)((0,l.Z)(u),"renderPayrollMark",(function(){var e=u.props.form.getFieldDecorator,t=u.props.disabled,n=[{label:"结算单对应列",form:e("payrollMark",{initialValue:u.props.payrollMark})(y.createElement(c.Z,{placeholder:"请输入结算单对应列(可选)",disabled:t}))}];return y.createElement("div",{className:g},y.createElement(v.KP,{items:n,cols:4}))})),(0,d.Z)((0,l.Z)(u),"renderDayDeduction",(function(){var e=u.props.form,t=e.getFieldDecorator,n=e.getFieldValue,c=u.props,i=c.tags,l=c.platformCode,s=c.disabled,p=c.computeLogic,d=u.state.indicatorName,f=p.params||{},m=f.unitIndex,g=f.unitMoney,C=f.unitAmount,E=-1!==(p.bizLogic?p.bizLogic:[]).indexOf("dec_logic_by_day"),O=n("dayFlag"),P=[{label:"",form:t("dayFlag",{valuePropName:"checked",initialValue:E})(y.createElement(o.Z,{disabled:s,onChange:u.onChangeCheckboxDayFlag},"按天扣款"))},{label:"统计指标",span:5,form:t("unitIndex",{initialValue:m||void 0,rules:[{required:O,message:"请选择统计指标"}]})(y.createElement(h.Z,{className:b,disabled:!O||s,tagList:[i],onChange:u.onChangeSalaryIndicators,platformCode:l}))},{label:"最小天数",span:5,form:t("unitAmount",{initialValue:C,rules:[{required:O,message:"请选择最小天数"}]})(y.createElement(a.Z,{className:b,precision:0,min:1,max:31,disabled:!O||s,placeholder:"请输入",formatter:function(e){return"".concat(e,"天")},parser:function(e){return e.replace("天","")}}))},{label:y.createElement("span",null,"保险扣款 = ",d," X"),colon:!1,span:10,layout:{labelCol:{span:14},wrapperCol:{span:10}},form:t("unitMoney",{initialValue:g,rules:[{required:O,message:"请选择"}]})(y.createElement(a.Z,{placeholder:"请输入",step:.01,min:0,disabled:!O||s,formatter:function(e){return"".concat(Z.fbc.limitDecimals(e),"元")},parser:function(e){return Z.fbc.limitDecimals(e.replace("元",""))}}))}];return y.createElement(r.Z,null,y.createElement(v.KP,{items:P,cols:6}))})),(0,d.Z)((0,l.Z)(u),"renderMonthDeduction",(function(){var e=u.props.form,t=e.getFieldDecorator,n=e.getFieldValue,r=u.props.disabled,c=u.props.computeLogic,i=(c.params||{}).decMoney,l=-1!==(c.bizLogic?c.bizLogic:[]).indexOf("dec_logic_by_once"),s=n("monthFlag");return y.createElement("div",null,t("monthFlag",{valuePropName:"checked",initialValue:l})(y.createElement(o.Z,{disabled:r,onChange:u.onChangeCheckboxMonthFlag},"按月固定扣款，扣款")),t("decMoney",{initialValue:i})(y.createElement(a.Z,{placeholder:"请输入",step:.01,min:0,disabled:r||!s,formatter:function(e){return"".concat(Z.fbc.limitDecimals(e),"元")},parser:function(e){return Z.fbc.limitDecimals(e.replace("元",""))}})))})),(0,d.Z)((0,l.Z)(u),"render",(function(){return y.createElement("div",null,u.renderDayDeduction(),u.renderMonthDeduction(),u.renderPayrollMark())})),u.state={indicatorName:""},u}return n}(y.Component);(0,d.Z)(E,"propTypes",{computeLogic:m().object,payrollMark:m().string}),(0,d.Z)(E,"defaultProps",{computeLogic:{}});var O=E},88780:function(e,t,n){n(51838);var r=n(48086),a=n(15671),o=n(43144),c=n(97326),i=n(60136),l=n(82963),u=n(61120),s=n(4942),p=n(94315),d=n.n(p),f=n(93517),m=n.n(f),y=n(55609),v=n(67294),h=n(96036),Z=n(93554),g=n(20006),b=n(49113),C=n(39513),E=n(80385);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var w=E.blI.forth,x=function(e){(0,i.Z)(n,e);var t=k(n);function n(e){var o;return(0,a.Z)(this,n),o=t.call(this,e),(0,s.Z)((0,c.Z)(o),"componentDidMount",(function(){var e={step:w,ruleCollectionId:o.props.ruleCollectionId};o.props.dispatch({type:"financeRulesGenerator/fetchRulesGeneratorList",payload:e})})),(0,s.Z)((0,c.Z)(o),"onClickDelete",(function(e){var t={id:e.id,onSuccessCallback:o.onSuccessCallback};o.props.dispatch({type:"financeRulesGenerator/deleteFinanceRulesGeneratorList",payload:t})})),(0,s.Z)((0,c.Z)(o),"onClickMoveUp",(function(e,t,n){var r={upId:e.id,downId:n[t-1].id,onSuccessCallback:o.onSuccessCallback};o.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:r})})),(0,s.Z)((0,c.Z)(o),"onClickMoveDown",(function(e,t,n){var r={upId:e.id,downId:n[t+1].id,onSuccessCallback:o.onSuccessCallback};o.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:r})})),(0,s.Z)((0,c.Z)(o),"onSubmit",(function(e,t,n,a,i){var l=e.form.validateFieldsAndScroll,u=e.matchFilters;l((function(t,n){if(!t){if(!0===n.monthFlag&&(d().not.existy(n.decMoney)||d().empty(n.decMoney)))return r.ZP.error("操作失败，扣款金额不能为空");var a=P(P({},n),{},{id:e.id,matchFilters:u,onSuccessCallback:o.onSuccessCallback.bind((0,c.Z)(o),i),step:w});o.props.dispatch({type:"financeRulesGenerator/createFinanceRulesGeneratorListOne",payload:a})}}))})),(0,s.Z)((0,c.Z)(o),"onSuccessCallback",(function(e){"function"==typeof e&&e();var t={step:w,ruleCollectionId:o.props.ruleCollectionId};o.props.dispatch({type:"financeRulesGenerator/fetchRulesGeneratorList",payload:t})})),(0,s.Z)((0,c.Z)(o),"renderArray",(function(e,t){var n="--";return e.forEach((function(e){e.varName===t&&(n=e.value[0])})),n})),(0,s.Z)((0,c.Z)(o),"renderTitle",(function(e){var t=e.matchFilters,n=[{label:"分类",form:E.yuA.description(o.renderArray(t,"管理扣款分类"))},{label:"保险扣款",form:E.TLO.description(Number(o.renderArray(t,"保险扣款项")))},{label:"险种",form:o.renderArray(t,"险种")}];return v.createElement(h.KP,{items:n,cols:3,layout:{labelCol:{span:10},wrapperCol:{span:12}}})})),(0,s.Z)((0,c.Z)(o),"renderContent",(function(e){var t=e.computeLogic||{},n=e.matchFilters,r=e.payrollMark,a=t.params||{},c={cols:3,tags:o.props.tags,platformCode:o.props.platformCode,form:e.form,computeLogic:P(P({},t),{},{params:P(P({},t.params),{},{unitMoney:E.fbc.exchangePriceToYuan(a.unitMoney||""),decMoney:E.fbc.exchangePriceToYuan(a.decMoney||"")})}),matchFilters:n,disabled:e.isDisabled,payrollMark:r};return v.createElement(C.Z,c)})),(0,s.Z)((0,c.Z)(o),"renderData",(function(e,t,n){var r={data:e,index:t,dataSource:n,type:o.props.type,onRenderTitle:o.renderTitle,onRenderContent:o.renderContent,onClickDelete:o.onClickDelete,onClickMoveUp:o.onClickMoveUp,onClickMoveDown:o.onClickMoveDown,onSubmit:o.onSubmit};return v.createElement(g.Z,r)})),o.state={},o}return(0,o.Z)(n,[{key:"render",value:function(){var e=this.state.title,t=this.props,n=t.type,r=t.ruleCollectionId,a=m().get(this.props.financeRulesGeneratorList,"".concat(r,".").concat(w,".data"),[]);return v.createElement(h.IT,{title:e},v.createElement(b.Z,{ruleCollectionId:r,type:n,ruleType:E.cc_.management}),v.createElement(Z.Z,{dataSource:a,renderData:this.renderData}))}}]),n}(v.Component);t.Z=(0,y.connect)((function(e){return{financeRulesGeneratorList:e.financeRulesGenerator.financeRulesGeneratorList}}))(x)},85965:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(15671),a=n(43144),o=n(97326),c=n(60136),i=n(82963),l=n(61120),u=n(4942),s=n(45697),p=n.n(s),d=n(55609),f=n(67294),m=(n(52560),n(71577)),y=(n(36616),n(51368)),v=(n(51838),n(48086)),h=n(93517),Z=n.n(h),g=n(1058),b=n(49101),C=n(96036),E=n(80385),O=n(3044),P=n(88472),k=n(36313);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var x={openCreate:"openCreate",openDelete:"openDelete"},R=function(e){(0,c.Z)(n,e);var t=w(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"onChange",(function(e){var t=a.props.value.key,n=a.props.onChange;n&&n(t,e)})),(0,u.Z)((0,o.Z)(a),"onCreate",(function(){var e=a.props.value,t=e.min,n=e.max,r=a.props.value.key,o=a.props.onCreate;return n?t>=n?v.ZP.error("结束单量应大于起始单量"):void(o&&o(r)):v.ZP.error("请输入结束单量")})),(0,u.Z)((0,o.Z)(a),"onDelete",(function(){var e=a.props.onDelete,t=a.props.value.key;e&&e(t)})),(0,u.Z)((0,o.Z)(a),"getOrderTypeAttr",(function(e){var t=a.props.orderTypes,n=a.props.value.platformCode,r=Z().get(t,"".concat(n).concat(E.blI.first,".data"),[]),o="",c="",i=2;return r.forEach((function(t){t.id===e&&(o=t.name,c=t.unitText,i=t.unit)})),{orderTypeName:o,orderTypeUnit:c,orderTypeUnitCode:i}})),(0,u.Z)((0,o.Z)(a),"changeUnitAmount",(function(e){a.onChange({unitAmount:e})})),(0,u.Z)((0,o.Z)(a),"changeCompareType",(function(e){a.onChange({symbolMax:e})})),(0,u.Z)((0,o.Z)(a),"changemax",(function(e){a.onChange({max:e})})),(0,u.Z)((0,o.Z)(a),"changeFavourableNum",(function(e){""!==e?a.onChange({money:e}):a.onChange({money:0})})),(0,u.Z)((0,o.Z)(a),"changeNumberDigits",(function(e){return"".concat(e)==="".concat(E.fbc.timeYear)||"".concat(e)==="".concat(E.fbc.timeMonth)||"".concat(e)==="".concat(E.fbc.timeDay)||"".concat(e)==="".concat(E.fbc.customOrder)||"".concat(e)==="".concat(E.fbc.weightG)||"".concat(e)==="".concat(E.fbc.distanceM)||"".concat(e)==="".concat(E.fbc.customStar)?0:"".concat(e)==="".concat(E.fbc.mathPercent)||"".concat(e)==="".concat(E.fbc.priceYuan)?2:"".concat(e)==="".concat(E.fbc.weightKG)||"".concat(e)==="".concat(E.fbc.distanceKM)?3:0})),a.state={},a}return(0,a.Z)(n,[{key:"render",value:function(){var e=this,t=this.props.value,n=t.min,r=t.index,a=t.max,o=t.symbolMax,c=t.symbolMin,i=t.unitAmount,l=t.money,u=t.extractType,s=t.isDisabled,p=this.props.value.config,d="inf"===a,v=this.getOrderTypeAttr(r).orderTypeUnitCode,h={disabled:s,compareTypeProps:o,onChange:this.changeCompareType},Z=[{key:1,offset:1,span:1,layout:{labelCol:{span:0},wrapperCol:{span:24}},form:f.createElement("span",null,"".concat(n||0).concat(this.getOrderTypeAttr(r).orderTypeUnit))},{key:2,span:1,form:f.createElement("span",null,c)},{key:3,span:3,layout:{wrapperCol:{span:24}},form:f.createElement("span",null,this.getOrderTypeAttr(r).orderTypeName)},{key:4,span:1,layout:{wrapperCol:{span:24}},form:d?f.createElement("div",{className:k.Z["app-comp-finance-generator-order-common-item-from"]},f.createElement("span",null,"<=")):f.createElement(P.Z,h)},{key:5,label:"",span:2,form:d?"无穷大":f.createElement(y.Z,{min:n,max:"".concat(v)==="".concat(E.fbc.customStar)?5:1/0,value:a||0,onChange:this.changemax,disabled:s,precision:this.changeNumberDigits(v),formatter:function(t){return"".concat(t).concat(e.getOrderTypeAttr(r).orderTypeUnit)},parser:function(t){return t.replace(e.getOrderTypeAttr(r).orderTypeUnit,"")}})},{key:6,label:f.createElement("span",null,"".concat(u)==="".concat(E.r_$.segmentation)||"0-".concat(d?"无穷大":"".concat(a||0,"单")),"区间内每",f.createElement(O.Z,{disabled:s,num:i||1,sum:10,onConfirm:this.changeUnitAmount}),"单"),span:5,layout:{labelCol:{span:15},wrapperCol:{span:9}},form:f.createElement(y.Z,{min:0,value:l,onChange:this.changeFavourableNum,disabled:s,precision:2,formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")}})}];return p.includes(x.openCreate)&&p.includes(x.openDelete)?Z.push({key:7,span:3,form:f.createElement("div",null,f.createElement(m.Z,{className:k.Z["app-comp-finance-generator-order-common-item-button"],onClick:this.onDelete,shape:"circle",icon:f.createElement(g.Z,null),disabled:s}),d||f.createElement(m.Z,{onClick:this.onCreate,shape:"circle",icon:f.createElement(b.Z,null),disabled:s}))}):p.includes(x.openCreate)&&!d?Z.push({key:8,span:3,form:f.createElement("div",null,f.createElement(m.Z,{onClick:this.onCreate,shape:"circle",icon:f.createElement(b.Z,null),disabled:s}))}):p.includes(x.openDelete)&&Z.push({key:9,span:3,form:f.createElement("div",null,f.createElement(m.Z,{onClick:this.onDelete,shape:"circle",icon:f.createElement(g.Z,null),disabled:s}))}),f.createElement("div",null,f.createElement(C.KP,{items:Z,cols:8}))}}]),n}(f.Component);(0,u.Z)(R,"propTypes",{value:p().object,extractType:p().string,onChange:p().func,onCreate:p().func,onDelete:p().func,orderTypes:p().object}),R.itemsConfig=x;var D=R;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var j=D.itemsConfig,I=function(e){(0,c.Z)(n,e);var t=S(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"onChange",(function(e){var t=a.props.onChange;t&&t(e)})),(0,u.Z)((0,o.Z)(a),"onChangeItem",(function(e,t){var n=(a.props.value||a.ruleArr).map((function(n,r){return r===e?M(M({},n),t):"max"===Object.keys(t)[0]&&r===e+1?t.max?M(M({},n),{},{min:t.max}):M(M({},n),{},{min:0}):n}));a.onChange(n)})),(0,u.Z)((0,o.Z)(a),"onCreateItem",(function(e){var t=a.props.value,n=t[e].max,r=t[e].max+1;t.splice(e+1,0,{min:n,symbolMin:"<",index:t[e].index||"",symbolMax:"<=",max:r,money:0,unitAmount:1}),t.splice(t.length-1,1,M(M({},t[t.length-1]),{},{min:r})),a.onChange(t)})),(0,u.Z)((0,o.Z)(a),"onDeleteItem",(function(e){var t=a.props.value;0===e?t[e+1].min=0:(t[e-1].max=t[e].max,t[e-1].symbolMax=t[e].symbolMax),t.splice(e,1),a.onChange(t)})),(0,u.Z)((0,o.Z)(a),"renderExtractRule",(function(){var e=a.props,t=e.indexId,n=e.orderTypes,r=a.props.value||a.ruleArr,o=a.props.value||a.ruleArr;t&&(o=r.map((function(e){return M(M({},e),{},{index:t})})));var c=a.props,i=c.extractType,l=c.isDisabled,u=c.platformCode;return o.forEach((function(e,t){0!==t&&(e.min=o[t-1].max),"<"==="".concat(e.symbolMax)?o[t+1].symbolMin="<=":o[t+1]&&(o[t+1].symbolMin="<")})),f.createElement("div",null,o.map((function(e,t,r){var o=r.length,c=[];2===o&&1!==t?c.push(j.openCreate):t===o-2?c.push(j.openCreate,j.openDelete):t!==o-1&&c.push(j.openDelete);var s=Object.assign({key:t},e,{config:c,extractType:i,isDisabled:l,platformCode:u});return f.createElement(D,{key:t,value:s,orderTypes:n,onCreate:a.onCreateItem,onDelete:a.onDeleteItem,onChange:a.onChangeItem})})))})),a.state={},e.value||a.onChange(a.ruleArr),a.ruleArr=[{min:0,symbolMin:"<",index:"",symbolMax:"<=",max:0,unitAmount:1,money:0},{min:0,symbolMin:"<",index:"",symbolMax:"<=",max:"inf",unitAmount:1,money:0}],a}return(0,a.Z)(n,[{key:"render",value:function(){return f.createElement("div",null,this.renderExtractRule())}}]),n}(f.Component);(0,u.Z)(I,"propTypes",{value:p().array,extractType:p().string,isDisabled:p().bool,onChange:p().func,platformCode:p().string,indexId:p().string}),(0,u.Z)(I,"defaultProps",{});var A=(0,d.connect)((function(e){return{orderTypes:e.financeRulesGenerator.orderTypes}}))(I)},32430:function(e,t,n){n(9070);var r=n(20924),a=(n(55295),n(69713)),o=(n(51838),n(48086)),c=n(15671),i=n(43144),l=n(97326),u=n(60136),s=n(82963),p=n(61120),d=n(4942),f=(n(36037),n(47933)),m=n(94315),y=n.n(m),v=n(55609),h=n(45697),Z=n.n(h),g=n(93517),b=n.n(g),C=n(67294),E=n(1870),O=n(96036),P=n(80385),k=n(85965),w=n(49113),x=n(93554),R=n(20006),D=n(36313);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var j=f.ZP.Group,I=function(e){(0,u.Z)(n,e);var t=S(n);function n(e){var i;return(0,c.Z)(this,n),i=t.call(this,e),(0,d.Z)((0,l.Z)(i),"componentDidMount",(function(){i.fetchOrderTypes(),i.fetchListData()})),(0,d.Z)((0,l.Z)(i),"onClickDelete",(function(e){var t={id:e.id,onSuccessCallback:i.fetchListData};i.props.dispatch({type:"financeRulesGenerator/deleteFinanceRulesGeneratorList",payload:t})})),(0,d.Z)((0,l.Z)(i),"onClickMoveUp",(function(e,t,n){var r={upId:e.id,downId:n[t-1].id,onSuccessCallback:i.fetchListData};i.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:r})})),(0,d.Z)((0,l.Z)(i),"onClickMoveDown",(function(e,t,n){var r={upId:e.id,downId:n[t+1].id,onSuccessCallback:i.fetchListData};i.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:r})})),(0,d.Z)((0,l.Z)(i),"onSubmit",(function(e,t,n,r,a){var c=r.rangeTable;if(!c)return o.ZP.error("请检查方案提成规则（结束单量应大于起始单量）");for(var u=0;u<c.length;u++){if(c[u].max-c[u].min<=0||!c[u].max)return o.ZP.error("请检查方案提成规则（结束单量应大于起始单量）");if(u!==c.length-1&&0!==u&&c[u].max-c[u-1].max<=0)return o.ZP.error("请检查方案提成规则区间设置的合理性（每个区间规则的第二个值必须大于前一个规则区间第二个值）")}var s=e.matchFilters,p={id:e.id,step:P.blI.first,computeLogic:r,platformCode:i.props.platformCode,matchFilters:s,payrollMark:r.payrollMark,onSuccessCallback:i.fetchListData.bind((0,l.Z)(i),a)};i.props.dispatch({type:"financeRulesGenerator/createFinanceRulesGeneratorListOne",payload:p})})),(0,d.Z)((0,l.Z)(i),"getOrderTypeName",(function(e){var t,n=i.props,r=n.orderTypes,a=n.platformCode;return b().get(r,"".concat(a).concat(P.blI.first,".data"),[]).forEach((function(n){n.id===e&&(t=n.name)})),t})),(0,d.Z)((0,l.Z)(i),"fetchListData",(function(e){var t=i.props.ruleCollectionId;"function"==typeof e&&e(),i.props.dispatch({type:"financeRulesGenerator/fetchRulesGeneratorList",payload:{ruleCollectionId:t,step:P.blI.first}})})),(0,d.Z)((0,l.Z)(i),"fetchOrderTypes",(function(){var e={platformCode:i.props.platformCode,tags:[P.blI.first]};i.props.dispatch({type:"financeRulesGenerator/fetchGeneratorOrderTypes",payload:e})})),(0,d.Z)((0,l.Z)(i),"renderArrayByConstans",(function(e,t){return!Array.isArray(e)||e.length<=0?"--":e.reduce((function(e,n,r){return 0===r?"".concat(e).concat(t.description(n)):"".concat(e,",").concat(t.description(n))}),"")})),(0,d.Z)((0,l.Z)(i),"renderTitle",(function(e){var t=b().get(e,"matchFilters",[]),n=b().get(e,"computeLogic.params",{}),r=b().get(n,"rangeTable",[]),a=P.Y9g.description(t,"当月在离职"),o=y().existy(a)&&y().not.empty(a)?a:[P.IWL.all],c=P.Y9g.description(t,"站点评星"),l=y().existy(c)&&y().not.empty(c)?c:[P.FXi.all],u=[{label:"结算指标",form:i.getOrderTypeName(r[0].index)},{label:"骑士分类",form:P.PN2.description(P.PN2.all)},{label:"骑士标签",form:P.JA0.description(P.JA0.all)},{label:"当月在离职",form:i.renderArrayByConstans(o,P.IWL)}],s=[{label:"站点评星",style:{marginLeft:6},form:i.renderArrayByConstans(l,P.FXi)}];return C.createElement("div",null,C.createElement(O.KP,{items:u,cols:4,layout:{labelCol:{span:9},wrapperCol:{span:15}}}),C.createElement(O.KP,{items:s,cols:1,layout:{labelCol:{span:2},wrapperCol:{span:22}}}))})),(0,d.Z)((0,l.Z)(i),"renderContent",(function(e){var t,n=i.props.platformCode,o=e.computeLogic.params,c=o.type,l=o.rangeTable,u=e.isDisabled,s=e.payrollMark,p=e.form.getFieldDecorator,d=e.form.getFieldsValue().type||"".concat(c);t="".concat(d)==="".concat(P.r_$.change)?l.map((function(e){return M(M({},e),{},{money:P.fbc.exchangePriceToYuan(e.money),min:0})})):l.map((function(e){return M(M({},e),{},{money:P.fbc.exchangePriceToYuan(e.money)})}));var m=[{label:"方案提成",form:p("type",{initialValue:"".concat(c),rules:[{required:!0,message:"请选择方案提成"}]})(C.createElement(j,{disabled:u},C.createElement(f.ZP,{value:"".concat(P.r_$.segmentation)},P.r_$.description(P.r_$.segmentation),C.createElement(a.Z,{title:"单段金额=各区间段单量x单价，总值为各区间段相加"},C.createElement(E.Z,{className:D.Z["app-comp-finance-generator-order-from-tooltip"]}))),C.createElement(f.ZP,{value:"".concat(P.r_$.change)},P.r_$.description(P.r_$.change),C.createElement(a.Z,{title:"单段金额=区间段单量x单价，总值为单量符合的单段金额"},C.createElement(E.Z,{className:D.Z["app-comp-finance-generator-order-from-tooltip"]})))))}],y=[{label:"结算单对应列",layout:{labelCol:{span:6},wrapperCol:{span:12}},form:p("payrollMark",{initialValue:s})(C.createElement(r.Z,{placeholder:"可修改结算单对应列",disabled:u}))}],v={labelCol:{span:6},wrapperCol:{span:18}};return C.createElement("div",null,C.createElement(O.KP,{items:m,cols:3,layout:v}),p("rangeTable",{initialValue:t})(C.createElement(k.Z,{extractType:d,isDisabled:u,platformCode:n})),C.createElement(O.KP,{items:y,cols:3,layout:v}))})),(0,d.Z)((0,l.Z)(i),"renderData",(function(e,t,n){var r={data:e,index:t,dataSource:n,type:i.props.type,onRenderTitle:i.renderTitle,onRenderContent:i.renderContent,onClickDelete:i.onClickDelete,onClickMoveUp:i.onClickMoveUp,onClickMoveDown:i.onClickMoveDown,onSubmit:i.onSubmit};return C.createElement(R.Z,r)})),i.state={},i}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.state.title,t=this.props,n=t.type,r=t.ruleCollectionId,a=b().get(this.props.financeRulesGeneratorList,"".concat(r,".").concat(P.blI.first,".data"),[]);return C.createElement(O.IT,{title:e},C.createElement(w.Z,{ruleCollectionId:r,type:n,ruleType:P.cc_.order}),C.createElement(x.Z,{dataSource:a,renderData:this.renderData}))}}]),n}(C.Component);(0,d.Z)(I,"propTypes",{platformCode:Z().string,type:Z().number,ruleCollectionId:Z().string}),t.Z=(0,v.connect)((function(e){var t=e.financeRulesGenerator;return{financeRulesGeneratorList:t.financeRulesGeneratorList,orderTypes:t.orderTypes}}))(I)},9583:function(e,t,n){n.d(t,{Z:function(){return S}});n(51838);var r=n(48086),a=n(15671),o=n(43144),c=n(97326),i=n(60136),l=n(82963),u=n(61120),s=n(4942),p=n(94315),d=n.n(p),f=n(67294),m=n(45697),y=n.n(m),v=n(55609),h=n(93517),Z=n.n(h),g=n(96036),b=n(80385),C=n(93554),E=n(20006),O=n(49113),P=n(42661),k=n(39848),w="SSzPz8UieUdxawqwhbVF";function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var T=b.blI.third,M=function(e){(0,i.Z)(n,e);var t=D(n);function n(){var e;(0,a.Z)(this,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),(0,s.Z)((0,c.Z)(e),"onClickDelete",(function(t){var n={id:t.id,onSuccessCallback:e.fetchListData};e.props.dispatch({type:"financeRulesGenerator/deleteFinanceRulesGeneratorList",payload:n})})),(0,s.Z)((0,c.Z)(e),"onClickMoveUp",(function(t,n,r){var a={upId:t.id,downId:r[n-1].id,onSuccessCallback:e.fetchListData};e.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:a})})),(0,s.Z)((0,c.Z)(e),"onClickMoveDown",(function(t,n,r){var a={upId:t.id,downId:r[n+1].id,onSuccessCallback:e.fetchListData};e.props.dispatch({type:"financeRulesGenerator/updateFinanceRuleSort",payload:a})})),(0,s.Z)((0,c.Z)(e),"onReset",(function(){})),(0,s.Z)((0,c.Z)(e),"onSubmit",(function(t,n,a,o,i){var l=t.matchFilters,u=b.Y9g.description(l,"评比分类");if(d().existy(o.minPeople)&&d().not.empty(o.minPeople)&&d().existy(o.maxPeople)&&d().not.empty(o.maxPeople)&&o.minPeople>o.maxPeople)return r.ZP.error("最大人数应不小于最小人数");if(!0===o.rankSetting){if(d().not.existy(o.rank)||d().empty(o.rank))return r.ZP.error("请设置具体的名次范围！");if(d().existy(o.rank)&&d().not.empty(o.rank)){var s=Z().get(o,"rank",{}),p=Z().get(s,"rankSum",void 0);if(d().not.existy(p)||d().empty(p)||p<1)return r.ZP.error("请设置具体的名次范围！")}}var f=R(R(R({},l),o),{},{id:t.id,platformCode:e.props.platformCode,type:u[0],step:b.blI.third,onSuccessCallback:e.fetchListData.bind((0,c.Z)(e),i)});e.props.dispatch({type:"financeRulesGenerator/createFinanceRulesGeneratorListOne",payload:f})})),(0,s.Z)((0,c.Z)(e),"fetchListData",(function(t){var n=e.props,r=n.dispatch,a=n.ruleCollectionId;"function"==typeof t&&t(),r({type:"financeRulesGenerator/fetchRulesGeneratorList",payload:{ruleCollectionId:a,step:T}})})),(0,s.Z)((0,c.Z)(e),"renderArrayByConstans",(function(e,t){return!Array.isArray(e)||e.length<=0?"--":e.reduce((function(e,n,r){return 0===r?"".concat(e).concat(t.description(n)):"".concat(e,",").concat(t.description(n))}),"")})),(0,s.Z)((0,c.Z)(e),"renderTitle",(function(t){var n=Z().get(t,"matchFilters",[]),r=b.Y9g.description(n,"当月在离职"),a=d().existy(r)&&d().not.empty(r)?r:[b.jHs.all],o=b.Y9g.description(n,"评比分类"),c=[{label:"分类",form:e.renderArrayByConstans(o,b.nis)},{label:"骑士分类",form:b.PN2.description(b.PN2.all)},{label:"当月在离职",form:e.renderArrayByConstans(a,b.jHs),layout:{labelCol:{span:7},wrapperCol:{span:17}}}],i=[{label:"骑士标签",form:b.JA0.description(b.JA0.all)}];return f.createElement("div",null,f.createElement(g.KP,{items:c,cols:3,layout:{labelCol:{span:6},wrapperCol:{span:18}}}),f.createElement(g.KP,{items:i,cols:1,layout:{labelCol:{span:2},wrapperCol:{span:22}}}))})),(0,s.Z)((0,c.Z)(e),"renderContent",(function(t){var n=e.props.platformCode,r=t.form,a=t.isDisabled,o=Z().get(t,"matchFilters",[]),c=b.Y9g.description(o,"评比分类");return c[0]===b.nis.person?f.createElement("div",{className:w},f.createElement(k.Z,{platformCode:n,disabled:a,form:r,dataSource:t})):c[0]===b.nis.competition?f.createElement("div",{className:w},f.createElement(P.Z,{platformCode:n,disabled:a,form:r,dataSource:t})):f.createElement("div",null)})),(0,s.Z)((0,c.Z)(e),"renderData",(function(t,n,r){var a={data:t,index:n,type:e.props.type,dataSource:r,forceValidate:!0,onRenderTitle:e.renderTitle,onRenderContent:e.renderContent,onClickDelete:e.onClickDelete,onClickMoveUp:e.onClickMoveUp,onClickMoveDown:e.onClickMoveDown,onReset:e.onReset,onSubmit:e.onSubmit};return f.createElement(E.Z,a)})),e}return(0,o.Z)(n,[{key:"componentDidMount",value:function(){this.fetchListData()}},{key:"render",value:function(){var e=this.props,t=e.ruleCollectionId,n=e.type,r=Z().get(this.props.financeRulesGeneratorList,"".concat(t,".").concat(T,".data"),[]);return f.createElement(g.IT,null,f.createElement(O.Z,{ruleCollectionId:t,type:n,ruleType:b.cc_.quality}),f.createElement(C.Z,{dataSource:r,renderData:this.renderData}))}}]),n}(f.Component);(0,s.Z)(M,"propTypes",{platformCode:y().string,type:y().number,ruleCollectionId:y().string}),(0,s.Z)(M,"defaultProps",{type:b.tr9.generator});var S=(0,v.connect)((function(e){return{financeRulesGeneratorList:e.financeRulesGenerator.financeRulesGeneratorList}}))(M)},57862:function(e,t,n){n.d(t,{Z:function(){return we}});var r=n(15671),a=n(43144),o=n(97326),c=n(60136),i=n(82963),l=n(61120),u=n(4942),s=(n(36037),n(47933)),p=n(67294),d=n(55609),f=n(45697),m=n.n(f),y=n(93517),v=n.n(y),h=n(96486),Z=n.n(h),g=n(80385),b=n(96036),C=(n(36616),n(51368)),E=(n(52560),n(71577)),O=(n(55295),n(69713)),P=(n(29093),n(16317)),k=n(1058),w=n(49101),x=n(88472),R=n(3044),D="iAnnOP6XFyHuTyF_PWqj",T="IpaaBg8jQcGwwrrZyvZn",M="rWk1m2x8GRlwrWRHdUMa",S="wSZ_KdCNNhEuJMhHaqmE",j="PEMRIWTBZHDqoGfCX56S",I="G7Am0Wp6DMb46xslzcR1",A="SeRZwy1BKbwIsDGTkNgG",F="vzmyF1yq5zqMQQEP4eMA",L="kM3lJNjwwOxSIQ3fyhG6",N="hZiMRZgyiuUOOdpXVWjX",U="jdNy6MHT2bpWWHrhO42F";function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var V=P.Z.Option,G={openCreate:"openCreate",openDelete:"openDelete"},Y=function(e){(0,c.Z)(n,e);var t=B(n);function n(){var e;(0,r.Z)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return e=t.call.apply(t,[this].concat(c)),(0,u.Z)((0,o.Z)(e),"onChange",(function(t){var n=v().get(e.props,"value.key"),r=v().get(e.props,"onChange");r&&r(n,t)})),(0,u.Z)((0,o.Z)(e),"onCreate",(function(){var t=v().get(e.props,"value.key"),n=v().get(e.props,"onCreate");n&&n(t)})),(0,u.Z)((0,o.Z)(e),"onDelete",(function(){var t=v().get(e.props,"onDelete"),n=v().get(e.props,"value.key");t&&t(n)})),(0,u.Z)((0,o.Z)(e),"changeCompareType",(function(t){e.onChange({compareType:t})})),(0,u.Z)((0,o.Z)(e),"changeStartOrder",(function(t){e.onChange({startOrder:t})})),(0,u.Z)((0,o.Z)(e),"changeEndOrder",(function(t){e.onChange({endOrder:t})})),(0,u.Z)((0,o.Z)(e),"changeIntervalMoney",(function(t){e.onChange({money:t})})),(0,u.Z)((0,o.Z)(e),"changeAwardOrPunish",(function(t){e.onChange({awardOrPunish:t})})),(0,u.Z)((0,o.Z)(e),"changeCalculateType",(function(t){e.onChange({calculateType:t})})),(0,u.Z)((0,o.Z)(e),"changeMinMoney",(function(t){e.onChange({minMoney:t})})),(0,u.Z)((0,o.Z)(e),"changeUnitAmount",(function(t){e.onChange({unitAmount:t})})),e}return(0,a.Z)(n,[{key:"render",value:function(){var e=v().get(this.props,"value"),t=e.startOrder,n=e.compareType,r=e.endOrder,a=e.money,o=e.disabled,c=e.awardOrPunish,i=e.indicatorData,l=e.calculateType,u=e.minMoney,s=e.unitAmount,d=e.key,f=this.props.form.getFieldValue("orderType"),m=this.props.unitText,y=i.name,h=i.unit,Z=""===f?"":y,b=m&&(m[f]||""),B=v().get(this.props,"value.config"),Y=[p.createElement(C.Z,{key:"1",min:0,disabled:o,value:t,onChange:this.changeStartOrder,formatter:function(e){return"".concat(e).concat(b)},parser:function(e){return e.replace("".concat(b),"")},className:T}),p.createElement("span",{key:"2"},"<"),p.createElement("span",{key:"3",className:I},Z),p.createElement("span",{key:"4"},p.createElement(x.Z,{disabled:o,compareTypeProps:n,onChange:this.changeCompareType})),p.createElement(C.Z,{key:"5",min:0,value:r,onChange:this.changeEndOrder,disabled:o,formatter:function(e){return"".concat(e).concat(b)},parser:function(e){return e.replace("".concat(b),"")},className:M}),p.createElement(O.Z,{key:"6",title:"".concat(t,"-").concat(r||0,"区间内")},p.createElement("span",{className:A},"".concat(t,"-").concat(r||0,"区间内"))),p.createElement(P.Z,{key:"7",disabled:o,value:"".concat(l),onChange:this.changeCalculateType,className:F},p.createElement(V,{value:"".concat(g.u4U.nomal)},g.u4U.description(g.u4U.nomal)),p.createElement(V,{value:"".concat(g.u4U.difference)},g.u4U.description(g.u4U.difference))),p.createElement("span",{key:"9",className:L},p.createElement("span",null,"每"),p.createElement(R.Z,{disabled:o,unit:h,num:s,onConfirm:this.changeUnitAmount}),p.createElement("span",null,b)),p.createElement(C.Z,{key:"8",disabled:o,min:0,value:a,formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")},onChange:this.changeIntervalMoney,className:S}),p.createElement(P.Z,{key:"10",disabled:d>0||o,value:"".concat(c),onChange:this.changeAwardOrPunish,className:N},p.createElement(V,{value:"".concat(g.Yjp.award)},g.Yjp.description(g.Yjp.award)),p.createElement(V,{value:"".concat(g.Yjp.punish)},g.Yjp.description(g.Yjp.punish))),p.createElement("span",{key:"11"},"最低金额: "),p.createElement(C.Z,{key:"12",disabled:o,min:0,value:u,formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")},onChange:this.changeMinMoney,className:j})];return B.includes(G.openDelete)&&Y.push(p.createElement(E.Z,{key:"delete",disabled:o,className:U,onClick:this.onDelete,shape:"circle",icon:p.createElement(k.Z,null)})),B.includes(G.openCreate)&&Y.push(p.createElement(E.Z,{key:"create",disabled:o,className:U,onClick:this.onCreate,shape:"circle",icon:p.createElement(w.Z,null)})),p.createElement("div",{className:D},Y)}}]),n}(p.Component);Y.itemsConfig=G;var _=(0,d.connect)((function(e){return{unitText:e.financeRulesGenerator.orderTypes.unitText}}))(Y);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var z=_.itemsConfig,H=[{startOrder:0,compareType:"<=",endOrder:0,money:0,minMoney:0,unitAmount:1,awardOrPunish:"".concat(g.Yjp.award),calculateType:"".concat(g.u4U.nomal),compareItem:""}],J=function(e){(0,c.Z)(n,e);var t=W(n);function n(e){var a;if((0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"onChange",(function(e){var t=a.props.onChange;t&&t(e)})),(0,u.Z)((0,o.Z)(a),"onChangeItem",(function(e,t){var n=(a.props.value||[H]).map((function(n,r){return t.awardOrPunish||r===e?q(q({},n),t):n}));a.onChange(n)})),(0,u.Z)((0,o.Z)(a),"onCreateItem",(function(e){var t=a.props.value||[{}],n=v().get(t[e],"endOrder",0);t.push({startOrder:n,compareType:"<=",endOrder:0,money:0,minMoney:0,unitAmount:1,awardOrPunish:t[0].awardOrPunish?t[0].awardOrPunish:"".concat(g.Yjp.award),calculateType:"".concat(g.u4U.nomal),compareItem:""}),a.onChange(t)})),(0,u.Z)((0,o.Z)(a),"onDeleteItem",(function(e){var t=a.props.value;t.splice(e,1),a.onChange(t)})),(0,u.Z)((0,o.Z)(a),"renderExtractRule",(function(){var e=a.state.value,t=a.props,n=t.disabled,r=t.indicatorData,o=t.form;return p.createElement("div",null,e.map((function(e,t,c){var i=c.length,l=[];1===i?l.push(z.openCreate):t===i-1?l.push(z.openCreate,z.openDelete):l.push(z.openDelete);var u=0,s=1/0;t>0&&(u=c[t-1].endOrder),t+1<i&&(s=c[t+1].startOrder);var d=Object.assign({key:t},e,{indicatorData:r,config:l,disabled:n,preEndOrder:u,nextStartOrder:s});return p.createElement(_,{disabled:n,key:t,value:d,form:o,onCreate:a.onCreateItem,onDelete:a.onDeleteItem,onChange:a.onChangeItem})})))})),"value"in e){var c=e.value;(!c||c.length<1)&&(c=H),a.state={value:c}}return a}return(0,a.Z)(n,[{key:"render",value:function(){return p.createElement("div",null,this.renderExtractRule())}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.value!==t.value){var n=e.value;return(!n||n.length<1)&&(n=H),{value:n}}return null}}]),n}(p.Component);(0,u.Z)(J,"propTypes",{indicatorData:m().object,disabled:m().bool,form:m().object}),(0,u.Z)(J,"defaultProps",{disabled:!1,form:{}});var Q=J,$=n(15951),X="TWFz_xR5cJg82pazb1gF";function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var te=[{startOrder:0,compareType:"<=",endOrder:0,money:0,minMoney:0,unitAmount:1,awardOrPunish:"".concat(g.Yjp.award),calculateType:"".concat(g.u4U.nomal),compareItem:""}],ne=function(e){(0,c.Z)(n,e);var t=ee(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"salaryIndicatorOnChange",(function(e,t,n){a.props.form.setFieldsValue({orderTypeUnit:t}),a.setState({indicatorData:{id:e,unit:t,name:n}})})),(0,u.Z)((0,o.Z)(a),"validateMaxMoney",(function(e,t,n){if(a.props.disabled)n();else if(void 0!==t){var r=g.fbc.dynamicValid(t,g.fbc.priceYuan);!0===r?n():n("".concat(r))}else n("请填写数据")})),(0,u.Z)((0,o.Z)(a),"validateLadderAward",(function(e,t,n){var r=a.state.indicatorData.unit;if(a.props.disabled)n();else if(t)if("[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<t.length;o+=1){var c=t[o],i=c.startOrder,l=c.endOrder,u=c.compareType,s=c.money,p=c.awardOrPunish,d=c.minMoney,f=c.calculateType,m=c.unitAmount;if(void 0===i)return void n("第".concat(o+1,"条起始数据未填写"));var y=g.fbc.dynamicValid(i,r);if(!0!==y)return void n("第".concat(o+1,"条起始数据").concat(y));if(void 0===u&&n("第".concat(o+1,"条比较符未选择")),void 0===l)return void n("第".concat(o+1,"条结束数据未填写"));if(l<=i)return void n("第".concat(o+1,"条结束数据应大于起始数据"));var v=g.fbc.dynamicValid(l,r);if(!0!==v)return void n("第".concat(o+1,"条结束数据").concat(v));if(void 0===f)return void n("第".concat(o+1,"条计算方式未选择"));if(void 0===s)return void n("第".concat(o+1,"条金额未填写"));var h=g.fbc.dynamicValid(s,g.fbc.priceYuan);if(!0!==h)return void n("第".concat(o+1,"条金额").concat(h));if(void 0===m)return void n("第".concat(o+1,"条计算步长未填写"));if(!0!==g.fbc.dynamicValid(m,r))return void n("第".concat(o+1,"条计算步长").concat(h));if(void 0===p)return void n("第".concat(o+1,"条奖励/惩罚未选择"));if(void 0===d)return void n("第".concat(o+1,"条最低金额未填写"));var Z=g.fbc.dynamicValid(d,g.fbc.priceYuan);if(!0!==Z)return void n("第".concat(o+1,"条最低金额").concat(Z));if(o+1>=t.length)return void n();if(l>t[o+1].startOrder)return void n("第".concat(o+2,"条起始数据应大于等于第").concat(o+1,"条结束数据"))}n()}else n("数据格式错误");else n("数据格式错误")})),(0,u.Z)((0,o.Z)(a),"renderFirstLine",(function(){var e=a.props,t=e.disabled,n=e.dataSource,r=e.currentStep,o=e.platformCode,c=a.props.form.getFieldDecorator,i=v().get(n,"computeLogic.rangeParams.index","")||"",l=v().get(n,"computeLogic.rangeParams.totalMaxNum",""),u=l?g.fbc.exchangePriceToYuan(l):"",s=!t,d=[{label:"",span:4,layout:{labelCol:{span:0},wrapperCol:{span:24}},form:c("orderType",{initialValue:"".concat(i),rules:[{required:s,message:"请选择"}]})(p.createElement($.Z,{platformCode:o,tagList:[r],disabled:t,className:X,onChange:a.salaryIndicatorOnChange}))},{label:"最高金额限制",form:c("rewardMoneyLimit",{initialValue:u,rules:[{validator:a.validateMaxMoney}]})(p.createElement(C.Z,{disabled:t,formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")}}))}];return p.createElement(b.KP,{items:d,cols:2,layout:{labelCol:{span:8},wrapperCol:{span:16}}})})),(0,u.Z)((0,o.Z)(a),"renderLadderAwardRule",(function(){var e=a.props,t=e.disabled,n=e.dataSource,r=a.props.form.getFieldDecorator,o=a.state.indicatorData,c=v().get(n,"computeLogic.rangeParams.rangeTable",void 0),i=[{label:"",form:r("ladderAwardRule",{initialValue:-1===v().get(n,"computeLogic.bizLogic",[]).indexOf("qc_logic_by_range")||void 0===c?te:c.map((function(e){return{startOrder:g.fbc.dynamicExchange(e.min,o.unit,!1),compareType:e.symbolMax,endOrder:g.fbc.dynamicExchange(e.max,o.unit,!1),money:e.money>=0?g.fbc.exchangePriceToYuan(e.money):g.fbc.exchangePriceToYuan(-e.money),awardOrPunish:e.money>=0?g.Yjp.award:g.Yjp.punish,minMoney:e.minMoney>=0?g.fbc.exchangePriceToYuan(e.minMoney):g.fbc.exchangePriceToYuan(-e.minMoney),calculateType:e.deltaFlag?g.u4U.difference:g.u4U.nomal,unitAmount:g.fbc.dynamicExchange(e.unitAmount,o.unit,!1)}})),rules:[{validator:a.validateLadderAward}]})(p.createElement(Q,{form:a.props.form,disabled:t,indicatorData:o}))}];return p.createElement(b.KP,{items:i,layout:{labelCol:{span:0},wrapperCol:{span:24}},cols:1})})),(0,u.Z)((0,o.Z)(a),"renderContent",(function(){return p.createElement("div",null,a.renderLadderAwardRule())})),a.state={isCollapse:!1,indicatorData:{id:"",name:"",unit:""}},a}return(0,a.Z)(n,[{key:"componentDidUpdate",value:function(e){e.disabled!==this.props.disabled&&!0!==e.disabled&&this.props.form.validateFields(["orderType","rewardMoneyLimit","ladderAwardRule"],{force:!0})}},{key:"render",value:function(){return this.props.form.getFieldDecorator("orderTypeUnit"),p.createElement("div",null,this.renderFirstLine(),this.renderContent())}}]),n}(p.Component);(0,u.Z)(ne,"propTypes",{platformCode:m().string,currentStep:m().number,disabled:m().bool,form:m().object,dataSource:m().object}),(0,u.Z)(ne,"defaultProps",{disabled:!1,form:{}});var re=ne,ae=(n(13062),n(71230)),oe=(n(89032),n(15746)),ce=n(6970),ie="cJw6NY_PuqbXCEQRKzDB",le="h_ssMJXxY8tc0oW4Kcol",ue="IkSjIeuQrFlyWRXNXiid",se="rm5EUuMPQH4w0VlotRnN",pe="GGWiq0ZWENXveL3kL9Gp";function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var ye=b.Hr.Option,ve=function(e){(0,c.Z)(n,e);var t=me(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"onPlusItem",(function(){var e=a.props.onPlusItem;e&&e()})),(0,u.Z)((0,o.Z)(a),"onDeleteItem",(function(){var e=a.props,t=e.onDeleteItem,n=e.index;t&&t(n)})),(0,u.Z)((0,o.Z)(a),"onChangeAwardIndex",(function(e,t,n){a.triggerChangeAward({compareItem:e,unit:t}),a.setState({indicatorData:{id:e,unit:t,name:n}})})),(0,u.Z)((0,o.Z)(a),"onChangeRewardUnit",(function(e){a.triggerChangeAward({index:e})})),(0,u.Z)((0,o.Z)(a),"onChangeAwardOrPunish",(function(e){a.triggerChangeAward({awardOrPunish:e})})),(0,u.Z)((0,o.Z)(a),"onChangeMoney",(function(e){a.triggerChangeAward({money:e})})),(0,u.Z)((0,o.Z)(a),"onChangeConditions",(function(e){a.triggerOnChange({conditions:e})})),(0,u.Z)((0,o.Z)(a),"triggerChangeAward",(function(e){var t=a.props.award;a.triggerOnChange({award:fe(fe({},t),e)})})),(0,u.Z)((0,o.Z)(a),"triggerOnChange",(function(e){var t=a.props,n=t.onChange,r=t.index,o=fe(fe({},{award:t.award,conditions:t.conditions}),e);n&&n(o,r)})),(0,u.Z)((0,o.Z)(a),"renderAward",(function(){var e=a.props,t=e.disabled,n=e.award,r=e.platformCode,o=e.currentStep,c=e.unitText,i=n.compareItem,l=void 0===i?"":i,u=n.money,s=n.awardOrPunish,d=void 0===s?g.Yjp.award:s,f=n.index,m=void 0===f?1:f,y=a.state.indicatorData,v=y.id,h=y.unit,Z=c&&(c[v]||"");return p.createElement(ae.Z,{align:"middle",type:"flex"},p.createElement(oe.Z,{span:1,className:le},"按"),p.createElement(oe.Z,{span:7,className:le},p.createElement($.Z,{platformCode:r,tagList:[o],disabled:t,value:l,onChange:a.onChangeAwardIndex,className:pe})),p.createElement(oe.Z,{span:3,className:le},p.createElement("span",null,p.createElement("span",null,"每"),p.createElement(R.Z,{disabled:t,unit:h,num:m,onConfirm:a.onChangeRewardUnit}),p.createElement("span",null,Z))),p.createElement(oe.Z,{span:333,className:le},p.createElement(b.Hr,{disabled:t,value:"".concat(d),onChange:a.onChangeAwardOrPunish,style:{width:"100%"}},p.createElement(ye,{value:"".concat(g.Yjp.award)},g.Yjp.description(g.Yjp.award)),p.createElement(ye,{value:"".concat(g.Yjp.punish)},g.Yjp.description(g.Yjp.punish)))),p.createElement(oe.Z,{span:5,className:le},p.createElement(C.Z,{disabled:t,value:u,onChange:a.onChangeMoney,formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")}})))})),(0,u.Z)((0,o.Z)(a),"renderConditions",(function(){var e=a.props,t=e.conditions,n=e.disabled,r=e.platformCode,o=e.currentStep;return p.createElement(ce.Z,{platformCode:r,tags:[o],isHideConditions:!0,disabled:n,value:t,layout:{indicators:6,symbol:3,num:5},onChange:a.onChangeConditions})})),a.state={indicatorData:{id:"",name:"",unit:""}},a}return(0,a.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.config,n=e.disabled,r=[];return t.operatDelete&&r.push(p.createElement(E.Z,{key:"minus",shape:"circle",icon:p.createElement(k.Z,null),disabled:n,onClick:this.onDeleteItem,className:se})),t.operatCreate&&r.push(p.createElement(E.Z,{key:"plus",shape:"circle",icon:p.createElement(w.Z,null),disabled:n,onClick:this.onPlusItem})),p.createElement(ae.Z,{align:"middle",type:"flex"},p.createElement(oe.Z,{span:19,className:ie},this.renderConditions(),this.renderAward()),p.createElement(oe.Z,{span:3},p.createElement("div",{className:ue},r)))}}]),n}(p.Component);(0,u.Z)(ve,"propTypes",{platformCode:m().string,currentStep:m().number,disabled:m().bool,index:m().number,config:m().object,conditions:m().object,award:m().object,onChange:m().func.isRequired,onPlusItem:m().func.isRequired,onDeleteItem:m().func.isRequired}),(0,u.Z)(ve,"defaultProps",{disabled:!1,index:0,config:{},conditions:[],award:{}});var he=(0,d.connect)((function(e){return{unitText:e.financeRulesGenerator.orderTypes.unitText}}))(ve);function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var ge={award:{index:1,awardOrPunish:g.Yjp.award}},be=function(e){(0,c.Z)(n,e);var t=Ze(n);function n(e){var a;(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"onChange",(function(e,t){var n=a.state.value,r=a.props.onChange;n[t]=e,r&&r(n)})),(0,u.Z)((0,o.Z)(a),"onPlusItem",(function(){var e=a.state.value;e.push(ge),a.onChange(e)})),(0,u.Z)((0,o.Z)(a),"onDeleteItem",(function(e){var t=a.state.value;t.splice(e,1),a.onChange(t)})),(0,u.Z)((0,o.Z)(a),"renderItems",(function(){var e=a.state.value,t=a.props,n=t.disabled,r=t.platformCode,o=t.currentStep;return e.map((function(e,t,c){var i={operatDelete:!0};t===c.length-1&&(i.operatCreate=!0,0===t&&(i.operatDelete=!1));var l=e.conditions,u=void 0===l?{}:l,s=e.award,d=void 0===s?{}:s;return p.createElement(he,{platformCode:r,currentStep:o,disabled:n,key:t,index:t,conditions:u,award:d,config:i,onChange:a.onChange,onPlusItem:a.onPlusItem,onDeleteItem:a.onDeleteItem})}))}));var c=e.value||[];return c.length<1&&c.push(ge),a.state={value:c},a}return(0,a.Z)(n,[{key:"render",value:function(){return p.createElement("div",null,this.renderItems())}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.value!==t.value){var n=e.value||[];return n.length<1&&n.push(ge),{value:n}}return null}}]),n}(p.Component);(0,u.Z)(be,"propTypes",{platformCode:m().string,currentStep:m().number,disabled:m().bool}),(0,u.Z)(be,"defaultProps",{disabled:!1});var Ce=be;function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var Oe=s.ZP.Group,Pe=[{award:{awardOrPunish:g.Yjp.award,index:1}}],ke=function(e){(0,c.Z)(n,e);var t=Ee(n);function n(e){var a;return(0,r.Z)(this,n),a=t.call(this,e),(0,u.Z)((0,o.Z)(a),"onChangeAwardType",(function(){a.private.multipleDisabledChanged=!0})),(0,u.Z)((0,o.Z)(a),"getUnitByIndex",(function(e,t){for(var n=0;n<t.data.length;n+=1)if(t.data[n].id===e)return t.data[n].unit})),(0,u.Z)((0,o.Z)(a),"validateMultipleConditions",(function(e){return function(t,n,r){if(e)r();else if(n)if(!1!==Z().isArray(n)){for(var a=0;a<n.length;a+=1){var o=n[a],c=o.award,i=o.conditions;if(!1===Z().isObject(i))return void r("第".concat(a+1,"条条件未填写"));if(!1===Z().isArray(i.rules)||0===i.rules.length)return void r("第".concat(a+1,"条条件未填写"));for(var l=0;l<i.rules.length;l+=1){var u=i.rules[l],s=u.index,p=u.symbol,d=u.num,f=u.unit;if(void 0===s||""===s)return void r("第".concat(a+1,"条的第").concat(l+1,"个条件的指标未选择"));if(void 0===p||""===p)return void r("第".concat(a+1,"条的第").concat(l+1,"个条件的比较符未选择"));if(void 0===d||""===d)return void r("第".concat(a+1,"条的第").concat(l+1,"个条件的数值未填写"));var m=g.fbc.dynamicValid(d,f);if(!0!==m)return void r("第".concat(a+1,"条的第").concat(l+1,"个条件的数值").concat(m))}if(void 0===c)return void r("第".concat(a+1,"条奖励方式未填写"));if(void 0===c.compareItem||""===c.compareItem)return void r("第".concat(a+1,"条奖励指标未选择"));if(void 0===c.index||""===c.index)return void r("第".concat(a+1,"条奖励单量未填写"));if(Number(c.awardOrPunish)!==g.Yjp.award&&Number(c.awardOrPunish)!==g.Yjp.punish)return void r("第".concat(a+1,"条奖励/惩罚未选择"));if(void 0===c.money||""===c.money)return void r("第".concat(a+1,"条金额未填写"));var y=g.fbc.dynamicValid(c.money,g.fbc.priceYuan);if(!0!==y)return void r("第".concat(a+1,"条金额").concat(y))}r()}else r("数据格式错误");else r("数据格式错误")}})),(0,u.Z)((0,o.Z)(a),"renderLadderAward",(function(){var e=a.props,t=e.form,n=e.disabled,r=e.dataSource,o=e.platformCode,c=e.currentStep,i=t.getFieldDecorator,l=t.getFieldValue,u=v().get(r,"computeLogic.bizLogic",["qc_logic_by_range"]),d=g.b9V.ladder;-1!==u.indexOf("qc_logic_by_range")&&(d=g.b9V.ladder),-1!==u.indexOf("qc_logic_by_multiple")&&(d=g.b9V.mutipleConditions);var f=n||l("awardType")!==g.b9V.ladder&&void 0!==l("awardType"),m=[{label:"",form:i("awardType",{initialValue:d})(p.createElement(Oe,{disabled:n},p.createElement(s.ZP,{value:g.b9V.ladder},"按阶梯设置")))}],y=[{label:"",form:p.createElement(re,{platformCode:o,currentStep:c,dataSource:r,form:t,disabled:f})}],h={labelCol:{span:0},wrapperCol:{span:24}};return p.createElement("div",null,p.createElement(b.KP,{items:m,layout:h,cols:1}),p.createElement(b.KP,{style:{marginLeft:20},items:y,layout:h,cols:1}))})),(0,u.Z)((0,o.Z)(a),"renderMutipleConditionsAward",(function(){var e=a.props,t=e.disabled,n=e.dataSource,r=e.platformCode,o=e.currentStep,c=e.orderTypes["".concat(r).concat(o)];if(n&&!c)return p.createElement("div",null);var i,l=a.props.form,u=l.getFieldDecorator,d=l.getFieldValue,f=-1!==v().get(n,"computeLogic.bizLogic",["qc_logic_by_range"]).indexOf("qc_logic_by_multiple")?g.b9V.mutipleConditions:g.b9V.ladder,m=v().get(n,"computeLogic.multipleParams",void 0);i=void 0!==m&&f===g.b9V.mutipleConditions?m.map((function(e){var t=e.unitIndex,n=a.getUnitByIndex(t,c);return{award:{awardOrPunish:e.unitMoney>=0?g.Yjp.award:g.Yjp.punish,compareItem:e.unitIndex,index:g.fbc.dynamicExchange(e.unitAmount,n,!1),money:e.unitMoney>=0?g.fbc.exchangePriceToYuan(e.unitMoney):-g.fbc.exchangePriceToYuan(e.unitMoney)},conditions:{rules:e.rules.map((function(e){var t=a.getUnitByIndex(e.index,c);return{index:e.index,symbol:e.symbol,num:g.fbc.dynamicExchange(e.num,t,!1)}}))}}})):Z().cloneDeep(Pe);var y=t||d("awardType")!==g.b9V.mutipleConditions,h=[{label:"",form:u("awardType",{initialValue:f})(p.createElement(Oe,{disabled:t,onChange:a.onChangeAwardType},p.createElement(s.ZP,{value:g.b9V.mutipleConditions},"按多组条件设置")))}],C=[{label:"",form:u("multipleConditions",{initialValue:i,rules:[{validator:a.validateMultipleConditions(y)}]})(p.createElement(Ce,{platformCode:r,currentStep:o,disabled:y}))}],E={labelCol:{span:0},wrapperCol:{span:24}};return p.createElement("div",null,p.createElement(b.KP,{items:h,layout:E,cols:1}),p.createElement(b.KP,{style:{marginLeft:20},items:C,layout:E,cols:1}))})),a.private={multipleDisabledChanged:!1},a}return(0,a.Z)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.form,n=t.validateFields,r=(0,t.getFieldValue)("awardType");(this.private.multipleDisabledChanged&&(this.private.multipleDisabledChanged=!1,r!==g.b9V.mutipleConditions)||this.props.disabled!==e.disabled)&&n(["multipleConditions"],{force:!0})}},{key:"render",value:function(){var e=this.props.style;return p.createElement("div",{style:e},this.renderLadderAward(),this.renderMutipleConditionsAward())}}]),n}(p.Component);(0,u.Z)(ke,"propTypes",{platformCode:m().string,currentStep:m().number,form:m().object,disabled:m().bool,style:m().object,dataSource:m().object}),(0,u.Z)(ke,"defaultProps",{form:{},disabled:!1,style:{}});var we=(0,d.connect)((function(e){return{orderTypes:e.financeRulesGenerator.orderTypes}}))(ke)},20936:function(e,t,n){n.d(t,{Z:function(){return g}});n(13062);var r=n(71230),a=(n(89032),n(15746)),o=n(15671),c=n(43144),i=n(60136),l=n(82963),u=n(61120),s=n(4942),p=n(67294),d=n(45697),f=n.n(d),m="AW5THULmrDMHglDhudM_",y="c5Lt0tQVSyOFaSx1h8Di",v="SidbbecQoqCHBSRdASem";function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var a=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var Z=function(e){(0,i.Z)(n,e);var t=h(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"render",value:function(){var e=this.props.title;return p.createElement("div",{className:m},p.createElement(r.Z,{type:"flex",justify:"space-around",align:"middle"},p.createElement(a.Z,{span:12},p.createElement("span",{className:y}),e),p.createElement(a.Z,{span:12,className:v})))}}]),n}(p.Component);(0,s.Z)(Z,"propTypes",{title:f().string}),(0,s.Z)(Z,"defaultProps",{title:""});var g=Z},42661:function(e,t,n){n.d(t,{Z:function(){return K}});n(26574);var r=n(9676),a=(n(9070),n(20924)),o=(n(36616),n(51368)),c=(n(51838),n(48086)),i=n(15671),l=n(43144),u=n(97326),s=n(60136),p=n(82963),d=n(61120),f=n(4942),m=(n(36037),n(47933)),y=n(67294),v=n(55609),h=n(45697),Z=n.n(h),g=n(93517),b=n.n(g),C=n(94315),E=n.n(C),O=n(80385),P=n(96036),k=(n(52560),n(71577)),w=(n(52466),n(10642)),x=n(1058),R=n(8212),D=n(66939);n(98703);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var a=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var j={rankSum:0,rankLadder:[]},I=function(e){(0,s.Z)(n,e);var t=S(n);function n(e){var r;(0,i.Z)(this,n),r=t.call(this,e),(0,f.Z)((0,u.Z)(r),"onChangeRankSum",(function(e){var t=[],n=e;""===n&&(n=0);for(var a=1;a<=n;a+=1){if(a>10){t.push({interval:[a,n],money:0});break}t.push({interval:[a,a],money:0})}var o=M(M({},r.state.value),{},{rankSum:n,rankLadder:t});r.triggerFormOnChange(o)})),(0,f.Z)((0,u.Z)(r),"onClickEdit",(function(){r.setState({isShowModal:!0})})),(0,f.Z)((0,u.Z)(r),"onClickMinus",(function(e){var t=r.state.value.rankLadder,n=t.length,a={};if(e===n-1)return t[n-2].interval[1]=t[n-1].interval[1],t.splice(e,1),a=M(M({},r.state.value),{},{rankLadder:t}),void r.triggerFormOnChange(a);t[e+1].interval[0]=t[e].interval[0],t.splice(e,1),a=M(M({},r.state.value),{},{rankLadder:t}),r.triggerFormOnChange(a)})),(0,f.Z)((0,u.Z)(r),"onChangeMoney",(function(e,t){var n=r.state.value.rankLadder;n[t].money=e,""===e&&(n[t].money=0);var a=M(M({},r.state.value),{},{rankLadder:n});r.triggerFormOnChange(a)})),(0,f.Z)((0,u.Z)(r),"onModalOk",(function(){var e=r.props.form,t=e.validateFields,n=e.setFieldsValue,a=r.state.value.rankLadder;t((function(e,t){if(!e){var o=t.rank,c=t.money,i=a[a.length-1];a.push({interval:[o+1,i.interval[1]],money:i.money}),a[a.length-2].interval[1]=o,a[a.length-2].money=c,n({rank:void 0,money:0}),r.setState({isShowModal:!1})}}))})),(0,f.Z)((0,u.Z)(r),"onModalCancel",(function(){(0,r.props.form.setFieldsValue)({rank:void 0,money:0}),r.setState({isShowModal:!1})})),(0,f.Z)((0,u.Z)(r),"triggerFormOnChange",(function(e){var t=r.props.onChange;r.props.value||r.setState({value:e}),t&&t(e)})),(0,f.Z)((0,u.Z)(r),"renderModal",(function(){var e=r.state.value.rankLadder,t=e.length;if(t<1)return null;var n=e[t-1].interval;if(!n[1])return null;var a=r.props.form.getFieldDecorator,c=r.props.disabled,i=[{key:"label",span:3,label:"",form:"第".concat(n[0]," ~ ")},{key:"rank",span:6,label:"",form:a("rank",{rules:[{required:!0,message:"请填写名次"}]})(y.createElement(o.Z,{min:n[0],max:n[1]-1,formatter:function(e){return"".concat(e,"名")},parser:function(e){return e.replace("名","")},disabled:c,precision:0}))},{key:"money",span:6,label:"",form:a("money",{initialValue:0,rules:[{required:!0,message:"请填写金额"}]})(y.createElement(o.Z,{formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")},min:0,disabled:c,precision:2}))}];return y.createElement(w.Z,{title:"调整竞赛名额",visible:r.state.isShowModal,onOk:r.onModalOk,onCancel:r.onModalCancel},y.createElement(P.KP,{items:i,layout:{labelCol:{span:0},wrapperCol:{span:24}},cols:4}))})),(0,f.Z)((0,u.Z)(r),"renderFirstLine",(function(){var e=r.state.value.rankSum,t=r.props.disabled,n=[{label:"设定名次",form:y.createElement(o.Z,{min:0,formatter:function(e){return"".concat(e,"名")},parser:function(e){return e.replace("名","")},onChange:r.onChangeRankSum,value:e,disabled:t,precision:0})}];return y.createElement(P.KP,{items:n,layout:{labelCol:{span:8},wrapperCol:{span:16}},cols:4})})),(0,f.Z)((0,u.Z)(r),"renderRankInput",(function(){var e=r.state.value.rankLadder,t=r.props.disabled,n=e.map((function(n,a,c){var i=n.interval,l=n.money,u=[],s="第".concat(i[0],"名");return e.length>1&&u.push(y.createElement(k.Z,{key:"munus",shape:"circle",icon:y.createElement(x.Z,null),onClick:function(){return r.onClickMinus(a)},disabled:t})),i[0]!==i[1]&&(s+="~第".concat(i[1],"名"),a===c.length-1&&u.push(y.createElement(k.Z,{key:"edit",shape:"circle",icon:y.createElement(R.Z,null),onClick:r.onClickEdit,disabled:t}))),{label:s,form:y.createElement("div",null,y.createElement(o.Z,{value:l,formatter:function(e){return"".concat(e,"元")},parser:function(e){return e.replace("元","")},onChange:function(e){return r.onChangeMoney(e,a)},disabled:t,precision:2}),u)}}));return y.createElement(P.KP,{items:n,layout:{labelCol:{span:8},wrapperCol:{span:16}},cols:4})}));var a=r.props.value||j;return r.state={value:a,isShowModal:!1},r}return(0,l.Z)(n,[{key:"render",value:function(){return y.createElement("div",null,this.renderFirstLine(),this.renderRankInput(),this.renderModal())}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.value!==t.value?{value:e.value||j}:null}}]),n}(y.Component);(0,f.Z)(I,"propTypes",{disabled:Z().bool}),(0,f.Z)(I,"defaultProps",{disabled:!1});var A=D.Z.create()(I),F=n(6970),L=n(15951),N=n(20936),U=n(57862),B=n(51207);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var a=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,p.Z)(this,n)}}var G=m.ZP.Group,Y=O.blI.third,_=function(e){(0,s.Z)(n,e);var t=V(n);function n(){var e;(0,i.Z)(this,n);for(var l=arguments.length,s=new Array(l),p=0;p<l;p++)s[p]=arguments[p];return e=t.call.apply(t,[this].concat(s)),(0,f.Z)((0,u.Z)(e),"getUnitByIndex",(function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=0;n<t.length;n+=1)if(t[n].id===e)return t[n].unit})),(0,f.Z)((0,u.Z)(e),"checkAttendanceIndexValueRules",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(E().empty(e))return c.ZP.error("满足条件的数据为空");if(E().not.array(e))return c.ZP.error("满足条件的数据格式错误");var t=!1;return e.forEach((function(e){E().empty(e)?t=!0:Object.keys(e).forEach((function(n){if(E().not.existy(e[n])||E().empty(e[n]))return t=!0,!0}))})),t})),(0,f.Z)((0,u.Z)(e),"checkAttendanceIndex",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=e.checkAttendanceIndexValueRules(n.rules);void 0===n.matchType||!1!==a?r("请填写完整"):r()})),(0,f.Z)((0,u.Z)(e),"renderMatchFiltersOrderVars",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=e.filter((function(e){return e.groupMatch}));return n.forEach((function(e){e.groupFilters.filter((function(n){"入选人数"!==n.varName&&t.push(e)}))})),t})),(0,f.Z)((0,u.Z)(e),"renderOrderTarget",(function(){var t=e.props,n=t.disabled,r=t.dataSource,a=t.platformCode,o=t.orderTypes,c=e.props.form.getFieldDecorator,i=o["".concat(a).concat(Y)];if(r&&!i)return y.createElement("div",null);var l=b().get(r,"matchFilters",[]),u=e.renderMatchFiltersOrderVars(l),s=b().get(u,"0.groupFilters",[]),p=b().get(u,"0.groupMatch",[]),d={matchType:O.Kbw.meetAll};E().existy(u)&&E().not.empty(u)&&(d={matchType:p,rules:s.map((function(t){return{name:t.varName,index:t.index,symbol:t.symbol,num:O.fbc.dynamicExchange(t.value,e.getUnitByIndex(t.index,i),!1)}}))});var f=[{label:"筛选条件",form:c("orderIndex",{initialValue:d,rules:[{validator:e.checkAttendanceIndex},{required:!0}]})(y.createElement(F.Z,{platformCode:a,tags:[Y],disabled:n,layout:{indicators:6,symbol:3,num:3}}))}];return y.createElement(P.KP,{items:f,cols:1,layout:{labelCol:{span:3},wrapperCol:{span:21}}})})),(0,f.Z)((0,u.Z)(e),"renderMatchFiltersPeopleNumValue",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n="入选人数",r=[],a=e.filter((function(e){return e.groupMatch}));if(a.forEach((function(e){e.groupFilters.filter((function(e){e.varName===n&&e.symbol===t&&r.push(e.value)}))})),E().existy(r)&&E().not.empty(r))return r[0]})),(0,f.Z)((0,u.Z)(e),"renderRange",(function(){var t=e.props,n=t.disabled,r=t.dataSource,c=t.platformCode,i=e.props.form.getFieldDecorator,l=O.KAm.month,u=b().get(r,"payrollMark",""),s=b().get(r,"sortOptions",[]),p=b().get(s[0],"index",""),d=b().get(r,"matchFilters",[]),f=b().get(s[0],"direction",O.xUF.ascend),v=e.renderMatchFiltersPeopleNumValue(d,">="),h=e.renderMatchFiltersPeopleNumValue(d,"<=");h<=0&&(h="");var Z=[{label:"数据统计时间",layout:{labelCol:{span:8},wrapperCol:{span:12}},form:i("statisticsTime",{initialValue:l,rules:[{required:!0,message:"请选择"}]})(y.createElement(G,{disabled:n},y.createElement(m.ZP,{value:O.KAm.month},O.KAm.description(O.KAm.month))))}],g=[{label:"指标排序",form:i("sortIndex",{rules:[{required:!0,message:"请选择"}],initialValue:"".concat(p)})(y.createElement(L.Z,{platformCode:c,tagList:[Y],disabled:n,className:B.Z["app-comp-finance-quality-create-competiton-competition-edit-from"]}))},{label:"",form:i("sortOrder",{initialValue:f})(y.createElement(G,{disabled:n},y.createElement(m.ZP,{value:O.xUF.ascend},O.xUF.description(O.xUF.ascend)),y.createElement(m.ZP,{value:O.xUF.descend},O.xUF.description(O.xUF.descend))))}],C=[{label:"入选人数",form:i("minPeople",{initialValue:v,rules:[{required:!0,message:"请填写"}]})(y.createElement(o.Z,{className:B.Z["app-comp-finance-quality-create-competiton-competition-edit-from"],min:0,precision:0,disabled:n,placeholder:"最少"}))},{label:"",form:i("maxPeople",{initialValue:h})(y.createElement(o.Z,{className:B.Z["app-comp-finance-quality-create-competiton-competition-edit-from"],min:0,precision:0,disabled:n,placeholder:"最多"}))}],E=[{label:"结算单对应列",form:i("payrollMark",{initialValue:u})(y.createElement(a.Z,{placeholder:"请输入结算单对应列(可选)",disabled:n}))}],k={labelCol:{span:8},wrapperCol:{span:16}};return y.createElement("div",null,y.createElement(P.KP,{items:Z,layout:k,cols:3}),e.renderOrderTarget(),y.createElement(P.KP,{items:g,layout:k,cols:3}),y.createElement(P.KP,{items:C,layout:k,cols:3}),y.createElement(P.KP,{items:E,layout:k,cols:3}))})),(0,f.Z)((0,u.Z)(e),"renderAward",(function(){var t=e.props,n=t.form,a=t.disabled,o=t.dataSource,c=t.platformCode,i=n.getFieldDecorator,l=n.getFieldValue,u=b().get(o,"computeLogic.bizLogic",[]),s=!0,p=!1;(E().not.existy(u)||E().empty(u))&&(s=!1,p=!1),-1!==u.indexOf("qc_logic_battle")&&(p=!0,-1===u.indexOf("qc_logic_by_multiple")&&-1===u.indexOf("qc_logic_by_range")&&(s=!1));var d,f=b().get(o,"computeLogic.battleParams",void 0);void 0!==f&&!0===p&&(d={rankSum:f.rankSum,rankLadder:f.ladder.map((function(e){return{interval:[e.rankFrom,e.rankTo],money:O.fbc.exchangePriceToYuan(e.money)}}))});var m=a||void 0!==l("awardSetting")&&!l("awardSetting"),v=a||!l("rankSetting"),h=[{label:"",form:i("awardSetting",{valuePropName:"checked",initialValue:s})(y.createElement(r.Z,{disabled:a},"奖励法"))},{label:"",form:y.createElement(U.Z,{platformCode:c,currentStep:Y,dataSource:o,disabled:m,form:n,style:{marginLeft:30}})},{label:"",form:i("rankSetting",{valuePropName:"checked",initialValue:p})(y.createElement(r.Z,{disabled:a},"竞赛评比"))},{label:"",form:i("rank",{initialValue:d})(y.createElement(A,{disabled:v}))}];return y.createElement("div",null,y.createElement(N.Z,{title:"设定奖罚"}),y.createElement(P.KP,{items:h,layout:{labelCol:{span:0},wrapperCol:{span:24}},cols:1}))})),e}return(0,l.Z)(n,[{key:"render",value:function(){return y.createElement("div",null,this.renderRange(),this.renderAward())}}]),n}(y.Component);(0,f.Z)(_,"propTypes",{platformCode:Z().string,disabled:Z().bool,form:Z().object,dataSource:Z().object}),(0,f.Z)(_,"defaultProps",{disabled:!1,form:{}});var K=(0,v.connect)((function(e){return{orderTypes:e.financeRulesGenerator.orderTypes}}))(_)},39848:function(e,t,n){n(9070);var r=n(20924),a=(n(51838),n(48086)),o=n(15671),c=n(43144),i=n(97326),l=n(60136),u=n(82963),s=n(61120),p=n(4942),d=(n(36037),n(47933)),f=n(67294),m=n(55609),y=n(45697),v=n.n(y),h=n(93517),Z=n.n(h),g=n(94315),b=n.n(g),C=n(80385),E=n(96036),O=n(6970),P=n(57862),k=n(20936);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var a=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var x=d.ZP.Group,R=C.blI.third,D=function(e){(0,l.Z)(n,e);var t=w(n);function n(){var e;(0,o.Z)(this,n);for(var c=arguments.length,l=new Array(c),u=0;u<c;u++)l[u]=arguments[u];return e=t.call.apply(t,[this].concat(l)),(0,p.Z)((0,i.Z)(e),"getUnitByIndex",(function(e,t){for(var n=0;n<t.data.length;n+=1)if(t.data[n].id===e)return t.data[n].unit})),(0,p.Z)((0,i.Z)(e),"checkAttendanceIndexValueRules",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(b().empty(e))return a.ZP.error("满足条件的数据为空");if(b().not.array(e))return a.ZP.error("满足条件的数据格式错误");var t=!1;return e.forEach((function(e){b().empty(e)?t=!0:Object.keys(e).forEach((function(n){if(b().not.existy(e[n])||b().empty(e[n]))return t=!0,!0}))})),t})),(0,p.Z)((0,i.Z)(e),"checkAttendanceIndex",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=e.checkAttendanceIndexValueRules(n.rules);void 0===n.matchType||!1!==a?r("请填写完整"):r()})),(0,p.Z)((0,i.Z)(e),"renderOrderTarget",(function(){var t=e.props,n=t.disabled,r=t.dataSource,a=t.platformCode,o=t.orderTypes["".concat(a).concat(R)];if(r&&!o)return f.createElement("div",null);var c=e.props.form.getFieldDecorator,i=Z().get(r,"matchFilters",[]),l=C.Y9g.description(i,"",!0),u=Z().get(l,"0.groupFilters",[]),s=Z().get(l,"0.groupMatch",[]),p={matchType:C.Kbw.meetAll};b().existy(l)&&b().not.empty(l)&&(p={matchType:s,rules:u.map((function(t){return{name:t.varName,index:t.index,symbol:t.symbol,num:C.fbc.dynamicExchange(t.value,e.getUnitByIndex(t.index,o),!1)}}))});var d=[{label:"筛选条件",form:c("orderIndex",{rules:[{required:!0},{validator:e.checkAttendanceIndex}],initialValue:p})(f.createElement(O.Z,{platformCode:a,tags:[R],disabled:n,layout:{indicators:6,symbol:3,num:3}}))}];return f.createElement(E.KP,{items:d,cols:1,layout:{labelCol:{span:3},wrapperCol:{span:21}}})})),(0,p.Z)((0,i.Z)(e),"renderRange",(function(){var t=e.props,n=t.disabled,a=t.dataSource,o=e.props.form.getFieldDecorator,c=C.KAm.month,i=Z().get(a,"payrollMark",""),l=[{label:"数据统计时间",form:o("statisticsTime",{initialValue:c,rules:[{required:!0,message:"请选择"}]})(f.createElement(x,{disabled:n},f.createElement(d.ZP,{value:C.KAm.month},C.KAm.description(C.KAm.month))))}],u=[{label:"结算单对应列",form:o("payrollMark",{initialValue:i})(f.createElement(r.Z,{placeholder:"请输入结算单对应列(可选)",disabled:n}))}],s={labelCol:{span:8},wrapperCol:{span:16}};return f.createElement("div",null,f.createElement(E.KP,{items:l,layout:s,cols:3}),e.renderOrderTarget(),f.createElement(E.KP,{items:u,layout:s,cols:3}))})),(0,p.Z)((0,i.Z)(e),"renderReward",(function(){var t=e.props,n=t.form,r=t.disabled,a=t.dataSource,o=t.platformCode;return f.createElement("div",null,f.createElement(k.Z,{title:"设定奖罚"}),f.createElement(P.Z,{platformCode:o,currentStep:R,dataSource:a,form:n,disabled:r}))})),e}return(0,c.Z)(n,[{key:"render",value:function(){return f.createElement("div",null,this.renderRange(),this.renderReward())}}]),n}(f.Component);(0,p.Z)(D,"propTypes",{platformCode:v().string,disabled:v().bool,form:v().object,dataSource:v().object}),(0,p.Z)(D,"defaultProps",{disabled:!1,form:{}}),t.Z=(0,m.connect)((function(e){return{orderTypes:e.financeRulesGenerator.orderTypes}}))(D)},94412:function(e,t){t.Z={"app-comp-finance-content":"M5MEtxzFbEZsuk1e6jMt","app-comp-finance-collapse-container":"QUrWGdmkKNuXKUjWhL_5","app-comp-finance-collapse-container-normal":"L4_VvlaLn0WZ6w3MbEqp","app-comp-finance-collapse-title":"jvz4kBhjPh7u7NMa5aWw","app-comp-finance-collapse-content":"cEJvlUjz17uMHbSyXGie","app-comp-finance-popover-radiop-content":"ZRhwoaHiBnjHKwlOdOOX","app-comp-finance-popover-radio-radio1":"IJHzR_V69nWWIBQwvzFa","app-comp-finance-popover-radio-radiodb":"Y6FuhTCa6hVYjJV0Rmj5","app-comp-finance-MECoh":"W9Ewu9i3ZH5W4Io0buWR","app-comp-finance-MEmb4":"EWrvSD47c3G3DjZYNMyP","app-comp-finance-MEfr":"Dog4BcxqcvJw84OOEoji","app-comp-finance-MEfl":"KPlKZ1L34yiAAlhAJ3nv","app-comp-finance-component-color-cursor1":"Fy_HOusPbHnuFENMXf1R","app-comp-finance-component-color-cursor2":"fZoMhDQIkqaDbrsiJdwY","app-comp-finance-component-tc":"AmOnXChqRDdDCf8JrUfE","app-comp-finance-pbtns-style":"tvzvt3BlHaCvGdwdU9OB","app-comp-finance-pbtns-radio-group-style":"P8VB6hn0xsEdbQneygmh","app-comp-finance-component-mglr5":"fARCJrjUjlU_75M7JqAB","app-comp-finance-popover-radio-disabled":"e8ZN8kh6FatatGsuA109","app-comp-finance-top-tip":"U2i80vaaUMju8iLQZNdL","app-comp-finance-icon-info":"FiROgNEoXgQSJxysdjO7","app-comp-finance-icon-close":"cEHIFr_0Ug06W_MJtLXF","app-comp-finance-attendance-rule-from":"dcSAy8YCq1vqSi3aFiHh","app-comp-finance-attendance-rule-from-toptip":"dZMUSfsxoRE6I02xv_Dn"}},36313:function(e,t){t.Z={"app-comp-finance-generator-order-create-button-wrap":"E0Ipj33fPwWu7Mqzm221","app-comp-finance-generator-order-create-button":"pbH0kvJNtpHG2e_oVi4a","app-comp-finance-generator-order-from":"EMvK_ziS7chVbwRZQRHl","app-comp-finance-generator-order-from-tooltip":"m_Lsq9jrrp3Fx94cptNw","app-comp-finance-generator-order-common-item-from":"Cg4NCOBq2TymI49qEckc","app-comp-finance-generator-order-common-item-button":"b29AhLBCNMhoEoK3_nzv"}},51207:function(e,t){t.Z={"app-comp-finance-quality-create-competiton-from-wrap":"IAMhltvxEyYx5ckQ0ic0","app-comp-finance-quality-create-competiton-from-button":"iKV6B5j0MlrzWk_Q1bSF","app-comp-finance-quality-create-competiton-competition-edit-from":"iRPbV0dOCTYSOuB1ssAS"}},67389:function(e,t){t.Z={"app-comp-finance-finance-config":"hZRclu5eSpTjtxUDMHzS","app-comp-finance-rule-city":"Tjc1M7acPWnqaEAmKiYD","app-comp-finance-history-empty-page":"bdgR0eOyNgZ3XMTfFE0V","app-comp-finance-generator-steps":"e0eTQl_znRP_zZvEhSrP","app-comp-finance-generator-steps-state":"OC9XQGVLrLaIJvWcL6Jd","app-comp-finance-generator-steps-operation":"uPY3hBHGriTJJ6GNcZKa","app-comp-finance-generator-steps-operation-previous":"nINUqC8E9kEuc57tC0wS","app-comp-finance-generator-steps-mask":"v15eTjYHtxMrQqQ832U9","app-comp-finance-generator-steps-mask-content":"PjQVQ_QIFxeh9SH9wQJb","app-comp-finance-generator-steps-mask-button-wrap":"Geu405KAsCYxPfdoKtWY","app-comp-finance-generator-draft-wrap":"tJ2GPcWoDGY1exYW3rz3","app-comp-finance-generator-draft-effective":"eV3Q70mKRDDFfVM5HIY_","app-comp-finance-generator-draft-update-effective":"l7Ey9CKK1WXAyWIpGslY","app-comp-finance-generator-draft-add-modal-wrap":"lPVy9fntMxPoN_ES52p6","app-comp-finance-generator-draft-operation-wrap":"xIltECLH_cv11LKWNlkW","app-comp-finance-generator-draft-button":"S9kIkFtz3vfw0QlnTEaI","app-comp-finance-generator-draft-title-ext":"tGUDuAcCTTe2_qkNXyqA","app-comp-finance-generator-draft-senior-editor":"AZfN5rhWPqAOa6BW2IuI","app-comp-finance-generator-draft-empty-page":"gA6jd1D5Aikh65_JGVWH","app-comp-finance-generator-history-page-header-title":"TrtHLlMWS1sIW0kQ9uLe","app-comp-finance-generator-history-page-header-content":"u7B08WFn705DMAWtws2W","app-comp-finance-generator-history-page-header-link":"ovtJaZPqwRA1ZGJxHUeg"}}}]);