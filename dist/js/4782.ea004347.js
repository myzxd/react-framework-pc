"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4782],{4782:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});n(20186);var r=n(75385),a=(n(55295),n(69713)),o=n(4942),i=n(29439),c=n(94315),l=n.n(c),u=n(93517),f=n.n(u),s=n(67294),m=n(55609),p=n(96036),d=(n(9070),n(20924)),g=n(15671),y=n(43144),h=n(97326),b=n(60136),O=n(82963),v=n(61120),Z=(n(29093),n(16317)),E=n(45697),j=n.n(E),D=n(80385);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.Z)(e);if(t){var a=(0,v.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var S=Z.Z.Option,T=function(e){(0,b.Z)(n,e);var t=_(n);function n(e){var r;return(0,g.Z)(this,n),r=t.call(this,e),(0,o.Z)((0,h.Z)(r),"onChangeCity",(function(e,t){var n=r.form.setFieldsValue,a=t.map((function(e){return e.props?e.props.spell:""}));r.setState({cities:a}),n({districts:[]})})),(0,o.Z)((0,h.Z)(r),"onReset",(function(){var e=r.props.onSearch;e&&e({name:void 0,mobile:void 0,idCard:void 0,state:void 0,meta:{page:1,limit:30}})})),(0,o.Z)((0,h.Z)(r),"onSearch",(function(e){var t=r.props.onSearch,n=w(w({},e),{},{meta:{page:1,limit:30}});t&&t(n)})),(0,o.Z)((0,h.Z)(r),"onHookForm",(function(e){r.form=e})),(0,o.Z)((0,h.Z)(r),"renderSearch",(function(){var e={items:[{label:"业主姓名",form:function(e){return e.getFieldDecorator("name")(s.createElement(d.Z,{placeholder:"请输入业主姓名"}))}},{label:"手机号",form:function(e){return e.getFieldDecorator("mobile")(s.createElement(d.Z,{placeholder:"请输入手机号"}))}},{label:"状态",form:function(e){return e.getFieldDecorator("state")(s.createElement(Z.Z,{placeholder:"请选择状态"},s.createElement(S,{value:D.zqR.normal},D.zqR.description(D.zqR.normal)),s.createElement(S,{value:D.zqR.notEffect},D.zqR.description(D.zqR.notEffect))))}},{label:"身份证号",form:function(e){return e.getFieldDecorator("idCard")(s.createElement(d.Z,{placeholder:"请输入身份证号"}))}},{label:"业主团队ID",form:function(e){return e.getFieldDecorator("ownerTeamId")(s.createElement(d.Z,{placeholder:"请输入业主团队ID"}))}}],operations:r.props.operations,expand:!0,onReset:r.onReset,onSearch:r.onSearch,onHookForm:r.onHookForm};return s.createElement(p.IT,null,s.createElement(p.yL,e))})),r.form={},r}return(0,y.Z)(n,[{key:"render",value:function(){return s.createElement("div",null,this.renderSearch())}}]),n}(s.Component);(0,o.Z)(T,"propTypes",{onSearch:j().func,operations:j().array}),(0,o.Z)(T,"defaultProps",{onSearch:function(){},operations:[]});var k=T,I=(n(52466),n(10642)),M=n(87462),C=(n(35668),n(86585)),R=n(96486),x=n.n(R);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=Z.Z.Option;function L(e){var t=e.visibles,n=e.onHideModal,r=e.partmentData,a=e.clearData,o=e.monitoringInfo,c=e.getMonitoringData,l=e.cerateMonitoring,u=e.getMonitoringPartment,m=C.Z.useForm(),d=(0,i.Z)(m,1)[0],g=(0,s.useState)({}),y=(0,i.Z)(g,2),h=y[0],b=y[1];(0,s.useEffect)((function(){return function(){return a()}}),[a]);var O,v,E=function(){n&&n(),j()},j=function(){d.resetFields(),b({}),a()},D=function(e){if(!e)return d.setFieldsValue({name:void 0}),b({});var t=r.find((function(t){return t._id===e}));d.setFieldsValue({name:e}),b(t)},P=x().debounce((function(e){e.trim()&&u({name:e})}),800);return s.createElement(I.Z,{title:"添加私教管理",visible:t,onOk:function(){d.validateFields().then((function(t){var n=z(z({},t),{},{id:f().get(o,"_id",void 0),onSuccessCallback:function(){c(z({meta:e.meta},e.searchParams)),E()}});l(n)}))},onCancel:E,okText:"确定",cancelText:"取消"},s.createElement(C.Z,{form:d,layout:"horizontal"},(O={labelCol:{span:6},wrapperCol:{span:16}},v=[s.createElement(C.Z.Item,(0,M.Z)({label:"私教部门名称",name:"name",rules:[{required:!0,message:"请选择私教部门名称"}]},O),s.createElement(Z.Z,{showSearch:!0,placeholder:"请输入私教部门名称搜索",showArrow:!1,onChange:D,onSearch:P,style:{width:240},filterOption:!1,allowClear:!0},r.map((function(e){return s.createElement(q,{key:e._id,value:e._id},"".concat(e.name,"(").concat(e.code,")"))})))),s.createElement(C.Z.Item,(0,M.Z)({label:"私教部门编号"},O),f().get(h,"code","--")),s.createElement(C.Z.Item,(0,M.Z)({label:"私教部门负责人"},O),f().get(h,"administrator_info.name","--")),s.createElement(C.Z.Item,(0,M.Z)({label:"生效日期"},O),"立即生效")],s.createElement(p.Fp,{items:v,cols:1}))))}L.propTypes={visibles:j().bool,monitoringInfo:j().object},L.defaultProps={visibles:!1,monitoringInfo:{}};var H=(0,m.connect)((function(e){return{partmentData:e.teamTeacher.partmentData}}),(function(e){return{clearData:function(){return e({type:"teamTeacher/resetTeamMonitoringdePartmentList",payload:{}})},getMonitoringData:function(t){return e({type:"teamTeacher/fetchTeamTeacherMonitoringList",payload:t})},cerateMonitoring:function(t){return e({type:"teamTeacher/createTeamTeacherMonitoring",payload:t})},getMonitoringPartment:function(t){return e({type:"teamTeacher/fetachTeamMonitoringdePartmentList",payload:t})}}}))(L),B=n(97116),V=n(23217);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var J=(0,m.connect)((function(e){return{monitoringData:e.teamTeacher.monitoringData}}),(function(e){return{getMonitoringData:function(t){return e({type:"teamTeacher/fetchTeamTeacherMonitoringList",payload:t})},clearData:function(){return e({type:"teamTeacher/resetTeamTeacherMonitoringList",payload:{}})}}}))((function(e){var t=e.dispatch,n=e.monitoringData,o=void 0===n?{}:n,c=e.getMonitoringData,u=e.clearData,m=o.data,d=void 0===m?[]:m,g=(0,s.useState)({}),y=(0,i.Z)(g,2),h=y[0],b=y[1],O=(0,s.useState)({page:1,limit:30}),v=(0,i.Z)(O,2),Z=v[0],E=v[1],j=(0,s.useState)(!1),P=(0,i.Z)(j,2),w=P[0],_=P[1],S=(0,s.useState)({}),T=(0,i.Z)(S,2),I=T[0],M=T[1];(0,s.useEffect)((function(){return c(A({meta:Z},h)),function(){return u()}}),[c,t,h,Z]);var C,R,x,F=function(e,t){E({page:e,limit:t})},z=function(e,t){E({page:e,limit:t})},q=function(e){var t=A({meta:Z},e);b(t),E({page:1,limit:30})},L=function(){_(!1)};return s.createElement("div",null,s.createElement(k,{onSearch:q}),(C=B.Iq.modules().some((function(e){return e.id===V.Z.ModuleTeamManagerUpdate.id})),R=[{title:"业主姓名",dataIndex:"staff_info",key:"staff_info.name",render:function(e,t){return C&&t._id&&t.state!==D.zqR.notEffect?s.createElement("a",{href:"/#/Team/Manager/Update?id=".concat(t._id),rel:"noopener noreferrer",target:"_blank"},f().get(e,"name","--")):e&&e.name?e.name:"--"}},{title:"业主团队ID",dataIndex:"_id"},{title:"业主手机号",dataIndex:["staff_info","phone"],render:function(e){return e||"--"}},{title:"业主身份证号",dataIndex:["staff_info","identity_card_id"],key:"staff_info.identity_card_id",render:function(e,t){return t.state===D.zqR.notEffect?t.identity_card_id?t.identity_card_id:"--":e||"--"}},{title:"平台",dataIndex:"platform_names",key:"platform_name",render:function(e){return l().not.existy(e)||l().empty(e)||l().not.array(e)?"--":1===e.length?f().get(e,"0"):s.createElement(a.Z,{title:e.map((function(e){return e})).join(" , ")},s.createElement("span",null,f().get(e,"0")," 等",e.length,"条"))}},{title:"供应商",dataIndex:"supplier_names",key:"supplier_name",render:function(e){return l().not.existy(e)||l().empty(e)||l().not.array(e)?"--":1===e.length?f().get(e,"0"):s.createElement(a.Z,{title:e.map((function(e){return e})).join(" , ")},s.createElement("span",null,f().get(e,"0")," 等",e.length,"条"))}},{title:"城市",dataIndex:"city_names",key:"city_names",render:function(e){return l().not.existy(e)||l().empty(e)||l().not.array(e)?"--":1===e.length?f().get(e,"0"):s.createElement(a.Z,{title:e.map((function(e){return e})).join(" , ")},s.createElement("span",null,f().get(e,"0")," 等",e.length,"条"))}},{title:"操作",dataIndex:"_id",render:function(e,t){return t.state===D.zqR.notEffect?s.createElement("span",{style:{color:"rgba(0,0,0,0.25)"}},"添加私教管理"):s.createElement("a",{onClick:function(){var e;e=t,_(!0),M(e)}},"添加私教管理")}}],x={current:Z.page,pageSize:Z.limit,onChange:F,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:z,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:f().get(o,"_meta.result_count",0)},s.createElement(p.IT,null,s.createElement(r.Z,{pagination:x,columns:R,rowKey:function(e,t){return e._id||t},dataSource:d}))),s.createElement(H,{searchParams:h,meta:Z,onHideModal:L,visibles:w,monitoringInfo:I}))}))}}]);