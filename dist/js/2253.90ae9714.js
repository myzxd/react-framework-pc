"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[2253],{12253:function(e,t,a){a.r(t),a.d(t,{default:function(){return X}});a(13062);var n=a(71230),r=(a(89032),a(15746)),o=(a(52560),a(71577)),i=a(15671),l=a(43144),c=a(97326),u=a(60136),d=a(82963),s=a(61120),p=a(4942),f=a(30381),m=a.n(f),v=a(67294),y=a(45697),h=a.n(y),b=a(55609),g=a(66939),Z=(a(98703),a(80385)),C=(a(36616),a(51368)),D=a(94315),P=a.n(D),I=a(93517),N=a.n(I),R=a(96036),E=a(81243),V=a(612);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var x=function(e){(0,u.Z)(a,e);var t=k(a);function a(){var e;(0,i.Z)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,p.Z)((0,c.Z)(e),"renderExpenseInfo",(function(){var t=e.props.form.getFieldDecorator,a=e.props,n=a.houseContractDetail,r=void 0===n?{}:n,o=a.subjectId,i=a.isCreateRenew,l=r.pledgeMoney,c=void 0===l?0:l,u=r.fromContractInfo,d=[],s=c-N().get(u,"unrefunded_pledge_money",0);return void 0!==i?d.push({label:"押金金额(元)",span:5,layout:{labelCol:{span:13},wrapperCol:{span:10}},form:t("pledgeMoney",{initialValue:P().existy(s)&&P().not.empty(s)?Z.fbc.exchangePriceToYuan(s):"",rules:[{required:!0,message:"请填写内容"}]})(v.createElement(C.Z,{min:0,disabled:!0,formatter:Z.fbc.limitDecimals,parser:Z.fbc.limitDecimals}))},{span:7,layout:{labelCol:{span:0},wrapperCol:{span:16}},form:t("message",{})(v.createElement("span",{style:{color:"red",textAlign:"left"}},"此处为续签合同未付款的押金差价"))},{label:"科目",span:7,layout:{labelCol:{span:8},wrapperCol:{span:16}},form:t("pledgeAccountingId",{initialValue:o,rules:[{required:!0,message:"没有科目"}]})(v.createElement(E.Z,{subjectId:o}))}):d.push({label:"押金金额(元)",span:8,layout:{labelCol:{span:8},wrapperCol:{span:16}},form:t("pledgeMoney",{initialValue:P().existy(c)&&P().not.empty(c)?Z.fbc.exchangePriceToYuan(c):"",rules:[{required:!0,message:"请填写内容"}]})(v.createElement(C.Z,{min:0,disabled:!0,formatter:Z.fbc.limitDecimals,parser:Z.fbc.limitDecimals}))},{label:"科目",span:8,layout:{labelCol:{span:8},wrapperCol:{span:16}},form:t("pledgeAccountingId",{initialValue:o,rules:[{required:!0,message:"没有科目"}]})(v.createElement(E.Z,{subjectId:o}))}),v.createElement(R.KP,{items:d,cols:3})})),(0,p.Z)((0,c.Z)(e),"renderReceiptInfo",(function(){var t=e.props,a=t.form,n=t.houseContractDetail,r=void 0===n?{}:n,o=t.disabled,i=r.pledgePayeeInfo,l={payeeInfo:void 0===i?{}:i};return v.createElement(V.Z,{form:a,disabled:o,detail:l,label:{cardNameLabel:"押金收款人"},placeholder:{cardNamePlace:"请输入姓名",cardNumPlace:"请输入卡号",bankNamePlace:"请输入全称"},formName:{cardNameForm:"pledgePayee",cardNumForm:"pledgePayeeAccount",bankNameForm:"pledgeBankName"},isHouse:!0,layout:{labelCol:{span:8},wrapperCol:{span:16}},namespace:"pledge"})})),(0,p.Z)((0,c.Z)(e),"render",(function(){return v.createElement(R.IT,null,e.renderExpenseInfo(),e.renderReceiptInfo())})),e}return a}(v.Component);(0,p.Z)(x,"propTypes",{houseContractDetail:h().object,subjectId:h().string}),(0,p.Z)(x,"defaultProps",{houseContractDetail:{},subjectId:""});var S=x,j=(a(36037),a(47933)),O=(a(9070),a(20924)),w=a(8240);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var F=R.Hr.Option,T=function(e){(0,u.Z)(a,e);var t=M(a);function a(e){var n;return(0,i.Z)(this,a),n=t.call(this,e),(0,p.Z)((0,c.Z)(n),"onIsOpenTicket",(function(e){var t=n.props.form,a=t.setFieldsValue,r=.045*(0,t.getFieldValue)("agentMoney");a("1"===e?{agentPayeeTax:0}:{agentPayeeTax:r})})),(0,p.Z)((0,c.Z)(n),"onAgentMoney",(function(e){var t=n.props.form.setFieldsValue,a=.045*e;void 0!==a&&t({agentPayeeTax:a})})),(0,p.Z)((0,c.Z)(n),"onChangeRadioGroupValue",(function(e){var t=n.props.form,a=void 0===t?{}:t;e.target.value===Z.Rpr.credit&&a.setFieldsValue({mediumIdNumber:void 0}),e.target.value===Z.Rpr.idCard&&a.setFieldsValue({mediumUnifiedCode:void 0}),n.setState({updateRadioValue:!1,radioValue:e.target.value})})),(0,p.Z)((0,c.Z)(n),"validatorIdentityCardId",(function(e,t,a){return t?(0,w.us)(t)?void a():a("请输入正确的身份证号"):a("请输入证件号码")})),(0,p.Z)((0,c.Z)(n),"renderExpenseInfo",(function(){var e=n.props.form.getFieldDecorator,t=n.props,a=t.houseContractDetail,r=void 0===a?{}:a,o=t.subjectId,i=r.agentMoney,l=.045*i,c=[{label:"费用金额(元)",form:e("agentMoney",{initialValue:P().existy(i)&&P().not.empty(i)?Z.fbc.exchangePriceToYuan(i):"",rules:[{required:!0,message:"请填写内容"}]})(v.createElement(C.Z,{min:0,disabled:!0,formatter:Z.fbc.limitDecimals,parser:Z.fbc.limitDecimals,onChange:n.onAgentMoney}))},{label:"是否开票",form:e("agentInvoiceFlag",{initialValue:"0",rules:[{required:!0,message:"请选择"}]})(v.createElement(R.Hr,{placeholder:"请选择",onChange:n.onIsOpenTicket},v.createElement(F,{value:"1"},"是"),v.createElement(F,{value:"0"},"否")))},{label:"税金(元)",form:e("agentPayeeTax",{initialValue:Z.fbc.exchangePriceToYuan(l),rules:[{required:!0,message:"请填写内容"}]})(v.createElement(C.Z,{disabled:!0,min:0,formatter:Z.fbc.limitDecimals,parser:Z.fbc.limitDecimals}))},{label:"科目",form:e("agentAccountingId",{initialValue:o,rules:[{required:!0,message:"没有科目"}]})(v.createElement(E.Z,{subjectId:o}))}];return v.createElement(R.KP,{items:c,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}})})),(0,p.Z)((0,c.Z)(n),"renderReceiptInfo",(function(){var e=n.props,t=e.form,a=e.houseContractDetail,r=void 0===a?{}:a,o=e.disabled,i=r.agentPayeeInfo,l={payeeInfo:void 0===i?{}:i};return v.createElement(V.Z,{form:t,disabled:o,detail:l,label:{cardNameLabel:"中介费收款人"},placeholder:{cardNamePlace:"请输入姓名",cardNumPlace:"请输入卡号",bankNamePlace:"请输入全称"},formName:{cardNameForm:"agentPayee",cardNumForm:"agentPayeeAccount",bankNameForm:"agentBankName"},isHouse:!0,layout:{labelCol:{span:8},wrapperCol:{span:16}},namespace:"agent"})})),(0,p.Z)((0,c.Z)(n),"renderCorresponding",(function(e){var t=n.props.form.getFieldDecorator,a=n.props,r=a.disabled,o=a.houseContractDetail,i=(void 0===o?{}:o).agentPayeeInfo,l={payeeInfo:void 0===i?{}:i};if(n.state.radioValue===Z.Rpr.credit){var c={label:"统一信用代码",form:t("mediumUnifiedCode",{initialValue:n.state.updateRadioValue&&N().get(l,"payeeInfo.credit_no")?N().get(l,"payeeInfo.credit_no"):""})(v.createElement(O.Z,{disabled:r}))};e.push(c)}if(n.state.radioValue===Z.Rpr.idCard){var u={label:"身份证号",form:t("mediumIdNumber",{initialValue:n.state.updateRadioValue&&N().get(l,"payeeInfo.id_card_no")?N().get(l,"payeeInfo.id_card_no"):"",rules:[{required:!0,validator:n.validatorIdentityCardId}]})(v.createElement(O.Z,{disabled:r}))};e.push(u)}})),(0,p.Z)((0,c.Z)(n),"renderPaymentMethodInfo",(function(){var e=n.props.form.getFieldDecorator,t=n.props.disabled,a=[{label:"收款类型",form:e("mediumPayMethod",{initialValue:n.state.radioValue,rules:[{required:!0,message:"请选择收款类型"}]})(v.createElement(j.ZP.Group,{onChange:n.onChangeRadioGroupValue,disabled:t},v.createElement(j.ZP,{value:Z.Rpr.idCard},Z.Rpr.description(Z.Rpr.idCard)),v.createElement(j.ZP,{value:Z.Rpr.credit},Z.Rpr.description(Z.Rpr.credit))))}];return n.renderCorresponding(a),v.createElement(R.KP,{items:a,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}})})),(0,p.Z)((0,c.Z)(n),"render",(function(){return v.createElement(R.IT,null,n.renderExpenseInfo(),n.renderReceiptInfo(),n.renderPaymentMethodInfo())})),n.state={radioValue:Z.Rpr.credit,updateRadioValue:!0},n}return(0,l.Z)(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.houseContractDetail,n=void 0===a?{}:a;if(P().existy(n)&&P().not.empty(n)&&t.updateRadioValue){var r=n.agentPayeeInfo,o=(void 0===r?{}:r).payment;return{radioValue:void 0===o?Z.Rpr.credit:o}}return null}}]),a}(v.Component);(0,p.Z)(T,"propTypes",{houseContractDetail:h().object,subjectId:h().string}),(0,p.Z)(T,"defaultProps",{houseContractDetail:{},subjectId:""});var B=T,Y=(a(54071),a(14072)),q="t2Ben_JRon3mGBICnIBD";function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var H=function(e){(0,u.Z)(a,e);var t=_(a);function a(e){var n;(0,i.Z)(this,a),n=t.call(this,e),(0,p.Z)((0,c.Z)(n),"onStartChange",(function(e){var t=n.props.onChange,a=n.state.endValue;"value"in n.props||n.setState({startValue:e}),t&&t({startValue:e,endValue:a})})),(0,p.Z)((0,c.Z)(n),"onEndChange",(function(e){var t=n.props.onChange,a=n.state.startValue;"value"in n.props||n.setState({endValue:e}),t&&t({startValue:a,endValue:e})})),(0,p.Z)((0,c.Z)(n),"disabledStartDate",(function(e){var t=n.props.disabledStartDate;t&&t(e)})),(0,p.Z)((0,c.Z)(n),"disabledEndDate",(function(e){var t=n.props.disabledEndDate;return t&&t(e)})),(0,p.Z)((0,c.Z)(n),"handleStartOpenChange",(function(e){e||n.setState({endOpen:!0})})),(0,p.Z)((0,c.Z)(n),"handleEndOpenChange",(function(e){n.setState({endOpen:e})})),(0,p.Z)((0,c.Z)(n),"renderContent",(function(){var e=n.state,t=e.startValue,a=e.endValue,r=e.endOpen,o=n.props,i=o.format,l=o.disabledStart,c=o.disabledEnd,u=o.placeholderStart,d=o.placeholderEnd,s=o.showTodayStart,p=o.showTodayEnd;return v.createElement("div",null,v.createElement(Y.Z,{disabledDate:n.disabledStartDate,format:i,value:t,placeholder:u,disabled:l,showToday:s,onChange:n.onStartChange,onOpenChange:n.handleStartOpenChange}),v.createElement("span",{className:q},"~"),v.createElement(Y.Z,{disabledDate:n.disabledEndDate,format:i,value:a,disabled:c,placeholder:d,onChange:n.onEndChange,showToday:p,open:r,onOpenChange:n.handleEndOpenChange}))}));var r=e.value||{};return n.state={startValue:r.startValue,endValue:r.endValue,endOpen:!1},n}return(0,l.Z)(a,[{key:"render",value:function(){return this.renderContent()}}],[{key:"getDerivedStateFromProps",value:function(e){return"value"in e?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){(0,p.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e.value||{}):null}}]),a}(v.Component);(0,p.Z)(H,"propTypes",{value:h().object,onChange:h().func,format:h().string,disabledStart:h().bool,disabledEnd:h().bool,placeholderStart:h().string,placeholderEnd:h().string,showTodayStart:h().bool,showTodayEnd:h().bool,disabledStartDate:h().func,disabledEndDate:h().func}),(0,p.Z)(H,"defaultProps",{onChange:function(){},format:"YYYY-MM-DD",disabledStart:!1,disabledEnd:!1,placeholderStart:"开始时间",placeholderEnd:"结束时间",showTodayStart:!1,showTodayEnd:!1,disabledStartDate:function(){},disabledEndDate:function(){}});var U=H;function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var G=R.Hr.Option,L=function(e){(0,u.Z)(a,e);var t=K(a);function a(e){var n;return(0,i.Z)(this,a),n=t.call(this,e),(0,p.Z)((0,c.Z)(n),"onHouseMoney",(function(e){var t=n.props.form.setFieldsValue,a=.045*e;void 0!==a&&t({rentTax:a})})),(0,p.Z)((0,c.Z)(n),"onIsOpenTicket",(function(e){var t=n.props.form,a=t.setFieldsValue,r=.045*(0,t.getFieldValue)("houseMoney");a("1"===e?{rentTax:0}:{rentTax:r})})),(0,p.Z)((0,c.Z)(n),"onVerify",(function(e,t,a){var n=t.startValue,r=t.endValue;n&&r?a():a("请选择")})),(0,p.Z)((0,c.Z)(n),"onChangeRadioGroupValue",(function(e){var t=n.props.form,a=void 0===t?{}:t;e.target.value===Z.Rpr.credit&&a.setFieldsValue({idNumber:void 0}),e.target.value===Z.Rpr.idCard&&a.setFieldsValue({UnifiedCode:void 0}),n.setState({updateRadioValue:!1,radioValue:e.target.value})})),(0,p.Z)((0,c.Z)(n),"disabledEndDate",(function(e){var t=n.props.houseContractDetail,a=t.contractEndDate,r=t.firstRentCycle;return!!e&&(e<m()("".concat(r[0]))||e>m()("".concat(a)))})),(0,p.Z)((0,c.Z)(n),"validatorIdentityCardId",(function(e,t,a){return t?(0,w.us)(t)?void a():a("请输入正确的身份证号"):a("请输入证件号码")})),(0,p.Z)((0,c.Z)(n),"validatorIdentityCardId",(function(e,t,a){return t?(0,w.us)(t)?void a():a("请输入正确的身份证号"):a("请输入证件号码")})),(0,p.Z)((0,c.Z)(n),"renderDateInfo",(function(){var e=n.props.form,t=e.getFieldDecorator,a=e.getFieldsValue,r=n.props.houseContractDetail,o=r.firstRentCycle,i="",l="",c="";P().not.empty(o)&&P().existy(o)&&(i=m()(String(o[0]),"YYYY-MM-DD"),l=m()(String(o[1]),"YYYY-MM-DD"),c=m()("".concat(o[1]),"YYYYMMDD").diff(m()("".concat(o[0]),"YYYYMMDD"),"day")+1);var u=a(["rentDate"]).rentDate;u&&u.startValue&&u.endValue&&(c=u.endValue.diff(u.startValue,"day")+1);var d={form:e,disabledEndDate:n.disabledEndDate,disabledStart:!0,detail:r},s=[{label:"租金期间",form:t("rentDate",{initialValue:{startValue:i,endValue:l},rules:[{required:!0,message:"请选择",validator:n.onVerify}]})(v.createElement(U,d))},{label:"总天数",form:t("totalDay",{initialValue:c})(v.createElement("span",null,c))}];return v.createElement(R.KP,{items:s,cols:2,layout:{labelCol:{span:5},wrapperCol:{span:16}}})})),(0,p.Z)((0,c.Z)(n),"renderBaseInfo",(function(){var e=n.props.form.getFieldDecorator,t=n.props.houseContractDetail,a=t.monthMoney*t.paymentMethodRent,r=.045*a,o=[{label:"房屋租金(元)",form:e("houseMoney",{initialValue:Z.fbc.exchangePriceToYuan(a),rules:[{required:!0,message:"请填写内容"}]})(v.createElement(C.Z,{min:0,formatter:Z.fbc.limitDecimals,parser:Z.fbc.limitDecimals,onChange:n.onHouseMoney}))},{label:"是否开票",form:e("rentInvoiceFlag",{initialValue:"0",rules:[{required:!0,message:"请选择"}]})(v.createElement(R.Hr,{placeholder:"请选择",onChange:n.onIsOpenTicket},v.createElement(G,{value:"1"},"是"),v.createElement(G,{value:"0"},"否")))},{label:"税金(元)",form:e("rentTax",{initialValue:Z.fbc.exchangePriceToYuan(r),rules:[{required:!0,message:"请填写内容"}]})(v.createElement(C.Z,{disabled:!0,min:0,formatter:Z.fbc.limitDecimals,parser:Z.fbc.limitDecimals}))}];return v.createElement(R.KP,{items:o,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}})})),(0,p.Z)((0,c.Z)(n),"renderReceiptInfo",(function(){var e=n.props,t=e.form,a=e.houseContractDetail,r=e.disabled,o=a.rentPayeeInfo,i={payeeInfo:void 0===o?{}:o};return v.createElement(V.Z,{form:t,disabled:r,detail:i,label:{cardNameLabel:"房租收款人"},placeholder:{cardNamePlace:"请输入姓名",cardNumPlace:"请输入卡号",bankNamePlace:"请输入全称"},formName:{cardNameForm:"rentPayee",cardNumForm:"rentPayeeAccount",bankNameForm:"rentBankName"},isHouse:!0,layout:{labelCol:{span:8},wrapperCol:{span:16}},namespace:"rent"})})),(0,p.Z)((0,c.Z)(n),"renderCorresponding",(function(e){var t=n.props,a=t.houseContractDetail,r=void 0===a?{}:a,o=t.disabled,i=n.props.form.getFieldDecorator,l=r.rentPayeeInfo,c={payeeInfo:void 0===l?{}:l};if(n.state.radioValue===Z.Rpr.credit){var u={label:"统一信用代码",form:i("UnifiedCode",{initialValue:n.state.updateRadioValue&&N().get(c,"payeeInfo.credit_no")?N().get(c,"payeeInfo.credit_no"):""})(v.createElement(O.Z,{disabled:o}))};e.push(u)}if(n.state.radioValue===Z.Rpr.idCard){var d={label:"身份证号",form:i("idNumber",{initialValue:n.state.updateRadioValue&&N().get(c,"payeeInfo.id_card_no")?N().get(c,"payeeInfo.id_card_no"):"",rules:[{required:!0,validator:n.validatorIdentityCardId}]})(v.createElement(O.Z,{disabled:o}))};e.push(d)}})),(0,p.Z)((0,c.Z)(n),"renderPaymentMethodInfo",(function(){var e=n.props.form.getFieldDecorator,t=n.props.disabled,a=[{label:"收款类型",form:e("payMethod",{initialValue:n.state.radioValue,rules:[{required:!0,message:"请选择收款类型"}]})(v.createElement(j.ZP.Group,{onChange:n.onChangeRadioGroupValue,disabled:t},v.createElement(j.ZP,{value:Z.Rpr.idCard},Z.Rpr.description(Z.Rpr.idCard)),v.createElement(j.ZP,{value:Z.Rpr.credit},Z.Rpr.description(Z.Rpr.credit))))}];return n.renderCorresponding(a),v.createElement(R.KP,{items:a,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}})})),(0,p.Z)((0,c.Z)(n),"render",(function(){return v.createElement(R.IT,null,n.renderDateInfo(),n.renderBaseInfo(),n.renderReceiptInfo(),n.renderPaymentMethodInfo())})),n.state={radioValue:Z.Rpr.credit,updateRadioValue:!0},n}return(0,l.Z)(a,null,[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.houseContractDetail,n=void 0===a?{}:a;if(P().existy(n)&&P().not.empty(n)&&t.updateRadioValue){var r=n.rentPayeeInfo,o=(void 0===r?{}:r).payment;return{radioValue:void 0===o?Z.Rpr.credit:o}}return null}}]),a}(v.Component);(0,p.Z)(L,"propTypes",{houseContractDetail:h().object,form:h().object}),(0,p.Z)(L,"defaultProps",{houseContractDetail:{},isCreate:!1,form:{}});var z=L,J=a(67955);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,d.Z)(this,a)}}var Q=function(e){(0,u.Z)(a,e);var t=W(a);function a(e){var l;return(0,i.Z)(this,a),l=t.call(this,e),(0,p.Z)((0,c.Z)(l),"onReturnContrac",(function(){var e=l.props.location.query.id;e&&(window.location.href="/#/Expense/Manage/House/Update?id=".concat(e))})),(0,p.Z)((0,c.Z)(l),"onSaveAndCreateRenewOrder",(function(){var e=l.props,t=e.form,a=void 0===t?{}:t,n=e.dispatch,r=l.props.location.query.id,o=function(e){window.location.href="/#/Expense/Manage/ExamineOrder/Form?orderId=".concat(e.application_order_id,"&contractId=").concat(r,"&template=").concat(Z.$9p.rent)},i=function(){};a.validateFields((function(e,t){var a=t.rentDate,l=t.houseMoney,c=t.rentInvoiceFlag,u=t.rentTax,d=t.rentPayee,s=t.rentPayeeAccount,p=t.rentBankName,f=t.pledgeMoney,v=t.pledgePayee,y=t.pledgePayeeAccount,h=t.pledgeBankName,b=t.agentMoney,g=t.agentInvoiceFlag,Z=t.agentPayeeTax,C=t.agentPayee,D=t.agentPayeeAccount,P=t.agentBankName,I=t.UnifiedCode,N=t.idNumber,R=t.mediumUnifiedCode,E=t.mediumIdNumber,V=t.payMethod,k=t.mediumPayMethod,x=Number(m()(a.startValue).format("YYYYMMDD")),S=Number(m()(a.endValue).format("YYYYMMDD"));e||n({type:"expenseHouseContract/createInitApplicationOrder",payload:{params:{payMethod:V,mediumPayMethod:k,UnifiedCode:I,idNumber:N,mediumUnifiedCode:R,mediumIdNumber:E,id:r,rentStartDate:x,rentEndDate:S,houseMoney:l,rentInvoiceFlag:c,rentTax:u,rentPayeeName:d,rentPayeeNum:s,rentPayeeBankDetails:p,pledgeMoney:f,pledgePayeeName:v,pledgePayeeNum:y,pledgePayeeBankDetails:h,agentMoney:b,agentInvoiceFlag:g,agentPayeeTax:Z,agentPayeeName:C,agentPayeeNum:D,agentPayeeBankDetails:P},onSuccessCallback:o,onFailureCallback:i}})}))})),(0,p.Z)((0,c.Z)(l),"renderRentInfo",(function(){var e=l.props,t=e.houseContractDetail,a=void 0===t?{}:t,n=e.form,r=void 0===n?{}:n;return v.createElement(z,{form:r,houseContractDetail:a})})),(0,p.Z)((0,c.Z)(l),"renderDeposit",(function(){var e=l.props,t=e.houseContractDetail,a=void 0===t?{}:t,n=e.form,r=void 0===n?{}:n,o=e.location,i=(o=void 0===o?{}:o).query,c=void 0===i?{}:i,u=a.pledgeAccountingInfo,d=(u=void 0===u?{}:u).id,s=c.isCreateRenew;return v.createElement(S,{form:r,houseContractDetail:a,subjectId:d,isCreateRenew:s})})),(0,p.Z)((0,c.Z)(l),"renderAgencyFees",(function(){var e=l.props,t=e.houseContractDetail,a=void 0===t?{}:t,n=e.form,r=void 0===n?{}:n,o=a.agentAccountingInfo,i=(o=void 0===o?{}:o).id;return v.createElement(B,{form:r,houseContractDetail:a,subjectId:i})})),(0,p.Z)((0,c.Z)(l),"renderOprations",(function(){return v.createElement(n.Z,{type:"flex",align:"middle",justify:"space-around",className:J.Z["app-comp-expense-house-contract-update"]},v.createElement(r.Z,{span:11,style:{textAlign:"right"}},v.createElement(o.Z,{type:"primary",size:"large",onClick:l.onReturnContrac},"返回并修改合同信息")),v.createElement(r.Z,{span:11},v.createElement(o.Z,{type:"primary",size:"large",onClick:l.onSaveAndCreateRenewOrder},"提交并生成费用单")))})),(0,p.Z)((0,c.Z)(l),"render",(function(){return v.createElement(g.Z,{layout:"horizontal"},l.renderRentInfo(),l.renderDeposit(),l.renderAgencyFees(),l.renderOprations())})),l.state={},l}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){var e={id:this.props.location.query.id};this.props.dispatch({type:"expenseHouseContract/fetchHouseContractsDetail",payload:e})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"expenseHouseContract/resetHouseContractDetail"}),this.props.dispatch({type:"expenseCostOrder/resetCostOrders"})}}]),a}(v.Component);(0,p.Z)(Q,"propTypes",{houseContractDetail:h().object,form:h().object,dispatch:h().func}),(0,p.Z)(Q,"defaultProps",{houseContractDetail:{},form:{},dispatch:function(){}});var X=(0,b.connect)((function(e){return{houseContractDetail:e.expenseHouseContract.houseContractDetail}}))(g.Z.create()(Q))},81243:function(e,t,a){var n=a(15671),r=a(43144),o=a(97326),i=a(60136),l=a(82963),c=a(61120),u=a(4942),d=a(67294),s=a(93517),p=a.n(s),f=a(45697),m=a.n(f),v=a(55609);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,c.Z)(e);if(t){var r=(0,c.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,l.Z)(this,a)}}var h=function(e){(0,i.Z)(a,e);var t=y(a);function a(){var e;(0,n.Z)(this,a);for(var r=arguments.length,i=new Array(r),l=0;l<r;l++)i[l]=arguments[l];return e=t.call.apply(t,[this].concat(i)),(0,u.Z)((0,o.Z)(e),"render",(function(){var t=e.props,a=t.subjectId,n=t.subjectsDetail,r=void 0===n?{}:n,o=p().get(r,"".concat(a,".name"),""),i=p().get(r,"".concat(a,".accountingCode"),"");return d.createElement("span",null,"".concat(o).concat(i))})),e}return(0,r.Z)(a,[{key:"componentDidUpdate",value:function(e){var t=e.subjectId,a=void 0===t?void 0:t,n=e.dispatch,r=this.props,o=r.subjectId,i=void 0===o?void 0:o,l=r.subjectsDetail;i&&a!==i&&!(void 0===l?{}:l)[i]&&n({type:"expenseHouseContract/fetchSubjectsDetail",payload:{namespace:i,param:{id:i}}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"expenseHouseContract/resetSubjectsDetail"})}}]),a}(d.Component);(0,u.Z)(h,"propTypes",{subjectId:m().string.isRequired,subjectsDetail:m().object}),(0,u.Z)(h,"defaultProps",{subjectId:"",subjectsDetail:{}}),t.Z=(0,v.connect)((function(e){return{subjectsDetail:e.expenseHouseContract.subjectsDetail}}))(h)},612:function(e,t,a){var n=a(93433),r=a(15671),o=a(43144),i=a(97326),l=a(60136),c=a(82963),u=a(61120),d=a(4942),s=(a(29093),a(16317)),p=a(93517),f=a.n(p),m=a(45697),v=a.n(m),y=a(67294),h=a(55609),b=a(96036);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,u.Z)(e);if(t){var r=(0,u.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,c.Z)(this,a)}}var Z=s.Z.Option,C=function(e){(0,l.Z)(a,e);var t=g(a);function a(){var e;return(0,r.Z)(this,a),e=t.call(this),(0,d.Z)((0,i.Z)(e),"onSearchCardName",(function(t){var a=e.props.collection,r=(void 0===a?{}:a).cardName,o=void 0===r?[]:r;o.find((function(e){return e===t}))||e.setState({cardNameData:[].concat((0,n.Z)(o),[t])})})),(0,d.Z)((0,i.Z)(e),"onSearchCardNum",(function(t){var a=e.props.collection,r=(void 0===a?{}:a).cardNum,o=void 0===r?[]:r;o.find((function(e){return e===t}))||e.setState({cardNumData:[].concat((0,n.Z)(o),[t])})})),(0,d.Z)((0,i.Z)(e),"onSearchBankName",(function(t){var a=e.props.collection,r=(void 0===a?{}:a).bankName,o=void 0===r?[]:r;o.find((function(e){return e===t}))||e.setState({bankNameData:[].concat((0,n.Z)(o),[t])})})),(0,d.Z)((0,i.Z)(e),"onChangeCardNum",(function(t){var a=e.props,n=a.form,r=void 0===n?{}:n,o=a.collection,i=void 0===o?{}:o,l=a.namespace,c=r.setFieldsValue,u=i.originalBankName,d=void 0===u?[]:u,s=i.originalCardNum,p=(void 0===s?[]:s).findIndex((function(e){return e===t}));"rent"===l&&d[p]&&c({rentBankName:d[p]}),"agent"===l&&d[p]&&c({agentBankName:d[p]}),"pledge"===l&&d[p]&&c({pledgeBankName:d[p]})})),e.state={collection:void 0,cardNameData:[],cardNumData:[],bankNameData:[]},e}return(0,o.Z)(a,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"expenseCostOrder/fetchCollection",payload:{}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"expenseCostOrder/resetCollection",payload:{}})}},{key:"render",value:function(){var e=this.props,t=e.form,a=void 0===t?{}:t,n=e.detail,r=void 0===n?{}:n,o=e.label,i=void 0===o?{}:o,l=e.placeholder,c=void 0===l?{}:l,u=e.disabled,d=e.formName,p=void 0===d?{}:d,m=e.layout,v=void 0===m?{labelCol:{span:9},wrapperCol:{span:15}}:m,h=a.getFieldDecorator,g=this.state,C=g.cardNameData,D=void 0===C?[]:C,P=g.cardNumData,I=void 0===P?[]:P,N=g.bankNameData,R=void 0===N?[]:N,E=i.cardNameLabel,V=void 0===E?"收款人":E,k=i.cardNumLabel,x=void 0===k?"收款账户":k,S=i.bankNameLabel,j=void 0===S?"开户支行":S,O=c.cardNamePlace,w=void 0===O?"请填写收款人":O,M=c.cardNumPlace,F=void 0===M?"请填写收款账号":M,T=c.bankNamePlace,B=void 0===T?"请填写开户支行":T,Y=p.cardNameForm,q=void 0===Y?"payee":Y,A=p.cardNumForm,_=void 0===A?"payeeAccount":A,H=p.bankNameForm,U=void 0===H?"bankName":H,K=[{label:V,form:h(q,{initialValue:f().get(r,"payeeInfo.card_name",void 0),rules:[{required:!0,message:"请填写内容"}]})(y.createElement(s.Z,{showSearch:!0,placeholder:w,onSearch:this.onSearchCardName,style:{width:"100%"},disabled:u},D.map((function(e,t){return y.createElement(Z,{key:t,value:e},e)}))))},{label:x,form:h(_,{initialValue:f().get(r,"payeeInfo.card_num",void 0),rules:[{required:!0,message:"请填写内容"}]})(y.createElement(s.Z,{showSearch:!0,placeholder:F,onSearch:this.onSearchCardNum,onChange:this.onChangeCardNum,style:{width:"100%"},disabled:u},I.map((function(e,t){return y.createElement(Z,{key:t,value:e},e)}))))},{label:j,form:h(U,{initialValue:f().get(r,"payeeInfo.bank_details",void 0),rules:[{required:!0,message:"请填写内容"}]})(y.createElement(s.Z,{placeholder:B,showSearch:!0,onSearch:this.onSearchBankName,style:{width:"100%"},disabled:u},R.map((function(e,t){return y.createElement(Z,{key:t,value:e},e)}))))}];return y.createElement(b.KP,{items:K,cols:3,layout:v})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.collection,n=void 0===a?{}:a,r=t.collection;if(void 0===(void 0===r?void 0:r)&&Object.keys(n).length>0){var o=n.cardName,i=void 0===o?[]:o,l=n.cardNum,c=void 0===l?[]:l,u=n.bankName;return{cardNameData:i,cardNumData:c,bankNameData:void 0===u?[]:u,collection:n}}return null}}]),a}(y.Component);(0,d.Z)(C,"propTypes",{collection:v().object,form:v().object.isRequired,detail:v().object,label:v().object,placeholder:v().object,disabled:v().bool,formName:v().object,layout:v().object,namespace:v().string}),(0,d.Z)(C,"defaultProps",{collection:{},form:{},detail:{},label:{},placeholder:{},disabled:!1,formName:{},layout:{},namespace:""}),t.Z=(0,h.connect)((function(e){return{collection:e.expenseCostOrder.collection}}))(C)},67955:function(e,t){t.Z={"app-comp-expense-house-contract-create":"g8gD3K5rsywmRmGPEbuZ","app-comp-expense-house-contract-update":"bDjNVxNasBal4zNTKeQi","app-comp-expense-house-contract-list-operation":"NJctQmnYbcJ1vo4whsG_","app-comp-expense-house-contract-list-coding":"reXHvSqxK682_Dy25Xvk","app-comp-expense-house-contract-list-operation-create":"kMnUTgiV8aPemDtlyAAj"}}}]);