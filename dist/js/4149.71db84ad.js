"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[4149],{84149:function(e,t,n){n.r(t),n.d(t,{default:function(){return J}});n(20186);var r=n(75385),o=(n(18085),n(55241)),a=(n(55295),n(69713)),i=n(71002),c=n(15671),l=n(43144),s=n(97326),p=n(60136),u=n(82963),d=n(61120),m=n(4942),f=n(94315),y=n.n(f),h=n(93517),w=n.n(h),g=n(30381),b=n.n(g),v=n(55609),Z=n(67294),_=n(96036),x=n(45430),E=n(80385),D=(n(9070),n(20924)),C=(n(21316),n(75443)),S=(n(52560),n(71577)),I=(n(51838),n(48086)),T=(n(54071),n(14072)),k=(n(29093),n(16317)),O=n(97116),F=n(88144);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var M=k.Z.Option,R=T.Z.RangePicker,P=function(e){(0,p.Z)(n,e);var t=Y(n);function n(e){var r;return(0,c.Z)(this,n),r=t.call(this,e),(0,m.Z)((0,s.Z)(r),"onReset",(function(){var e=r.props.onSearch;e&&e({page:1,limit:30})})),(0,m.Z)((0,s.Z)(r),"onSearch",(function(e){var t=r.props.onSearch,n=e.suppliers,o=e.platforms,a=e.cities,i=e.districts,c=e.borrowType,l=e.borrowOrderId,s=e.repaymentState,p=e.borrowTime,u=e.repaymentTime,d=e.subjectMatter,m=e.state,f=w().has(p,"0")?b()(p[0]).format("YYYYMMDD"):"",y=w().has(p,"1")?b()(p[1]).format("YYYYMMDD"):"",h=w().has(u,"0")?b()(u[0]).format("YYYYMMDD"):"",g=w().has(u,"1")?b()(u[1]).format("YYYYMMDD"):"";t&&t({suppliers:n,platforms:o,cities:a,districts:i,borrowType:c,borrowOrderId:l,repaymentState:s,subjectMatter:d,borrowStartTime:f,borrowEndTime:y,repaymentStartTime:h,repaymentEndTime:g,state:m})})),(0,m.Z)((0,s.Z)(r),"onToggle",(function(e){var t=r.props.onToggle;t&&t(e)})),(0,m.Z)((0,s.Z)(r),"onDownloadSuccess",(function(){I.ZP.success("借款数据导出成功")})),(0,m.Z)((0,s.Z)(r),"onDownloadFailure",(function(){I.ZP.error("借款数据导出失败")})),(0,m.Z)((0,s.Z)(r),"onDownload",(function(){var e=r.props.dispatch;r.state.form.validateFields((function(t,n){var o=n.suppliers,a=n.platforms,i=n.cities,c=n.districts,l=n.borrowType,s=n.borrowOrderId,p=n.repaymentState,u=n.borrowTime,d=n.repaymentTime,m=n.subjectMatter,f=n.state,y=w().has(u,"0")?b()(u[0]).format("YYYYMMDD"):"",h=w().has(u,"1")?b()(u[1]).format("YYYYMMDD"):"",g=w().has(d,"0")?b()(d[0]).format("YYYYMMDD"):"",v=w().has(d,"1")?b()(d[1]).format("YYYYMMDD"):"";if(E.CyZ.mine===r.props.activeKey){var Z={suppliers:o,platforms:a,cities:i,districts:c,borrowType:l,borrowOrderId:s,repaymentState:p,subjectMatter:m,borrowStartTime:y,borrowEndTime:h,repaymentStartTime:g,repaymentEndTime:v,state:f,applyAccountId:O.Iq.account.id};e({type:"borrowingRepayment/borrowingDownloadTemplate",payload:{params:Z,onSuccessCallback:r.onDownloadSuccess,onFailureCallback:r.onDownloadFailure}})}else{e({type:"borrowingRepayment/borrowingDownloadTemplate",payload:{params:{suppliers:o,platforms:a,cities:i,districts:c,borrowType:l,borrowOrderId:s,repaymentState:p,subjectMatter:m,borrowStartTime:y,borrowEndTime:h,repaymentStartTime:g,repaymentEndTime:v,state:f},onSuccessCallback:r.onDownloadSuccess,onFailureCallback:r.onDownloadFailure}})}}))})),(0,m.Z)((0,s.Z)(r),"onHookForm",(function(e){r.setState({form:e})})),(0,m.Z)((0,s.Z)(r),"disableDateOfMonth",(function(e){return e&&e>new Date})),(0,m.Z)((0,s.Z)(r),"renderSearchForm",(function(){var e=r.props.expand,t={items:[{label:"借款类型",form:function(e){return e.getFieldDecorator("borrowType")(Z.createElement(k.Z,{allowClear:!0,placeholder:"请选择借款类型"},Z.createElement(M,{value:E.eLy.normal},E.eLy.description(E.eLy.normal))))}},{label:"借款单号",form:function(e){return e.getFieldDecorator("borrowOrderId")(Z.createElement(D.Z,{placeholder:"请输入借款单号"}))}},{label:"还款状态",form:function(e){return e.getFieldDecorator("repaymentState")(Z.createElement(k.Z,{allowClear:!0,placeholder:"请选择还款状态"},Z.createElement(M,{value:E.X0g.hasAlso},E.X0g.description(E.X0g.hasAlso)),Z.createElement(M,{value:E.X0g.repaymenting},E.X0g.description(E.X0g.repaymenting)),Z.createElement(M,{value:E.X0g.notYet},E.X0g.description(E.X0g.notYet))))}},{label:"流程状态",form:function(e){return e.getFieldDecorator("state")(Z.createElement(k.Z,{allowClear:!0,placeholder:"请选择流程状态"},Z.createElement(M,{value:E.DU5.processing},E.DU5.description(E.DU5.processing)),Z.createElement(M,{value:E.DU5.finish},E.DU5.description(E.DU5.finish)),Z.createElement(M,{value:E.DU5.close},E.DU5.description(E.DU5.close))))}},{label:"申请借款时间",form:function(e){return e.getFieldDecorator("borrowTime",{initialValue:null})(Z.createElement(R,{format:"YYYY-MM-DD",disabledDate:r.disableDateOfMonth}))}},{label:"预计还款时间",form:function(e){return e.getFieldDecorator("repaymentTime",{initialValue:null})(Z.createElement(R,{format:"YYYY-MM-DD"}))}},{label:"借款事由",form:function(e){return e.getFieldDecorator("subjectMatter")(Z.createElement(D.Z,{placeholder:"请输入借款事由"}))}}],operations:Z.createElement(C.Z,{placement:"top",title:"是否导出借款列表数据?",okText:"确认",onConfirm:function(){r.onDownload()},cancelText:"取消"},Z.createElement(S.Z,{type:"primary"},"导出EXCEL")),expand:e,isExpenseModel:!0,onReset:r.onReset,onSearch:r.onSearch,onToggle:r.onToggle,onHookForm:r.onHookForm,namespace:"borrow".concat(r.props.activeKey)};return Z.createElement(_.IT,null,Z.createElement(F.p8,t))})),(0,m.Z)((0,s.Z)(r),"render",(function(){return Z.createElement("div",null,r.renderSearchForm())})),r.state={form:void 0},r}return n}(Z.Component);var B=(0,v.connect)((function(e){return{borrowingRepayment:e.borrowingRepayment}}))(P),N=(n(52466),n(10642)),A=(n(39305),n(97880)),L=n(45697),U=n.n(L),j=n(66939);n(98703);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var X=A.Z.Step,q=function(e){(0,p.Z)(n,e);var t=H(n);function n(e){var r;return(0,c.Z)(this,n),r=t.call(this,e),(0,m.Z)((0,s.Z)(r),"componentWillUnmount",(function(){(0,r.props.dispatch)({type:"expenseExamineFlow/resetExamineFlowDetail"})})),(0,m.Z)((0,s.Z)(r),"onCancel",(function(){var e=r.props,t=e.onCancel;e.form.resetFields(),r.setState({isDefault:!0}),t&&t()})),(0,m.Z)((0,s.Z)(r),"onChangeExamineFlowId",(function(e){var t=r.state.isDefault;(0,r.props.dispatch)({type:"expenseExamineFlow/fetchExamineDetail",payload:{id:e}}),t&&r.setState({isDefault:!1})})),(0,m.Z)((0,s.Z)(r),"onSubmit",(function(e){e.preventDefault(),r.props.form.validateFieldsAndScroll((function(e,t){if(!e){var n=t.examineFlowId,o=t.approvalType,a=r.props.dispatch;r.private.isSubmit&&(a({type:"expenseExamineOrder/createExamineOrder",payload:{examineFlowId:n,approvalType:o,onSuccessCallback:r.onSuccessCreateRepaymentOrderCallback,onFailureCallback:r.onFailureCallback}}),r.private.isSubmit=!1)}}))})),(0,m.Z)((0,s.Z)(r),"onSuccessCallback",(function(e,t){window.location.href="/#/Expense/BorrowingRepayments/Repayments/Update?applicationOrderId=".concat(t,"&repayOrderId=").concat(e._id),r.onCancel()})),(0,m.Z)((0,s.Z)(r),"onSuccessCreateRepaymentOrderCallback",(function(e){r.props.dispatch({type:"borrowingRepayment/createRepayOrder",payload:{applicationOrderId:e._id,borrowOrderId:r.props.borrowOrderId,onSuccessCallback:r.onSuccessCallback,onFailureCallback:r.onFailureCallback}})})),(0,m.Z)((0,s.Z)(r),"onFailureCallback",(function(){r.private.isSubmit=!0,r.onCancel()})),(0,m.Z)((0,s.Z)(r),"reduceAccountList",(function(e){return!e||"object"===(0,i.Z)(e)&&Array===e.constructor&&0===e.length?"无":e.reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),"")})),(0,m.Z)((0,s.Z)(r),"renderForm",(function(){var e=r.props,t=e.state,n=e.flowInfo,o=void 0===n?{}:n,a=e.form,i=void 0===a?{}:a,c=t===E.BsX.normal?w().get(o,"_id",void 0):void 0,l={onChange:r.onChangeExamineFlowId,bizType:E.z_o.noCostOf,showSearch:!0,optionFilterProp:"children",placeholder:"请选择审批类型",approvalType:E.ZBL.repayments},s=i.getFieldDecorator,p=[{label:"审批类型",form:s("approvalType",{initialValue:E.ZBL.repayments})(Z.createElement("span",null,"还款"))},{label:"审批流",form:s("examineFlowId",{rules:[{required:!0,message:"请选择审批流"}],initialValue:c})(Z.createElement(F.Z6,l))}];return Z.createElement(_.KP,{items:p,cols:1,layout:{labelCol:{span:6},wrapperCol:{span:18}}})})),(0,m.Z)((0,s.Z)(r),"renderNodeListText",(function(e,t){var n=e&&"object"===(0,i.Z)(e)&&Array===e.constructor?e.reduce((function(e,t,n){return 0===n?"".concat(t.post_name,"(").concat(r.reduceAccountList(t.account_info_list),")"):"".concat(e,", ").concat(t.post_name,"(").concat(r.reduceAccountList(t.account_info_list),")")}),""):"",o=t&&"object"===(0,i.Z)(t)&&Array===t.constructor?t.reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),""):"";return n&&o?"".concat(n,", ").concat(o):n||o})),(0,m.Z)((0,s.Z)(r),"renderFlowNodes",(function(){var e=r.state.isDefault,t=r.props,n=t.flowInfo,o=t.state,a=t.examineDetail,i=void 0===a?{}:a;return!0===e&&y().not.empty(n.node_list)&&y().existy(n.node_list)&&o===E.BsX.normal?n.node_list.map((function(e,t){return Z.createElement(A.Z,{direction:"vertical",key:t,current:t+1},Z.createElement(X,{title:"节点-".concat(t+1),description:r.renderNodeListText(e.post_list,e.account_list)}))})):!1===e&&y().existy(i.nodeList)&&y().not.empty(i.nodeList)?i.nodeList.map((function(e,t){return Z.createElement(A.Z,{direction:"vertical",key:t,current:t+1},Z.createElement(X,{title:"节点-".concat(t+1),description:r.renderNodeListText(e.postList,e.accountList)}))})):""})),r.state={isDefault:!0},r.private={isSubmit:!0},r}return(0,l.Z)(n,[{key:"render",value:function(){var e=this.props.visible,t=this.onSubmit,n=this.onCancel;return Z.createElement("div",null,Z.createElement(N.Z,{title:"还款",visible:e,onOk:t,onCancel:n,okText:"确认",cancelText:"取消"},Z.createElement(j.Z,null,this.renderForm(),this.renderFlowNodes())))}}]),n}(Z.Component);(0,m.Z)(q,"propTypes",{visible:U().bool,dispatch:U().func,onCancel:U().func,borrowOrderId:U().string,flowInfo:U().object,state:U().string,examineDetail:U().object}),(0,m.Z)(q,"defaultProps",{visible:!1,dispatch:function(){},onCancel:function(){},borrowOrderId:"",flowInfo:{},state:"",examineDetail:{}});var z=(0,v.connect)((function(e){return{examineDetail:e.expenseExamineFlow.examineDetail}}))(j.Z.create()(q)),K={"app-comp-expense-borrowing-tooltip":"lB_OcInUrMh03B8WipbY","app-comp-expense-borrowing-actual-borrower":"bp033qReFqaaa_EG_ojQ","app-comp-expense-borrowing-flow-info":"qi78crl7dhqIN2UAjVKO","app-comp-expense-borrowing-operation-reimbursement":"on3pNvw5AOboFa40CWTq","app-comp-expense-borrowin-id":"cMjNJjack4et47WJvJo2","app-comp-expense-borrowing-node-color":"haoVHD6z_T0cgTnDOnqg"};function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var W=function(e){(0,p.Z)(n,e);var t=V(n);function n(e){var l;return(0,c.Z)(this,n),l=t.call(this,e),(0,m.Z)((0,s.Z)(l),"onShowRepaymentsModal",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;l.setState({repaymentsVisible:!0,borrowOrderId:e,flowInfo:t,state:n})})),(0,m.Z)((0,s.Z)(l),"onHideRepaymentsModal",(function(){l.setState({repaymentsVisible:!1,borrowOrderId:""})})),(0,m.Z)((0,s.Z)(l),"onSearch",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=l.state.activeKey;l.setState({searchInfo:e}),l.private.searchParams=e,(y().not.existy(l.private.searchParams.page)||y().empty(l.private.searchParams.page))&&(l.private.searchParams.page=1),(y().not.existy(l.private.searchParams.limit)||y().empty(l.private.searchParams.limit))&&(l.private.searchParams.limit=30),Number(t)===E.CyZ.mine&&(l.private.searchParams.applyAccountId=O.Iq.account.id),l.props.dispatch({type:"borrowingRepayment/fetchBorrowingOrders",payload:l.private.searchParams})})),(0,m.Z)((0,s.Z)(l),"onChangePage",(function(e,t){var n=l.private.searchParams;n.page=e,n.limit=t,l.onSearch(n)})),(0,m.Z)((0,s.Z)(l),"onShowSizeChange",(function(e,t){var n=l.private.searchParams;n.page=e,n.limit=t,l.onSearch(n)})),(0,m.Z)((0,s.Z)(l),"onChangeTab",(function(e){(0,l.props.dispatch)({type:"borrowingRepayment/resetBorrowingOrders"}),l.setState({activeKey:e},(function(){return l.onSearch()}))})),(0,m.Z)((0,s.Z)(l),"onToggle",(function(e){l.setState({isShowExpand:e})})),(0,m.Z)((0,s.Z)(l),"renderSearch",(function(){var e=(0,s.Z)(l).onSearch,t=l.state,n=t.activeKey,r=t.isShowExpand;return Z.createElement(B,{onSearch:e,activeKey:n,expand:r,onToggle:l.onToggle})})),(0,m.Z)((0,s.Z)(l),"renderCurrentFlowNodeInfo",(function(e){var t=w().get(e,"current_pending_account_list",[]),n=w().get(e,"state"),r=w().get(e,"current_flow_node",""),o=w().get(e,"current_flow_node_info",{}),c=w().get(e,"apply_account_info",{});if(o&&o.name&&y().existy(r)){var l=w().get(o,"account_list",[]),s=w().get(o,"post_list",[]),p=[],u=[];l.forEach((function(e){var n=e;void 0!==t.find((function(t){return t._id===e._id}))?n.isHeight=!0:n.isHeight=!1,p.push(n)})),s&&"object"===(0,i.Z)(s)&&Array===s.constructor&&s.forEach((function(e){var n=e;t.some((function(e){return n.account_info_list.some((function(t){return t._id===e.id||e._id}))}))?n.isHeight=!0:n.isHeight=!1,u.push(n)}));var d=Z.createElement("span",null,o.name,"(",Z.createElement("span",null,u.map((function(e,t){return Z.createElement("span",{className:!0===e.isHeight?K["app-comp-expense-borrowing-node-color"]:null,key:"postData".concat(t)},e.post_name,"(",e.account_info_list.reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),""),")",t!==u.length-1?" , ":null)}))),u&&p&&u.length>0&&p.length>0?", ":"",Z.createElement("span",null,p.map((function(e,t){return Z.createElement("span",{className:!0===e.isHeight?K.boss_expense_borrowing_node_color:null,key:"data".concat(t)},e.name,t!==p.length-1?" , ":null)}))),")");return Z.createElement(a.Z,{title:d},Z.createElement("div",{className:K["app-comp-expense-borrowing-tooltip"]},"".concat(o.name,"(").concat(y().not.empty(t)?t.reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),""):"",")").length>=10?"".concat("".concat(o.name,"(").concat(y().not.empty(t)?t.reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),""):"",")").substring(0,10),"..."):"".concat(o.name,"(").concat(y().not.empty(t)?t.reduce((function(e,t,n){return 0===n?t.name:"".concat(e,", ").concat(t.name)}),""):"",")")))}return y().not.existy(r)&&n===E.DU5.processing?"提报节点(".concat(c.name,")"):"--"})),(0,m.Z)((0,s.Z)(l),"renderContent",(function(){var e=l.props.borrowingOrders,t=w().get(e,"data",[]),n=w().get(e,"_meta",{}),a=w().get(n,"result_count",0),i=[{title:"借款单号",dataIndex:"_id",key:"_id",width:100,fixed:"left",render:function(e){return Z.createElement("div",{className:K["app-comp-expense-borrowin-id"]},e)}},{title:"平台",dataIndex:"platform_name",key:"platform_name",width:70,fixed:"left",render:function(e){return e||"--"}},{title:"供应商",dataIndex:"supplier_name",key:"supplier_name",width:150,fixed:"left",render:function(e){return e||"--"}},{title:"城市",dataIndex:"city_name",key:"city_name",width:70,fixed:"left",render:function(e){return e||"--"}},{title:"商圈",dataIndex:"biz_district_name",key:"biz_district_name",width:150,fixed:"left",render:function(e){return e||"--"}},{title:"实际借款人",dataIndex:"actual_loan_info",key:"actual_loan_info.name",width:100,fixed:"left",render:function(e){var t=w().get(e,"name");return Z.createElement("div",{className:K["app-comp-expense-borrowing-actual-borrower"]},t)}},{title:"借款类型",dataIndex:"loan_type",key:"loan_type",width:100,render:function(e){return E.eLy.description(e)||"--"}},{title:"借款事由",dataIndex:"loan_note",key:"loan_note",width:100,render:function(e){return y().not.existy(e)||y().empty(e)?"--":e.length<=11?Z.createElement("span",null,e):Z.createElement(o.Z,{content:e,title:"借款事由",trigger:"hover"},Z.createElement("div",null,e.slice(0,11),"..."))}},{title:"审批流",dataIndex:"application_order_info",key:"application_order_info.flow_info",width:160,render:function(e){var t=w().get(e,"flow_info.name",void 0);return Z.createElement("div",{className:K["app-comp-expense-borrowing-flow-info"]},t)||"--"}},{title:"流程状态",dataIndex:"state",key:"state",width:100,render:function(e){return E.DU5.description(e)||"--"}},{title:"当前节点",dataIndex:"application_order_info",key:"currentFlowNodeInfo",width:150,render:function(e){return l.renderCurrentFlowNodeInfo(e)}},{title:"付款状态",dataIndex:"paid_state",key:"paid_state",width:100,render:function(e){return E.$ym.description(e)||"--"}},{title:"借款金额（元）",dataIndex:"loan_money",key:"loan_money",width:120,render:function(e){return E.fbc.exchangePriceCentToMathFormat(e)||"--"}},{title:"已还金额（元）",dataIndex:"repayment_money",key:"repayment_money",width:120,render:function(e){return E.fbc.exchangePriceCentToMathFormat(e)||"--"}},{title:"未还金额（元）",dataIndex:"non_repayment_money",key:"non_repayment_money",width:120,render:function(e){return E.fbc.exchangePriceCentToMathFormat(e)||"--"}},{title:"还款状态",dataIndex:"repayment_state",key:"repayment_state",width:100,render:function(e){return E.X0g.description(e)||"--"}},{title:"申请人",dataIndex:"apply_account_info",key:"apply_account_info.name",width:100,render:function(e){return w().get(e,"name","--")}},{title:"申请借款时间",dataIndex:"submit_at",key:"submit_at",width:150,render:function(e){return e?b()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"预计还款时间",dataIndex:"expected_repayment_time",key:"expected_repayment_time",width:120,render:function(e){return e||"--"}},{title:"操作",dataIndex:"operation",key:"operation",width:100,fixed:"right",render:function(e,t){var n=t.state,r=t.non_repayment_money,o=t.wait_repayment_money,a=t.application_order_id,i=t._id,c=t.apply_account_info,s=t.repayment_state,p=w().get(t,"application_order_info.flow_info",{}),u=w().get(p,"state",void 0),d=O.Iq.account.id,m=w().get(c,"_id"),f=r-o,y=[];return n===E.DU5.finish&&d===m&&s!==E.X0g.hasAlso&&0!==f&&!0===x.ZP.canOperateExpenseRepaymentOrderCreate()&&y.push(Z.createElement("a",{className:K["app-comp-expense-borrowing-operation-reimbursement"],key:"repayments",onClick:function(){return l.onShowRepaymentsModal(i,p,u)}},"还款")),x.ZP.canOperateExpenseBorrowOrderDetail()&&y.push(Z.createElement("a",{key:"detail",href:"/#/Expense/BorrowingRepayments/Borrowing/Detail?approvalId=".concat(i,"&orderId=").concat(a),target:"_blank",rel:"noopener noreferrer"},"查看")),y}}],c={defaultPageSize:30,onChange:l.onChangePage,total:a,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:l.onShowSizeChange},s=l.private.searchParams.page;return s&&(c.current=s),Z.createElement(_.IT,{title:"借款列表"},Z.createElement(r.Z,{rowKey:function(e){return e._id},dataSource:t,columns:i,bordered:!0,pagination:c,scroll:{x:2280,y:400}}))})),(0,m.Z)((0,s.Z)(l),"renderTabContent",(function(){return Z.createElement("div",null,l.renderSearch(),l.renderContent())})),(0,m.Z)((0,s.Z)(l),"renderTabs",(function(){var e=[];return x.ZP.canOperateExpenseBorrowOrderMy()&&e.push({title:"我的",content:l.renderTabContent(E.CyZ.mine),key:E.CyZ.mine}),x.ZP.canOperateExpenseBorrowOrderAll()&&e.push({title:"全部",content:l.renderTabContent(E.CyZ.all),key:E.CyZ.all}),Z.createElement(_.DF,{items:e,onChange:l.onChangeTab,defaultActiveKey:"".concat(E.CyZ.mine)})})),(0,m.Z)((0,s.Z)(l),"renderRepaymentsModal",(function(){var e=l.state,t=e.repaymentsVisible,n=e.borrowOrderId,r=e.state,o=(0,s.Z)(l).onHideRepaymentsModal,a={dispatch:l.props.dispatch,visible:t,onCancel:o,borrowOrderId:n,state:r};return Z.createElement(z,a)})),(0,m.Z)((0,s.Z)(l),"render",(function(){return Z.createElement("div",null,l.renderTabs(),l.renderRepaymentsModal())})),l.state={repaymentsVisible:!1,activeKey:E.CyZ.mine,borrowOrderId:"",isShowExpand:!0,flowInfo:{},state:void 0},l.private={searchParams:{limit:30,page:1,applyAccountId:O.Iq.account.id}},l}return(0,l.Z)(n,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"borrowingRepayment/fetchBorrowingOrders",payload:this.private.searchParams})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"borrowingRepayment/resetBorrowingOrders"})}}]),n}(Z.Component);var J=(0,v.connect)((function(e){return{borrowingOrders:e.borrowingRepayment.borrowingOrders}}))(W)}}]);