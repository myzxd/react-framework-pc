"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[428],{79798:function(e,t,a){a(20186);var n=a(75385),r=(a(21316),a(75443)),i=a(4942),o=a(29439),c=a(30381),s=a.n(c),d=a(55609),p=a(67294),f=a(96036),u=a(80385);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}t.Z=(0,d.connect)((function(e){return{teamManagerUpdateOwnerList:e.teamManager.teamManagerUpdateOwnerList}}))((function(e){var t=e.dispatch,a=e.teamManagerUpdateOwnerList,i=void 0===a?{}:a,c=e.tiemStamp,d=e.ownerId,l=e.isDetail,g=i.data,h=void 0===g?[]:g,_=i._meta,y=void 0===_?{}:_,v=(0,p.useState)({page:1,limit:30}),b=(0,o.Z)(v,2),S=b[0],w=b[1];(0,p.useEffect)((function(){if(d){var e=m(m({},S),{},{ownerId:d});return t({type:"teamManager/fetchTeamManagerUpdateOwnerList",payload:e}),function(){t({type:"teamManager/reduceTeamManagerUpdateOwnerList",payload:{}})}}}),[t,S,c,d]);var O=function(e,t){w({page:e,limit:t})},C=function(e,t){w({page:e,limit:t})},M=function(){var e=m({},S);w(e)};return function(){var e=[{title:"动作",dataIndex:"event",key:"event",render:function(e){return u.UFo.description(e)}},{title:"操作人",dataIndex:["operator_info","name"],key:"operator_info.name",render:function(e){return e||"--"}},{title:"变更后业主姓名",dataIndex:["staff_info","name"],key:"staff_info.name",render:function(e){return e||"--"}},{title:"性别",dataIndex:["staff_info","gender_id"],key:"staff_info.gender_id",render:function(e){return e?u.Y0t.description(e):"--"}},{title:"手机号",dataIndex:["staff_info","phone"],key:"staff_info.phone",render:function(e){return e||"--"}},{title:"身份证号",dataIndex:["staff_info","identity_card_id"],key:"staff_info.identity_card_id",render:function(e,t){return t.state===u.zqR.notEffect?t.identity_card_id?t.identity_card_id:"--":e||"--"}},{title:"操作时间",dataIndex:"updated_at",key:"updated_at",render:function(e){return e?s()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"生效状态",dataIndex:"state",key:"state",render:function(e){return u.f5L.description(e)}},{title:"生效日期",dataIndex:"plan_done_date",key:"plan_done_date",render:function(e){return e?s()("".concat(e)).format("YYYY年MM月DD日"):"--"}}];l||e.push({title:"操作",dataIndex:"operation",key:"operation",width:80,render:function(e,a){return a.state===u.f5L.effectBefore?p.createElement(r.Z,{title:"是否确认取消本次变更?",onConfirm:function(){return e=a._id,void t({type:"teamManager/cancelTeamManagerUpdateOwnerListItem",payload:{id:e,onSuccessCallBack:M}});var e},okText:"确定",cancelText:"取消"},p.createElement("span",{className:"app-global-compoments-cursor"},"取消")):"--"}});var a={current:y.page||1,defaultPageSize:30,pageSize:y.limit||30,showQuickJumper:!0,showSizeChanger:!0,onChange:O,onShowSizeChange:C,showTotal:function(e){return"总共".concat(e,"条")},total:y.result_count,pageSizeOptions:["10","20","30","40"]};return p.createElement(f.IT,{title:"业主团队变更记录"},p.createElement(n.Z,{rowKey:function(e){return e._id},pagination:a,dataSource:h,columns:e,bordered:!0}))}()}))},60428:function(e,t,a){a.r(t);a(20186);var n=a(75385),r=a(15671),i=a(43144),o=a(97326),c=a(60136),s=a(82963),d=a(61120),p=a(4942),f=a(93517),u=a.n(f),l=a(30381),m=a.n(l),g=a(45697),h=a.n(g),_=a(55609),y=a(67294),v=a(96036),b=a(80385),S=a(79798);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function O(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){(0,p.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=(0,d.Z)(e);if(t){var r=(0,d.Z)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return(0,s.Z)(this,a)}}var M=function(e){(0,c.Z)(a,e);var t=C(a);function a(e){var i;return(0,r.Z)(this,a),i=t.call(this,e),(0,p.Z)((0,o.Z)(i),"onChangePageScope",(function(e,t){var a=i.private.searchParamsScope;a.meta.page=e,a.meta.limit=t,i.onSearch(a)})),(0,p.Z)((0,o.Z)(i),"onShowSizeChangeScope",(function(e,t){var a=i.private.searchParamsScope;a.meta.page=e,a.meta.limit=t,i.onSearch(a)})),(0,p.Z)((0,o.Z)(i),"onSearch",(function(e){var t=i.props.location.query.id,a=i.private.searchParamsScope;i.private.searchParamsScope=O(O(O({},a),e),{},{id:t}),i.props.dispatch({type:"teamManager/fetchOwnerScopeList",payload:i.private.searchParamsScope})})),(0,p.Z)((0,o.Z)(i),"onChangePageChange",(function(e,t){var a=i.private.searchParamsChange;a.meta.page=e,a.meta.limit=t,i.onSearchChange(a)})),(0,p.Z)((0,o.Z)(i),"onShowSizeChangeLog",(function(e,t){var a=i.private.searchParamsChange;a.meta.page=e,a.meta.limit=t,i.onSearchChange(a)})),(0,p.Z)((0,o.Z)(i),"onSearchChange",(function(e){var t=i.props.location.query.id,a=i.private.searchParamsChange;i.private.searchParamsChange=O(O(O({},a),e),{},{id:t}),i.props.dispatch({type:"teamManager/fetchOwnerChangeLog",payload:i.private.searchParamsChange})})),(0,p.Z)((0,o.Z)(i),"displayState",(function(e){var t="";switch(e){case b.ivH.effected:t=y.createElement("span",{className:"app-global-compoments-color1"},b.ivH.description(e));break;case b.ivH.effectBefore:t=y.createElement("span",{className:"app-global-compoments-color2"},b.ivH.description(e));break;case b.ivH.lose:t=y.createElement("span",{className:"app-global-compoments-color3"},b.ivH.description(e));break;default:t="--"}return t})),(0,p.Z)((0,o.Z)(i),"renderList",(function(){var e=i.props.teamManagerScopeList,t=void 0===e?{}:e,a=t.data,r=void 0===a?[]:a,o=[{title:"平台",dataIndex:["biz_district_info","platform_name"],key:"biz_district_info.platform_name",render:function(e){return e||"--"}},{title:"供应商",dataIndex:["biz_district_info","supplier_name"],key:"biz_district_info.supplier_name",render:function(e){return e||"--"}},{title:"城市",dataIndex:["biz_district_info","city_name"],key:"biz_district_info.city_name",render:function(e){return e||"--"}},{title:"商圈",dataIndex:["biz_district_info","name"],key:"biz_district_info.name",render:function(e){return e||"--"}},{title:"商圈状态",dataIndex:["biz_district_info","state"],key:"biz_district_info.state",render:function(e){return b.hQm.description(e)}},{title:"归属月份",dataIndex:"month",key:"month",render:function(e){return e?m()("".concat(e,"01")).format("YYYY年MM月"):"--"}}],c={current:i.private.searchParamsScope.meta.page,defaultPageSize:30,onChange:i.onChangePageScope,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:i.onShowSizeChangeScope,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:u().get(t,"_meta.result_count",0)};return y.createElement(v.IT,{title:"承揽范围"},y.createElement(n.Z,{rowKey:function(e,t){return t},dataSource:r,columns:o,pagination:c,bordered:!0}))})),(0,p.Z)((0,o.Z)(i),"renderChangeLog",(function(){var e=i.private.searchParamsChange.meta.page,t=i.props.teamManagerChangeList,a=void 0===t?{}:t,r=a.data,o=void 0===r?[]:r,c=[{title:"平台",dataIndex:["biz_district_info","platform_name"],key:"biz_district_info.platform_name",render:function(e){return e||"--"}},{title:"供应商",dataIndex:["biz_district_info","supplier_name"],key:"biz_district_info.supplier_name",render:function(e){return e||"--"}},{title:"城市",dataIndex:["biz_district_info","city_name"],key:"biz_district_info.city_name",render:function(e){return e||"--"}},{title:"商圈",dataIndex:["biz_district_info","name"],key:"biz_district_info.name",render:function(e){return e||"--"}},{title:"商圈状态",dataIndex:["biz_district_info","state"],key:"biz_district_info.state",render:function(e){return b.hQm.description(e)}},{title:"最新操作人",dataIndex:["operator_info","name"],key:"operator_info.name",render:function(e){return e||"--"}},{title:"操作时间",dataIndex:"updated_at",key:"updated_at",render:function(e){return m()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"动作",dataIndex:"event",key:"event",render:function(e){return b.KID.description(e)}},{title:"生效状态",dataIndex:"state",key:"state",render:function(e){return i.displayState(e)}},{title:"生效日期",dataIndex:"plan_done_date",key:"plan_done_date",render:function(e){return e?m()("".concat(e)).format("YYYY年MM月DD日"):"--"}}],s={current:e,defaultPageSize:30,onChange:i.onChangePageChange,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:i.onShowSizeChangeLog,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:u().get(a,"_meta.result_count",0)};return y.createElement(v.IT,{title:"变更范围"},y.createElement(n.Z,{rowKey:function(e,t){return t},dataSource:o,columns:c,pagination:s,bordered:!0}))})),(0,p.Z)((0,o.Z)(i),"renderInfo",(function(){var e=i.props.teamManagerDetail,t=void 0===e?{}:e,a=[{label:"业主团队ID",form:u().get(t,"_id","--")},{label:"业主姓名",form:u().get(t,"staff_info.name","--")},{label:"手机号",form:u().get(t,"staff_info.phone","--")},{label:"身份证号",form:u().get(t,"staff_info.identity_card_id","--")},{label:"业主ID",form:u().get(t,"staff_id","--")}];return y.createElement(v.IT,{title:"业主信息"},y.createElement(v.KP,{items:a,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),i.state={},i.private={searchParamsScope:{meta:{page:1,limit:30}},searchParamsChange:{meta:{page:1,limit:30}}},i}return(0,i.Z)(a,[{key:"componentDidMount",value:function(){var e={id:this.props.location.query.id};this.props.dispatch({type:"teamManager/fetchTeamManagerDetail",payload:e}),this.props.dispatch({type:"teamManager/fetchOwnerScopeList",payload:e}),this.props.dispatch({type:"teamManager/fetchOwnerChangeLog",payload:e})}},{key:"render",value:function(){var e=this.props.teamManagerDetail;return y.createElement("div",null,this.renderInfo(),y.createElement(S.Z,{ownerId:e._id,isDetail:!0}),this.renderList(),this.renderChangeLog())}}]),a}(y.Component);(0,p.Z)(M,"propTypes",{teamManagerDetail:h().object,teamManagerScopeList:h().object,teamManagerChangeList:h().object}),(0,p.Z)(M,"defaultProps",{teamManagerDetail:{},teamManagerScopeList:{},teamManagerChangeList:{}});t.default=(0,_.connect)((function(e){var t=e.teamManager;return{teamManagerDetail:t.teamManagerDetail,teamManagerScopeList:t.teamManagerScopeList,teamManagerChangeList:t.teamManagerChangeList}}))(M)}}]);