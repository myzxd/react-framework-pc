"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[889],{13153:function(e,t,n){n(29093);var r=n(16317),a=n(67294),i=n(55609),o=r.Z.Option;t.Z=(0,i.connect)((function(e){return{companyList:e.sharedCompany.companyList}}))((function(e){var t=e.dispatch,n=e.companyList,i=void 0===n?{}:n,c=e.onChange,l=e.value,u=i.data,d=void 0===u?[]:u;return(0,a.useEffect)((function(){return t({type:"sharedCompany/getSharedCompanyList",payload:{_meta:{page:1,limit:0}}}),function(){t({type:"sharedCompany/reduceSharedCompanyList",payload:{}})}}),[t]),a.createElement(r.Z,{placeholder:"请选择",allowClear:!0,showSearch:!0,optionFilterProp:"children",onChange:c,value:l},d.map((function(e){return a.createElement(o,{value:e._id,key:e._id,child:e},e.name)})))}))},90889:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(4942),a=n(29439),i=n(67294),o=n(55609),c=(n(21316),n(75443)),l=(n(52560),n(71577)),u=(n(9070),n(20924)),d=(n(35668),n(86585)),s=(n(51838),n(48086)),p=n(15861),m=(n(29093),n(16317)),f=n(87757),h=n.n(f),v=n(80385),y=n(13153),g=m.Z.Option,b=(0,o.connect)((function(e){return{principal:e.sharedLicense.principal}}))((function(e){var t=e.dispatch,n=e.principal,r=void 0===n?{}:n,a=e.onChange,o=e.value,c=r.data,l=void 0===c?[]:c;return(0,i.useEffect)((function(){var e={_meta:{page:1,limit:9999},state:v._mu.normal};t({type:"sharedLicense/getSharedLicensePrincipal",payload:e})}),[t]),i.createElement(m.Z,{placeholder:"请选择",allowClear:!0,showSearch:!0,optionFilterProp:"children",onChange:a,value:o},l.map((function(e){var t=e.keep_account_info,n=void 0===t?{}:t;return i.createElement(g,{value:n._id,key:n._id},n.name)})))})),E=n(96036),O=n(45430);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=m.Z.Option,L=function(e){var t=e.onSearch,n=void 0===t?function(){}:t,r=e.dispatch,o=(0,i.useState)({}),f=(0,a.Z)(o,2),g=f[0],S=f[1],L=function(){var e=(0,p.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.validateFields();case 2:t=e.sent,r({type:"sharedLicense/exportSharedLicense",payload:{params:w({},t),onSuccessCallback:function(){return s.ZP.success("创建下载任务成功")},onFailureCallback:function(){return s.ZP.error("导出数据失败")}}});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=[i.createElement(d.Z.Item,{label:"公司名称",name:"firm_id"},i.createElement(y.Z,null)),i.createElement(d.Z.Item,{label:"证照类型",name:"cert_type"},i.createElement(m.Z,{placeholder:"请选择",allowClear:!0},i.createElement(_,{value:v.Vvo.businessLicense},v.Vvo.description(v.Vvo.businessLicense)),i.createElement(_,{value:v.Vvo.expressDelivery},v.Vvo.description(v.Vvo.expressDelivery)),i.createElement(_,{value:v.Vvo.food},v.Vvo.description(v.Vvo.food)))),i.createElement(d.Z.Item,{label:"证照名称",name:"name"},i.createElement(u.Z,{placeholder:"请输入",allowClear:!0})),i.createElement(d.Z.Item,{label:"统一社会信用代码",name:"credit_no"},i.createElement(u.Z,{placeholder:"请输入",allowClear:!0})),i.createElement(d.Z.Item,{label:"证照负责人",name:"keep_account_id"},i.createElement(b,null)),i.createElement(d.Z.Item,{label:"证照ID",name:"_id"},i.createElement(u.Z,{placeholder:"请输入"}))],C={operations:i.createElement("span",null,O.ZP.canOperateSharedLicenseCreate()?i.createElement(l.Z,{type:"primary",onClick:function(){window.location.href="/#/Shared/License/Create"}},"创建"):"",O.ZP.canOperateSharedLicenseExport()?i.createElement(c.Z,{title:"创建下载任务？",onConfirm:L,okText:"确认",cancelText:"取消"},i.createElement(l.Z,{type:"primary",style:{marginLeft:10}},"导出EXCEL")):""),items:Z,onSearch:n,onReset:n,onHookForm:function(e){S(e)}};return i.createElement(E.IT,null,i.createElement(E.j6,C))},Z=(n(20186),n(75385)),C=n(30381),P=n.n(C),j=function(e){var t=e.licenseList,n=void 0===t?{}:t,r=e.onShowSizeChange,a=void 0===r?function(){}:r,o=e.onChangePage,c=void 0===o?function(){}:o,l=n.data,u=void 0===l?[]:l,d=n._meta,s=void 0===d?{}:d,p=[{title:"证照ID",dataIndex:"_id"},{title:"证照名称",dataIndex:"name"},{title:"正副本",dataIndex:"origin",render:function(e){return e?v.Ak0.description(e):"--"}},{title:"证照编号",dataIndex:"cert_no",render:function(e){return e||"--"}},{title:"原件/复印件",dataIndex:"display",render:function(e){return e?v.Sdt.description(e):"--"}},{title:"证照类型",dataIndex:"cert_type",render:function(e){return e?v.Vvo.description(e):"--"}},{title:"公司名称",dataIndex:["firm_info","name"]},{title:"负责人",dataIndex:["keep_account_info","name"],render:function(e){return e||"--"}},{title:"证照状态",dataIndex:"borrow_state",render:function(e){return e?v.VxM.description(e):"--"}},{title:"借用人",dataIndex:["borrower_info","name"],render:function(e){return e||"--"}},{title:"预计归还时间",dataIndex:"expected_return_date",render:function(e){return e?P()(String(e)).format("YYYY-MM-DD"):"--"}},{title:"操作",dataIndex:"_id",width:150,render:function(e){var t="/#/Shared/License/Update?id=".concat(e),n="/#/Shared/License/Detail?id=".concat(e);return i.createElement("div",null,O.ZP.canOperateSharedLicenseDetail()?i.createElement("a",{href:n,target:"_blank",rel:"noopener noreferrer"},"查看"):"",O.ZP.canOperateSharedLicenseUpdate()?i.createElement("a",{href:t,style:{marginLeft:10}},"编辑"):"")}}],m={current:s.page||1,defaultPageSize:30,pageSize:s.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:c,onShowSizeChange:a,showTotal:function(e){return"总共".concat(e,"条")},total:s.result_count,pageSizeOptions:["10","20","30","40"]};return i.createElement(E.IT,{title:"证照列表"},i.createElement(Z.Z,{rowKey:function(e,t){return e._id||t},columns:p,dataSource:u,pagination:m,bordered:!0}))};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=(0,o.connect)((function(e){return{licenseList:e.sharedLicense.licenseList}}))((function(e){var t=e.dispatch,n=e.licenseList,r=(0,i.useState)({_meta:{page:1,limit:30}}),o=(0,a.Z)(r,2),c=o[0],l=o[1];(0,i.useEffect)((function(){return t({type:"sharedLicense/getSharedLicenseList",payload:I({},c)}),function(){t({type:"sharedLicense/reduceSharedLicenseList",payload:{}})}}),[t,c]);return i.createElement("div",null,i.createElement(L,{onSearch:function(e){l(I({_meta:{page:1,limit:30}},e))},dispatch:t}),i.createElement(j,{licenseList:n,onChangePage:function(e,t){l(I(I({},c),{},{_meta:{page:e,limit:t}}))},onShowSizeChange:function(e,t){l(I(I({},c),{},{_meta:{page:e,limit:t}}))}}))}))}}]);