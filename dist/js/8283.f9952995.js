"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[8283],{72531:function(e,t,r){r(438);var n=r(14277),a=r(15671),o=r(43144),i=r(97326),c=r(60136),p=r(82963),l=r(61120),s=r(4942),d=r(93517),u=r.n(d),m=r(67294),f=r(45697),y=r.n(f),h=r(44654),v=r(80385),g=r(96036),x=r(31101);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var b=function(e){(0,c.Z)(r,e);var t=Z(r);function r(){var e;return(0,a.Z)(this,r),e=t.call(this),(0,s.Z)((0,i.Z)(e),"onDownloadPayroll",(function(t){(0,e.props.dispatch)({type:"financeSummaryManage/downloadSalaryStatement",payload:{id:t}})})),(0,s.Z)((0,i.Z)(e),"renderPublic",(function(){var t=e.props.detail,r=u().get(t,"summary_data",{}),n=u().get(t,"start_date","--"),a=u().get(t,"end_date","--"),o=[{form:"项目：".concat(r["项目"]||"--")},{form:"主体：".concat(r["主体"]||"--")},{form:"城市：".concat(r["城市"]||"--")},{form:"个户类型：".concat(v.EbQ.description(t.work_type))},{form:"雇佣主体：".concat(r["雇佣主体"]||"--")},{form:"服务费归属日期：".concat(n,"~").concat(a)},{form:"成本中心：".concat(r["成本中心"]||"--")},{form:"人数：".concat(Number(r["人数"])||0)},{form:"招聘费用预测：".concat(v.fbc.exchangePriceToMathFormat(r["招聘费用预测"]||0),"元")},{form:"单量：".concat(r["完成单量"]||0,"单")},{form:"服务费调节类补款：".concat(v.fbc.exchangePriceToMathFormat(r["薪资调节类补款"]||0),"元")},{form:"内荐费：".concat(v.fbc.exchangePriceToMathFormat(r["内荐费"]||0),"元")},{form:"押金返还：".concat(v.fbc.exchangePriceToMathFormat(r["押金返还"]||0),"元")},{form:"平台奖励：".concat(v.fbc.exchangePriceToMathFormat(r["平台奖励"]||0),"元")},{form:"服务费调节类补款：".concat(v.fbc.exchangePriceToMathFormat(r["薪资调节类补款"]||0),"元")}];return m.createElement(g.KP,{items:o,cols:4,layout:{labelCol:{span:6},wrapperCol:{span:18}}})})),(0,s.Z)((0,i.Z)(e),"renderOther",(function(){var t=e.props.detail,r=u().get(t,"summary_data",{}),n=[{form:"临时性结算汇总：".concat(v.fbc.exchangePriceToMathFormat(r["临时性结算汇总"]||0),"元")},{form:"工伤保险扣款：".concat(v.fbc.exchangePriceToMathFormat(r["工伤险扣款"]||0),"元")},{form:"平台雇主险扣款：".concat(v.fbc.exchangePriceToMathFormat(r["平台雇主险扣款"]||0),"元")},{form:"电动车扣款：".concat(v.fbc.exchangePriceToMathFormat(r["电动车扣款"]||0),"元")},{form:"电动车租金扣款：".concat(v.fbc.exchangePriceToMathFormat(r["电动车租金扣款"]||0),"元")},{form:"电动车押金扣款：".concat(v.fbc.exchangePriceToMathFormat(r["电动车押金扣款"]||0),"元")},{form:"装备押金：".concat(v.fbc.exchangePriceToMathFormat(r["装备押金"]||0),"元")},{form:"装备扣款：".concat(v.fbc.exchangePriceToMathFormat(r["装备扣款"]||0),"元")},{form:"应发工资：".concat(v.fbc.exchangePriceToMathFormat(r["应发工资"]||0),"元")},{form:"社保扣款：".concat(v.fbc.exchangePriceToMathFormat(r["社保扣款"]||0),"元")},{form:"个人所得税：".concat(v.fbc.exchangePriceToMathFormat(r["个人所得税"]||0),"元")},{form:"实发工资：".concat(v.fbc.exchangePriceToMathFormat(r["实发工资"]||0),"元")},{form:"三方手续费汇总：".concat(v.fbc.exchangePriceToMathFormat(r["手续费"]||0),"元")},{form:"综合实发工资：".concat(v.fbc.exchangePriceToMathFormat(r["实发工资"]||0),"元")}];return m.createElement(g.KP,{items:n,cols:4,layout:{labelCol:{span:10},wrapperCol:{span:14}}})})),(0,s.Z)((0,i.Z)(e),"renderOperate",(function(){var t=e.props.detail,r=u().get(t,"payrollStatementInfo",{}),n=r._id,a=r.platform_code,o=r.state;return m.createElement("div",null,m.createElement(h.Link,{to:{pathname:"/Finance/Manage/Summary/Detail/City",query:{id:n,platformCode:a,canDelay:1,states:o}}},"查看详情"),m.createElement("a",{key:"onDownloadPayroll",onClick:function(){return e.onDownloadPayroll(t._id)},className:x.Z["app-comp-expense-elem-dowload-btn"]},"下载结算单附件"))})),e.state={isShowDetail:!0},e}return(0,o.Z)(r,[{key:"render",value:function(){var e=this,t=this.state.isShowDetail,r=this.props.detail;if(!r||0===Object.keys(r).length)return m.createElement(g.IT,{title:"结算汇总"},m.createElement(n.Z,null));var a=m.createElement("a",{key:"changeExpand",onClick:function(){return e.setState({isShowDetail:!t})}},t?"收起":"展开");return m.createElement(g.IT,{title:"结算汇总",titleExt:a},m.createElement("div",{className:t?"":x.Z["app-comp-expense-elem-hide"]},this.renderPublic(),this.renderOther(),this.renderOperate()))}}]),r}(m.Component);(0,s.Z)(b,"propTypes",{detail:y().object,dispatch:y().func}),(0,s.Z)(b,"defaultProps",{detail:{},dispatch:function(){}}),t.Z=b},4681:function(e,t,r){r(438);var n=r(14277),a=r(15671),o=r(43144),i=r(97326),c=r(60136),p=r(82963),l=r(61120),s=r(4942),d=r(93517),u=r.n(d),m=r(67294),f=r(45697),y=r.n(f),h=r(44654),v=r(80385),g=r(96036),x=r(31101);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,p.Z)(this,r)}}var b=function(e){(0,c.Z)(r,e);var t=Z(r);function r(){var e;return(0,a.Z)(this,r),e=t.call(this),(0,s.Z)((0,i.Z)(e),"onDownloadPayroll",(function(t){(0,e.props.dispatch)({type:"financeSummaryManage/downloadSalaryStatement",payload:{id:t}})})),(0,s.Z)((0,i.Z)(e),"renderPublic",(function(){var t=e.props.detail,r=u().get(t,"summary_data",{}),n=u().get(t,"start_date","--"),a=u().get(t,"end_date","--"),o=[{form:"项目：".concat(r["项目"]||"--")},{form:"主体：".concat(r["主体"]||"--")},{form:"城市：".concat(r["城市"]||"--")},{form:"个户类型：".concat(v.EbQ.description(t.work_type))},{form:"雇佣主体：".concat(r["雇佣主体"]||"--")},{form:"服务费归属日期：".concat(n,"~").concat(a)},{form:"成本中心：".concat(r["成本中心"]||"--")},{form:"人数：".concat(Number(r["人数"])||0)},{form:"招聘费用预测：".concat(v.fbc.exchangePriceToMathFormat(r["招聘费用预测"]||0),"元")},{form:"单量：".concat(r["单量"]||0,"单")},{form:"服务费调节类补款：".concat(v.fbc.exchangePriceToMathFormat(r["薪资调节类补款"]||0))},{form:"平台奖励：".concat(v.fbc.exchangePriceToMathFormat(r["平台奖励"]||0))},{form:"内荐费：".concat(v.fbc.exchangePriceToMathFormat(r["内荐费"]||0))},{form:"押金返还(6月前)：".concat(v.fbc.exchangePriceToMathFormat(r["押金返还(6月前)"]||0))},{form:"押金返还(6月后)：".concat(v.fbc.exchangePriceToMathFormat(r["押金返还(6月后)"]||0))},{form:"现金内荐费扣款：".concat(v.fbc.exchangePriceToMathFormat(r["现金内荐费扣款"]||0))},{form:"兼职工资扣款：".concat(v.fbc.exchangePriceToMathFormat(r["兼职工资扣款"]||0))}];return m.createElement(g.KP,{items:o,cols:4,layout:{labelCol:{span:12},wrapperCol:{span:12}}})})),(0,s.Z)((0,i.Z)(e),"renderOther",(function(){var t=e.props.detail,r=u().get(t,"summary_data",{}),n=[{form:"临时性结算扣回：".concat(v.fbc.exchangePriceToMathFormat(r["临时性结算扣回"]||0))},{form:"工伤保险扣款：".concat(v.fbc.exchangePriceToMathFormat(r["工伤保险扣款"]||0))},{form:"平台雇主险扣款：".concat(v.fbc.exchangePriceToMathFormat(r["平台雇主险扣款"]||0))},{form:"电动车扣款：".concat(v.fbc.exchangePriceToMathFormat(r["电动车扣款"]||0))},{form:"电动车租金扣款：".concat(v.fbc.exchangePriceToMathFormat(r["电动车租金扣款"]||0))},{form:"电动车押金扣款：".concat(v.fbc.exchangePriceToMathFormat(r["电动车押金扣款"]||0))},{form:"装备押金扣款：".concat(v.fbc.exchangePriceToMathFormat(r["装备押金扣款"]||0))},{form:"装备扣款：".concat(v.fbc.exchangePriceToMathFormat(r["装备扣款"]||0))},{form:"应发工资：".concat(v.fbc.exchangePriceToMathFormat(r["应发工资"]||0))},{form:"社保扣款：".concat(v.fbc.exchangePriceToMathFormat(r["社保扣款"]||0))},{form:"个人所得税：".concat(v.fbc.exchangePriceToMathFormat(r["个人所得税"]||0))},{form:"手续费：".concat(v.fbc.exchangePriceToMathFormat(r["手续费"]||0))},{form:"实发工资：".concat(v.fbc.exchangePriceToMathFormat(r["实发工资"]||0))}];return m.createElement(g.KP,{items:n,cols:4,layout:{labelCol:{span:6},wrapperCol:{span:18}}})})),(0,s.Z)((0,i.Z)(e),"renderOperate",(function(){var t=e.props.detail,r=t._id,n=t.platform_code,a=t.state;return m.createElement("div",null,m.createElement(h.Link,{to:{pathname:"/Finance/Manage/Summary/Detail/City",query:{id:r,canDelay:1,states:a,platformCode:n}}},"查看详情"),m.createElement("a",{key:"onDownloadPayroll",className:x.Z["app-comp-expense-mt-dowload-btn"],onClick:function(){return e.onDownloadPayroll(t.payrollStatementId)}},"下载结算单附件"))})),e.state={isShowDetail:!0},e}return(0,o.Z)(r,[{key:"render",value:function(){var e=this,t=this.state.isShowDetail,r=this.props.detail;if(!r||0===Object.keys(r).length)return m.createElement(g.IT,{title:"结算汇总"},m.createElement(n.Z,null));var a=m.createElement("a",{key:"changeExpand",onClick:function(){return e.setState({isShowDetail:!t})}},t?"收起":"展开");return m.createElement(g.IT,{title:"结算汇总",titleExt:a},m.createElement("div",{className:t?"":x.Z["app-comp-expense-mt-hide"]},this.renderPublic(),this.renderOther(),this.renderOperate()))}}]),r}(m.Component);(0,s.Z)(b,"propTypes",{detail:y().object,dispatch:y().func}),(0,s.Z)(b,"defaultProps",{detail:{},dispatch:function(){}}),t.Z=b},38283:function(e,t,r){r.r(t),r.d(t,{default:function(){return ve}});var n=r(93433),a=(r(29093),r(16317)),o=(r(52466),r(10642)),i=(r(52560),r(71577)),c=(r(20186),r(75385)),p=(r(21316),r(75443)),l=(r(55295),r(69713)),s=(r(51838),r(48086)),d=r(15671),u=r(43144),m=r(97326),f=r(60136),y=r(82963),h=r(61120),v=r(4942),g=r(94315),x=r.n(g),Z=r(93517),b=r.n(Z),I=r(55609),O=r(45697),w=r.n(O),T=r(67294),E=r(66939),C=(r(98703),r(86040)),k=r(96036),P=r(80385),D=r(97116),_=r(2671),S=r(52911);function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var R=function(e){(0,f.Z)(r,e);var t=B(r);function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.Z)((0,m.Z)(e),"onChangeBorrowingPage",(function(t){var r=e.props.borrowingId;e.props.dispatch({type:"borrowingRepayment/fetchBorrowingOrders",payload:{borrowOrderId:r,limit:30,page:t,disableState:!0}})})),(0,v.Z)((0,m.Z)(e),"onBorrowingShowSizeChange",(function(t,r){var n=e.props.borrowingId;e.props.dispatch({type:"borrowingRepayment/fetchBorrowingOrders",payload:{borrowOrderId:n,limit:r,page:t,disableState:!0}})})),(0,v.Z)((0,m.Z)(e),"onAddBorrowing",(function(){var t=e.props.applicationOrderId;window.location.href="/#/Expense/BorrowingRepayments/Borrowing/Create?applicationOrderId=".concat(t)})),(0,v.Z)((0,m.Z)(e),"render",(function(){var t=e.props,r=t.borrowingOrders,n=void 0===r?{}:r,a=t.borrowingId,o=b().get(n,"data",[]),p=b().get(n,"meta.count",0),s=[{title:"借款单号",dataIndex:"_id"},{title:"平台",dataIndex:"platform_name",render:function(e){return e||"--"}},{title:"供应商",dataIndex:"supplier_name",render:function(e){return e||"--"}},{title:"城市",dataIndex:"city_name",render:function(e){return e||"--"}},{title:"商圈",dataIndex:"biz_district_name",render:function(e){return e||"--"}},{title:"实际借款人",dataIndex:"actual_loan_info",render:function(e){var t=b().get(e,"name");return T.createElement("div",{className:S.Z["app-comp-expense-borrow-actual-loan-name"]},t)}},{title:"身份证号",dataIndex:"actual_loan_info",render:function(e){return e.identity||"--"}},{title:"借款类型",dataIndex:"loan_type",render:function(e){return P.eLy.description(e)||"--"}},{title:"借款事由",dataIndex:"loan_note",render:function(e){return x().empty(e)||x().not.existy(e)?"--":e.length<=10?T.createElement("div",{className:S.Z["app-comp-expense-borrow-loan-note"]},e):T.createElement(l.Z,{title:T.createElement("span",{className:S.Z["app-comp-expense-borrow-loan-note-tooltip"]},e)},T.createElement("span",null,e.substring(0,10),"..."))}},{title:"借款金额（元）",dataIndex:"loan_money",render:function(e){return P.fbc.exchangePriceCentToMathFormat(e)}},{title:"操作",dataIndex:"operation",render:function(e,t){return T.createElement("a",{key:"update",href:"/#/Expense/BorrowingRepayments/Borrowing/Update?applicationOrderId=".concat(t.application_order_id,"&costOrderId=").concat(t._id),className:S.Z["app-comp-expense-borrow-operate"]},"编辑")}}],d={defaultPageSize:30,onChange:e.onChangeBorrowingPage,total:p,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:e.onBorrowingShowSizeChange},u=T.createElement(i.Z,{type:"primary",onClick:e.onAddBorrowing},"新建");return T.createElement(k.IT,{key:"borrowing",title:"借款单数据",titleExt:a?"":u},T.createElement(c.Z,{rowKey:function(e){return e._id},dataSource:o,columns:s,pagination:d,bordered:!0}))})),e}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props.borrowingId;e&&this.props.dispatch({type:"borrowingRepayment/fetchBorrowingOrders",payload:{borrowOrderId:e,disableState:!0}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"borrowingRepayment/resetBorrowingOrders"})}}]),r}(T.Component);(0,v.Z)(R,"propTypes",{applicationOrderId:w().string,borrowingId:w().string,borrowingOrders:w().object}),(0,v.Z)(R,"defaultProps",{applicationOrderId:"",borrowingId:"",borrowingOrders:{}});var M=(0,I.connect)((function(e){return{borrowingOrders:e.borrowingRepayment.borrowingOrders}}))(R);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var F=function(e){(0,f.Z)(r,e);var t=L(r);function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.Z)((0,m.Z)(e),"onChangeRepaymentPage",(function(t){var r=e.props,n=r.repaymentId;(0,r.dispatch)({type:"borrowingRepayment/fetchRepaymentOrders",payload:{repaymentsOrderId:n,limit:30,page:t,disableState:!0}})})),(0,v.Z)((0,m.Z)(e),"onRepaymentShowSizeChange",(function(t,r){var n=e.props,a=n.repaymentId;(0,n.dispatch)({type:"borrowingRepayment/fetchRepaymentOrders",payload:{repaymentsOrderId:a,limit:r,page:t,disableState:!0}})})),(0,v.Z)((0,m.Z)(e),"render",(function(){var t=e.props.repaymentOrders,r=void 0===t?{}:t,n=b().get(r,"data",[]),a=b().get(r,"meta.count",0),o=[{title:"还款单号",dataIndex:"_id",render:function(e){return T.createElement("div",{className:S.Z["app-comp-expense-repayment-id"]},e)}},{title:"平台",dataIndex:"application_order_info",render:function(e){var t=b().get(e,"platform_names",[]);return x().empty(t)?"--":t}},{title:"供应商",dataIndex:"application_order_info",render:function(e){var t=b().get(e,"supplier_names",[]);return x().empty(t)?"--":t}},{title:"城市",dataIndex:"application_order_info",render:function(e){var t=b().get(e,"city_names",[]);return x().empty(t)?"--":t}},{title:"商圈",dataIndex:"application_order_info",render:function(e){var t=b().get(e,"biz_district_names",[]);return x().empty(t)?"--":t}},{title:"还款金额",dataIndex:"repayment_money",render:function(e){return P.fbc.exchangePriceCentToMathFormat(e)}},{title:"备注",dataIndex:"repayment_note",render:function(e){return e||"--"}},{title:"操作",dataIndex:"operation",render:function(e,t){return T.createElement("a",{key:"update",href:"/#/Expense/BorrowingRepayments/Repayments/Update?repayOrderId=".concat(t._id,"&applicationOrderId=").concat(t.application_order_id),className:S.Z["app-comp-expense-repayment-operation"]},"编辑")}}],i={defaultPageSize:30,onChange:e.onChangeRepaymentPage,total:a,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:e.onRepaymentShowSizeChange};return T.createElement(k.IT,{key:"repayments",title:"还款单数据"},T.createElement(c.Z,{rowKey:function(e){return e._id},dataSource:n,columns:o,pagination:i,bordered:!0}))})),e}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.repaymentId,r=e.dispatch;t&&r({type:"borrowingRepayment/fetchRepaymentOrders",payload:{repaymentsOrderId:t,disableState:!0}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"borrowingRepayment/resetRepaymentOrders"})}}]),r}(T.Component);(0,v.Z)(F,"propTypes",{repaymentId:w().string,repaymentOrders:w().object,dispatch:w().func}),(0,v.Z)(F,"defaultProps",{repaymentId:"",repaymentOrders:{},dispatch:function(){}});var N=(0,I.connect)((function(e){return{repaymentOrders:e.borrowingRepayment.repaymentOrders}}))(F),j=r(8240);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var U=k.Hr.Option,H=function(e){(0,f.Z)(r,e);var t=K(r);function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.Z)((0,m.Z)(e),"componentWillUnmount",(function(){(0,e.props.dispatch)({type:"expenseExamineFlow/resetExamineFlowDetail"})})),(0,v.Z)((0,m.Z)(e),"onChange",(function(t,r){var n,a=e.props,o=a.onChange,i=a.examineDetail,c=b().get(i,"extraUiOptions.form_template"),p=b().get(i,"extraUiOptions.cost_forms",{});x().existy(p)&&x().not.empty(p)&&(n=b().get(p,t));var l=r.props.children;if(o)return x().existy(n)&&x().not.empty(n)?o(t,l,n):o(t,l,c)})),(0,v.Z)((0,m.Z)(e),"render",(function(){var t=e.props.examineDetail.costCatalogScopeList,r=(void 0===t?[]:t).map((function(e){return T.createElement(U,{key:e.id,value:"".concat(e.id)},e.name)})),n=z(z({},e.props),{},{onChange:e.onChange}),a=(0,j.CE)(["dispatch","flowId","examineDetail"],n);return T.createElement(k.Hr,a,r)})),e}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.flowId,r=e.dispatch;t&&r({type:"expenseExamineFlow/fetchExamineDetail",payload:{id:t}})}},{key:"componentDidUpdate",value:function(e){var t=e.flowId,r=this.props,n=r.flowId,a=r.dispatch;t!==n&&n&&a({type:"expenseExamineFlow/fetchExamineDetail",payload:{id:n}})}}]),r}(T.Component);(0,v.Z)(H,"propTypes",{flowId:w().string.isRequired,examineDetail:w().object.isRequired,dispatch:w().func,onChange:w().func}),(0,v.Z)(H,"defaultProps",{flowId:"",examineDetail:{},dispatch:function(){},onChange:function(){}});var Y=(0,I.connect)((function(e){return{examineDetail:e.expenseExamineFlow.examineDetail}}))(H);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var W=D.Iq.platform(),q=function(e){(0,f.Z)(r,e);var t=V(r);function r(e){var n;return(0,d.Z)(this,r),n=t.call(this,e),(0,v.Z)((0,m.Z)(n),"componentDidMount",(function(){var e={feature:"house_contract",platforms:W.map((function(e){return e.id}))};n.props.dispatch({type:"expenseExamineFlow/fetchExamineFlowConfig",payload:e})})),(0,v.Z)((0,m.Z)(n),"onChangeExpenseType",(function(e,t,r){n.setState({expenseTypeId:e,expenseTypeName:t,template:Number(r)})})),(0,v.Z)((0,m.Z)(n),"onClickCreate",(function(){var e,t=n.props,r=t.orderId,a=t.flowId,o=t.examineFlowConfig,i=void 0===o?{}:o,c=t.applicationOrderType,p=t.approvalKey,l=t.platformCode,d=t.examineDetail,u=void 0===d?{}:d,m=n.state,f=m.expenseTypeId,y=m.expenseTypeName,h=m.template;l&&l.length>0&&(e=l[0]&&"string"==typeof l[0]?encodeURIComponent(l[0]):void 0);var v=u.platformCodes,g=void 0===v?[]:v,Z=g[0]&&"string"==typeof g[0]?encodeURIComponent(g[0]):void 0;if(i&&f&&a)for(var b in i)if(Object.prototype.hasOwnProperty.call(i,b))for(var I in i[b])if(i[b][I].flow_id===a&&i[b][I].cost_group_id===f)return s.ZP.error("该分组只适用于房屋费用申请");if(x().empty(f)||x().not.existy(f))return s.ZP.error("请选择费用分组");if(c!==P.ZBL.travel){if(h!==P.$9p.refund)return h===P.$9p.rent?s.ZP.info("暂时不支持租房申请"):void s.ZP.error("错误的房屋模版类型");window.location.href="/#/Expense/Manage/Template/Create?orderId=".concat(r,"&expenseTypeId=").concat(f,"&expenseTypeName=").concat(y,"&template=").concat(h,"&approvalKey=").concat(p,"&platformParam=").concat(e,"&applicationOrderType=").concat(c,"&platform=").concat(Z)}else window.location.href="/#/Expense/Manage/ExamineOrder/BusinessTravel/Create?orderId=".concat(r,"&expenseTypeId=").concat(f,"&expenseTypeName=").concat(y,"&approvalKey=").concat(p,"&platformParam=").concat(e,"&platform=").concat(Z)})),n.state={expenseTypeId:void 0,expenseTypeName:void 0,template:void 0},n}return(0,u.Z)(r,[{key:"render",value:function(){var e=this.props.flowId;return T.createElement("div",null,T.createElement("span",{className:S.Z["app-comp-expense-create-cost-order-label"]},"费用分组:"),T.createElement(Y,{flowId:e,onChange:this.onChangeExpenseType,placeholder:"请选择费用分组",className:S.Z["app-comp-expense-create-cost-order-selector"]}),T.createElement(i.Z,{type:"primary",onClick:this.onClickCreate},"新建"))}}]),r}(T.Component);(0,v.Z)(q,"propTypes",{orderId:w().string.isRequired,flowId:w().string.isRequired,applicationOrderType:w().number,approvalKey:w().string,platformCode:w().array,examineDetail:w().object,examineFlowConfig:w().object}),(0,v.Z)(q,"defaultProps",{orderId:"",flowId:"",applicationOrderType:w().number,approvalKey:"",platformCode:[],examineDetail:{},examineFlowConfig:{}});var G=(0,I.connect)((function(e){var t=e.expenseExamineFlow;return{examineDetail:t.examineDetail,examineFlowConfig:t.examineFlowConfig}}))(q),Q=r(30381),J=r.n(Q);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var X=function(e){(0,f.Z)(r,e);var t=$(r);function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.Z)((0,m.Z)(e),"onAddBusinessTrip",(function(){var t=e.props.applicationOrderId;window.location.href="/#/Expense/Manage/ExamineOrder/BusinessTrip/Create?applicationOrderId=".concat(t)})),(0,v.Z)((0,m.Z)(e),"render",(function(){var t=e.props,r=t.businessTripData,n=void 0===r?{}:r,a=t.businessTripId,o=t.applicationOrderId;if(Object.keys(n).length<=0)return null;var p=[{title:"出差申请单号",dataIndex:"_id"},{title:"实际出差人",dataIndex:"apply_user_name",render:function(e){return e||"--"}},{title:"出发地",dataIndex:"departure",render:function(e){return"".concat(e.province_name).concat(e.city_name||"")||"--"}},{title:"目的地",dataIndex:"destination",render:function(e){return"".concat(e.province_name).concat(e.city_name||"")||"--"}},{title:"开始时间",dataIndex:"expect_start_at",render:function(e){return J()(e).format("YYYY.MM.DD HH: 00")||"--"}},{title:"结束时间",dataIndex:"expect_done_at",render:function(e){return J()(e).format("YYYY.MM.DD HH: 00")||"--"}},{title:"出差天数",dataIndex:"expect_apply_days",render:function(e){return e||"--"}},{title:"原因及说明",dataIndex:"note",render:function(e){return x().empty(e)||x().not.existy(e)?"--":e.length<=10?T.createElement("div",{className:S.Z["app-comp-expense-trip-note"]},e):T.createElement(l.Z,{title:T.createElement("span",{className:S.Z["app-comp-expense-trip-note-tool-tip"]},e)},T.createElement("span",null,e.substring(0,10),"..."))}},{title:"操作",key:"operation",render:function(e,t){return T.createElement("a",{key:"update",href:"/#/Expense/Manage/ExamineOrder/BusinessTrip/Update?applicationOrderId=".concat(o,"&costOrderId=").concat(t._id),className:S.Z["app-comp-expense-trip-operate"]},"编辑")}}],s=T.createElement(i.Z,{type:"primary",onClick:e.onAddBusinessTrip},"新建");return T.createElement(k.IT,{key:"businessTrip",title:"出差单数据",titleExt:a?"":s},T.createElement(c.Z,{pagination:!1,rowKey:function(e){return e._id},dataSource:n?[n]:[],columns:p,bordered:!0}))})),e}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props.businessTripId;e&&this.props.dispatch({type:"expenseExamineOrder/fetchBusinessTrip",payload:{costOrderId:e}})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"borrowingRepayment/resetBusinessTripOrders"})}}]),r}(T.Component);(0,v.Z)(X,"propTypes",{applicationOrderId:w().string,businessTripId:w().string,businessTripData:w().object}),(0,v.Z)(X,"defaultProps",{applicationOrderId:"",businessTripId:"",businessTripData:{}});var ee=(0,I.connect)((function(e){return{businessTripData:e.expenseExamineOrder.businessTripData}}))(X),te=r(88081),re=r(72531),ne=r(4681);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var oe=function(e){(0,f.Z)(r,e);var t=ae(r);function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.Z)((0,m.Z)(e),"renderContent",(function(){var t=e.props.overTimeDetail;if(0===Object.keys(t).length)return null;var r=[{title:"加班申请单号",dataIndex:"_id",render:function(e){return e||"--"}},{title:"实际加班人",dataIndex:"actual_apply_name",render:function(e){return e||"--"}},{title:"开始时间",dataIndex:"start_at",render:function(e){return e?J()(e).format("YYYY.MM.DD HH:mm:ss"):"--"}},{title:"结束时间",dataIndex:"end_at",render:function(e){return e?J()(e).format("YYYY.MM.DD HH:mm:ss"):"--"}},{title:"加班时长（小时）",dataIndex:"duration"},{title:"原因及说明",dataIndex:"reason",render:function(e){return e?T.createElement("div",{className:S.Z["app-comp-expense-associated-tag"]},e):"--"}},{title:"操作",dataIndex:"_id",render:function(e,t){return T.createElement("a",{key:"update",href:"/#/Expense/Attendance/OverTime/Update?overTimeId=".concat(e,"&applicationOrderId=").concat(t.application_order_id),className:S.Z["app-comp-expense-repayment-operation"]},"编辑")}}];return T.createElement(k.IT,{title:"加班单"},T.createElement(c.Z,{rowKey:function(e){return e._id},dataSource:[t],columns:r,pagination:!1,bordered:!0}))})),e}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.overTimeId,r=e.dispatch;t&&r({type:"expenseOverTime/fetchOverTimeDetail",payload:{overTimeId:t}})}},{key:"render",value:function(){return this.renderContent()}}]),r}(T.Component);(0,v.Z)(oe,"propTypes",{overTimeId:w().string,overTimeDetail:w().object}),(0,v.Z)(oe,"defaultProps",{overTimeId:"",overTimeDetail:{}});var ie=(0,I.connect)((function(e){return{overTimeDetail:e.expenseOverTime.overTimeDetail}}))(oe);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var pe=function(e){(0,f.Z)(r,e);var t=ce(r);function r(){var e;(0,d.Z)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),(0,v.Z)((0,m.Z)(e),"renderContent",(function(){var t=e.props.expenseTakeLeaveDetail;if(0===Object.keys(t).length)return null;var r=[{title:"请假申请单号",dataIndex:"_id",render:function(e){return e||"--"}},{title:"请假类型",dataIndex:"leave_type",render:function(e){return P.gGH.description(e)||"--"}},{title:"实际请假人",dataIndex:"actual_apply_name",render:function(e){return e||"--"}},{title:"开始时间",dataIndex:"start_at",render:function(e){return e?J()(e).format("YYYY.MM.DD HH:mm"):"--"}},{title:"结束时间",dataIndex:"end_at",render:function(e){return e?J()(e).format("YYYY.MM.DD HH:mm"):"--"}},{title:"请假时长（小时）",dataIndex:"duration",render:function(e){return e||"--"}},{title:"请假事由",dataIndex:"reason",render:function(e){return e?T.createElement("div",{className:S.Z["app-comp-expense-associated-tag"]},e):"--"}},{title:"操作",dataIndex:"_id",render:function(e,t){return T.createElement("a",{key:"update",href:"/#/Expense/Attendance/TakeLeave/Update?applicationOrderId=".concat(t.application_order_id,"&takeLeaveId=").concat(e),className:S.Z["app-comp-expense-repayment-operation"]},"编辑")}}];return T.createElement(k.IT,{title:"请假单"},T.createElement(c.Z,{rowKey:function(e){return e._id},dataSource:[t],columns:r,pagination:!1,bordered:!0}))})),e}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.takeLeaveId;(0,e.dispatch)({type:"expenseTakeLeave/fetchExpenseTakeLeaveDetail",payload:{id:t}})}},{key:"render",value:function(){return this.renderContent()}}]),r}(T.Component);(0,v.Z)(pe,"propTypes",{takeLeaveId:w().string,expenseTakeLeaveDetail:w().object}),(0,v.Z)(pe,"defaultProps",{takeLeaveId:"",expenseTakeLeaveDetail:{}});var le=(0,I.connect)((function(e){return{expenseTakeLeaveDetail:e.expenseTakeLeave.expenseTakeLeaveDetail}}))(pe),se=r(97418),de=(0,I.connect)((function(e){return{orderList:e.humanResource.orderList}}))((function(e){var t=e.dispatch,r=e.detail,n=void 0===r?{}:r,a=e.orderList,o=void 0===a?{}:a,i=e.approvalKey,p=void 0===i?2:i,l=n.id,s=n.applicationOrderType,d=n.flowId,u=o.data,m=void 0===u?[]:u;(0,T.useEffect)((function(){t({type:"humanResource/getOrderList",payload:{id:l,type:s}})}),[t,l,s]);var f=[{title:"申请单号",dataIndex:"_id",render:function(e){return e||"--"}},{title:"部门",dataIndex:["creator_department_info","name"],render:function(e){return e||"--"}},{title:"岗位",dataIndex:["creator_job_info","name"],render:function(e){return e||"--"}},{title:"申请人",dataIndex:["creator_info","name"],render:function(e){return e||"--"}},{title:"事由说明",dataIndex:"note",width:450,render:function(e,t){return s===P.ZBL.contractCome?T.createElement("div",{style:{wordBreak:"break-all"},className:"noteWrap"},t.content):s===P.ZBL.official?T.createElement("div",{style:{wordBreak:"break-all"},className:"noteWrap"},t.improve_vision):s===P.ZBL.recruitment?T.createElement("div",{style:{wordBreak:"break-all"},className:"noteWrap"},t.other_requirement):s===P.ZBL.oaBusiness?T.createElement("div",{style:{wordBreak:"break-all"},className:"noteWrap"},t.working_plan):s===P.ZBL.fundTrasfer?T.createElement("div",{style:{wordBreak:"break-all"},className:"noteWrap"},b().get(t,"dispatch_expense_list.0.note","")):T.createElement("div",{style:{wordBreak:"break-all"},className:"noteWrap"},e)}},{title:"操作",dataIndex:"_id",render:function(e){return T.createElement("a",{onClick:function(){return t=e,r=se.z0.routeByKey(s,"update",{id:t,callbackId:l,pageType:s,callbackKey:p,flow_id:d}),void(window.location.href=r);var t,r}},"编辑")}}];return T.createElement(k.IT,{title:"相关单据"},T.createElement(c.Z,{columns:f,rowKey:function(e,t){return e._id||t},dataSource:m}))})),ue=r(83983);function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){(0,v.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var a=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,y.Z)(this,r)}}var he=function(e){(0,f.Z)(r,e);var t=ye(r);function r(e){var n;return(0,d.Z)(this,r),n=t.call(this,e),(0,v.Z)((0,m.Z)(n),"onShowModal",(function(){n.setState({visible:!0})})),(0,v.Z)((0,m.Z)(n),"onHideModal",(function(){n.setState({visible:!1,isVerifyPost:!1,isDefault:!0})})),(0,v.Z)((0,m.Z)(n),"onChangePerson",(function(e,t){n.setState({isVerifyPost:e,isDefault:!1,isDisabledPerson:t})})),(0,v.Z)((0,m.Z)(n),"onVerify",(function(e,t,r){var a=n.props.examineOrderDetail,o=void 0===a?{}:a,i=n.state.isVerifyPost,c=b().get(o,"flowInfo.nodeList",[]),p=b().get(c[0],"accountList",[]);1===b().get(c[0],"postList",[]).length&&0===p.length&&(i=!0),!0===e.isApprovalAll||!1===e.isApprovalAll&&e.isAutoMatic&&!1===i||!1===e.isApprovalAll&&!0===i&&t.postId&&t.personId||!1===e.isApprovalAll&&!1===e.isAutoMatic&&!1===i&&t.personId?r():r("请选择指派审批人或审批岗位")})),(0,v.Z)((0,m.Z)(n),"onPresent",(function(){var e,t=n.props,r=t.examineOrderDetail,a=void 0===r?{}:r,o=t.examineDetail,i=void 0===o?{}:o,c=t.dispatch,p=a.flowId,l=a.costOrderIds,d=void 0===l?[]:l,u=a.businessTravelOrderId,m=a.extraWorkOrLeaveId,f=a.applicationOrderType;if(0===Object.keys(i).length&&c({type:"expenseExamineFlow/fetchExamineDetail",payload:{id:p}}),(x().not.existy(d)||x().empty(d))&&(x().not.existy(u)||x().empty(u))&&x().not.existy(m)&&!se.fe.find((function(e){return e.key===f})))return s.ZP.info("请添加费用单数据");var y=b().get(i,"nodeList",[]);x().existy(y)&&x().not.empty(y)&&(e=y[0].approveMode),e===P.Fv8.any?n.setState({visible:!0}):n.onSubmit()})),(0,v.Z)((0,m.Z)(n),"onChangeCopyGiveValues",(function(e){n.setState({copyGiveValues:e})})),(0,v.Z)((0,m.Z)(n),"onSubmit",(function(){var e=n.state,t=e.orderId,r=e.copyGiveValues;n.props.form.validateFields((function(e,a){if(!e){var o=b().get(r,"departmentNames",[]),i=b().get(r,"userNames",[]),c={id:t,copyGivedepartments:o,copyGiveusers:i,onSuccessCallback:n.onSubmitSuccessCallback,onFailureCallback:n.onSubmitFailureCallback},p=a.assignedPerson,l=void 0===p?{}:p,s=l.postId,d=l.personId;x().existy(d)&&x().not.empty(d)&&(c.person=d),x().existy(s)&&x().not.empty(s)&&(c.postIds=s),n.private.isSubmit&&(n.props.dispatch({type:"expenseExamineOrder/submitExamineOrder",payload:c}),n.private.isSubmit=!1)}}))})),(0,v.Z)((0,m.Z)(n),"onSubmitSuccessCallback",(function(){var e=n.props.examineOrderDetail;if((void 0===e?{}:e).applicationOrderType<100)window.location.href="/#/Expense/Manage/ExamineOrder";else{if("true"===b().get(n.props,"location.query",{}).isShowCode)return void(window.location.href="/#/Code/Manage/OAOrder");window.location.href="/#/Expense/Manage/OAOrder"}})),(0,v.Z)((0,m.Z)(n),"onSuccessCallback",(function(){var e=n.state.orderId;void 0!==e&&(n.props.dispatch({type:"expenseExamineOrder/fetchExamineOrderDetail",payload:{id:e}}),n.props.dispatch({type:"expenseCostOrder/fetchCostOrders",payload:{examineOrderId:e}}))})),(0,v.Z)((0,m.Z)(n),"onSubmitFailureCallback",(function(e){return n.private.isSubmit=!0,s.ZP.error(e.zh_message)})),(0,v.Z)((0,m.Z)(n),"onDeleteCostOrder",(function(e){var t={orderId:n.state.orderId,recordIds:[e],onSuccessCallback:n.onDeleteCostOrderSuccessCallback};n.props.dispatch({type:"expenseCostOrder/deleteCostOrder",payload:t})})),(0,v.Z)((0,m.Z)(n),"onDeleteCostOrderSuccessCallback",(function(){var e=n.state.orderId;n.props.dispatch({type:"expenseExamineOrder/fetchExamineOrderDetail",payload:{id:e}}),n.props.dispatch({type:"expenseCostOrder/fetchCostOrders",payload:{examineOrderId:e}})})),(0,v.Z)((0,m.Z)(n),"onShowSizeChange",(function(e,t){var r=n.state.orderId;n.props.dispatch({type:"expenseCostOrder/fetchCostOrders",payload:{examineOrderId:r,limit:t,page:e}})})),(0,v.Z)((0,m.Z)(n),"onChangePage",(function(e){var t=n.state.orderId;n.props.dispatch({type:"expenseCostOrder/fetchCostOrders",payload:{examineOrderId:t,limit:30,page:e}})})),(0,v.Z)((0,m.Z)(n),"onFailureAssociatedCallback",(function(e){s.ZP.error(e.zh_message)})),(0,v.Z)((0,m.Z)(n),"onChangeThemeTags",(function(e){var t=e,r=t.length;if(r>n.state.themeTags.length){var a=t[r-1].replace(/\s+/g,"");if(""===a)return;t[r-1]=a}n.setState({themeTags:t})})),(0,v.Z)((0,m.Z)(n),"onSaveThemeTags",(function(){var e=n.state,t=e.themeTags,r=e.orderId,a=n.props.examineOrderDetail,o=(a=void 0===a?{}:a).applicationOrderType;if((o===P.ZBL.contractCome||o===P.ZBL.contractBorrowing)&&t.length<=0)return s.ZP.error("请填写主题标签");var i=b().get(n.props,"examineOrderDetail.pluginExtraMeta.theme_label_list",[]),c={themeTags:t.filter((function(e){return!i.includes(e)})),orderId:r};n.props.dispatch({type:"expenseExamineOrder/fetchCostApprovalThemeTag",payload:{params:c,onFailureCallback:n.onFailureAssociatedCallback}})})),(0,v.Z)((0,m.Z)(n),"fetchHouseContractDetail",(function(e){var t=n.props.dispatch,r=e.flow_id,a=n.state.orderId;r&&t({type:"expenseExamineFlow/fetchExamineDetail",payload:{id:r,orderId:a}}),e.biz_extra_house_contract_id&&t({type:"expenseHouseContract/fetchHouseContractsDetail",payload:{id:e.biz_extra_house_contract_id}})})),(0,v.Z)((0,m.Z)(n),"renderBaseInfo",(function(){var e=n.props.examineOrderDetail,t=void 0===e?{}:e,r=t.applicationOrderType,a=r<100?P.ZBL.description(r):se.z0.titleByKey(r),o=!1,i=r===P.ZBL.cost,c=r===P.ZBL.travel,p=r===P.ZBL.housing,l=r===P.ZBL.borrowing,s=r===P.ZBL.repayments;(i||c||p||l||s)&&(o=!0);var d=[{label:"审批单号",form:b().get(t,"id","--")},{label:"申请人",form:b().get(t,"applyAccountInfo.name","--")},{label:o?"付款金额(元)":"总金额",form:P.fbc.exchangePriceCentToMathFormat(b().get(t,"totalMoney",0))},{label:"审批类型",form:a},{label:"审批流程",form:b().get(t,"flowInfo.name","--")}];return T.createElement(k.IT,null,T.createElement(E.Z,{layout:"horizontal"},T.createElement(k.KP,{items:d,cols:3,layout:{labelCol:{span:6},wrapperCol:{span:18}}})))})),(0,v.Z)((0,m.Z)(n),"renderListInfo",(function(){var e=n.state.orderId,t=n.props,r=t.examineOrderDetail,a=void 0===r?{}:r,o=t.examineFlowConfig,i=void 0===o?{}:o,s=t.loading,d=t.costOrdersData,u=void 0===d?{}:d,m=b().get(u,"data",[]),f=b().get(u,"meta.count",0),y=[];a.platformCodes&&(y=a.platformCodes);var h=b().get(a,"applicationOrderType",1);if(se.z0.apiByKey(h))return null;if(h!==P.ZBL.salaryRules&&h!==P.ZBL.salaryIssue&&h!==P.ZBL.borrowing&&h!==P.ZBL.repayments&&h!==P.ZBL.business&&h!==P.ZBL.overTime&&h!==P.ZBL.takeLeave&&h!==P.ZBL.turnover){var v=n.state.template,g=n.private.isShowCreate,Z=n.props.location.query.approvalKey,I=b().get(s.effects,"expenseExamineOrder/fetchExamineOrderDetail",!1),O=y[0]&&"string"==typeof y[0]?encodeURIComponent(y[0]):void 0;I||(a.bizExtraHouseContractId?(n.private.isShowCreate=!1,v=P.$9p.rent):n.private.isShowCreate=!0);var w=b().get(a,"platformCodes.0",void 0),E=b().get(i,"".concat(w,".accountings"),void 0),C=!1,_=h===P.ZBL.cost,S=h===P.ZBL.travel,B=h===P.ZBL.housing,R=h===P.ZBL.borrowing,M=h===P.ZBL.repayments;(_||S||B||R||M)&&(C=!0);var L=[{title:"费用单号",dataIndex:"id",key:"id"},{title:"费用分组",dataIndex:"costGroupName",key:"costGroupName"},{title:"平台",dataIndex:"platformNames",key:"platformNames",render:function(e){return x().array(e)&&x().not.empty(e)?e.join(","):"--"}},{title:"供应商",dataIndex:"supplierNames",key:"supplierNames",render:function(e){return x().not.existy(e)||x().empty(e)||x().not.array(e)?"--":1===e.length?b().get(e,"0"):T.createElement(l.Z,{title:e.map((function(e){return e})).join(" , ")},T.createElement("span",null,b().get(e,"0")," 等",e.length,"条"))}},{title:"城市",dataIndex:"cityNames",key:"cityNames",render:function(e){return x().not.existy(e)||x().empty(e)||x().not.array(e)?"--":1===e.length?b().get(e,"0"):T.createElement(l.Z,{title:e.map((function(e){return e})).join(" , ")},T.createElement("span",null,b().get(e,"0")," 等",e.length,"条"))}},{title:"商圈",dataIndex:"bizDistrictNames",key:"bizDistrictNames",render:function(e){return x().not.existy(e)||x().empty(e)||x().not.array(e)?"--":1===e.length?b().get(e,"0"):T.createElement(l.Z,{title:e.map((function(e){return e})).join(" , ")},T.createElement("span",null,b().get(e,"0")," 等",e.length,"条"))}},{title:"科目",dataIndex:["costAccountingInfo","name"],key:"costAccountingInfo.name",render:function(e,t){return"".concat(e,"(").concat(t.costAccountingCode,")")}},{title:"成本归属",dataIndex:"costCenterType",key:"costCenterType",render:function(e){return e?P.F$Y.description(e):"--"}},{title:C?"付款金额(元)":"金额（元）",dataIndex:"totalMoney",key:"totalMoney",render:function(e){return e?P.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"操作",dataIndex:"operation",key:"operation",render:function(t,r){if(r.applyAccountId!==D.Iq.account.id)return"";var o=r.id,i=b().get(r,"costAccountingInfo.costCenterType",void 0),c=[];if(h!==P.ZBL.travel||I)if("".concat(v)!=="".concat(P.$9p.refund)||I){if("".concat(v)==="".concat(P.$9p.rent)&&!I){var l="",s="",d="",u="";m.forEach((function(e){var t=e.costAccountingId;b().get(E,"rent_accounting_id.".concat(i))===t?d=e.id:b().get(E,"pledge_accounting_id.".concat(i))===t?l=e.id:b().get(E,"agent_accounting_id.".concat(i))===t?s=e.id:b().get(E,"lost_accounting_id.".concat(i))===t&&(u=e.id)})),c.push(T.createElement("a",{key:"update",href:"/#/Expense/Manage/Template/Update?pledgeRecordId=".concat(l,"&agentRecordId=").concat(s,"&rentRecordId=").concat(d,"&pledgeLostRecordId=").concat(u,"&template=").concat(v,"&approvalKey=").concat(Z,"&orderId=").concat(e,"&platformParam=").concat(O),className:ue.Z["app-comp-expense-form-cost-order-table-operate-btn"]},"编辑"))}}else c.push(T.createElement("a",{key:"update",href:"/#/Expense/Manage/Template/Update?recordId=".concat(o,"&template=").concat(v,"&approvalKey=").concat(Z,"&orderId=").concat(e,"&platformParam=").concat(O,"&applicationOrderType=").concat(h,"&platform=").concat(O),className:ue.Z["app-comp-expense-form-cost-order-table-operate-btn"]},"编辑"));else c.push(T.createElement("a",{key:"update",href:"/#/Expense/Manage/ExamineOrder/BusinessTravel/Update?recordId=".concat(o,"&orderId=").concat(e,"&approvalKey=").concat(Z,"&platformParam=").concat(O,"&platform=").concat(O),className:ue.Z["app-comp-expense-form-cost-order-table-operate-btn"]},"编辑"));return I||Number(Z)===P.WPs.penddingVerify||P.ZBL.housing===b().get(a,"applicationOrderType",0)||c.push(T.createElement(p.Z,{key:"delete",title:"确定执行操作？",onConfirm:function(){n.onDeleteCostOrder(o)},okText:"确定",cancelText:"取消"},T.createElement("a",{className:ue.Z["app-comp-expense-form-cost-order-table-operate-btn"]},"删除"))),c}}],F={defaultPageSize:30,onChange:n.onChangePage,total:f,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:n.onShowSizeChange},N=!I&&g?T.createElement(G,{approvalKey:Z,orderId:a.id,flowId:a.flowId,applicationOrderType:h,platformCode:y}):null;return T.createElement(k.IT,{key:"salaryRules",title:"费用单数据",titleExt:N},T.createElement(c.Z,{rowKey:function(e){return e.id},dataSource:m,columns:L,pagination:F,bordered:!0}))}})),(0,v.Z)((0,m.Z)(n),"renderFinanceListInfo",(function(){var e=n.state.costOrdersCount,t=n.props.examineOrderDetail,r=void 0===t?{}:t;if(b().get(r,"applicationOrderType",1)===P.ZBL.salaryRules){var a=[{title:"单笔流水号",dataIndex:"id",key:"id",width:200,fixed:"left"},{title:"平台",dataIndex:"platformNames",key:"platformNames",render:function(e){return"--"|e}},{title:"供应商",dataIndex:"supplierNames",key:"supplierNames",render:function(e){return x().array(e)&&x().not.empty(e)?e.join(","):"--"}},{title:"城市",dataIndex:"cityNames",key:"cityNames",render:function(e){return x().array(e)&&x().not.empty(e)?e.join(","):"--"}},{title:"商圈",dataIndex:"bizDistrictNames",key:"bizDistrictNames",render:function(e){return x().array(e)&&x().not.empty(e)?e.join(","):"--"}},{title:"生效时间",dataIndex:["salaryPlanVersionInfo","fromDate"],key:"salaryPlanVersionInfo.fromDate",render:function(e){return e||"--"}},{title:"版本号",dataIndex:"salaryPlanVersionId",key:"salaryPlanVersionId"},{title:"试算月份",dataIndex:["salaryComputeTaskInfo","fromDate"],key:"salaryComputeTaskInfo.fromDate",render:function(e){var t=e?"".concat(e).slice(4,6):"--";return"".concat(t,"月")}},{title:"试算总金额（元）",dataIndex:"managementAmount",key:"managementAmount",render:function(e){return P.fbc.exchangePriceCentToMathFormat(e||0)}},{title:"单据状态",dataIndex:"state",key:"state",width:100,fixed:"right",render:function(e){return P.Vm3.description(e)}},{title:"操作",dataIndex:"operation",key:"operation",width:100,fixed:"right",render:function(e,t){var r=b().get(t,"salaryPlanVersionInfo.planId",void 0);return T.createElement("a",{key:"detail",target:"_blank",rel:"noopener noreferrer",href:"/#/Finance/Rules?id=".concat(r)},"编辑")}}],o={defaultPageSize:30,onChange:n.onChangePage,total:e,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:n.onShowSizeChange},i=[];return i.push(r),T.createElement(k.IT,{title:"费用单数据"},T.createElement(c.Z,{rowKey:function(e){return e.id},dataSource:i,columns:a,pagination:o,bordered:!0,scroll:{x:1700}}))}})),(0,v.Z)((0,m.Z)(n),"renderSalaryLssue",(function(){var e=n.props,t=e.examineOrderDetail,r=void 0===t?{}:t,a=e.dispatch;return 0===Object.keys(r).length?null:b().get(r,"applicationOrderType")===P.ZBL.salaryIssue?"elem"===b().get(r,"payrollStatementInfo.platformCode","elem")?T.createElement(re.Z,{detail:r,dispatch:a}):T.createElement(ne.Z,{detail:r,dispatch:a}):void 0})),(0,v.Z)((0,m.Z)(n),"renderBorrowing",(function(){var e=n.props.examineOrderDetail,t=void 0===e?{}:e,r=t.id,a=t.costOrderIds,o=void 0===a?[]:a,i=[];if(P.ZBL.borrowing===b().get(t,"applicationOrderType")&&r)return x().empty(o)?i.push(T.createElement("span",{key:"3"},T.createElement(M,{applicationOrderId:r}))):i.push(T.createElement("span",{key:"4"},o.map((function(e,t){return T.createElement(M,{borrowingId:e,key:t})})))),T.createElement("div",null,i)})),(0,v.Z)((0,m.Z)(n),"renderRepayments",(function(){var e=n.props.examineOrderDetail,t=void 0===e?{}:e,r=b().get(t,"costOrderIds",[]),a=[];if(P.ZBL.repayments===b().get(t,"applicationOrderType"))return x().empty(r)?a.push(T.createElement("span",{key:"1"},T.createElement(N,null))):a.push(T.createElement("span",{key:"2"},r.map((function(e,t){return T.createElement(N,{repaymentId:e,key:t})})))),T.createElement("div",null,a)})),(0,v.Z)((0,m.Z)(n),"renderBusinessTrip",(function(){var e=n.state.orderId,t=n.props.examineOrderDetail,r=void 0===t?{}:t,a=r.businessTravelOrderId;if(P.ZBL.business===b().get(r,"applicationOrderType"))return a?T.createElement(ee,{businessTripId:a,applicationOrderId:e,key:"tripfull"}):T.createElement(ee,{applicationOrderId:e,key:"tripempty"})})),(0,v.Z)((0,m.Z)(n),"renderOverTime",(function(){var e=n.props.examineOrderDetail,t=void 0===e?{}:e,r=t.applicationOrderType,a=t.extraWorkOrLeaveId,o=void 0===a?void 0:a;return P.ZBL.overTime!==Number(r)||void 0===o?null:T.createElement(ie,{overTimeId:o})})),(0,v.Z)((0,m.Z)(n),"renderTakeLeave",(function(){var e=n.props.examineOrderDetail,t=void 0===e?{}:e,r=t.applicationOrderType,a=t.extraWorkOrLeaveId;if(P.ZBL.takeLeave===r)return T.createElement(le,{takeLeaveId:a})})),(0,v.Z)((0,m.Z)(n),"renderExpenseProcess",(function(){var e=n.state,t=e.orderId,r=e.copyGiveValues,a=n.props,o=a.examineOrderDetail,i=void 0===o?{}:o,c=a.dispatch,p=!0,l=i.applicationOrderType;return P.ZBL.salaryIssue!==l&&P.ZBL.salaryRules!==l&&P.ZBL.turnover!==l||(p=!1),T.createElement(_.Z,{orderId:t,isCopyGive:p,isSupportCc:i.isSupportCc,applyAccountId:i.applyAccountId,dispatch:c,flowId:i.flowId,data:i.flowRecordList,currentFlowNode:i.currentFlowNode,accountList:i.operateAccountsList,fileUrlList:i.fileUrlList,onSuccessCallback:n.onSuccessCallback,onChangeCopyGiveValues:n.onChangeCopyGiveValues,copyGiveValues:r})})),(0,v.Z)((0,m.Z)(n),"renderSubmintButton",(function(){var e=n.props.examineOrderDetail,t=(void 0===e?{}:e).applicationOrderType;return P.ZBL.salaryIssue===t||P.ZBL.salaryRules===t||P.ZBL.turnover===t?T.createElement("div",null):T.createElement(k.IT,{style:{textAlign:"center",backgroundColor:"#ffffff"}},T.createElement(i.Z,{type:"primary",onClick:n.onPresent},"提交"))})),(0,v.Z)((0,m.Z)(n),"renderModal",(function(){var e=n.state,t=e.visible,r=e.isDefault,a=n.props,i=a.examineDetail,c=void 0===i?{}:i,p=a.form,l=(void 0===p?{}:p).getFieldDecorator;if(t&&0!==Object.keys(c).length){var s,d,u=[],m=[],f={},y=b().get(c,"nodeList");x().existy(y)&&x().array(y)&&x().not.empty(y)&&(f=y[0]||{},u=b().get(y[0],"accountList",[]),m=b().get(y[0],"postList",[]),d=b().get(y[0],"pickMode"),s=y[0].approveMode);var h={message:"请选择审批人或审批岗位",isApprovalAll:!1,isAutoMatic:!1,required:!1};s===P.Fv8.all&&(h.isApprovalAll=!0),d===P.zn9.automatic&&(h.isAutoMatic=!0),h.isApprovalAll||h.isAutoMatic||(h.required=!0);var v,g,Z,I,O=u.concat(m),w=!1,C=!1;0===m.length&&1===O.length&&s===P.Fv8.any&&(g=O[0].id,I=O[0].id,w=!0),1===m.length&&1===O.length&&s===P.Fv8.any&&(v=m[0]._id,I=m[0]._id,w=!0),1===m.length&&1===O.length&&1===m[0].account_ids.length&&s===P.Fv8.any&&(g=m[0].account_ids[0],v=m[0]._id,Z=m[0].account_ids[0],I=m[0]._id,w=!0,C=!0);var D={nextNodeDetail:f,accountIdsData:O,postPersonList:m,onChangePerson:n.onChangePerson,isDisabledPost:w,isDisabledPerson:r?C:n.state.isDisabledPerson,postList:m,personList:u},_=[{label:"下一节点审批人",form:l("assignedPerson",{initialValue:{personId:g,postId:v,postPersonId:Z,personShowId:I},rules:[fe(fe({},h),{},{validator:n.onVerify})],validateTrigger:n.onSubmit})(T.createElement(te.Z,D))}];return T.createElement(o.Z,{title:"审批意见",visible:t,onOk:n.onSubmit,onCancel:n.onHideModal},T.createElement("div",{className:ue.Z["app-comp-expense-form-modal-next-approval-wrap"]},T.createElement("p",{className:ue.Z["app-comp-expense-form-modal-next-approval"]},"请指派下一个节点的审批人")),T.createElement(E.Z,null,T.createElement(k.KP,{items:_,cols:1,layout:{labelCol:{span:8},wrapperCol:{span:16}}})))}})),(0,v.Z)((0,m.Z)(n),"renderAffair",(function(){var e=n.props,t=e.examineOrderDetail,r=void 0===t?{}:t,a=e.location,o=(void 0===a?{}:a).query.approvalKey,i=r.applicationOrderType;if(se.fe.find((function(e){return e.key===i})))return T.createElement(de,{detail:r,approvalKey:o})})),(0,v.Z)((0,m.Z)(n),"renderRelationApproval",(function(){var e=[T.createElement(E.Z.Item,{label:"主题标签",name:"themeTag",labelCol:{span:3},wrapperCol:{span:21}},T.createElement("div",null,T.createElement(a.Z,{value:n.state.themeTags,mode:"tags",notFoundContent:"",onChange:n.onChangeThemeTags,tokenSeparators:[",","，"],className:ue.Z["app-comp-expense-form-theme-tag-selector"]}),T.createElement(i.Z,{type:"primary",onClick:n.onSaveThemeTags},"保存")))];return T.createElement(C.Z,{isType:"update",formItemsTags:e,orderId:n.state.orderId})})),(0,v.Z)((0,m.Z)(n),"render",(function(){var e=n.props.examineOrderDetail,t=void 0===e?{}:e;return 0===Object.keys(t).length?T.createElement("div",null):T.createElement("div",null,n.renderBaseInfo(),n.renderRelationApproval(),n.renderListInfo(),n.renderFinanceListInfo(),n.renderSalaryLssue(),n.renderBorrowing(),n.renderRepayments(),n.renderBusinessTrip(),n.renderOverTime(),n.renderTakeLeave(),n.renderAffair(),n.renderExpenseProcess(),n.renderSubmintButton(),n.renderModal())})),n.state={orderId:void 0,template:void 0,themeTags:void 0,visible:!1,isVerifyPost:!1,isDefault:!0,isDisabledPerson:!1,copyGiveValues:{}},n.private={isSubmit:!0,isShowCreate:!0},n}return(0,u.Z)(r,[{key:"componentDidMount",value:function(){var e=b().get(this.props,"location.query.orderId",void 0);void 0!==e&&(this.props.dispatch({type:"expenseExamineOrder/fetchExamineOrderDetail",payload:{id:e,onSuccessCallback:this.fetchHouseContractDetail}}),this.props.dispatch({type:"expenseCostOrder/fetchCostOrders",payload:{examineOrderId:e}}))}},{key:"componentWillUnmount",value:function(){void 0!==this.state.orderId&&(this.props.dispatch({type:"expenseExamineOrder/resetExamineOrderDetail"}),this.props.dispatch({type:"expenseCostOrder/resetCostOrders"}),this.props.dispatch({type:"expenseExamineFlow/resetExamineFlowDetail"}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.examineOrderDetail,a=void 0===r?{}:r,o=e.location,i=void 0===o?{}:o,c=t.examineOrderDetail,p=void 0===c?void 0:c,l=t.orderId,s=void 0===l?void 0:l;if(void 0===p&&Object.keys(a).length>0){var d=a.themeLabelList,u=void 0===d?[]:d,m=b().get(a,"flowRecordList.0",{}),f=b().get(a,"pluginExtraMeta.theme_label_list",[]);return{examineOrderDetail:a,themeTags:[].concat((0,n.Z)(u),(0,n.Z)(f)),copyGiveValues:{userNames:b().get(m,"flexibleCcAccountInfoList",[]),departmentNames:b().get(m,"flexibleCcDepartmentInfoList",[])}}}var y=i.query,h=void 0===y?{}:y;if(void 0===s&&Object.keys(h).length>0){var v=h.orderId,g=h.template;return{orderId:v,template:void 0===g?P.$9p.refund:g}}return null}}]),r}(T.Component);(0,v.Z)(he,"propTypes",{examineOrderDetail:w().object,costOrdersData:w().object,examineDetail:w().object}),(0,v.Z)(he,"defaultProps",{examineOrderDetail:{},costOrdersData:{},examineDetail:{}});var ve=(0,I.connect)((function(e){var t=e.expenseExamineOrder.examineOrderDetail,r=e.expenseCostOrder.costOrdersData,n=e.loading,a=e.expenseExamineFlow;return{examineOrderDetail:t,costOrdersData:r,loading:n,examineDetail:a.examineDetail,examineFlowConfig:a.examineFlowConfig}}))(E.Z.create()(he))},31101:function(e,t){t.Z={"app-comp-expense-elem-dowload-btn":"lkqiDiSa506bBdWtuTWs","app-comp-expense-elem-hide":"ljQMFEVsLVfbbUeMZ0ri","app-comp-expense-mt-dowload-btn":"MaP3w7tuYUjXjHvkPyc5","app-comp-expense-mt-hide":"XIELznsJODyn2gsZJQo3","app-comp-expense-detail-order-info-ext":"Oddi_m6_o1qnMPfzl7PK"}},83983:function(e,t){t.Z={"app-comp-expense-form-theme-tag-selector":"coJAzYjuyFTmJor03dx5","app-comp-expense-form-cost-order-table-operate-btn":"yrgWvHUVIh6d8UBc4qyh","app-comp-expense-form-modal-next-approval-wrap":"N30pg8kxw3zqjAo467JU","app-comp-expense-form-modal-next-approval":"sN9JrA1jA1QOjVC7fQtv","app-comp-expense-exam-order-Table-operate-btn":"WC9OtN1UCzDvk6KrRaqm","app-comp-expense-exam-order-Table-operate-btn-diable":"efJhUmtGXVaEmIHYNSKa","app-comp-expense-exam-order-table-break-line":"vIzpR4jpH3YWxwASnQK6","app-comp-expense-exam-order-table-total-money":"on9UubvhwRnNjQLtBUmA","app-comp-expense-exam-order-table-now-point":"pSaNbbpAMrRUgbscec33","app-comp-expense-exam-order-table-paid-note":"FMrYcJ5RZE9w4bGiWQ93","app-comp-expense-exam-order-new-apply":"ZI2WQaimQ_C5VuiMmWqA","app-comp-expense-exam-order-now-point-colored":"e7oR65hEjMmulRdN46Ud","app-comp-expense-exam-order-table-header":"XzHPH5NFQlTSqhNBjD0_","app-comp-expense-exam-order-table-header-col":"xn5egCpyQwDiemvvdlkR",headerLeftSpan:"WSAE0Fi7whXPmTu5RAHH"}}}]);