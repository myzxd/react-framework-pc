"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7827],{97376:function(e,t,n){n(52466);var a=n(10642),o=(n(29394),n(94756)),r=n(29439),l=n(93517),c=n.n(l),i=n(67294),s=n(55609);t.Z=(0,s.connect)((function(e){return{codeInformation:e.adminManage.codeInformation}}))((function(e){var t=e.visible,n=e.dispatch,l=e.values,s=e.roleInfos,u=void 0===s?[]:s,m=(0,i.useState)([]),p=(0,r.Z)(m,2),f=p[0],d=p[1],y=c().get(e,"codeInformation",[]),h=u.map((function(e){return e._id})),E=y.filter((function(e){return!h.includes(e._id)}));(0,i.useEffect)((function(){n({type:"adminManage/fetchSystemCodeInformation",payload:{}})}),[n]),(0,i.useEffect)((function(){d(l)}),[l]);var g=function(){var t=v(f);e.onOk&&e.onOk(f,t)},b=function(){d([]),e.onCancel&&e.onCancel()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=E.filter((function(t){return e.includes(t._id)}));return t},Z=function(e){d(e)};return i.createElement(i.Fragment,null,!0!==t?null:i.createElement(a.Z,{title:"数据权限组",visible:t,onOk:g,onCancel:b,width:900},i.createElement(o.Z,{dataSource:E,rowKey:function(e){return e._id},titles:["全选／合计","全选／合计"],showSearch:!0,targetKeys:f,onChange:Z,render:function(e){return e.name},listStyle:{height:400,width:400}})))}))},37827:function(e,t,n){n.r(t);var a=n(87462),o=(n(13062),n(71230)),r=(n(89032),n(15746)),l=(n(36037),n(47933)),c=(n(52560),n(71577)),i=(n(9070),n(20924)),s=n(4942),u=n(93433),m=(n(35668),n(86585)),p=n(29439),f=n(44925),d=(n(29093),n(16317)),y=n(94315),h=n.n(y),E=n(55609),g=n(67294),b=n(93517),v=n.n(b),Z=n(96036),O=n(88144),w=n(80385),S=n(8240),C=n(97116),_=n(97376),I=n(30203),P=["dispatch","history","staffProfile","location"];function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=C.By.isShowCode(),M=d.Z.Option,D={labelCol:{span:6},wrapperCol:{span:18}},A=[w.G8O.pending,w.G8O.normal,w.G8O.replace,w.G8O.pendingReview,w.G8O.repair];t.default=(0,E.connect)((function(e){return{accountDetail:e.accountManage.accountDetail,staffProfile:e.employeeManage.staffProfile}}))((function(e){var t=e.dispatch,n=e.history,s=e.staffProfile,y=e.location,E=(0,f.Z)(e,P),b=m.Z.useForm(),C=(0,p.Z)(b,1)[0],k=(0,g.useRef)(!1),G=(0,g.useState)([]),T=(0,p.Z)(G,2),z=T[0],B=T[1],V=(0,g.useState)(!1),q=(0,p.Z)(V,2),K=q[0],x=q[1],Q=(0,g.useState)([]),W=(0,p.Z)(Q,2),U=W[0],Y=W[1],H=(0,g.useState)([]),J=(0,p.Z)(H,2),N=J[0],R=J[1],X=y.query.id,L=E.accountDetail?E.accountDetail:{};if((0,g.useEffect)((function(){return X&&t({type:"accountManage/fetchAccountsDetails",payload:{id:X,getStaff:function(e,n){var a={name:e,phone:n,signState:w.G8O};t({type:"employeeManage/fetchStaffProfile",payload:a})}}}),function(){return t({type:"accountManage/resetAccountsDetails"})}}),[X,t]),(0,g.useEffect)((function(){B(L.code_biz_group_infos),Y(L.allow_biz_group_ids),R(v().get(L,"allow_biz_group_infos",[]))}),[L]),Object.keys(L).length<1)return null;var $,ee=function(){n.push("/System/Account/Manage")},te=function(){n.push("/System/Account/Manage")},ne=function(){k.current=!1},ae=function(){C.setFieldsValue({jobs:[]})},oe=function(e){var n=e.target.value;(C.setFieldsValue({staffProfileId:void 0}),n.length>10)?t({type:"employeeManage/fetchStaffProfile",payload:{phone:n,SignState:A}}):t({type:"employeeManage/resetStaffProfile"})},re=function(e,t){B(t)},le=function(){R((0,u.Z)(N)),x(!1),Y((0,u.Z)(U))},ce=function(e,t){R(t),Y(e),x(!1)},ie={name:L.name,phone:L.phone,staffProfileId:v().get(L,"staff_profile_id",void 0),positions:L.role_ids,state:v().get(L,"state",w.m3m.on)};return g.createElement(m.Z,(0,a.Z)({},D,{initialValues:ie,form:C,layout:"horizontal",onFinish:function(e){if(!k.current){var n={params:j({id:X},e),onSuccessCallback:te,onFailureCallback:ne};F&&(n.allowBizGroupIds=U),t({type:"accountManage/updateAccount",payload:n})}}}),g.createElement(Z.IT,{title:"基本信息"},($=[g.createElement(m.Z.Item,{label:"姓名",name:"name",rules:[{required:!0,message:"请输入姓名"}]},g.createElement(i.Z,{placeholder:"请输入姓名"})),g.createElement(m.Z.Item,{label:"手机号",name:"phone",rules:[{required:!0,validator:S.PT}]},g.createElement(i.Z,{placeholder:"请输入手机号",onChange:oe})),g.createElement(m.Z.Item,{label:"员工档案",name:"staffProfileId"},g.createElement(d.Z,{allowClear:!0,placeholder:"请选择员工档案"},s.map((function(e,t){return g.createElement(M,{value:e._id,key:t},e.name,"(",e.identity_card_id,")")}))))],g.createElement(Z.Fp,{items:$}))),g.createElement(Z.IT,{title:"组织信息"},function(){var e=[g.createElement(m.Z.Item,{label:"角色",name:"positions",labelCol:{span:2},wrapperCol:{span:10},rules:[{required:!0,message:"请选择角色"}]},g.createElement(O.GS,{onChange:re,allowClear:!0,showSearch:!0,optionFilterProp:"children",mode:"multiple",showArrow:!0,onlyShowOperable:!0,roleIds:L.role_ids,roleNames:L.role_names,placeholder:"请选择角色"}))];return!0===F&&e.push(g.createElement(m.Z.Item,{label:"角色数据授权",labelCol:{span:2},wrapperCol:{span:22}},g.createElement("div",null,h().existy(z)&&h().not.empty(z)?z.map((function(e){return e.name})).join(", "):"--"))),g.createElement(Z.Fp,{items:e,cols:1})}()),function(){if(!0!==F)return null;var e=[g.createElement(m.Z.Item,{label:"特殊数据授权",labelCol:{span:2},wrapperCol:{span:22}},g.createElement("div",null,g.createElement(c.Z,{onClick:function(){x(!0)}},"请选择"),g.createElement("div",null,N.map((function(e){return e.name})).join(", "))))];return g.createElement(Z.IT,{title:"外部数据策略信息"},g.createElement(Z.Fp,{items:e,cols:1}),g.createElement(_.Z,{visible:K,roleInfos:z,values:U,onOk:ce,onCancel:le}))}(),g.createElement(Z.IT,{title:"状态信息"},function(){var e=[g.createElement(m.Z.Item,{label:"状态",name:"state",rules:[{required:!0,message:"请选择状态"}]},g.createElement(l.ZP.Group,{onChange:ae},g.createElement(l.ZP,{value:w.m3m.on},w.m3m.description(w.m3m.on)),g.createElement(l.ZP,{value:w.m3m.off},w.m3m.description(w.m3m.off))))];return g.createElement(Z.Fp,{items:e})}()),g.createElement(Z.IT,null,g.createElement(o.Z,null,g.createElement(r.Z,{span:11,className:I.Z["app-comp-system--create-operate-back-col"]},g.createElement(c.Z,{onClick:ee},"返回")),g.createElement(r.Z,{span:11,offset:1},g.createElement(c.Z,{type:"primary",htmlType:"submit"},"提交")))))}))},30203:function(e,t){t.Z={"app-comp-system--create-operate-back-col":"AxX93IWPV2EzVUrvO_pT","app-comp-system-create-operate-submit-col":"vy28sq1OeFBDf9Qxei55","app-comp-system-detail-label":"bsvlTO2kA3axmv3nSu5W","app-comp-system-detail-value":"HYnsDEp59EW_55ytprgf","app-comp-system-detail-form-col":"cg2gQKzJ3Zakn81AKFpc","app-comp-system-detail-operate-col":"YdtafoBu7kMKtBJWoUsw","app-comp-system-form-cascade-selector":"Mh9d3eDznaXFQHAVQrsU","app-comp-system-table-operate-detail":"S_EYloo8bVhtEbZGerm_"}}}]);