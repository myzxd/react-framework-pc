"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[6209],{88081:function(e,t,n){var a=n(15671),o=n(43144),r=n(97326),l=n(60136),i=n(82963),s=n(61120),c=n(4942),p=(n(29093),n(16317)),u=n(96486),d=n.n(u),f=n(93517),m=n.n(f),v=n(45697),y=n.n(v),h=n(67294),Z=n(29335);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.Z)(e);if(t){var o=(0,s.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,i.Z)(this,n)}}var I=p.Z.Option,S=function(e){(0,l.Z)(n,e);var t=g(n);function n(){var e;return(0,a.Z)(this,n),e=t.call(this),(0,c.Z)((0,r.Z)(e),"onChangePersonOrPost",(function(t){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.props,r=o.onChange,l=o.onChangePerson,i=o.postPersonList,s=t,c=[],p=a.postmark,u=void 0===p?void 0:p,d=!!u;if(d){n=t;var f=i.filter((function(e){return e._id===t}));s=1===(c=m().get(f[0],"account_info_list",[])).length?c[0]._id:void 0}e.setState({personId:s,postId:n,personShowId:t,isShowPost:d,accountList:c}),r({personId:s,postId:n,postPersonId:1===c.length?c[0]._id:void 0,personShowId:t});var v=1===c.length,y=!!d;l&&l(y,v)})),(0,c.Z)((0,r.Z)(e),"onChangePerson",(function(t){var n=e.props.onChange,a=e.state,o=a.postId,r=a.personShowId;e.setState({personId:t,postPersonId:t}),n&&n({personId:t,postId:o,postPersonId:t,personShowId:r})})),(0,c.Z)((0,r.Z)(e),"renderForm",(function(){var t=e.props,n=t.accountIdsData,a=t.value,o=t.isDisabledPost,r=t.isDisabledPerson,l=t.postList,i=void 0===l?[]:l,s=t.personList,c=void 0===s?[]:s,u=e.state.accountList,f=a.postPersonId,v=a.personShowId,y=e.state.isShowPost;1===i.length&&0===c.length&&1!==i[0].account_ids&&(u=m().get(n[0],"account_info_list",[]),y=!0),1===i.length&&0===c.length&&1===i[0].account_ids&&(u=m().get(n[0],"account_info_list",[]),y=!0);var g=d().uniqWith(u,d().isEqual);return h.createElement("div",null,h.createElement(p.Z,{placeholder:"请选择审批人或审批岗位",value:v,className:!0===y?Z.Z["app-comp-expense-approve-person-post-selector"]:Z.Z["app-comp-expense-approve-person-selector"],disabled:o,onChange:e.onChangePersonOrPost},n.map((function(e){var t=e.id||e._id,n=e.name||e.post_name,a=e.post_name;return h.createElement(I,{key:t,value:t,postmark:a},n)}))),!0===y?h.createElement(p.Z,{placeholder:"请选择审批人",value:f,className:Z.Z["app-comp-expense-approve-person-post-person-selector"],disabled:r,onChange:e.onChangePerson},g.map((function(e){return h.createElement(I,{key:e._id,value:e._id},e.name)}))):null)})),e.state={value:void 0,isShowPost:!1,personShowId:void 0,postPersonId:void 0,postId:void 0,personId:void 0,accountList:[]},e}return(0,o.Z)(n,[{key:"render",value:function(){return h.createElement("div",null,this.renderForm())}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.value,a=void 0===n?{}:n,o=t.value;return void 0===(void 0===o?void 0:o)&&Object.keys(a).length>0?{value:a,personShowId:a.personShowId,postPersonId:a.postPersonId,postId:a.postId,personId:a.personId}:null}}]),n}(h.Component);(0,c.Z)(S,"propTypes",{value:y().object}),(0,c.Z)(S,"defaultProps",{value:{}}),t.Z=S},26209:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});n(13062);var a=n(71230),o=(n(89032),n(15746)),r=(n(52560),n(71577)),l=(n(51838),n(48086)),i=n(15671),s=n(43144),c=n(97326),p=n(60136),u=n(82963),d=n(61120),f=n(4942),m=n(94315),v=n.n(m),y=n(67294),h=n(93517),Z=n.n(h),g=n(55609),I=n(45697),S=n.n(I),b=n(66939),P=(n(98703),n(45430)),D=n(80385),C=(n(52466),n(10642)),k=n(30381),x=n.n(k),w=n(96036),V=n(88081),R="vKO2A0PJfA3GKhBdRMxj",T="khQvUcv0AnMFNR3ssYPg";function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.Z)(this,n)}}var M=function(e){(0,p.Z)(n,e);var t=E(n);function n(e){var a;return(0,i.Z)(this,n),a=t.call(this,e),(0,f.Z)((0,c.Z)(a),"onVerify",(function(e,t,n){var o=a.state.isVerifyPost;!0===e.isApprovalAll||!1===e.isApprovalAll&&e.isAutoMatic&&!1===o||!1===e.isApprovalAll&&!0===o&&t.postId&&t.personId||!1===e.isApprovalAll&&!1===e.isAutoMatic&&!1===o&&t.personId?n():n("请选择指派审批人或审批岗位")})),(0,f.Z)((0,c.Z)(a),"onVerifyCallback",(function(){var e=a.props.planId;a.props.dispatch({type:"financePlan/fetchSalaryPlanDetailData",payload:{id:e}}),a.onReset()})),(0,f.Z)((0,c.Z)(a),"onFailurePromptInfo",(function(e){l.ZP.error(e.zh_message)})),(0,f.Z)((0,c.Z)(a),"onSubmit",(function(){var e=a.props,t=e.onHideModal,n=e.planVersionId,o=e.isShowAudit;a.props.form.validateFields((function(e,r){if(!e){var l=r.assignedPerson,i=void 0===l?{}:l,s=i.postId,c=i.personId,p={planVersionId:n,accountId:c,postId:s};o&&a.props.dispatch({type:"financePlan/createSalaryPlanVersion",payload:{params:p,onSuccessCallback:a.onVerifyCallback,onFailureCallback:a.onFailurePromptInfo}}),t&&t()}}))})),(0,f.Z)((0,c.Z)(a),"onCancel",(function(){var e=a.props.onHideModal;a.setState({isVerifyPost:!1,isDefault:!1}),e&&e(),a.onReset()})),(0,f.Z)((0,c.Z)(a),"onChangePerson",(function(e,t){a.setState({isVerifyPost:e,isDefault:!1,isDisabledPerson:t})})),(0,f.Z)((0,c.Z)(a),"onReset",(function(){a.props.form.resetFields()})),(0,f.Z)((0,c.Z)(a),"renderCreateForm",(function(){var e=a.props.form.getFieldDecorator,t=a.props,n=t.auditInfo,o=t.isShowAudit,r=a.state.isDefault;if(o&&0!==Object.keys(n).length){var l,i,s=[],c=[],p={},u=Z().get(n,"node_list");v().existy(u)&&v().array(u)&&v().not.empty(u)&&(p=u[0]||{},s=Z().get(u[0],"account_list",[]),c=Z().get(u[0],"post_list",[]),i=Z().get(u[0],"pick_mode"),l=u[0].approve_mode);var d={message:"请选择审批人或审批岗位",isApprovalAll:!1,isAutoMatic:!1,required:!1};l===D.Fv8.all&&(d.isApprovalAll=!0),i===D.zn9.automatic&&(d.isAutoMatic=!0),d.isApprovalAll||d.isAutoMatic||(d.required=!0);var f,m,h,g,I=s.concat(c),S=!1,b=!1;0===c.length&&1===I.length&&(m=s[0]._id,g=s[0]._id,S=!0),1===c.length&&1===I.length&&(f=c[0]._id,g=c[0]._id,S=!0),1===c.length&&1===I.length&&1===c[0].account_ids.length&&(m=c[0].account_ids[0],f=c[0]._id,h=c[0].account_ids[0],g=c[0]._id,S=!0,b=!0);var P={nextNodeDetail:p,accountIdsData:I,postPersonList:c,onChangePerson:a.onChangePerson,isDisabledPost:S,isDisabledPerson:r?b:a.state.isDisabledPerson,postList:c,personList:s},C=[{label:"下一节点审批人",form:e("assignedPerson",{initialValue:{personId:m,postId:f,postPersonId:h,personShowId:g},rules:[A(A({},d),{},{validator:a.onVerify})],validateTrigger:a.onSubmit})(y.createElement(V.Z,P))}];return y.createElement("div",null,y.createElement(w.KP,{items:C,cols:1,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))}})),a.state={isVerifyPost:!1,isDefault:!0,isDisabledPerson:!1},a}return(0,s.Z)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch({type:"financePlan/resetPayrollPlanSubmitAudit"})}},{key:"render",value:function(){var e=this.props,t=e.isShowVerify,n=e.calculateResultsData,r=e.isShowAudit,l=this.onSubmit,i=this.onCancel,s=r?y.createElement("div",{className:R},y.createElement("p",{className:T},"请指派下一个节点的审批人")):null;return y.createElement(C.Z,{key:"1",title:"确认提交",visible:t,onOk:l,onCancel:i,okText:"确定",cancelText:"取消"},y.createElement("div",null,Z().get(n,"data",[]).map((function(e,t){return y.createElement(a.Z,{key:t,className:"app-global-mgt10"},y.createElement(a.Z,{className:"app-global-mgt10"},y.createElement(a.Z,null,y.createElement(o.Z,{span:24,className:"app-global-mgl50 app-global-mgt10"},"1、当前版本号: ",e.planVersionId?e.planVersionId:"--")),y.createElement(a.Z,null,y.createElement(o.Z,{span:24,className:"app-global-mgl50 app-global-mgt10"},"2、最后修改时间: ",x()(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")?x()(e.updatedAt).format("YYYY-MM-DD HH:mm:ss"):"--")),y.createElement(a.Z,null,y.createElement(o.Z,{span:24,className:"app-global-mgl50 app-global-mgt10"},"3、试算数据流水号: ",e.id?e.id:"--")),y.createElement(a.Z,null,y.createElement(o.Z,{span:24,className:"app-global-mgl50 app-global-mgt10"},"4、试算结果: ",D.fbc.exchangePriceToYuan(e.computeDataSet.trialCalculationAmount[0])?D.fbc.exchangePriceToYuan(e.computeDataSet.trialCalculationAmount[0]):"--")),y.createElement(a.Z,null,y.createElement(o.Z,{span:24,className:"app-global-mgl50 app-global-mgt10"},"5、试算时间: ",e.fromDate?e.fromDate:"--"," ")),y.createElement(o.Z,{span:24,className:"app-global-mgl50 app-global-mgt10"},"以上将作为审批的依据和附件,请确认试算结果是否符合要求.")))}))),s,y.createElement(b.Z,null,this.renderCreateForm()))}}]),n}(y.Component);(0,f.Z)(M,"propTypes",{isShowVerify:S().bool,onHideModal:S().func,planVersionId:S().string,planId:S().string,calculateResultsData:S().object,auditInfo:S().object,isShowAudit:S().bool}),(0,f.Z)(M,"defaultProps",{isShowVerify:!1,onHideModal:function(){},planVersionId:"",calculateResultsData:{},auditInfo:{},isShowAudit:!1});var H=(0,g.connect)((function(e){var t=e.financePlan;return{calculateResultsData:t.calculateResultsData,auditInfo:t.auditInfo}}))(b.Z.create()(M));n(54071);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.Z)(this,n)}}var K=n(14072).Z.MonthPicker,N=function(e){(0,p.Z)(n,e);var t=_(n);function n(e){var a;return(0,i.Z)(this,n),a=t.call(this,e),(0,f.Z)((0,c.Z)(a),"onChangeDate",(function(e,t){a.setState({startDate:t,endDate:t})})),(0,f.Z)((0,c.Z)(a),"onSalaryCallback",(function(){var e=a.props.planVersionId,t={planVersionId:e,type:"now"},n={planVersionId:e};a.props.dispatch({type:"financePlan/fetchSalaryPlanHistoryData",payload:n}),a.props.dispatch({type:"financePlan/fetchSalaryPlanResultsData",payload:t})})),(0,f.Z)((0,c.Z)(a),"onFailurePromptInfo",(function(e){l.ZP.error(e.zh_message)})),(0,f.Z)((0,c.Z)(a),"onSubmit",(function(){var e=a.props,t=e.onHideTrialModal,n=e.planVersionId,o=a.state,r=o.startDate,i=o.endDate,s={versionId:n,fromDate:Number(x()(r).format("YYYYMM")),toDate:Number(x()(i).format("YYYYMM"))};a.props.form.validateFieldsAndScroll((function(e){e||(n?a.props.dispatch({type:"financePlan/createSalaryPlanTask",payload:{params:s,onSuccessCallback:a.onSalaryCallback,onFailureCallback:a.onFailurePromptInfo}}):l.ZP.error("试算失败"),t&&t())}))})),(0,f.Z)((0,c.Z)(a),"onCancel",(function(){var e=a.props.onHideTrialModal;e&&e()})),(0,f.Z)((0,c.Z)(a),"renderCreateForm",(function(){var e=[{label:"试算月份",form:(0,a.props.form.getFieldDecorator)("trialDate",{rules:[{required:!0,message:"请选择试算的月份"}],initialValue:null})(y.createElement(K,{onChange:a.onChangeDate}))}];return y.createElement(w.KP,{items:e,cols:1,layout:{labelCol:{span:6},wrapperCol:{span:18}}})})),(0,f.Z)((0,c.Z)(a),"render",(function(){var e=a.props.isShowCalculate,t=(0,c.Z)(a),n=t.onSubmit,o=t.onCancel;return y.createElement(C.Z,{title:"试算月份",visible:e,onOk:n,onCancel:o,okText:"创建",cancelText:"取消"},y.createElement(b.Z,null,a.renderCreateForm()))})),a.state={startDate:void 0,endDate:void 0},a.private={dispatch:e.dispatch},a}return n}(y.Component);(0,f.Z)(N,"propTypes",{isShowCalculate:S().bool,onHideTrialModal:S().func,planVersionId:S().string}),(0,f.Z)(N,"defaultProps",{isShowCalculate:!1,onHideTrialModal:function(){},planVersionId:""});var j=(0,g.connect)()(b.Z.create()(N)),Y=(n(20186),n(75385));function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.Z)(this,n)}}var U=function(e){(0,p.Z)(n,e);var t=F(n);function n(){var e;return(0,i.Z)(this,n),e=t.call(this),(0,f.Z)((0,c.Z)(e),"componentDidMount",(function(){var t={planVersionId:e.props.planVersionId,type:"now",onSuccessCallback:e.onSuccessCallback};e.props.dispatch({type:"financePlan/fetchSalaryPlanResultsData",payload:t})})),(0,f.Z)((0,c.Z)(e),"onSuccessCallback",(function(t){if(void 0!==t){var n=t.data;v().not.empty(n)&&n.map((function(t){t.state===D.KTU.success||t.state===D.KTU.failure?clearInterval(e.setInter):e.onSetInter()}))}})),(0,f.Z)((0,c.Z)(e),"onSetInter",(function(){var t={planVersionId:e.props.planVersionId,type:"now",onSuccessCallback:e.onSuccessCallback};e.setInter=setInterval((function(){e.props.dispatch({type:"financePlan/fetchSalaryPlanResultsData",payload:t})}),1e4)})),(0,f.Z)((0,c.Z)(e),"onDetails",(function(t){var n={taskId:t.id};e.props.dispatch({type:"financePlan/fetchSalaryPlanSummaryData",payload:n})})),(0,f.Z)((0,c.Z)(e),"onExportData",(function(t){var n={taskId:t.id};e.props.dispatch({type:"financePlan/downloadSalaryPlanList",payload:n})})),(0,f.Z)((0,c.Z)(e),"renderResultContent",(function(){var t=e.props.calculateResultsData,n=[{title:"流水号",dataIndex:"id",key:"id",render:function(e){return e||"--"}},{title:"城市",dataIndex:"cityName",key:"cityName",render:function(e){return e||"--"}},{title:"商圈",dataIndex:"bizDistrictName",key:"bizDistrictName",render:function(e){return e||"--"}},{title:"试算月份",dataIndex:"fromDate",key:"fromDate",render:function(e){return e||"--"}},{title:"完成单量",dataIndex:["computeDataSet","doneOrder"],key:"computeDataSet.doneOrder",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?e:"--"}},{title:"试算总金额(元)",dataIndex:["computeDataSet","trialCalculationAmount"],key:"computeDataSet.trialCalculationAmount",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"单量提成(元)",dataIndex:["computeDataSet","totalOrder"],key:"computeDataSet.totalOrder",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"补贴总额(元)",dataIndex:["computeDataSet","subsidyAmount"],key:"computeDataSet.subsidyAmount",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"管理总额(元)",dataIndex:["computeDataSet","managementAmount"],key:"computeDataSet.managementAmount",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"状态",dataIndex:"state",key:"state",render:function(e){return y.createElement("span",null,D.KTU.description(e))}}];return y.createElement(w.IT,{title:"试算结果"},y.createElement(Y.Z,{columns:n,rowKey:function(e,t){return t},scroll:{x:1e3},pagination:!1,dataSource:t.data||[],bordered:!0}))})),e.setInter=void 0,e}return(0,s.Z)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.setInter)}},{key:"render",value:function(){return y.createElement("div",null,this.renderResultContent())}}]),n}(y.Component);(0,f.Z)(U,"propTypes",{calculateResultsData:S().object,planVersionId:S().string}),(0,f.Z)(U,"defaultProps",{calculateResultsData:{},planVersionId:""});var B=(0,g.connect)((function(e){return{calculateResultsData:e.financePlan.calculateResultsData}}))(U);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.Z)(this,n)}}var q=function(e){(0,p.Z)(n,e);var t=z(n);function n(){var e;return(0,i.Z)(this,n),e=t.call(this),(0,f.Z)((0,c.Z)(e),"componentDidMount",(function(){var t=e.props.planVersionId;e.props.dispatch({type:"financePlan/fetchSalaryPlanHistoryData",payload:{planVersionId:t,onSuccessCallback:e.onSuccessCallback}})})),(0,f.Z)((0,c.Z)(e),"onSuccessCallback",(function(t){if(void 0!==t){var n=t.data;v().not.empty(n)&&n.map((function(t){t.state===D.KTU.success||t.state===D.KTU.failure?clearInterval(e.setInter):e.onSetInter()}))}})),(0,f.Z)((0,c.Z)(e),"onSetInter",(function(){var t=e.props.planVersionId;e.setInter=setInterval((function(){e.props.dispatch({type:"financePlan/fetchSalaryPlanHistoryData",payload:{planVersionId:t,onSuccessCallback:e.onSuccessCallback}})}),1e4)})),(0,f.Z)((0,c.Z)(e),"onDetails",(function(t){var n={taskId:t.id};e.props.dispatch({type:"financePlan/fetchSalaryPlanSummaryData",payload:n})})),(0,f.Z)((0,c.Z)(e),"onExportData",(function(t){var n={taskId:t.id};e.props.dispatch({type:"financePlan/downloadSalaryPlanList",payload:n})})),(0,f.Z)((0,c.Z)(e),"renderHistoryContent",(function(){var t=e.props.calculateHistoryData,n=[{title:"流水号",dataIndex:"id",key:"id",render:function(e){return e||"--"}},{title:"城市",dataIndex:"cityName",key:"cityName",render:function(e){return e||"--"}},{title:"商圈",dataIndex:"bizDistrictName",key:"bizDistrictName",render:function(e){return e||"--"}},{title:"试算月份",dataIndex:"fromDate",key:"fromDate",render:function(e){return e||"--"}},{title:"完成单量",dataIndex:["computeDataSet","doneOrder"],key:"computeDataSet.doneOrder",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?e:"--"}},{title:"试算总金额(元)",dataIndex:["computeDataSet","trialCalculationAmount"],key:"computeDataSet.trialCalculationAmount",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"单量提成(元)",dataIndex:["computeDataSet","totalOrder"],key:"computeDataSet.totalOrder",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"补贴总额(元)",dataIndex:["computeDataSet","subsidyAmount"],key:"computeDataSet.subsidyAmount",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"管理总额(元)",dataIndex:["computeDataSet","managementAmount"],key:"computeDataSet.managementAmount",render:function(e,t){var n=t.state;return v().number(e)&&n!==D.KTU.pendding?D.fbc.exchangePriceToYuan(e):"--"}},{title:"状态",dataIndex:"state",key:"state",render:function(e){return y.createElement("span",null,D.KTU.description(e))}}],a={showSizeChanger:!0,showQuickJumper:!0,defaultPageSize:30,total:Z().get(t,"count",0),showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"]};return y.createElement(w.IT,{title:"试算历史记录"},y.createElement(Y.Z,{columns:n,rowKey:function(e,t){return t},scroll:{x:1e3},dataSource:Z().get(t,"data",[]),pagination:a,bordered:!0}))})),e.setInter=void 0,e}return(0,s.Z)(n,[{key:"componentWillUnmount",value:function(){clearInterval(this.setInter)}},{key:"render",value:function(){return y.createElement("div",null,this.renderHistoryContent())}}]),n}(y.Component);(0,f.Z)(q,"propTypes",{calculateHistoryData:S().object,planVersionId:S().string}),(0,f.Z)(q,"defaultProps",{calculateHistoryData:{},planId:""});var W=(0,g.connect)((function(e){return{calculateHistoryData:e.financePlan.calculateHistoryData}}))(q),L="X7VMnObpuOVpndZmA2Y3",X="NQ9szKTzTUCHfEllIl_q",G="BE4T0QacGaPgsjCjFXOg";function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,u.Z)(this,n)}}var J=function(e){(0,p.Z)(n,e);var t=Q(n);function n(e){var s;return(0,i.Z)(this,n),s=t.call(this,e),(0,f.Z)((0,c.Z)(s),"onChangeDate",(function(e,t){var n=s.state.fields;n.trialDate=t,s.setState({fields:n})})),(0,f.Z)((0,c.Z)(s),"onSubmitAudit",(function(){var e=s.props,t=e.planVersionId,n=e.planVersionDetailData;if(s.setState({isShowVerifyModal:!0}),v().not.empty(n)){var a={planVersionId:t,scope:Z().get(n,"".concat(t,".domain"),0),platform:Z().get(n,"".concat(t,".platformCode"),void 0),supplier:Z().get(n,"".concat(t,".supplierId"),void 0),city:Z().get(n,"".concat(t,".citySpelling"),void 0),district:Z().get(n,"".concat(t,".bizDistrictId"),void 0),onSuccessCallback:s.onSuccessAuditInfo};s.props.dispatch({type:"financePlan/fetchPayrollPlanSubmitAudit",payload:a})}})),(0,f.Z)((0,c.Z)(s),"onSuccessAuditInfo",(function(e){var t=s.props.planVersionId;if(v().not.empty(e)){var n,a=Z().get(e,"node_list");if(v().existy(a)&&v().not.empty(a)&&(n=a[0].approve_mode),n===D.Fv8.all){s.setState({isShowAudit:!1});var o={planVersionId:t};s.props.dispatch({type:"financePlan/createSalaryPlanVersion",payload:{params:o,onSuccessCallback:s.onVerifyCallback}})}else s.setState({isShowAudit:!0})}else l.ZP.error("特殊审批流未配置")})),(0,f.Z)((0,c.Z)(s),"onVerifyCallback",(function(){var e=s.props.planId;s.props.dispatch({type:"financePlan/fetchSalaryPlanDetailData",payload:{id:e}})})),(0,f.Z)((0,c.Z)(s),"onHideModal",(function(){s.setState({isShowVerifyModal:!1})})),(0,f.Z)((0,c.Z)(s),"onHideTrialModal",(function(){s.setState({isShowCalculateModal:!1})})),(0,f.Z)((0,c.Z)(s),"onStartTrial",(function(){s.setState({isShowCalculateModal:!0})})),(0,f.Z)((0,c.Z)(s),"renderOperation",(function(){var e=s.props.calculateResultsData.data,t=(void 0===e?[]:e).map((function(e){return e.state})),n=Number(t.join(""));return y.createElement(a.Z,{className:L},y.createElement(o.Z,{span:11,className:X},!P.ZP.canOperateFinancePlanTrial()||y.createElement(r.Z,{type:"primary",disabled:n===D.KTU.pendding,onClick:s.onStartTrial},"开始试算")),y.createElement(o.Z,{span:11,offset:1,className:G},!P.ZP.canOperateFinancePlanonSubmit()||y.createElement(r.Z,{type:"primary",disabled:n!==D.KTU.success,onClick:s.onSubmitAudit},"提交审核")))})),(0,f.Z)((0,c.Z)(s),"renderResultContent",(function(){var e=s.props,t=e.planId,n=e.planVersionId,a=e.domain;return y.createElement(B,{planVersionId:n,planId:t,domain:a,onOpenVerifyButton:s.onOpenVerifyButtons})})),(0,f.Z)((0,c.Z)(s),"renderHistoryContent",(function(){var e=s.props,t=e.planId,n=e.planVersionId,a=e.domain;return y.createElement(W,{planVersionId:n,planId:t,domain:a})})),(0,f.Z)((0,c.Z)(s),"renderVerifyModal",(function(){var e=s.props,t=e.planVersionId,n=e.planId,a=s.state,o=a.isShowVerifyModal,r=a.isShowAudit;return y.createElement(H,{isShowVerify:o,onHideModal:s.onHideModal,planVersionId:t,planId:n,isShowAudit:r})})),(0,f.Z)((0,c.Z)(s),"renderCreateDateModal",(function(){var e=s.props.planVersionId,t=s.state,n=t.isShowCalculateModal,a=t.workeType;return y.createElement(j,{isShowCalculate:n,onHideTrialModal:s.onHideTrialModal,planVersionId:e,workeType:a})})),s.state={isVerifyButton:!1,isShowVerifyModal:!1,isShowCalculateModal:!1,state:void 0,isDisabled:!0,isShowAudit:!1},s.private={dispatch:e.dispatch},s}return(0,s.Z)(n,[{key:"render",value:function(){return y.createElement("div",null,this.renderResultContent(),this.renderOperation(),this.renderHistoryContent(),this.renderVerifyModal(),this.renderCreateDateModal())}}]),n}(y.Component);(0,f.Z)(J,"propTypes",{planVersionId:S().string,planId:S().string,domain:S().number,calculateResultsData:S().object,planVersionDetailData:S().object}),(0,f.Z)(J,"defaultProps",{planVersionId:"",planId:"",calculateResultsData:{},planVersionDetailData:{}});var $=(0,g.connect)((function(e){var t=e.financePlan;return{calculateResultsData:t.calculateResultsData,planVersionDetailData:t.planVersionDetailData}}))(b.Z.create()(J))},29335:function(e,t){t.Z={"app-comp-expense-approve-close-modal-wrap":"wFWoJcqtHrYnD2k8OP3T","app-comp-expense-approve-close-modal-icon":"NVxOz8H3KCLv2PrksvNr","app-comp-expense-approve-close-modal-finish":"D2StYhDY5JgCv2lDVq_X","app-comp-expense-approve-close-modal-count":"DsT4Bl_ZOds1ViSTcHNg","app-comp-expense-approve-close-modal-seconds":"c3a9kycIP3SgUuOgIVgA","app-comp-expense-approve-close-modal-tip":"yi1yWK7DaYHUOCR7dag5","app-comp-expense-approve-close-modal-btn-wrap":"j0nQgO9DmzwkLMe7HMMw","app-comp-expense-approve-close-modal-btn":"YyYFH8hHW4FtyChayxHY","app-comp-expense-approve-person-post-selector":"vw4ra8UPKBLmynjjiqIi","app-comp-expense-approve-person-selector":"_Pt_gfsyyzkRRTMZ5MtA","app-comp-expense-approve-person-post-person-selector":"eup6JthyTMeF6m9INbbv","app-comp-expense-borrow-info-download-btn":"c8c6zBDL2peXANzK80sx","app-comp-expense-business-info-together-name":"mm09g3qaUJ5XRMHvdwwL","app-comp-expense-business-info-transport-kind":"Z8cRkTgFMMdAXRRG838S","app-comp-expense-business-info-ext":"acU3pMBuzOKi8RO2Hek7","app-comp-expense-cost-order-item-files-link":"cVx63tklQroCVJaWRzuB","app-comp-expense-cost-order-item-update-cost-money":"wmb7gmM1JjHdN0pwCrQX","app-comp-expense-detail-operate-wrap":"WOg4C32YPoCKdaflWLOq","app-comp-expense-detail-operate-item":"E5eUuKkyGvwMhvv3hAFi","app-comp-expense-detail-tag-selector":"jhmUqieq6sXXO69HqGtP","app-comp-expense-detail-tag-td":"d06rEhpZq17srsc7ijeT","app-comp-expense-detail-order-info-ext":"DMhWKR3u6STKrG5e3mlt","app-comp-expense-reject-node-node-selector":"fRouNAirBZucSZKkMCA7","app-comp-expense-reject-node-person-or-post":"Pgb0alct1pRvzcOsTpRE","app-comp-expense-reject-node-person":"W84Xvw0jcgp_t74Hdvy3","app-comp-expense-repay-files-item":"vObdtEo4n0SRvNWgHHH7","app-comp-expense-supplement-del-file":"hIq0sjNUScES1sjFqJQD","app-comp-expense-travel-files-link":"Lirch3sn1CwX14gdWgOc","app-comp-expense-travel-update-money":"GTlnH0rPqViFKSqOok19","app-comp-expense-travel-submit-money-td":"u5IVOW2NKkmxHBthDVXf","app-comp-expense-travel-total-money-td":"KMx98PygMK6EePscxp7G","app-comp-expense-travel-money-item-td":"k_4im_OlFswFtXqhewMS","app-comp-expense-borrowing-info-file":"ERWF7UpjdwiVGWGnXxT5","app-comp-expense-borrowing-repayments-info-not":"BWZS14eSTC8EafOxwQSz",preview:"gRDOrI2RAftWkchirlnj","preview-button":"cBPYFgy6Lkf4RZoS5W4Q"}}}]);