"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[7894],{46776:function(e,t,a){a(52466);var r=a(10642),n=(a(438),a(14277)),i=a(93433),o=a(15671),l=a(43144),c=a(97326),s=a(60136),d=a(82963),u=a(61120),p=a(4942),m=(a(56022),a(60331)),f=a(93517),g=a.n(f),h=a(55609),b=a(67294),v=a(45697),y=a.n(v);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,u.Z)(e);if(t){var n=(0,u.Z)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,d.Z)(this,a)}}var C=m.Z.CheckableTag,I=10,D=20,T=-100,E=function(e){(0,s.Z)(a,e);var t=Z(a);function a(e){var l;(0,o.Z)(this,a),l=t.call(this,e),(0,p.Z)((0,c.Z)(l),"onChange",(function(e,t){var a=l.state.selectedTags,r=t?[].concat((0,i.Z)(a),[e]):a.filter((function(t){return t!==e}));l.setState({selectedTags:r})})),(0,p.Z)((0,c.Z)(l),"onSubmit",(function(){var e=l.props,t=e.dispatch,a=e.onSuccessCallback,r=e.onFailureCallback,n=e.operateType,i={districtId:e.districtId,districtIds:e.districtIds,tags:l.state.selectedTags,onSuccessCallback:a,onFailureCallback:r};l.private.isSubmit&&(n===I&&t({type:"districtTag/setDistrictTags",payload:i}),n===D&&t({type:"districtTag/batchSetDistrictTags",payload:i}),n===T&&t({type:"districtTag/batchDeleteDistrictTags",payload:i})),l.private.isSubmit=!1})),(0,p.Z)((0,c.Z)(l),"onCancel",(function(){var e=l.props.onCancel;e&&e()})),(0,p.Z)((0,c.Z)(l),"renderCheckedTag",(function(e){var t=l.state.selectedTags,a=void 0===t?[]:t;return b.createElement(C,{key:e._id,value:e._id,checked:a.indexOf(e._id)>-1,onChange:function(t){return l.onChange(e._id,t)},style:a.indexOf(e._id)>-1?{marginBottom:"10px"}:{border:"1px solid #d9d9d9",backgroundColor:"#fafafa",marginBottom:"20px"}},e.name)})),(0,p.Z)((0,c.Z)(l),"renderEmpty",(function(){return b.createElement(n.Z,null)})),(0,p.Z)((0,c.Z)(l),"renderTags",(function(){var e=l.props.districtTags,t=(void 0===e?{}:e).data,a=void 0===t?[]:t;return b.createElement("div",null,a.map((function(e){return l.renderCheckedTag(e)})))})),(0,p.Z)((0,c.Z)(l),"renderMadal",(function(){var e=l.props,t=e.visible,a=e.districtTags,n=(void 0===a?{}:a).data,i=(void 0===n?[]:n).length>0,o=i;return b.createElement(r.Z,{title:"设置标签",visible:t,onOk:l.onSubmit,onCancel:l.onCancel,okText:"确认",cancelText:"取消",okButtonProps:{disabled:!o},width:700},i?l.renderTags():l.renderEmpty())}));var s=g().get(e,"districtTags.data",[]);return l.state={organTags:s,selectedTags:e.data||[]},l.private={isSubmit:!0},l}return(0,l.Z)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"districtTag/getDistrictTags",payload:{limit:9999,page:1}})}},{key:"render",value:function(){return this.renderMadal()}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.districtTags,r=void 0===a?{}:a,n=e.data,i=void 0===n?[]:n,o=t.organTags,l=void 0===o?[]:o,c=g().get(r,"data",[]);return l.length!==c.length?{organTags:c,selectedTags:i}:null}}]),a}(b.Component);E.propTypes={visible:y().bool,dispatch:y().func,operateType:y().number,onCancel:y().func,onSuccessCallback:y().func,onFailureCallback:y().func,districtTags:y().object,data:y().array,districtId:y().string,districtIds:y().array},E.defaultProps={visible:!1,dispatch:function(){},onCancel:function(){},operateType:I,onSuccessCallback:function(){},onFailureCallback:function(){},districtTags:{},data:[],districtId:"",districtIds:[]},t.Z=(0,h.connect)((function(e){return{districtTags:e.districtTag.districtTags}}))(E)},77417:function(e,t,a){a.d(t,{Z:function(){return D}});a(52560);var r=a(71577),n=(a(1868),a(12028)),i=(a(51838),a(48086)),o=a(4942),l=a(67294),c=a(93517),s=a.n(c),d=a(1413),u={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},p=a(30076),m=function(e,t){return l.createElement(p.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:t,icon:u}))};m.displayName="MinusCircleOutlined";var f=l.forwardRef(m),g=a(49101),h=(a(9070),a(20924)),b=(a(29093),a(16317)),v=a(80385),y=b.Z.Option;var Z=function(e){var t,a=s().get(e,"item",{}),r=s().get(e,"codes",[]).filter((function(e){return e!==a.code})),n=s().get(e,"disabled",!1),i=s().get(e,"disabledItem",!1);return l.createElement(l.Fragment,null,(t=Object.values(v.pat).filter((function(e){return"function"!=typeof e})).map((function(e){return{code:e,name:v.pat.description(e)}})),l.createElement(l.Fragment,null,l.createElement(b.Z,{onChange:e.onChangePlatform,placeholder:"选择平台",disabled:n||i,value:a.code,style:{width:"40%"}},t.map((function(e){return r.includes(e.code)?null:l.createElement(y,{value:e.code},e.name)}))),l.createElement("span",{style:{margin:"0 5px"}},"--"),l.createElement(h.Z,{placeholder:"输入平台中的商圈ID",onChange:e.onChangePlatformId,value:a.id,disabled:n,style:{width:"40%"}}))))};function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,o.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var D=function(e){var t=s().get(e,"value.checked",!1),a=s().get(e,"value.items",[]),o=s().get(e,"disabled",!1),c=s().get(e,"disabledSwitch",!1),d=function(t){var a=I(I({},e.value),t);e.onChange&&e.onChange(a)},u=function(){var e=a[a.length-1];if(a.length-1>=0&&Object.values(e).filter((function(e){return""!==e})).length<3)return i.ZP.error("请填写完当前数据，再添加");a.push({disabled:!1}),d({items:a})};return l.createElement(l.Fragment,null,c?null:l.createElement("div",null,l.createElement(n.Z,{checked:t,disabled:o||c,onChange:function(e){d({checked:e,items:[{disabled:!1}]})}})),function(){if(!t)return null;var e=a.map((function(e){return e.code})),n=Object.values(v.pat).filter((function(e){return"function"!=typeof e})).length;return l.createElement(l.Fragment,null,a.map((function(t,r){return l.createElement(l.Fragment,{key:r},l.createElement(Z,{disabled:o,disabledItem:t.disabled,item:t,codes:e,onChangePlatform:function(e){return function(e,t){a[t].code=e,d({items:a})}(e,r)},onChangePlatformId:function(e){return function(e,t){a[t].id=e.target.value,d({items:a})}(e,r)}}),o||t.disabled?null:l.createElement(f,{style:{marginLeft:10},onClick:function(){var e;e=r,a.splice(e,1),d({items:a})}}))})),a.length>=n||o?null:l.createElement(r.Z,{type:"dashed",style:{width:"calc( 80% + 25px)"},onClick:u},l.createElement(g.Z,null)," 添加"))}())}},17894:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});a(20186);var r=a(75385),n=(a(55295),a(69713)),i=(a(52560),a(71577)),o=(a(56022),a(60331)),l=a(93433),c=(a(51838),a(48086)),s=a(15671),d=a(43144),u=a(97326),p=a(60136),m=a(82963),f=a(61120),g=a(4942),h=(a(9070),a(20924)),b=(a(29093),a(16317)),v=a(94315),y=a.n(v),Z=a(93517),C=a.n(Z),I=a(96486),D=a.n(I),T=a(67294),E=a(66939),k=(a(98703),a(1413)),w={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:e}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm32 588c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z",fill:t}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z",fill:e}}]}},name:"info-circle",theme:"twotone"},O=a(30076),S=function(e,t){return T.createElement(O.Z,(0,k.Z)((0,k.Z)({},e),{},{ref:t,icon:w}))};S.displayName="InfoCircleTwoTone";var P=T.forwardRef(S),F=a(55609),j=a(30381),x=a.n(j),B=a(96036),M=a(88144),Q=a(80385),q=a(97116),V=a(77417),_=a(45430),R=a(46776),N=a(8260);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(a),!0).forEach((function(t){(0,g.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,f.Z)(e);if(t){var n=(0,f.Z)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,m.Z)(this,a)}}var L=b.Z.Option,H=h.Z.TextArea,X=function(e){(0,p.Z)(a,e);var t=A(a);function a(e){var d;return(0,s.Z)(this,a),d=t.call(this,e),(0,g.Z)((0,u.Z)(d),"onCancel",(function(){d.setState({visible:!1})})),(0,g.Z)((0,u.Z)(d),"onSuccessCallback",(function(){d.getDistrictTagChangeLog(),c.ZP.success("操作成功"),d.getDistrictDetail(),d.onCancel()})),(0,g.Z)((0,u.Z)(d),"onFailureCallback",(function(e){e.zh_message&&c.ZP.error(e.zh_message),d.onCancel()})),(0,g.Z)((0,u.Z)(d),"onDetailSuccessCallBack",(function(e){var t=e.supplier_id;d.setState(z(z({},d.state),{},{supplierId:t}))})),(0,g.Z)((0,u.Z)(d),"onChangeDistrictState",(function(e){var t=d.props.form.setFieldsValue,a=d.props.districtDetail,r=a.customId,n=a.name,i=a.sourceType,o=a.operationType,l=d.getDistrictDetailTripartiteId();Number(e)===Q.hQm.disabled&&(t({customId:r}),t({name:n}),t({tripartiteId:l}),t({source:i}),t({mode:o})),Number(e)===Q.hQm.preparation&&t({customId:"",tripartiteId:{}}),Number(e)===Q.hQm.enable&&(t({customId:r}),t({tripartiteId:l})),Number(e)===Q.hQm.waitClose&&(t({customId:r}),t({tripartiteId:l}))})),(0,g.Z)((0,u.Z)(d),"onBack",(function(){d.props.history.push("/Assets/District/Manage")})),(0,g.Z)((0,u.Z)(d),"onUpdate",(function(e){e.preventDefault();var t=d.props.location.query.id;d.props.form.validateFields((function(e,a){if(!e){var r={districtId:t,changeType:a.changeType,onSuccessCallBack:d.onBack},n=d.props.districtDetail,i=n.state,o=n.customId,l=n.name,c=n.sourceType,s=n.operationType,u=n.remark;Number(i)!==Number(a.state)&&(r.state=Number(a.state)),o!==a.customId&&(r.customId=a.customId),l!==a.name&&(r.name=a.name),a.disposeWay&&(r.disposeWay=a.disposeWay),c!==a.source&&(r.source=a.source),s!==a.mode&&(r.mode=a.mode),a.remark?u!==a.remark&&(r.remark=a.remark):r.reastRemark=!0;var p=d.getDistrictDetailTripartiteId();D().isEqual(p,a.tripartiteId)||(r.tripartiteId=a.tripartiteId),d.props.dispatch({type:"districtManage/updateDistrict",payload:r})}}))})),(0,g.Z)((0,u.Z)(d),"onGetIsCustomIdRequired",(function(){var e=(0,d.props.form.getFieldValue)("state");return!e||Number(e)!==Q.hQm.enable&&Number(e)!==Q.hQm.waitClose})),(0,g.Z)((0,u.Z)(d),"onGetDistrictNameIsDisabled",(function(e){var t=(0,d.props.form.getFieldValue)("state");return Number(e)===Q.hQm.disabled?!t||Number(t)===Q.hQm.disabled:!!t&&Number(t)===Q.hQm.disabled})),(0,g.Z)((0,u.Z)(d),"onChangePage",(function(e,t){var a=d.private.searchParams;a.page=e,a.limit=t,d.getDistrictTagChangeLog(a)})),(0,g.Z)((0,u.Z)(d),"getDistrictDetail",(function(){var e={districtId:d.props.location.query.id,onSuccessCallBack:d.onDetailSuccessCallBack};d.props.dispatch({type:"districtManage/fetchDistrictDetail",payload:e})})),(0,g.Z)((0,u.Z)(d),"getDistrictTagChangeLog",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=d.props.location.query.id,a=d.private.searchParams,r=z(z({},a),e);d.private.searchParams=z({},r),d.props.dispatch({type:"districtTag/getDistrictTagChangeLog",payload:z({districtId:t},r)})})),(0,g.Z)((0,u.Z)(d),"getDistrictDetailTripartiteId",(function(){var e=C().get(d.props,"districtDetail",{}),t=Object.values(Q.pat).filter((function(e){return"function"!=typeof e})),a={};return t.forEach((function(t){if(y().existy(e[t])&&y().not.empty(e[t])){var r=C().get(a,"items",[]);a.checked=!0,a.items=[].concat((0,l.Z)(r),[{code:t,id:e[t],disabled:!0}])}})),a})),(0,g.Z)((0,u.Z)(d),"judgeWay",(function(e){var t=Q.hQm.disabled,a=Q.hQm.waitClose;return e===t||e===a})),(0,g.Z)((0,u.Z)(d),"renderOperateInfo",(function(){var e=d.props.location.query.id,t=d.props.districtDetail,a=t.createdAt,r=t.operatorInfo,n=t.updatedAt,i=t.forbiddenAt,o=T.createElement("a",{href:"/#/Assets/District/ChangeLog?id=".concat(e),target:"_blank",rel:"noopener noreferrer"},"商圈变更记录"),l=[{label:"创建时间",form:a?x()(a).format("YYYY-MM-DD HH:mm"):"--"},{label:"最新操作人",form:r&&r.name?r.name:"--"},{label:"停用时间",form:i?x()(i).format("YYYY-MM-DD HH:mm"):"--"},{label:"最新操作时间",form:n?x()(n).format("YYYY-MM-DD HH:mm"):"--"}];return T.createElement(B.IT,{title:"操作信息",titleExt:o},T.createElement(B.KP,{items:l,cols:4,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,g.Z)((0,u.Z)(d),"renderBusinessAttribution",(function(){var e=d.props.form.getFieldDecorator,t=d.state.supplierId,a=d.props.districtDetail.cityCode,r=d.props.districtDetail.industryCode,n=d.props.districtDetail.platformCode,i=[{label:"所属场景",form:e("business",{initialValue:r||void 0,rules:[{required:!0,message:"请选择所属场景"}]})(T.createElement(M.UU,{disabled:!0,enumeratedType:"industry"}))},{label:"平台",form:e("platformCode",{initialValue:n||void 0,rules:[{required:!0,message:"请选择平台"}]})(T.createElement(M.Yg,{enableSelectAll:!0,disabled:!0,allowClear:!0,showSearch:!0,placeholder:"请选择平台"}))},{label:"供应商",form:e("supplierId",{initialValue:t||void 0,rules:[{required:!0,message:"请选择供应商"}]})(T.createElement(M.o2,{enableSelectAll:!0,allowClear:!0,showSearch:!0,disabled:!0,optionFilterProp:"children",placeholder:"请选择供应商",platforms:n}))},{label:"城市",form:e("cityId",{initialValue:a||void 0,rules:[{required:!0,message:"请选择城市"}]})(t&&n?T.createElement(M.Wn,{enableSelectAll:!0,allowClear:!0,isExpenseModel:!0,showSearch:!0,disabled:!0,optionFilterProp:"children",placeholder:"请选择城市",suppliers:t,platforms:n}):T.createElement(b.Z,{disabled:!0}))}];return T.createElement(B.IT,{title:"业务归属"},T.createElement(B.KP,{items:i,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,g.Z)((0,u.Z)(d),"renderDistrictState",(function(e){var t=null,a=Q.hQm.enable,r=Q.hQm.disabled,n=Q.hQm.preparation,i=Q.hQm.waitClose;switch(e){case n:t=[a,n,i];break;case a:t=[a,i];break;case i:t=[i,r];break;case r:t=[a,r];break;default:t=[]}return T.createElement(b.Z,{placeholder:"请选择状态",onChange:d.onChangeDistrictState},t.map((function(e,t){return T.createElement(L,{value:e,key:t},Q.hQm.description(e))})))})),(0,g.Z)((0,u.Z)(d),"renderBasicInfo",(function(){var e=d.props.form,t=e.getFieldDecorator,a=e.getFieldValue,r=Q.hQm.disabled,n=C().get(d.props,"districtDetail",{}),i=(0,u.Z)(d).judgeWay,o=n.customId,l=n.state,c=n.name,s=n.disposalType,p=n.remark,m=d.getDistrictDetailTripartiteId(),f=n.ownerInfo,g=void 0===f?{}:f,v=d.onGetDistrictNameIsDisabled(l),y=d.props.form.getFieldValue("tripartiteId")&&d.props.form.getFieldValue("tripartiteId").checked,Z=[{label:"BOSS商圈ID",form:T.createElement("span",null,C().get(n,"id","--"))},{label:"状态",form:t("state",{initialValue:l,rules:[{required:!0,message:"请选择状态"}]})(d.renderDistrictState(l))}];i(a("state"))&&Z.push({label:"商圈处置方式",form:t("disposeWay",{initialValue:s,rules:[{required:!0,message:"请选择处置方式"}]})(T.createElement(b.Z,{placeholder:"请选择",disabled:a("state")===r},q.P6.transOptions(Q.Y2P,L)))});var I=[{label:"商圈名称",form:t("name",{initialValue:c,rules:[{required:!0,message:"请输入商圈名称"}]})(T.createElement(h.Z,{placeholder:"请输入商圈名称",disabled:v}))},{label:"meituan"===a("platformCode")?"平台商圈ID（专送）":"平台商圈ID",span:9,form:t("customId",{initialValue:o,rules:[{required:!d.onGetIsCustomIdRequired()&&!y,validator:q.P6.asyncValidateCustomId}]})(T.createElement(h.Z,{disabled:d.onGetIsCustomIdRequired(),placeholder:"请输入商圈ID"}))},{label:"商圈所有者",form:g.staff_info&&g.staff_info.name?g.staff_info.name:"--"},{label:"状态调整备注",span:24,layout:{labelCol:{span:3},wrapperCol:{span:8}},form:t("remark",{initialValue:p})(T.createElement(H,{autoSize:{minRows:2,maxRows:2},placeholder:"最多输入50个字",maxLength:50,allowClear:!0}))}];o&&a("customId")&&o!==a("customId")&&I.splice(2,0,{label:"修改原因",form:t("changeType",{rules:[{required:!0,message:"请选择修改原因"}]})(T.createElement(b.Z,{placeholder:"请选择修改原因"},T.createElement(L,{value:"".concat(Q.dX7.one)},Q.dX7.description(Q.dX7.one)),T.createElement(L,{value:"".concat(Q.dX7.two)},Q.dX7.description(Q.dX7.two))))}),Z.push.apply(Z,I),"meituan"===a("platformCode")&&a("state")!=="".concat(Q.hQm.preparation)&&(C().get(m,"items",[]).length>0||a("state")!=="".concat(Q.hQm.disabled))&&Z.push({label:"三方平台商圈ID（非专送）",span:15,layout:{labelCol:{span:6},wrapperCol:{span:18}},form:t("tripartiteId",{initialValue:m,rules:[{required:!1,validator:q.P6.asyncValidateTripartiteId}]})(T.createElement(V.Z,{disabledSwitch:C().get(m,"items",[]).length>0,disabled:d.onGetIsCustomIdRequired()}))});var D=T.createElement("span",null,T.createElement(P,{twoToneColor:"#FF7700"}),"  因三方平台ID变更，修改原因请选择“三方平台变更”；因录入信息错误导致修改平台商圈ID，原因请选择“填写有误”");return T.createElement(B.IT,{title:"基本信息",titleExt:D},T.createElement(B.KP,{items:Z,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,g.Z)((0,u.Z)(d),"renderExtraInfo",(function(){var e=d.props.form,t=e.getFieldDecorator,a=e.getFieldValue,r=C().get(d.props,"districtDetail",{}),n=r.sourceType,i=r.operationType,o=Q.hQm.disabled,l=[{label:"商圈来源",form:t("source",{rules:[{required:!0,message:"请选择商圈来源"}],initialValue:n})(T.createElement(b.Z,{placeholder:"请选择",disabled:a("state")===o},q.P6.transOptions(Q.Aj8,L)))},{label:"商圈经营方式",form:t("mode",{rules:[{required:!0,message:"请选择商圈经营方式"}],initialValue:i})(T.createElement(b.Z,{placeholder:"请选择",disabled:a("state")===o},q.P6.transOptions(Q.XF,L)))}];return T.createElement(B.IT,{title:"额外信息"},T.createElement(B.KP,{items:l,cols:3,layout:{labelCol:{span:8},wrapperCol:{span:16}}}))})),(0,g.Z)((0,u.Z)(d),"renderTags",(function(){var e=d.props.districtDetail,t=void 0===e?{}:e,a=t.labelInfos,r=void 0===a?[]:a,n=t.state,i=_.ZP.canOperateAssectsAdministrationTagSet()&&n!==Q.hQm.disabled?T.createElement("a",{type:"primary",onClick:function(){return d.setState({visible:!0})}},"设置标签"):null;return T.createElement(B.IT,{title:"标签",titleExt:i},r.map((function(e,t){return T.createElement(o.Z,{key:t,style:{margin:"4px",background:"#F5F5F5"}},e.name)})))})),(0,g.Z)((0,u.Z)(d),"renderButton",(function(){return T.createElement("div",{className:N.Z["app-comp-system-detail-btn-wrap"]},T.createElement(i.Z,{onClick:d.onBack},"返回"),T.createElement(i.Z,{type:"primary",onClick:d.onUpdate,className:N.Z["app-comp-detail-submit-btn"]},"提交"))})),(0,g.Z)((0,u.Z)(d),"renderModal",(function(){var e=d.state.visible,t=d.props.districtDetail,a=void 0===t?{}:t,r=a.labelInfos,n=void 0===r?[]:r;if(e){var i=a.id,o=void 0===i?void 0:i;return T.createElement(R.Z,{visible:e,districtId:o,data:n.map((function(e){return e._id})),onCancel:d.onCancel,onSuccessCallback:d.onSuccessCallback,onFailureCallback:d.onFailureCallback})}})),(0,g.Z)((0,u.Z)(d),"renderTagChangLog",(function(){var e=d.props.districtTagChangeLog,t=void 0===e?{}:e,a=t.data,i=void 0===a?[]:a,o=t._meta,l=void 0===o?{}:o,c=[{title:"归属月份",dataIndex:"month",key:"month",render:function(e){return e?"".concat(String(e).slice(0,4),"-").concat(String(e).slice(4,6)):"--"}},{title:"本月标签",dataIndex:"label_infos",key:"label_infos",render:function(e){return y().not.existy(e)||y().empty(e)||y().not.array(e)?"--":e.length<=3?e.map((function(e){return e.name})).join("、"):T.createElement(n.Z,{title:e.map((function(e){return e.name})).join("、")},T.createElement("span",null,C().get(e,"0.name"),"、",C().get(e,"1.name"),"、",C().get(e,"2.name"),"..."))}},{title:"记录时间",dataIndex:"updated_at",key:"updated_at",render:function(e){return e?x()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}}],s={defaultPageSize:30,onChange:d.onChangePage,showQuickJumper:!0,showSizeChanger:!0,onShowSizeChange:d.onChangePage,showTotal:function(e){return"总共".concat(e,"条")},pageSizeOptions:["10","20","30","40"],total:l.result_count||0};return T.createElement(B.IT,{title:"标签变更记录"},T.createElement(r.Z,{rowKey:function(e,t){return e._id||t},pagination:s,dataSource:i,columns:c}))})),d.state={supplierId:"",visible:!1},d.private={searchParams:{limit:30,page:1}},d}return(0,d.Z)(a,[{key:"componentDidMount",value:function(){this.getDistrictDetail(),this.getDistrictTagChangeLog()}},{key:"componentWillUnmount",value:function(){(0,this.props.dispatch)({type:"districtTag/resetDistrictTagChangeLog",payload:{}})}},{key:"render",value:function(){return T.createElement("div",null,T.createElement(E.Z,null,this.renderOperateInfo(),this.renderBusinessAttribution(),this.renderBasicInfo(),this.renderExtraInfo(),this.renderTags(),this.renderModal(),this.renderTagChangLog(),this.renderButton()))}}]),a}(T.Component);var W=E.Z.create()((0,F.connect)((function(e){return{districtDetail:e.districtManage.districtDetail,districtTagChangeLog:e.districtTag.districtTagChangeLog}}))(X))},8260:function(e,t){t.Z={"app-comp-system-district-del-btn":"jwD1LvdcMiOq9ISvTQhf","app-comp-system-detail-btn-wrap":"iMh94cAeGHVtBoIPZXCU","app-comp-detail-submit-btn":"ROgN_HyK56SizprERAwh","app-comp-system-create-btn-wrap":"tfTHSqZExFAOKK9c_zyQ","app-comp-system-create-submit-btn":"q7gunAFgBXHJNXMgYytn","app-comp-system-create-next-btn":"tX1_h7uYFDp29Z41QSe9","app-comp-assets-change-log-p":"H8h1eSai6pXBrOWkco7d"}}}]);