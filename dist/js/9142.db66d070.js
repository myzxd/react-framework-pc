"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[9142],{39142:function(e,t,a){a.r(t),a.d(t,{default:function(){return Kt}});var r=a(93517),n=a.n(r),i=a(55609),l=a(67294),c=a(87462),o=(a(62004),a(11382)),m=(a(51838),a(48086)),s=a(4942),d=a(15861),_=a(93433),u=a(29439),p=(a(9523),a(51752)),f=a(87757),y=a.n(f),h=a(80385),v=a(97116),g=(a(52560),a(71577)),E=(a(35668),a(86585)),Z=a(8240),b=(a(9070),a(20924)),k=(a(52466),a(10642)),w=(a(29093),a(16317)),I=a(96036),C={labelCol:{span:8},wrapperCol:{span:16}},F=p.Z.TabPane,T=w.Z.Option,O=(0,i.connect)()((function(e){var t,a=e.form,r=e.dispatch,i=e.employeeDetail,o=void 0===i?{}:i,s=e.onResetStaff,_=e.setResetState,f=e.employeeId,v=(0,l.useState)(!1),O=(0,u.Z)(v,2),P=O[0],j=O[1],R=a.getFieldValue,S=function(e,t,a){var r=R("identity_certificate_type");return t?r!==h.UZk.idCard||(0,Z.us)(t)?void a():a("请输入正确的身份证号"):a("请输入证件号码")},A=function(e,t,a){if(!t||!Array.isArray(t.keys)||t.keys.length<1||!Array.isArray(t.urls)||t.urls.length<1)return a("请上传证件正面照");a()},x=function(e,t,a){if(!t||!Array.isArray(t.keys)||t.keys.length<1||!Array.isArray(t.urls)||t.urls.length<1)return a("请上传证件反面照");a()},V=function(e){j(!1),_&&_((0,Z.xv)(32)),s&&s(e)},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(e).length>0?k.Z.confirm({content:l.createElement("div",null,l.createElement("div",{style:{textAlign:"center",marginBottom:"20px"}},"系统中该身份证号存在对应的离职人员档案信息，请核对以下信息并确认是否要复用该份档案中的信息"),l.createElement("div",{style:{marginLeft:"30px",marginBottom:"10px"}},"手机号：".concat(e.phone)),l.createElement("div",{style:{marginLeft:"30px"}},"姓名：".concat(e.name))),maskClosable:!0,onOk:function(){return V(e)},onCancel:function(){return j(!1)}}):k.Z.error({maskClosable:!0,content:"系统中未找到该身份证号对应的离职员工档案",onCancel:function(){return j(!1)},onOk:function(){return j(!1)}})},N=function(){var e=(0,d.Z)(y().mark((function e(){var t,a;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=R("identity_card_id")){e.next=3;break}return e.abrupt("return",m.ZP.error("请填写证件号码"));case 3:return j(!0),e.next=6,r({type:"employeeManage/getTwiceBoard",payload:{identityCardId:t}});case 6:a=e.sent,q(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.createElement(I.IT,{title:"身份信息"},l.createElement(E.Z,{form:a,initialValues:{identity_certificate_type:o.identity_certificate_type||h.UZk.idCard,identity_card_id:o.identity_card_id||void 0,identity_card_front:{keys:n().get(o,"identity_card_front")?[n().get(o,"identity_card_front")]:[],urls:n().get(o,"identity_card_front_url")?[n().get(o,"identity_card_front_url")]:[]},identity_card_back:{keys:n().get(o,"identity_card_back")?[n().get(o,"identity_card_back")]:[],urls:n().get(o,"identity_card_back_url")?[n().get(o,"identity_card_back_url")]:[]},identity_card_in_hand:{keys:n().get(o,"identity_card_in_hand")?[n().get(o,"identity_card_in_hand")]:[],urls:n().get(o,"identity_card_in_hand_url")?[n().get(o,"identity_card_in_hand_url")]:[]},health_certificate_type:o.health_certificate_type||h.UZk.health,health_certificate_no:o.health_certificate_no||void 0,health_certificate:{keys:n().get(o,"health_certificate")?[n().get(o,"health_certificate")]:[],urls:n().get(o,"health_certificate_url")?[n().get(o,"health_certificate_url")]:[]},health_certificate_back:{keys:n().get(o,"health_certificate_back")?[n().get(o,"health_certificate_back")]:[],urls:n().get(o,"health_certificate_back_url")?[n().get(o,"health_certificate_back_url")]:[]},health_certificate_in_hand:{keys:n().get(o,"health_certificate_in_hand")?[n().get(o,"health_certificate_in_hand")]:[],urls:n().get(o,"health_certificate_in_hand_url")?[n().get(o,"health_certificate_in_hand_url")]:[]},drive_certificate_type:o.drive_certificate_type||h.UZk.drive,drive_certificate_no:o.drive_certificate_no||void 0,drive_certificate_front:{keys:n().get(o,"drive_certificate_front")?[n().get(o,"drive_certificate_front")]:[],urls:n().get(o,"drive_certificate_front_url")?[n().get(o,"drive_certificate_front_url")]:[]},drive_certificate_back:{keys:n().get(o,"drive_certificate_back")?[n().get(o,"drive_certificate_back")]:[],urls:n().get(o,"drive_certificate_back_url")?[n().get(o,"drive_certificate_back_url")]:[]},drive_certificate_in_hand:{keys:n().get(o,"drive_certificate_in_hand")?[n().get(o,"drive_certificate_in_hand")]:[],urls:n().get(o,"drive_certificate_in_hand_url")?[n().get(o,"drive_certificate_in_hand_url")]:[]}},className:"affairs-flow-basic"},l.createElement(p.Z,{type:"card"},l.createElement(F,{tab:"身份证件",key:"identity",forceRender:!0},(t=[l.createElement(E.Z.Item,(0,c.Z)({label:"证件类型",name:"identity_certificate_type",rules:[{required:!0,message:"请选择"}]},C),l.createElement(w.Z,{placeholder:"请选择证件类型",allowClear:!0,onChange:function(){return a.validateFields(["identity_card_id"])}},l.createElement(T,{value:h.UZk.idCard},h.UZk.description(h.UZk.idCard)),l.createElement(T,{value:h.UZk.sergeant},h.UZk.description(h.UZk.sergeant)),l.createElement(T,{value:h.UZk.student},h.UZk.description(h.UZk.student)),l.createElement(T,{value:h.UZk.passport},h.UZk.description(h.UZk.passport)),l.createElement(T,{value:h.UZk.hmPass},h.UZk.description(h.UZk.hmPass)))),l.createElement(E.Z.Item,(0,c.Z)({label:"证件号码",name:"identity_card_id",rules:[{required:!0,validator:S}]},C),l.createElement(b.Z,{placeholder:"请填写证件号码"})),l.createElement(E.Z.Item,{key:"empty"}),l.createElement(E.Z.Item,(0,c.Z)({label:"证件正面照",name:"identity_card_front",rules:[{required:!0,validator:A}]},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"identity_card_front"})),l.createElement(E.Z.Item,(0,c.Z)({label:"证件反面照",name:"identity_card_back",rules:[{required:!0,validator:x}]},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"identity_card_back"})),l.createElement(E.Z.Item,(0,c.Z)({label:"手持证件半身照",name:"identity_card_in_hand"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"identity_card_in_hand"}))],f||(t[t.length]=l.createElement(E.Z.Item,(0,c.Z)({label:" ",key:"twice_board",colon:!1},C),l.createElement(g.Z,{type:"primary",onClick:N,loading:P},"二次入职查询"))),l.createElement(I.Fp,{items:t}))),l.createElement(F,{tab:"健康证件",key:"health",forceRender:!0},function(){var e=[l.createElement(E.Z.Item,(0,c.Z)({label:"证件类型",name:"health_certificate_type"},C),l.createElement(w.Z,{placeholder:"请选择证件类型"},l.createElement(T,{value:h.UZk.health},h.UZk.description(h.UZk.health)))),l.createElement(E.Z.Item,(0,c.Z)({label:"证件号码",name:"health_certificate_no"},C),l.createElement(b.Z,{placeholder:"请填写证件号码"})),l.createElement(E.Z.Item,{key:"empty"}),l.createElement(E.Z.Item,(0,c.Z)({label:"证件正面照",name:"health_certificate"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"health_certificate"})),l.createElement(E.Z.Item,(0,c.Z)({label:"证件反面照",name:"health_certificate_back"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"health_certificate_back"})),l.createElement(E.Z.Item,(0,c.Z)({label:"手持证件半身照",name:"health_certificate_in_hand"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"health_certificate_in_hand"}))];return l.createElement(I.Fp,{items:e})}()),l.createElement(F,{tab:"驾驶证件",key:"drive",forceRender:!0},function(){var e=[l.createElement(E.Z.Item,(0,c.Z)({label:"证件类型",name:"drive_certificate_type"},C),l.createElement(w.Z,{placeholder:"请选择证件类型"},l.createElement(T,{value:h.UZk.drive},h.UZk.description(h.UZk.drive)))),l.createElement(E.Z.Item,(0,c.Z)({label:"证件号码",name:"drive_certificate_no"},C),l.createElement(b.Z,{placeholder:"请填写证件号码"})),l.createElement(E.Z.Item,{key:"empty"}),l.createElement(E.Z.Item,(0,c.Z)({label:"证件正面照",name:"drive_certificate_front"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"drive_certificate_front"})),l.createElement(E.Z.Item,(0,c.Z)({label:"证件反面照",name:"drive_certificate_back"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"drive_certificate_back"})),l.createElement(E.Z.Item,(0,c.Z)({label:"手持证件半身照",name:"drive_certificate_in_hand"},C),l.createElement(I.oI,{domain:"staff",maximum:1,namespace:"drive_certificate_in_hand"}))];return l.createElement(I.Fp,{items:e})}()))))})),P=(a(36616),a(51368)),j=(a(54071),a(14072)),R=(a(36037),a(47933)),S=a(30381),A=a.n(S),x=a(88144),V={labelCol:{span:8},wrapperCol:{span:16}},q={labelCol:{span:4},wrapperCol:{span:20}},N={labelCol:{span:3},wrapperCol:{span:21}},D=w.Z.Option,K=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,i=[l.createElement(E.Z.Item,(0,c.Z)({label:"姓名",name:"name",rules:[{required:!0,message:"请输入姓名"},{pattern:/^[\u4e00-\u9fa5a-zA-Z-z]+$/g,message:"只能输入字母,汉字"}]},V),l.createElement(b.Z,{placeholder:"请输入姓名"})),l.createElement(E.Z.Item,(0,c.Z)({label:"手机号",name:"phone",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[0-9]{10}$/g,message:"请输入正确的手机号"}]},V),l.createElement(b.Z,{placeholder:"请输入手机号"})),l.createElement(E.Z.Item,(0,c.Z)({label:"性别",name:"gender_id",rules:[{required:!0,message:"请选择性别"}]},V),l.createElement(R.ZP.Group,null,l.createElement(R.ZP,{value:h.Y0t.male},h.Y0t.description(h.Y0t.male)),l.createElement(R.ZP,{value:h.Y0t.female},h.Y0t.description(h.Y0t.female)))),l.createElement(E.Z.Item,(0,c.Z)({label:"民族",name:"national",rules:[{required:!0,message:"请选择民族"}]},V),l.createElement(x.rd,null)),l.createElement(E.Z.Item,(0,c.Z)({label:"出生日期",name:"born_in",rules:[{required:!0,message:"请选择出生日期"}]},V),l.createElement(j.Z,{disabledDate:function(e){return e&&e>A()().endOf("day")}})),l.createElement(E.Z.Item,(0,c.Z)({label:"婚姻状况",name:"marital_status",rules:[{required:!0,message:"请选择婚姻状况"}]},V),l.createElement(w.Z,{placeholder:"请选择婚姻状况",allowClear:!0},l.createElement(D,{value:h.dr7.married},h.dr7.description(h.dr7.married)),l.createElement(D,{value:h.dr7.unmarried},h.dr7.description(h.dr7.unmarried)))),{span:16,key:"work_address",render:l.createElement(E.Z.Item,(0,c.Z)({label:l.createElement("span",{className:"boss-form-item-required"},"工作地"),name:"work_address",rules:[{validator:function(e,t,a){if(!t||Object.keys(t).length<1)return a("请选择工作地");var r=t.province,n=t.city;return r?n?void a():a("请选择城市"):a("请选择省份")}}]},q),l.createElement(x.TJ,{isHideArea:!0,style:{province:{width:150,marginRight:20},city:{width:180}}}))},l.createElement(E.Z.Item,(0,c.Z)({label:"户口所在地",name:"native_place",rules:[{required:!0,message:"请输入户口所在地"}]},V),l.createElement(b.Z,{placeholder:"请输入户口所在地"})),l.createElement(E.Z.Item,(0,c.Z)({label:"常居地",name:"often_address",rules:[{required:!0,message:"请输入常居地"}]},V),l.createElement(b.Z,{placeholder:"请输入常居地"})),l.createElement(E.Z.Item,(0,c.Z)({label:"紧急联系人",name:"emergency_contact",rules:[{required:!0,message:"请输入紧急联系人"},{pattern:/^[\u4e00-\u9fa5A-Za-z]+$/,message:"请输入汉字或字母"}]},V),l.createElement(b.Z,{placeholder:"请输入紧急联系人"})),l.createElement(E.Z.Item,(0,c.Z)({label:"紧急联系电话",name:"emergency_contact_phone",rules:[{required:!0,message:"请输入紧急联系电话"},{pattern:/^1[0-9]{10}$/g,message:"请输入正确的手机号"}]},V),l.createElement(b.Z,{placeholder:"请输入紧急联系电话"})),l.createElement(E.Z.Item,(0,c.Z)({label:"年龄",shouldUpdate:function(e,t){return e.born_in!==t.born_in}},V),(function(e){var t=(0,e.getFieldValue)("born_in");return t?A()().year()===A()(t).year()?0:A()().month()>A()(t).month()||A()().month()===A()(t).month()&&A()().date()>=A()(t).date()?A()().year()-A()(t).year():A()().year()-A()(t).year()-1:"--"})),l.createElement(E.Z.Item,(0,c.Z)({label:"政治面貌",name:"politics_status"},V),l.createElement(w.Z,{placeholder:"请选择政治面貌",allowClear:!0},l.createElement(D,{value:h.IEy.partyMember},h.IEy.description(h.IEy.partyMember)),l.createElement(D,{value:h.IEy.prepPartyMember},h.IEy.description(h.IEy.prepPartyMember)),l.createElement(D,{value:h.IEy.member},h.IEy.description(h.IEy.member)),l.createElement(D,{value:h.IEy.masses},h.IEy.description(h.IEy.masses)))),l.createElement(E.Z.Item,(0,c.Z)({label:"籍贯",name:"birth_place"},V),l.createElement(b.Z,{placeholder:"请输入籍贯"})),l.createElement(E.Z.Item,(0,c.Z)({label:"工作邮箱",name:"work_email",rules:[{type:"email",message:"请输入正确邮箱地址"}]},V),l.createElement(b.Z,{placeholder:"请输入工作邮箱"})),l.createElement(E.Z.Item,(0,c.Z)({label:"个人邮箱",name:"email",rules:[{type:"email",message:"请输入正确邮箱地址"}]},V),l.createElement(b.Z,{placeholder:"请输入个人邮箱"})),l.createElement(E.Z.Item,(0,c.Z)({label:"固定电话",name:"telephone"},V),l.createElement(b.Z,{placeholder:"请输入固定电话"})),l.createElement(E.Z.Item,(0,c.Z)({label:"身高",name:"height"},V),l.createElement(P.Z,{min:0,placeholder:"请输入身高",formatter:function(e){return"".concat(e,"cm")},parser:function(e){return e.replace("cm","")}})),l.createElement(E.Z.Item,(0,c.Z)({label:"体重",name:"weight"},V),l.createElement(P.Z,{min:0,placeholder:"请输入体重",formatter:function(e){return"".concat(e,"kg")},parser:function(e){return e.replace("kg","")}})),l.createElement(E.Z.Item,(0,c.Z)({label:"爱好",name:"interest"},V),l.createElement(b.Z,{placeholder:"请输入爱好"})),l.createElement(E.Z.Item,(0,c.Z)({label:"星座",name:"constellation"},V),l.createElement(x.vI,{allowClear:!0})),l.createElement(E.Z.Item,(0,c.Z)({label:"特长",name:"speciality"},V),l.createElement(b.Z,{placeholder:"请输入特长"})),l.createElement(E.Z.Item,(0,c.Z)({label:"学历",name:"education"},V),l.createElement(x.eA,{allowClear:!0})),{span:24,render:l.createElement(E.Z.Item,(0,c.Z)({label:"应聘人员登记表",name:"candidates_photo_list"},N),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"candidates_photo_list"}))},{span:24,render:l.createElement(E.Z.Item,(0,c.Z)({label:"附件",name:"fileList"},N),l.createElement(I.WR,{domain:"staff"}))}];return l.createElement(I.IT,{title:"个人信息"},l.createElement(E.Z,{form:t,initialValues:Object.keys(r).length<1?{national:"汉族"}:{name:r.name||void 0,phone:r.phone||void 0,gender_id:r.gender_id||void 0,national:r.national||"汉族",born_in:r.born_in?A()(String(r.born_in)):"",marital_status:r.marital_status||void 0,work_address:{province:r.work_province_code?Number(r.work_province_code):void 0,city:r.work_city_code?Number(r.work_city_code):void 0},native_place:r.native_place||void 0,often_address:r.often_address||void 0,emergency_contact:r.emergency_contact||void 0,emergency_contact_phone:r.emergency_contact_phone||void 0,work_email:r.work_email||void 0,email:r.email||void 0,telephone:r.telephone||void 0,height:r.height||void 0,weight:r.weight||void 0,interest:r.interest||void 0,constellation:r.constellation||void 0,speciality:r.speciality||void 0,education:r.education||void 0,politics_status:r.politics_status||void 0,birth_place:r.birth_place||void 0,remark:n().get(r,"remark",void 0),fileList:I.WR.getInitialValue(r,"enclosure_urls"),candidates_photo_list:{keys:Array.isArray(r.candidates_photo_list)?r.candidates_photo_list:[],urls:Array.isArray(r.candidates_photo_url_list)?r.candidates_photo_url_list:[]}},className:"affairs-flow-basic"},l.createElement(I.Fp,{items:i})))};function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var L={labelCol:{span:8},wrapperCol:{span:16}},M={labelCol:{span:4},wrapperCol:{span:20}},X=(0,i.connect)((function(e){return{bankInfo:e.employeeManage.bankInfo}}))((function(e){var t=e.form,a=e.dispatch,r=e.employeeDetail,i=void 0===r?{}:r,o=e.specialFields,d=t.getFieldValue,_=t.setFieldsValue,p=i.bank_info?i.bank_info:{},f=(0,l.useState)(p.payment_type||h.l7E.personal),y=(0,u.Z)(f,2),v=y[0],w=y[1],C=(0,l.useState)(!0),F=(0,u.Z)(C,2),T=F[0],O=F[1],P=(0,l.useState)(!0),j=(0,u.Z)(P,2),S=j[0],A=j[1],V=(0,l.useState)(!1),q=(0,u.Z)(V,2),N=q[0],D=q[1];(0,l.useEffect)((function(){o&&Object.keys(o).length>0&&o.bank_info&&o.bank_info.payment_type&&w(o.bank_info.payment_type)}),[o]);var K,X,U=function(){_({card_holder_bank_card_no:void 0,bank_branch:void 0})},Y=function(){var e=d("bank_card_front")||{},t=e.keys,r=e.urls;Array.isArray(t)&&Array.isArray(r)&&t.length>0&&r.length>0?a({type:"employeeManage/fetchBankCardIdentification",payload:{bankgPositive:e,onSuccessCallback:function(e){return function(e){m.ZP.success("识别成功");var t=n().get(e,"record.bank_card_id");_({card_holder_bank_card_no:t?String(t).replace(/\s/g,""):void 0,bank_branch:n().get(e,"record.bank_name",void 0)})}(e)},onErrorCallback:function(){D(!0)}}}):m.ZP.error("请上传银行卡正面照")},B=function(e,t,a){if(!t||Object.keys(t).length<0)return a("请选择开户行所在地");var r=t.province,n=t.city;return r||n?r?n?void a():a("请选择城市"):a("请选择省份"):a("请选择开户行所在地")},H=function(e,t,a){if(!t||Object.keys(t).length<1)return a();var r=t.province,n=t.city;return!r&&n?a("请选择省份"):!n&&r?a("请选择城市"):void a()},G=function(e,t,a){if(!t||!Array.isArray(t.keys)||t.keys.length<1||!Array.isArray(t.urls)||t.urls.length<1)return a("请上传银行卡正面照");a()},W=function(e,t,a){if(!t||!Array.isArray(t.keys)||t.keys.length<1||!Array.isArray(t.urls)||t.urls.length<1)return a("请上传代收协议");a()},$=[l.createElement(E.Z.Item,(0,c.Z)({label:"收款模式",name:"payment_type",rules:[{required:!0,message:"请选择收款方式"}]},L),l.createElement(R.ZP.Group,{onChange:function(e){w(e.target.value),e.target.value===p.payment_type?t.setFieldsValue(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},J())):_({card_holder_name:void 0,card_holder_bank_card_no:void 0,bank_branch:void 0,bank_branch_name:void 0,bank_location:{province:void 0,city:void 0},bank_card_front:void 0,collect_protocol:void 0,collect_id_card_no:void 0})}},l.createElement(R.ZP,{value:h.l7E.personal},h.l7E.description(h.l7E.personal)),l.createElement(R.ZP,{value:h.l7E.collecting},h.l7E.description(h.l7E.collecting))))],J=function(){return{bank_location:Array.isArray(p.bank_location)&&p.bank_location.length>0?{province:p.bank_location[0],city:p.bank_location[1]}:{},payment_type:p.payment_type||h.l7E.personal,card_holder_name:p.card_holder_name||void 0,card_holder_bank_card_no:p.card_holder_bank_card_no||void 0,bank_branch:p.bank_branch||void 0,bank_branch_name:p.bank_branch_name||void 0,bank_card_front:{keys:p.bank_card_front?[p.bank_card_front]:[],urls:p.bank_card_front_url?[p.bank_card_front_url]:[]},collect_protocol:{keys:Array.isArray(p.collect_protocol)?p.collect_protocol:[],urls:Array.isArray(p.collect_protocol_url)?p.collect_protocol_url:[]},collect_id_card_no:p.collect_id_card_no||void 0}};return l.createElement(I.IT,{title:"银行卡信息"},l.createElement(E.Z,{form:t,initialValues:J(),className:"affairs-flow-basic"},l.createElement(I.Fp,{items:$}),v===h.l7E.personal&&(K=[l.createElement(E.Z.Item,(0,c.Z)({label:"持卡人姓名",name:"card_holder_name"},L),l.createElement(b.Z,{placeholder:"请输入持卡人姓名"})),l.createElement(E.Z.Item,(0,c.Z)({label:"银行卡账号",name:"card_holder_bank_card_no",rules:[{pattern:/^[0-9]{1,23}$/g,message:"银行卡账号必须为数字，并且最多23位"}]},L),l.createElement(b.Z,{placeholder:"请输入银行卡账号",disabled:T})),l.createElement(E.Z.Item,(0,c.Z)({label:"开户行",name:"bank_branch",rules:[{pattern:/^[\u4e00-\u9fa5]{1,32}$/,message:"开户行名称必须为汉字，并且最多32位"}]},L),l.createElement(b.Z,{placeholder:"请输入开户行名称",disabled:T})),l.createElement(E.Z.Item,(0,c.Z)({label:"支行名称",name:"bank_branch_name"},L),l.createElement(b.Z,{placeholder:"请输入支行名称"})),{span:16,render:l.createElement(E.Z.Item,(0,c.Z)({label:"开户行所在地",name:"bank_location",rules:[{validator:H}]},M),l.createElement(x.QZ,{provinceWidth:150,cityWith:180}))},l.createElement(E.Z.Item,(0,c.Z)({label:"银行卡正面照",name:"bank_card_front"},L),l.createElement(I.oI,{maximum:1,domain:"staff",namespace:"bank_card_front",onChange:U}))],X=[l.createElement(E.Z.Item,(0,c.Z)({label:" ",key:"operate",colon:!1},L),l.createElement(g.Z,{type:"primary",onClick:Y},"识别银行卡"))],l.createElement(l.Fragment,null,l.createElement(I.Fp,{items:K}),l.createElement(I.Fp,{items:X}))),v===h.l7E.collecting&&function(){var e=[l.createElement(E.Z.Item,(0,c.Z)({label:"持卡人姓名",name:"card_holder_name",rules:[{required:!0,message:"请输入持卡人姓名"},{pattern:/^[\u4e00-\u9fa5A-Za-z]+$/,message:"请输入汉字或字母"}]},L),l.createElement(b.Z,{placeholder:"请输入持卡人姓名"})),l.createElement(E.Z.Item,(0,c.Z)({label:"代收人身份证号码",name:"collect_id_card_no",rules:[{required:!0,validator:Z.ZP.asyncValidateIdCardNumber}]},L),l.createElement(b.Z,{placeholder:"请输入代收人身份证号码"})),l.createElement(E.Z.Item,(0,c.Z)({label:"银行卡账号",name:"card_holder_bank_card_no",rules:[{required:!0,message:"请识别正确的代收人银行卡账号"},{pattern:/^[0-9]{1,23}$/g,message:"银行卡账号必须为数字，并且最多23位"}]},L),l.createElement(b.Z,{placeholder:"请输入银行卡账号",disabled:S})),l.createElement(E.Z.Item,(0,c.Z)({label:"开户行",name:"bank_branch",rules:[{required:!0,message:"请识别正确的开户行名称"},{pattern:/^[\u4e00-\u9fa5]{1,32}$/,message:"开户行名称必须为汉字，并且最多32位"}]},L),l.createElement(b.Z,{placeholder:"请输入开户行名称",disabled:S})),l.createElement(E.Z.Item,(0,c.Z)({label:"支行名称",name:"bank_branch_name",rules:[{required:!0,message:"请输入支行名称"},{pattern:/^[\u4e00-\u9fa5]+$/,message:"支行名称必须为汉字"}]},L),l.createElement(b.Z,{placeholder:"请输入支行名称"})),{span:16,render:l.createElement(E.Z.Item,(0,c.Z)({label:"开户行所在地",name:"bank_location",rules:[{required:!0,validator:B}]},M),l.createElement(x.QZ,{provinceWidth:150,cityWith:180}))}],t=[l.createElement(E.Z.Item,(0,c.Z)({label:"银行卡正面照",name:"bank_card_front",rules:[{required:!0,validator:G}]},L),l.createElement(I.oI,{maximum:1,domain:"staff",namespace:"bank_card_front"})),l.createElement(E.Z.Item,(0,c.Z)({label:"代收协议",name:"collect_protocol",rules:[{required:!0,validator:W}]},L),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"collect_protocol"}))],a=[l.createElement(E.Z.Item,(0,c.Z)({label:" ",key:"operate",colon:!1},L),l.createElement(g.Z,{type:"primary",onClick:Y},"识别银行卡"))];return l.createElement(l.Fragment,null,l.createElement(I.Fp,{items:e}),l.createElement(I.Fp,{items:t}),l.createElement(I.Fp,{items:a}))}(),l.createElement(k.Z,{title:"银行卡识别",visible:N,cancelText:"重新识别",okText:"手动录入",footer:l.createElement("div",{style:{textAlign:"right"}},l.createElement(g.Z,{style:{marginRight:10},onClick:function(){D(!1),Y()}},"重新识别"),l.createElement(g.Z,{type:"primary",onClick:function(){D(!1),v===h.l7E.personal&&O(!1),v===h.l7E.collecting&&A(!1)}},"手动录入")),onCancel:function(){D(!1)}},l.createElement("p",null,"银行卡信息识别失败，请重新识别银行卡，或者手动录入银行卡信息"))))})),U=(a(13062),a(71230)),Y=(a(89032),a(15746)),B=a(1058),H=a(49101),G=w.Z.Option,W=j.Z.RangePicker,$={labelCol:{span:8},wrapperCol:{span:16}},J={labelCol:{span:4},wrapperCol:{span:20}},Q=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,n=[l.createElement(E.Z.Item,(0,c.Z)({label:"最高学历",name:"highest_education",rules:[{required:!0,message:"请选择最高学历"}]},$),l.createElement(w.Z,{placeholder:"请选择最高学历",allowClear:!0},l.createElement(G,{value:h.XT_.doctor},h.XT_.description(h.XT_.doctor)),l.createElement(G,{value:h.XT_.master},h.XT_.description(h.XT_.master)),l.createElement(G,{value:h.XT_.undergraduate},h.XT_.description(h.XT_.undergraduate)),l.createElement(G,{value:h.XT_.juniorCollege},h.XT_.description(h.XT_.juniorCollege)),l.createElement(G,{value:h.XT_.secondary},h.XT_.description(h.XT_.secondary)),l.createElement(G,{value:h.XT_.highSchool},h.XT_.description(h.XT_.highSchool)),l.createElement(G,{value:h.XT_.juniorHighSchool},h.XT_.description(h.XT_.juniorHighSchool)))),l.createElement(E.Z.Item,(0,c.Z)({label:"专业职称",name:"professional",rules:[{required:!0,message:"请输入专业职称"}]},$),l.createElement(b.Z,{placeholder:"请输入专业职称"})),l.createElement(E.Z.Item,(0,c.Z)({label:"外语及等级",name:"language_level",rules:[{required:!0,message:"请输入外语及等级"}]},$),l.createElement(b.Z,{placeholder:"请输入外语及等级"}))],i=[l.createElement(E.Z.Item,(0,c.Z)({label:"毕业证",name:"degree"},$),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"degree"})),l.createElement(E.Z.Item,(0,c.Z)({label:"从业资格证",name:"certificate_photo_list"},$),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"certificate_photo_list"})),l.createElement(E.Z.Item,(0,c.Z)({label:"其他证件",name:"other_certificate_photo_list"},$),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"other_certificate_photo_list"}))],o={highest_education:r.highest_education||void 0,professional:r.professional,language_level:r.language_level,academy_list:Array.isArray(r.academy_list)&&r.academy_list.length>0?r.academy_list.map((function(e){return{institution_name:e.institution_name||void 0,education:e.education||void 0,profession:e.profession||void 0,time:[e.start_time?A()(e.start_time):void 0,e.end_time?A()(e.end_time):void 0]}})):[{institution_name:void 0,education:void 0,profession:void 0,time:void 0}],degree:{keys:Array.isArray(r.degree)?r.degree:[],urls:Array.isArray(r.degree_url)?r.degree_url:[]},certificate_photo_list:{keys:Array.isArray(r.certificate_photo_list)?r.certificate_photo_list:[],urls:Array.isArray(r.certificate_photo_url_list)?r.certificate_photo_url_list:[]},other_certificate_photo_list:{keys:Array.isArray(r.other_certificate_photo_list)?r.other_certificate_photo_list:[],urls:Array.isArray(r.other_certificate_photo_url_list)?r.other_certificate_photo_url_list:[]}};return l.createElement(I.IT,{title:"学历信息"},l.createElement(E.Z,{form:t,initialValues:o,className:"affairs-flow-basic"},l.createElement(I.Fp,{items:n}),l.createElement(E.Z.List,{name:"academy_list"},(function(e,t){var a=t.add,r=t.remove,n={institution_name:void 0,education:void 0,profession:void 0,time:void 0};return l.createElement(l.Fragment,null,e.map((function(t,i){return l.createElement(U.Z,{key:i},l.createElement(Y.Z,{span:5},l.createElement(E.Z.Item,(0,c.Z)({label:"院校名称",name:[t.name,"institution_name"],fieldKey:[t.fieldKey,i],rules:[{required:!0,message:"请输入院校名称"}]},$),l.createElement(b.Z,{placeholder:"请输入院校名称",allowClear:!0}))),l.createElement(Y.Z,{span:5},l.createElement(E.Z.Item,(0,c.Z)({label:"第一学历",name:[t.name,"education"],fieldKey:[t.fieldKey,i],rules:[{required:!0,message:"请输入第一学历"}]},$),l.createElement(x.eA,{allowClear:!0}))),l.createElement(Y.Z,{span:5},l.createElement(E.Z.Item,(0,c.Z)({label:"专业",name:[t.name,"profession"],fieldKey:[t.fieldKey,i],rules:[{required:!0,message:"请输入专业"}]},$),l.createElement(b.Z,{placeholder:"请输入专业",allowClear:!0}))),l.createElement(Y.Z,{span:7},l.createElement(E.Z.Item,(0,c.Z)({label:"时间",name:[t.name,"time"],fieldKey:[t.fieldKey,i],rules:[{required:!0,message:"请选择时间"}]},J),l.createElement(W,null))),l.createElement(Y.Z,{span:2},e.length>1?l.createElement(g.Z,{onClick:function(){return r(t.name)},shape:"circle",icon:l.createElement(B.Z,null),style:{margin:"0 4px"}}):"",i===e.length-1?l.createElement(g.Z,{onClick:function(){return a(n)},shape:"circle",icon:l.createElement(H.Z,null),style:{margin:"0 4px"}}):""))})))})),l.createElement(I.Fp,{items:i})))},ee=w.Z.Option,te={labelCol:{span:8},wrapperCol:{span:16}},ae=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,n=e.resetState,i=e.specialFields,o=(0,l.useState)(r.application_channel_id),m=(0,u.Z)(o,2),s=m[0],d=m[1],p=(0,l.useState)(r.transfer_sign_platform),f=(0,u.Z)(p,2),y=f[0],v=f[1];(0,l.useEffect)((function(){d(r.application_channel_id),v(r.transfer_sign_platform)}),[n,r]),(0,l.useEffect)((function(){i&&Object.keys(i).length>0&&i.application_channel_id&&(d(i.application_channel_id),i.transfer_sign_platform&&v(i.transfer_sign_platform))}),[i]);var g=[l.createElement(E.Z.Item,(0,c.Z)({label:"应聘途径",name:"application_channel_id",rules:[{required:!0,message:"请选择收款方式"}]},te),l.createElement(w.Z,{placeholder:"请选择应聘途径",onChange:function(e){return d(e)}},l.createElement(ee,{value:h.n_7.company},h.n_7.description(h.n_7.company)),l.createElement(ee,{value:h.n_7.recommend},h.n_7.description(h.n_7.recommend)),l.createElement(ee,{value:h.n_7.apply},h.n_7.description(h.n_7.apply)),l.createElement(ee,{value:h.n_7.transfer},h.n_7.description(h.n_7.transfer)),l.createElement(ee,{value:h.n_7.hr},h.n_7.description(h.n_7.hr)),l.createElement(ee,{value:h.n_7.other},h.n_7.description(h.n_7.other))))],k=[].concat(g);s===h.n_7.company&&(k=[].concat(g,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"公司名称",name:"application_company_name",rules:[{required:!0,message:"请输入公司名称"}]},te),l.createElement(b.Z,{placeholder:"请输入公司名称"}))]))),s===h.n_7.recommend&&(k=[].concat(g,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"推荐人身份证",name:"referrer_identity_no",rules:[{required:!0,validator:Z.Hb}]},te),l.createElement(b.Z,{placeholder:"请输入推荐人身份证"})),l.createElement(E.Z.Item,(0,c.Z)({label:"推荐人姓名",name:"referrer_name",rules:[{required:!0,message:"请输入推荐人姓名"},{pattern:/^[\u4e00-\u9fa5a-zA-Z-z]+$/g,message:"只能输入字母,汉字"}]},te),l.createElement(b.Z,{placeholder:"请输入推荐人姓名"})),l.createElement(E.Z.Item,(0,c.Z)({label:"推荐人手机号",name:"referrer_phone",rules:[{required:!0,message:"请输入推荐人手机号"},{pattern:/^1[0-9]{10}$/g,message:"请输入正确的手机号"}]},te),l.createElement(b.Z,{placeholder:"请输入手机号"}))]))),s===h.n_7.apply&&(k=[].concat(g,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"渠道",name:"application_platform",rules:[{required:!0,message:"请选择渠道"}]},te),l.createElement(w.Z,{placeholder:"请选择渠道"},l.createElement(ee,{value:h.dO7.zhiLian},h.dO7.description(h.dO7.zhiLian)),l.createElement(ee,{value:h.dO7.BOSS},h.dO7.description(h.dO7.BOSS)),l.createElement(ee,{value:h.dO7.liePin},h.dO7.description(h.dO7.liePin)),l.createElement(ee,{value:h.dO7.other},h.dO7.description(h.dO7.other))))]))),s===h.n_7.transfer&&(k=[].concat(g,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"平台",name:"transfer_sign_platform",rules:[{required:!0,message:"请选择平台"}]},te),l.createElement(x.Yg,{allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择平台",onChange:function(e){return v(e)}})),l.createElement(E.Z.Item,(0,c.Z)({label:"供应商",name:"transfer_sign_supplier",rules:[{required:!0,message:"请选择供应商"}]},te),l.createElement(x.o2,{platforms:y,allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择供应商"})),l.createElement(E.Z.Item,(0,c.Z)({label:"岗位",name:"transfer_sign_post",rules:[{required:!0,message:"请输入岗位"}]},te),l.createElement(b.Z,{placeholder:"请输入岗位"}))])));var C={application_channel_id:r.application_channel_id||h.n_7.other,application_company_name:r.application_company_name||void 0,referrer_identity_no:r.referrer_identity_no||void 0,referrer_name:r.referrer_name||void 0,referrer_phone:r.referrer_phone||void 0,application_platform:r.application_platform||void 0,transfer_sign_platform:r.transfer_sign_platform||void 0,transfer_sign_supplier:r.transfer_sign_supplier||void 0,transfer_sign_post:r.transfer_sign_post||void 0};return l.createElement(I.IT,{title:"推荐来源"},l.createElement(E.Z,{form:t,initialValues:C,className:"affairs-flow-basic"},l.createElement(I.Fp,{items:k})))},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.basicFormRef,r=t.careerFormRef,i=e.bank_info,l=void 0===i?{}:i,c=Array.isArray(e.work_experience)&&e.work_experience.length>0?e.work_experience.map((function(e){return{employer:e.employer,position:e.position,certifier_name:e.certifier_name,proof_phone:e.proof_phone,work_time:e.work_start_time&&e.work_end_time?[A()(String(e.work_start_time)),A()(String(e.work_end_time))]:void 0}})):[{employer:void 0,position:void 0,certifier_name:void 0,proof_phone:void 0,work_time:void 0}];a&&a.current.setFieldsValue({identity_certificate_type:e.identity_certificate_type||h.UZk.idCard,identity_card_id:e.identity_card_id||void 0,identity_card_front:{keys:n().get(e,"identity_card_front")?[n().get(e,"identity_card_front")]:[],urls:n().get(e,"identity_card_front_url")?[n().get(e,"identity_card_front_url")]:[]},identity_card_back:{keys:n().get(e,"identity_card_back")?[n().get(e,"identity_card_back")]:[],urls:n().get(e,"identity_card_back_url")?[n().get(e,"identity_card_back_url")]:[]},identity_card_in_hand:{keys:n().get(e,"identity_card_in_hand")?[n().get(e,"identity_card_in_hand")]:[],urls:n().get(e,"identity_card_in_hand_url")?[n().get(e,"identity_card_in_hand_url")]:[]},health_certificate_type:e.health_certificate_type||h.UZk.health,health_certificate_no:e.health_certificate_no||void 0,health_certificate:{keys:n().get(e,"health_certificate")?[n().get(e,"health_certificate")]:[],urls:n().get(e,"health_certificate_url")?[n().get(e,"health_certificate_url")]:[]},health_certificate_back:{keys:n().get(e,"health_certificate_back")?[n().get(e,"health_certificate_back")]:[],urls:n().get(e,"health_certificate_back_url")?[n().get(e,"health_certificate_back_url")]:[]},health_certificate_in_hand:{keys:n().get(e,"health_certificate_in_hand")?[n().get(e,"health_certificate_in_hand")]:[],urls:n().get(e,"health_certificate_in_hand_url")?[n().get(e,"health_certificate_in_hand_url")]:[]},drive_certificate_type:e.drive_certificate_type||h.UZk.drive,drive_certificate_no:e.drive_certificate_no||void 0,drive_certificate_front:{keys:n().get(e,"drive_certificate_front")?[n().get(e,"drive_certificate_front")]:[],urls:n().get(e,"drive_certificate_front_url")?[n().get(e,"drive_certificate_front_url")]:[]},drive_certificate_back:{keys:n().get(e,"drive_certificate_back")?[n().get(e,"drive_certificate_back")]:[],urls:n().get(e,"drive_certificate_back_url")?[n().get(e,"drive_certificate_back_url")]:[]},drive_certificate_in_hand:{keys:n().get(e,"drive_certificate_in_hand")?[n().get(e,"drive_certificate_in_hand")]:[],urls:n().get(e,"drive_certificate_in_hand_url")?[n().get(e,"drive_certificate_in_hand_url")]:[]},name:e.name||void 0,phone:e.phone||void 0,gender_id:e.gender_id||void 0,national:e.national||void 0,born_in:e.born_in?A()(String(e.born_in)):"",marital_status:e.marital_status||void 0,work_address:{province:e.work_province_code?Number(e.work_province_code):void 0,city:e.work_city_code?Number(e.work_city_code):void 0},native_place:e.native_place||void 0,often_address:e.often_address||void 0,emergency_contact:e.emergency_contact||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,work_email:e.work_email||void 0,email:e.email||void 0,telephone:e.telephone||void 0,height:e.height||void 0,weight:e.weight||void 0,interest:e.interest||void 0,constellation:e.constellation||void 0,speciality:e.speciality||void 0,education:e.education,politics_status:e.politics_status||void 0,birth_place:e.birth_place||void 0,candidates_photo_list:{keys:Array.isArray(e.candidates_photo_list)?e.candidates_photo_list:[],urls:Array.isArray(e.candidates_photo_url_list)?e.candidates_photo_url_list:[]},bank_location:{province:n().get(l,"bank_location.0"),city:n().get(l,"bank_location.1")},payment_type:n().get(l,"payment_type")||h.l7E.personal,card_holder_name:n().get(l,"card_holder_name"),card_holder_bank_card_no:n().get(l,"card_holder_bank_card_no"),bank_branch:n().get(l,"bank_branch"),bank_branch_name:n().get(l,"bank_branch_name"),bank_card_front:{keys:n().get(l,"bank_card_front")?[l.bank_card_front]:[],urls:n().get(l,"bank_card_front_url")?[l.bank_card_front_url]:[]},collect_protocol:{keys:n().get(l,"collect_protocol",[]),urls:n().get(l,"collect_protocol_url",[])},collect_id_card_no:n().get(l,"collect_id_card_no"),highest_education:e.highest_education||void 0,professional:e.professional,language_level:e.language_level,academy_list:Array.isArray(e.academy_list)&&e.academy_list.length>0?e.academy_list.map((function(e){return{institution_name:e.institution_name||void 0,education:e.education||void 0,profession:e.profession||void 0,time:[e.start_time?A()(e.start_time):void 0,e.end_time?A()(e.end_time):void 0]}})):[{institution_name:void 0,education:void 0,profession:void 0,time:[]}],degree:{keys:Array.isArray(e.degree)?e.degree:[],urls:Array.isArray(e.degree_url)?e.degree_url:[]},certificate_photo_list:{keys:Array.isArray(e.certificate_photo_list)?e.certificate_photo_list:[],urls:Array.isArray(e.certificate_photo_url_list)?e.certificate_photo_url_list:[]},other_certificate_photo_list:{keys:Array.isArray(e.other_certificate_photo_list)?e.other_certificate_photo_list:[],urls:Array.isArray(e.other_certificate_photo_url_list)?e.other_certificate_photo_url_list:[]},application_channel_id:e.application_channel_id||h.n_7.other,application_company_name:e.application_company_name||void 0,referrer_identity_no:e.referrer_identity_no||void 0,referrer_name:e.referrer_name||void 0,referrer_phone:e.referrer_phone||void 0,application_platform:e.application_platform||void 0,transfer_sign_platform:e.transfer_sign_platform||void 0,transfer_sign_supplier:e.transfer_sign_supplier||void 0,transfer_sign_post:e.transfer_sign_post||void 0}),r&&r.current.setFieldsValue({entry_date:e.entry_date?A()(String(e.entry_date)):void 0,regular_date:e.regular_date?A()(String(e.regular_date)):void 0,work_experience:c})},ne="dPGes4URIHCf8xO26TAF",ie="YpqHHyUsN1sGJXRuvteS",le="ZiruhqO0peAT2eIWnxKW",ce=(0,l.forwardRef)((function(e,t){var a=e.setTabKey,r=e.onChangeTabKeys,n=e.employeeDetail,i=(e.dispatch,e.employeeId),c=e.onSave,o=e.onResetStaff,m=e.onBack,s=e.specialFields,d=E.Z.useForm(),_=(0,u.Z)(d,1)[0],p=(0,l.useState)(void 0),f=(0,u.Z)(p,2),y=f[0],v=f[1];(0,l.useImperativeHandle)(t,(function(){return _}));var b=function(){_.validateFields().then((function(){a(h.eRk.work),r(h.eRk.work)})).catch((function(e){var t="born_in"===e.errorFields[0].name[0]?["national"]:e.errorFields[0].name;_.scrollToField(t,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},k=function(){_.validateFields().then((function(e){c&&c(e)})).catch((function(e){var t="born_in"===e.errorFields[0].name[0]?["national"]:e.errorFields[0].name;_.scrollToField(t,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},w=function(){_.resetFields(),v((0,Z.xv)(32)),re({},{basicFormRef:{current:_}})},I=function(){v((0,Z.xv)(32)),re(n,{basicFormRef:{current:_}})},C={form:_,employeeDetail:n,onResetStaff:o,resetState:y,employeeId:i,specialFields:s};return l.createElement(l.Fragment,null,l.createElement("div",{className:ne},l.createElement("div",{className:ie},l.createElement(O,C),l.createElement(K,C),l.createElement(X,C),l.createElement(Q,C),l.createElement(ae,C)),i?l.createElement("div",{style:{margin:"5px 0"},className:le},l.createElement(g.Z,{style:{marginRight:10},onClick:m},"返回"),l.createElement(g.Z,{style:{marginRight:10},onClick:I},"重置"),l.createElement(g.Z,{onClick:k,type:"primary"},"提交")):l.createElement("div",{style:{margin:"5px 0"},className:le},l.createElement(g.Z,{onClick:w,style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:b,type:"primary"},"下一步"))))})),oe=ce,me=a(96486),se=a.n(me),de=(a(1868),a(12028)),_e=(a(88775),a(12010)),ue=function(e){var t=e.value,a=e.onChange,r=e.multiple,n=void 0!==r&&r,i=e.departmentTree,c={treeData:i,treeDefaultExpandAll:!0,value:i.length>0?t:void 0,filterTreeNode:function(e,t){return!(!e.trim()||!t||-1===t.title.trim().indexOf(e.trim()))},onChange:a,showSearch:!0,allowClear:!0,multiple:n,placeholder:"请选择",dropdownMatchSelectWidth:!1,style:{width:"100%"}};return l.createElement(_e.Z,c)},pe=w.Z.Option,fe=(0,i.connect)((function(e){return{staffs:e.applicationCommon.staffs}}))((function(e){var t=e.staffs,a=e.namespace,r=void 0===a?"default":a,i=e.departmentId,c=e.dispatch,o=e.value,m=e.onChange;(0,l.useEffect)((function(){c(i?{type:"applicationCommon/fetchStaffs",payload:{namespace:r,departmentId:i}}:{type:"applicationCommon/resetStaffs",payload:{namespace:r}})}),[c,i,r]);var s=n().get(t[r],"data",[]);return l.createElement(w.Z,{placeholder:"请选择岗位",allowClear:!0,showSearch:!0,value:o,onChange:m,optionFilterProp:"children",dropdownMatchSelectWidth:!1},s.map((function(e){return l.createElement(pe,{value:e._id,key:e._id,job_id:e.job_id},n().get(e,"job_info.name","--"),"(",n().get(e,"organization_count",0),")")})))})),ye=a(45430);function he(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?he(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):he(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ge={labelCol:{span:6},wrapperCol:{span:18}},Ee={labelCol:{span:14},wrapperCol:{span:8}},Ze=function(e){var t=e.form,a=e.field,r=e.fieldKey,n=e.departmentTree,i=(0,l.useRef)((0,Z.xv)(32)),o=t.getFieldValue("department_job_relation_list")||[],s=o[r]||{},d=(0,l.useState)(),p=(0,u.Z)(d,2),f=p[0],y=p[1];(0,l.useEffect)((function(){s&&s.department_id?y(s.department_id):y()}),[s]);return l.createElement(l.Fragment,null,l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"所属部门",name:[a.name,"department_id"],fieldKey:[a.fieldKey,r],rules:[{required:!0,message:"请选择部门"}]},ge),l.createElement(ue,{departmentTree:n,onChange:function(e){y(e);var a=(0,_.Z)(o);a[r].department_id=e,a[r].department_job_relation_id=void 0,a[r].major_job_id=void 0,t.setFieldsValue({department_job_relation_list:a})}}))),l.createElement(Y.Z,{span:6},l.createElement(E.Z.Item,(0,c.Z)({label:"岗位",name:[a.name,"department_job_relation_id"],fieldKey:[a.fieldKey,r],rules:[{required:!0,message:"请选择岗位"}]},ge),l.createElement(fe,{onChange:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,_.Z)(o),i=a.props?a.props.job_id:void 0;n[r].department_job_relation_id=e,n[r].major_job_id=i,t.setFieldsValue({department_job_relation_list:n})},departmentId:f,namespace:i.current}))),l.createElement(Y.Z,{span:4},l.createElement(E.Z.Item,(0,c.Z)({label:"设置为主岗位",name:[a.name,"job_flag"],fieldKey:[a.fieldKey,r]},Ee),l.createElement(de.Z,{checked:s.job_flag||!1,onChange:function(e){var a=(0,_.Z)(o);if(!s.department_job_relation_id)return a[r]=ve(ve({},s),{},{job_flag:!1}),t.setFieldsValue({department_job_relation_list:a}),m.ZP.error("请选择岗位");e?(a=a.map((function(e){return ve(ve({},e),{},{job_flag:!1})})))[r]=ve(ve({},s),{},{job_flag:e}):a[r]=ve(ve({},s),{},{job_flag:e}),t.setFieldsValue({department_job_relation_list:a})}}))),s.job_flag&&ye.ZP.canOperateEmployeeCreateIsOrganization()&&l.createElement(Y.Z,{span:4},l.createElement(E.Z.Item,(0,c.Z)({label:"不计入占编数统计",name:[a.name,"is_organization"],fieldKey:[a.fieldKey,r]},Ee),l.createElement(de.Z,{onChange:function(e){var a=(0,_.Z)(o);a[r].is_organization=!e,t.setFieldsValue({department_job_relation_list:a})},checked:!s.is_organization||!1}))))},be={labelCol:{span:6},wrapperCol:{span:18}},ke=w.Z.Option,we=(0,l.forwardRef)((function(e,t){var a=e.fileType,r=void 0===a?h.Tv5.staff:a,i=e.setTabKey,o=e.onChangeTabKeys,s=e.departmentTree,d=e.employeeId,p=(e.dispatch,e.employeeDetail),f=void 0===p?{}:p,y=e.onSave,v=e.onBack,Z=E.Z.useForm(),b=(0,u.Z)(Z,1)[0],k=s.default,C=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){if(t.node)return{title:t.node.name,value:t.node._id,key:t.node._id,children:e(t.leaf)}}))}(void 0===k?[]:k),F=[l.createElement(E.Z.Item,(0,c.Z)({label:"档案类型",name:"profile_type",rules:[{required:!0,message:"请选择档案类型"}]},be),l.createElement(w.Z,{placeholder:"请选择档案类型"},r===h.Tv5.second&&l.createElement(ke,{value:h.Tv5.second},h.Tv5.description(h.Tv5.second)),r===h.Tv5.staff&&l.createElement(ke,{value:h.Tv5.staff},h.Tv5.description(h.Tv5.staff))))];(0,l.useImperativeHandle)(t,(function(){return b}));var T=function(){i(h.eRk.basic)},O=function(){b.validateFields().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.department_job_relation_list,a=void 0===t?[]:t,r=se().uniqWith(a.map((function(e){return e.department_job_relation_id})),se().isEqual),n=a.map((function(e){return e.job_flag}));return n.includes(!0)?r.length!==a.length?m.ZP.error("选择的部门和岗位不能重复"):(i(h.eRk.contract),void o(h.eRk.contract)):m.ZP.error("请设置主岗")})).catch((function(e){b.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},P=function(){b.validateFields().then((function(e){var t=e.department_job_relation_list,a=void 0===t?[]:t,r=se().uniqWith(a.map((function(e){return e.department_job_relation_id})),se().isEqual);return a.map((function(e){return e.job_flag})).includes(!0)?r.length!==a.length?m.ZP.error("选择的部门和岗位不能重复"):void(y&&y(e)):m.ZP.error("请设置主岗")})).catch((function(e){b.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},j=function(){var e=n().get(f,"pluralism_department_job_relation_list",[]).map((function(e){return{department_id:n().get(e,"department_info._id"),major_job_id:n().get(e,"job_info._id"),department_job_relation_id:e._id,job_flag:!1,is_organization:!0}})),t=[{department_id:n().get(f,"department_job_relation_info.department_info._id"),major_job_id:n().get(f,"department_job_relation_info.job_info._id"),department_job_relation_id:n().get(f,"department_job_relation_info._id"),job_flag:!0,is_organization:n().get(f,"is_organization")}].concat((0,_.Z)(e));return{department_job_relation_list:f.department_job_relation_info?t:[{department_id:void 0,major_job_id:void 0,department_job_relation_id:void 0,job_flag:!0,is_organization:!0}],profile_type:f.profile_type||h.Tv5.staff}};return l.createElement(l.Fragment,null,l.createElement("div",{className:ne},l.createElement("div",{className:ie},l.createElement(E.Z,{form:b,initialValues:j(),className:"affairs-flow-basic"},l.createElement(I.Fp,{items:F}),l.createElement(E.Z.List,{name:"department_job_relation_list"},(function(e,t){var a=t.add,r=t.remove,n={department_id:void 0,major_job_id:void 0,department_job_relation_id:void 0,job_flag:!1,is_organization:!0};return l.createElement(l.Fragment,null,e.map((function(t,i){return l.createElement(U.Z,{key:i},l.createElement(Ze,{departmentTree:C,form:b,field:t,fieldKey:i}),l.createElement(Y.Z,{span:2},e.length>1?l.createElement(g.Z,{onClick:function(){return r(t.name)},shape:"circle",icon:l.createElement(B.Z,null),style:{marginRight:10}}):"",i===e.length-1?l.createElement(g.Z,{onClick:function(){return a(n)},shape:"circle",icon:l.createElement(H.Z,null)}):""))})))})))),d?l.createElement("div",{className:le},l.createElement(g.Z,{onClick:v,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:function(){return b.setFieldsValue(j())},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:P,type:"primary"},"提交")):l.createElement("div",{className:le},l.createElement(g.Z,{onClick:function(){return b.setFieldsValue(j())},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:T,type:"primary",style:{marginRight:10}},"上一步"),l.createElement(g.Z,{onClick:O,type:"primary"},"下一步"))))})),Ie=we,Ce=a(94315),Fe=a.n(Ce),Te=(a(21316),a(75443)),Oe=a(90066),Pe=function(e){var t=e.value,a=void 0===t?h.Vzn.year:t,r=e.onChange,n=e.disabled,i=e.onChangePopconfirm,c=(0,l.useState)(h.Vzn.year),o=(0,u.Z)(c,2),m=o[0],s=o[1],d=function(){r&&r(m),i&&i()},_=function(){s(a)};return function(){if(n)return l.createElement("div",{className:Oe.Z["employee-common-popconfirm-radio-wrap"]},l.createElement("span",null,h.Vzn.description(a)));var e=l.createElement(R.ZP.Group,{value:m,onChange:function(e){return s(e.target.value)}},l.createElement(R.ZP,{className:Oe.Z["employee-popconfirm-radio-style"],value:h.Vzn.year},h.Vzn.description(h.Vzn.year)),l.createElement(R.ZP,{className:Oe.Z["employee-popconfirm-radio-style"],value:h.Vzn.month},h.Vzn.description(h.Vzn.month)),l.createElement(R.ZP,{className:Oe.Z["employee-popconfirm-radio-style"],value:h.Vzn.day},h.Vzn.description(h.Vzn.day)));return l.createElement(Te.Z,{icon:"",className:":global",title:e,onConfirm:d,onCancel:_},l.createElement("div",{className:Oe.Z["app-comp-employee-compareType"]},l.createElement("span",null,h.Vzn.description(a))))}()};function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}var Re={labelCol:{span:8},wrapperCol:{span:16}},Se={labelCol:{span:3},wrapperCol:{span:21}},Ae=w.Z.Option,xe=(0,l.forwardRef)((function(e,t){var a=e.setTabKey,r=e.onChangeTabKeys,n=e.employeeId,i=(e.dispatch,e.employeeDetail),o=void 0===i?{}:i,m=e.newContractInfo,d=void 0===m?{}:m,_=e.onSave,p=e.onBack,f=E.Z.useForm(),y=(0,u.Z)(f,1)[0];(0,l.useImperativeHandle)(t,(function(){return y}));var Z=function(e){var t,a,r=d.sign_cycle||1,n=d.sign_cycle_unit||h.Vzn.year;if(d.current_start_at&&(t=A()(String(d.current_start_at))),(Fe().not.existy(d.current_start_at)||Fe().empty(d.current_start_at))&&d.signed_date&&(t=A()(String(d.signed_date))),d.current_end_at&&(a=A()(String(d.current_end_at))),(Fe().not.existy(d.current_end_at)||Fe().empty(d.current_end_at))&&t&&r&&n){var i=String(t);Number(n)===h.Vzn.year&&(i=A()(String(t)).add(r,"years")),Number(n)===h.Vzn.month&&(i=A()(String(t)).add(r,"months")),Number(n)===h.Vzn.day&&(i=A()(String(t)).add(r,"days")),a=A()(i)}var l={sign_type:d.sign_type||h.B1m.paper,signed_date:o.signed_date?A()(String(o.signed_date)):void 0,current_start_at:t,current_end_at:a,contract_belong_id:v.P6.dotOptimal(d,"contract_belong_info._id",void 0),contract_type:d.contract_type||h.RJY.labor,contract_photo_list:{keys:Array.isArray(d.contract_photo_list)?d.contract_photo_list:[],urls:Array.isArray(d.contract_photo_url_list)?d.contract_photo_url_list:[]},sign_cycle:r,sign_cycle_unit:n,employee_type:v.P6.dotOptimal(o,"employee_type",void 0)};if(e){var c=v.P6.dotOptimal(o,"work_label",[]).filter((function(e){return e!==h.ap1.partTime}));l.work_label=c[0]}return l};(0,l.useEffect)((function(){y.setFieldsValue(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Z()))}),[y,d]),(0,l.useEffect)((function(){y.setFieldsValue({work_label:Array.isArray(o.work_label)?o.work_label:[]})}),[y,o]);var b=function(){a(h.eRk.work)},k=function(){y.validateFields().then((function(){a&&a(h.eRk.career),r(h.eRk.career)})).catch((function(e){y.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},C=function(){y.validateFields().then((function(e){_&&_(e)})).catch((function(e){y.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(e&&t&&a){var r=A()(e).add(-1,"days"),n=r;return Number(a)===h.Vzn.year&&(n=A()(r).add(t,"years")),Number(a)===h.Vzn.month&&(n=A()(r).add(t,"months")),Number(a)===h.Vzn.day&&(n=A()(r).add(t,"days")),void y.setFieldsValue({current_end_at:n})}y.setFieldsValue({current_end_at:void 0})},T=function(e){var t=y.getFieldValue("current_start_at"),a=y.getFieldValue("sign_cycle_unit");F(t,e,a)},O=function(e){var t=y.getFieldValue("current_start_at"),a=y.getFieldValue("sign_cycle");F(t,a,e)},R=[l.createElement(E.Z.Item,(0,c.Z)({label:"签约类型",name:"sign_type",rules:[{required:!0,message:"请选择签约类型"}]},Re),l.createElement(w.Z,{allowClear:!0,placeholder:"请选择签约类型"},l.createElement(Ae,{value:h.B1m.paper},h.B1m.description(h.B1m.paper)))),l.createElement(E.Z.Item,(0,c.Z)({label:"首合同生效日期",name:"signed_date",rules:[{required:!0,message:"请选择日期"}]},Re),l.createElement(j.Z,{allowClear:!0,disabledDate:function(e){var t=y.getFieldValue("current_start_at");if(t)return e&&e>A()(t).endOf("day")},onChange:function(e){var t=y.getFieldValue("sign_cycle"),a=y.getFieldValue("sign_cycle_unit");F(e,t,a),e?y.setFieldsValue({current_start_at:e}):y.setFieldsValue({current_start_at:void 0})}})),l.createElement(E.Z.Item,(0,c.Z)({label:"当前合同生效日期",name:"current_start_at",rules:[{required:!0,message:"请选择日期"}]},Re),l.createElement(j.Z,{allowClear:!0,disabledDate:function(e){var t=y.getFieldValue("signed_date"),a=y.getFieldValue("current_end_at");return t&&a?e&&(e<A()(t).endOf("day").subtract(1,"d")||e>A()(a).endOf("day")):t?e&&e<A()(t):a?e&&e>A()(a).endOf("day"):void 0},onChange:function(e){var t=y.getFieldValue("sign_cycle"),a=y.getFieldValue("sign_cycle_unit");F(e,t,a)}})),l.createElement(E.Z.Item,(0,c.Z)({key:"sign_cycle_wrap",label:l.createElement("span",{className:"form-item-required"},"签约周期"),shouldUpdate:!0},Re),(function(e){var t=(0,e.getFieldValue)("sign_cycle_unit"),a=l.createElement(w.Z,{onChange:T},Array.from({length:12},(function(e,t){return l.createElement(Ae,{key:t,value:t+1},t+1)})));return t===h.Vzn.day&&(a=l.createElement(P.Z,{placeholder:"请输入签约周期",precision:0,min:1,max:365,style:{width:"70%"},onChange:T})),t===h.Vzn.month&&(a=l.createElement(w.Z,{onChange:T,placeholder:"请选择签约周期"},Array.from({length:12},(function(e,t){return l.createElement(Ae,{key:t,value:t+1},t+1)})))),l.createElement(U.Z,null,l.createElement(Y.Z,{span:20},l.createElement(E.Z.Item,{name:"sign_cycle",rules:[{required:!0,message:"请选择签约周期"}]},a)),l.createElement(Y.Z,{span:4},l.createElement(E.Z.Item,{name:"sign_cycle_unit"},l.createElement(Pe,{onChange:O,onChangePopconfirm:function(){return y.setFieldsValue({sign_cycle:1})}}))))})),l.createElement(E.Z.Item,(0,c.Z)({label:"当前合同结束日期",name:"current_end_at",rules:[{required:!0,message:"请选择日期"}]},Re),l.createElement(j.Z,{allowClear:!0,disabledDate:function(e){var t=y.getFieldValue("current_start_at");if(t)return e&&e<A()(t)}})),l.createElement(E.Z.Item,(0,c.Z)({label:"合同甲方",name:"contract_belong_id",rules:[{required:!0,message:"请选择合同甲方"}]},Re),l.createElement(x.rf,{placeholder:"请选择合同归属",optionFilterProp:"children",isElectronicSign:"",showSearch:!0,state:h._zp.on,initialCompanies:v.P6.dotOptimal(d,"contract_belong_info",{}),type:h.rPv.staffProfile})),l.createElement(E.Z.Item,(0,c.Z)({label:"合同类型",name:"contract_type",rules:[{required:!0,message:"请选择合同类型"}]},Re),l.createElement(w.Z,{placeholder:"请选择合同类型"},l.createElement(Ae,{value:h.RJY.labor},h.RJY.description(h.RJY.labor)))),l.createElement(E.Z.Item,(0,c.Z)({label:"员工类型",name:"employee_type"},Re),l.createElement(w.Z,{placeholder:"请选择员工类型"},l.createElement(Ae,{value:h.sgG.fullTime},h.sgG.description(h.sgG.fullTime)),l.createElement(Ae,{value:h.sgG.partTime},h.sgG.description(h.sgG.partTime)),l.createElement(Ae,{value:h.sgG.intern},h.sgG.description(h.sgG.intern)))),l.createElement(E.Z.Item,(0,c.Z)({label:"员工标签",name:"work_label"},Re),l.createElement(w.Z,{placeholder:"请选择员工标签"},l.createElement(Ae,{value:h.ap1.probation},h.ap1.description(h.ap1.probation)),l.createElement(Ae,{value:h.ap1.correct},h.ap1.description(h.ap1.correct)))),{span:24,render:l.createElement(E.Z.Item,(0,c.Z)({label:"合同照片",name:"contract_photo_list"},Se),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"Contract"}))}];d._id&&R.splice(7,0,l.createElement(E.Z.Item,(0,c.Z)({label:"合同编号",key:"contract_no"},Re),d.contract_no||"--"));return l.createElement(l.Fragment,null,l.createElement("div",{className:ne},l.createElement("div",{className:ie},l.createElement(E.Z,{form:y,initialValues:Z(!0),className:"affairs-flow-basic"},l.createElement(I.Fp,{items:R}))),n?l.createElement("div",{className:le},l.createElement(g.Z,{onClick:p,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:function(){return y.resetFields()},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:C,type:"primary"},"提交")):l.createElement("div",{className:le},l.createElement(g.Z,{onClick:function(){return y.resetFields()},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:b,type:"primary",style:{marginRight:10}},"上一步"),l.createElement(g.Z,{onClick:k,type:"primary"},"下一步"))))})),Ve=xe,qe=(a(19597),a(27279)),Ne=j.Z.RangePicker,De=qe.Z.Panel,Ke={labelCol:{span:8},wrapperCol:{span:16}},ze=(0,l.forwardRef)((function(e,t){var a=e.setTabKey,r=e.onChangeTabKeys,n=(e.onSubmit,e.employeeId),i=(e.dispatch,e.employeeDetail),o=void 0===i?{}:i,m=e.onSave,s=e.onBack,_=E.Z.useForm(),p=(0,u.Z)(_,1)[0];(0,l.useEffect)((function(){Object.keys(o).length>0&&p.resetFields()}),[p,o]),(0,l.useImperativeHandle)(t,(function(){return p}));var f=function(){var e=(0,d.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(h.eRk.contract),r(h.eRk.contract);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){p.validateFields().then((function(e){m&&m(e)})).catch((function(e){p.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},Z=[l.createElement(E.Z.Item,(0,c.Z)({label:"入职日期",name:"entry_date",rules:[{required:!0,message:"请选择入职日期"}]},Ke),l.createElement(j.Z,{disabledDate:function(e){return e>A()().endOf("day")},onChange:function(e){e?p.setFieldsValue({regular_date:A()(e).add(3,"M").subtract(1,"d")}):p.setFieldsValue({regular_date:void 0})}})),l.createElement(E.Z.Item,(0,c.Z)({label:"预计转正日期",name:"regular_date",initialValue:o.regular_date?A()(String(o.regular_date)):void 0,rules:[{required:!0,message:"请选择转正日期"}]},Ke),l.createElement(j.Z,{disabledDate:function(e){var t=p.getFieldValue("entry_date");return e&&e<A()(t).endOf("day")}}))];o.actual_regular_date&&Z.push(l.createElement(E.Z.Item,(0,c.Z)({label:"实际转正日期"},Ke),A()(String(o.actual_regular_date)).format("YYYY-MM-DD")));var k=Array.isArray(o.work_experience)&&o.work_experience.length>0?o.work_experience.map((function(e){return{employer:e.employer,position:e.position,certifier_name:e.certifier_name,proof_phone:e.proof_phone,work_time:e.work_start_time&&e.work_end_time?[A()(String(e.work_start_time)),A()(String(e.work_end_time))]:void 0}})):[{employer:void 0,position:void 0,certifier_name:void 0,proof_phone:void 0,work_time:void 0}],w={entry_date:o.entry_date?A()(String(o.entry_date)):void 0,work_experience:k};return l.createElement(l.Fragment,null,l.createElement("div",{className:ne},l.createElement("div",{className:ie},l.createElement(E.Z,{form:p,className:"affairs-flow-basic",initialValues:w},l.createElement(I.IT,{title:"在职记录"},l.createElement(I.Fp,{items:Z})),l.createElement(qe.Z,null,l.createElement(De,{header:"工作经历"},l.createElement(E.Z.List,{name:"work_experience"},(function(e,t){var a=t.add,r=t.remove;return l.createElement(l.Fragment,null,e.map((function(t,n){return l.createElement(U.Z,{key:n},l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"工作单位",name:[t.name,"employer"],fieldKey:[t.fieldKey,n]},Ke),l.createElement(b.Z,{placeholder:"请输入工作单位"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"曾任职岗位",name:[t.name,"position"],fieldKey:[t.fieldKey,n]},Ke),l.createElement(b.Z,{placeholder:"请输入职位"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"证明人姓名",name:[t.name,"certifier_name"],fieldKey:[t.fieldKey,n]},Ke),l.createElement(b.Z,{placeholder:"请输入证明人姓名"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"证明人电话",name:[t.name,"proof_phone"],fieldKey:[t.fieldKey,n]},Ke),l.createElement(b.Z,{placeholder:"请输入证明人电话"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"工作时间",name:[t.name,"work_time"],fieldKey:[t.fieldKey,n]},Ke),l.createElement(Ne,null))),l.createElement(Y.Z,{span:8},e.length>1?l.createElement(g.Z,{onClick:function(){return r(t.name)},shape:"circle",icon:l.createElement(B.Z,null),style:{margin:"0 4px"}}):"",n===e.length-1?l.createElement(g.Z,{onClick:function(){return a({employer:void 0,position:void 0,certifier_name:void 0,proof_phone:void 0,work_time:void 0})},shape:"circle",icon:l.createElement(H.Z,null)}):""))})))})))))),n?l.createElement("div",{className:le},l.createElement(g.Z,{onClick:s,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:function(){return p.resetFields()},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:v,type:"primary"},"提交")):l.createElement("div",{className:le},l.createElement(g.Z,{onClick:function(){return p.resetFields()},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:function(){return f()},type:"primary",style:{marginRight:10}},"上一步"),l.createElement(g.Z,{onClick:function(){p.validateFields().then((function(){a(h.eRk.welfare),r(h.eRk.welfare)})).catch((function(e){p.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},type:"primary"},"下一步"))))})),Le=ze,Me=(a(55295),a(69713)),Xe=a(1870),Ue=w.Z.Option,Ye=(0,i.connect)((function(e){return{staffSocietyPlanList:e.society.staffSocietyPlanList}}))((function(e){var t=e.city,a=void 0===t?{}:t,r=e.staffSocietyPlanList,n=void 0===r?{}:r,i=e.dispatch,c=e.onChange,o=e.value;(0,l.useEffect)((function(){return a.city&&i({type:"society/fetchStaffSocietyPlanList",payload:{city:a,type:"society"}}),function(){return i({type:"society/reduceStaffSocietyPlanList",payload:{}})}}),[i,a]);var m=n.data||[];return l.createElement(w.Z,{showSearch:!0,placeholder:"请选择",onChange:function(e){c&&c(e)},allowClear:!0,value:o,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m.map((function(e,t){return l.createElement(Ue,{value:e._id,key:t,name:e.name},e.name)})))})),Be=w.Z.Option,He=(0,i.connect)((function(e){return{staffFundPlanList:e.society.staffFundPlanList}}))((function(e){var t=e.city,a=void 0===t?{}:t,r=e.staffFundPlanList,n=void 0===r?{}:r,i=e.dispatch,c=e.onChange,o=e.value;(0,l.useEffect)((function(){return a.city&&i({type:"society/fetchStaffSocietyPlanList",payload:{city:a,type:"fund"}}),function(){return i({type:"society/reduceStaffFundPlanList",payload:{}})}}),[i,a]);var m=n.data||[];return l.createElement(w.Z,{showSearch:!0,placeholder:"请选择",onChange:function(e){c&&c(e)},allowClear:!0,value:o,optionFilterProp:"children",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m.map((function(e,t){return l.createElement(Be,{value:e._id,key:t,name:e.name},e.name)})))})),Ge={labelCol:{span:10},wrapperCol:{span:14}},We={labelCol:{span:5},wrapperCol:{span:19}},$e={labelCol:{span:10},wrapperCol:{span:14}},Je=(0,l.forwardRef)((function(e,t){var a=e.setTabKey,r=e.onChangeTabKeys,i=e.staffSocietyPlanList,o=void 0===i?{}:i,s=e.staffFundPlanList,_=void 0===s?{}:s,p=e.formBasic,f=void 0===p?{}:p,Z=e.employeeId,b=(e.dispatch,e.employeeDetail),k=void 0===b?{}:b,w=e.onSave,C=e.onBack,F=e.onSubmit,T=E.Z.useForm(),O=(0,u.Z)(T,1)[0],S=(0,l.useState)(Number(k.is_salary_split)),V=(0,u.Z)(S,2),q=V[0],N=V[1],D=(0,l.useState)({}),K=(0,u.Z)(D,2),z=K[0],L=K[1],M=(0,l.useState)({}),X=(0,u.Z)(M,2),B=X[0],H=X[1];(0,l.useImperativeHandle)(t,(function(){return O})),(0,l.useEffect)((function(){Object.keys(k).length>0&&O&&O.resetFields()}),[O,k]);var G,W=function(e,t,a){var r=t.province,n=t.city;return n&&!r?a("请选择省份"):r&&!n?a("请选择城市"):void a()},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(Object.keys(e.social_security_payment_plac).length<1||!e.social_security_payment_plac.province||!e.social_security_payment_plac.city)&&(e.old_age_insurance||e.medical_insurance||e.unemployment_insurance||e.occupational_insurance||e.birth_insurance)?(m.ZP.error("请选择社保缴纳地"),!1):!((Object.keys(e.provident_fund_payment_plac).length<1||!e.provident_fund_payment_plac.province||!e.provident_fund_payment_plac.city)&&e.provident_fund)||(m.ZP.error("请选择公积金缴纳地"),!1)},J=function(){a(h.eRk.career)},Q=function(){N(Number(k.is_salary_split)),O.resetFields()},ee=function(){O.validateFields().then((function(e){$(e)&&(r(h.eRk.costCenter),a(h.eRk.costCenter))})).catch((function(e){O.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},te=function(){O.validateFields().then((function(e){$(e)&&F&&F()})).catch((function(e){O.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},ae=function(){O.validateFields().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=$(e);t&&w&&w(e)})).catch((function(e){O.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},re=function(){O.validateFields(["old_age_insurance","medical_insurance","unemployment_insurance","occupational_insurance","birth_insurance"])},ce=function(){var e=(0,d.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.setFieldsValue({insurance_program_id:void 0});case 2:re();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,d.Z)(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.setFieldsValue({provident_fund_program_id:void 0});case 2:O.validateFields(["provident_fund"]);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=(0,d.Z)(y().mark((function e(t){var a,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,L({});case 3:return e.abrupt("return",re());case 4:a=o.data,r=a.find((function(e){return e._id===t}))||{},Object.keys(r).length>0&&(O.setFieldsValue({old_age_insurance:de(n().get(r,"old_age_insurance.lower_limit")),medical_insurance:de(n().get(r,"medical_insurance.lower_limit")),unemployment_insurance:de(n().get(r,"unemployment_insurance.lower_limit")),occupational_insurance:de(n().get(r,"occupational_insurance.lower_limit")),birth_insurance:de(n().get(r,"birth_insurance.lower_limit"))}),L(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,d.Z)(y().mark((function e(t){var a,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,H({});case 3:return e.abrupt("return",O.validateFields(["provident_fund"]));case 4:a=_.data,r=(void 0===a?[]:a).find((function(e){return e._id===t})),Object.keys(r).length>0&&(O.setFieldsValue({provident_fund:de(n().get(r,"provident_fund.lower_limit"))}),H(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=function(e){return 0===e?0:e?e/100:void 0},_e=function(e){return 0===e?"0%":e?"".concat(e,"%"):"--%"},ue=function(e){if(f.current){var t=f.current.getFieldValue("signedDate");if(t){var a=A()(t).format("YYYY-MM");return e&&e<A()(a)}}return!1},pe=function(e,t){var a=e.upper_limit,r=e.lower_limit;return a||r?(r||0===r)&&100*t<r?a||0===a?Promise.reject("区间范围为".concat(r/100," - ").concat(a/100)):Promise.reject("区间范围为大于".concat(r/100)):(a||0===a)&&100*t>a?r||0===r?Promise.reject("区间范围为".concat(r/100," - ").concat(a/100)):Promise.reject("区间范围为小于".concat(a/100)):Promise.resolve():Promise.resolve()},fe=function(e){return e||0===e?h.fbc.exchangePriceToYuan(e):void 0},ye=[l.createElement(E.Z.Item,(0,c.Z)({label:"工资是否拆分",name:"is_salary_split",rules:[{required:!0,message:"请选择是否拆分"}]},Ge),l.createElement(R.ZP.Group,{onChange:function(e){N(Boolean(e.target.value)),O&&O.setFieldsValue({split_base:void 0})}},l.createElement(R.ZP,{value:!0},"是"),l.createElement(R.ZP,{value:!1},"否"))),l.createElement(E.Z.Item,(0,c.Z)({label:"拆分基数",name:"split_base",rules:[{required:q,message:"请填写拆分基数"}]},Ge),l.createElement(P.Z,{disabled:!q,min:1,style:{width:200}}))],he=[{key:"social_security_payment_plac",span:16,render:l.createElement(E.Z.Item,(0,c.Z)({label:"社保缴纳地",name:"social_security_payment_plac",rules:[{validator:W}]},We),l.createElement(x.TJ,{isHideArea:!0,onChange:ce,style:{province:{width:150,marginRight:20},city:{width:180}}}))},l.createElement(E.Z.Item,{key:"social_security_empty"}),l.createElement(E.Z.Item,(0,c.Z)({label:z.name?(G=l.createElement("div",{style:{minWidth:"200px"}},l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"险种"),l.createElement(Y.Z,{span:"8"},"公司"),l.createElement(Y.Z,{span:"8"},"个人")),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"养老"),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"old_age_insurance.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"old_age_insurance.person_percent")))),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"医疗"),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"medical_insurance.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"medical_insurance.person_percent")))),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"失业"),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"unemployment_insurance.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"unemployment_insurance.person_percent")))),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"生育"),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"occupational_insurance.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"occupational_insurance.person_percent")))),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"工伤"),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"birth_insurance.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"birth_insurance.person_percent")))),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"公积金"),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"provident_fund.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(z,"provident_fund.person_percent"))))),l.createElement(l.Fragment,null,l.createElement("span",{style:{marginRight:4}},"参保方案名称"),l.createElement(Me.Z,{placement:"top",title:G},l.createElement(Xe.Z,null)))):"参保方案名称",shouldUpdate:function(e,t){return e.social_security_payment_plac!==t.social_security_payment_plac}},Ge),(function(e){var t=(0,e.getFieldValue)("social_security_payment_plac")||{};return l.createElement(E.Z.Item,{name:"insurance_program_id"},l.createElement(Ye,{city:t,onChange:me}))})),l.createElement(E.Z.Item,(0,c.Z)({label:"社保缴费开始月份",name:"insurance_began_month"},Ge),l.createElement(j.Z,{picker:"month",disabledDate:ue})),l.createElement(E.Z.Item,(0,c.Z)({label:"养老保险基数",name:"old_age_insurance",rules:[{validator:function(e,t){var a=z.old_age_insurance;return pe(void 0===a?{}:a,t)}}]},Ge),l.createElement(P.Z,{min:0,placeholder:"请输入养老缴纳基数",style:{width:"100%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"医疗保险基数",name:"medical_insurance",rules:[{validator:function(e,t){var a=z.medical_insurance;return pe(void 0===a?{}:a,t)}}]},Ge),l.createElement(P.Z,{min:0,placeholder:"请输入医疗缴纳基数",style:{width:"100%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"失业保险基数",name:"unemployment_insurance",rules:[{validator:function(e,t){var a=z.unemployment_insurance;return pe(void 0===a?{}:a,t)}}]},Ge),l.createElement(P.Z,{min:0,placeholder:"请输入失业缴纳基数",style:{width:"100%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"工伤保险基数",name:"occupational_insurance",rules:[{validator:function(e,t){var a=z.occupational_insurance;return pe(void 0===a?{}:a,t)}}]},Ge),l.createElement(P.Z,{min:0,placeholder:"请输入工伤缴纳基数",style:{width:"100%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"生育保险基数",name:"birth_insurance",rules:[{validator:function(e,t){var a=z.birth_insurance;return pe(void 0===a?{}:a,t)}}]},Ge),l.createElement(P.Z,{min:0,placeholder:"请输入生育缴纳基数",style:{width:"100%"}}))],ve=[{key:"provident_fund_payment_plac",span:16,render:l.createElement(E.Z.Item,(0,c.Z)({label:"公积金缴纳地",name:"provident_fund_payment_plac",rules:[{validator:W}]},We),l.createElement(x.TJ,{isHideArea:!0,onChange:oe,style:{province:{width:150,marginRight:20},city:{width:180}}}))},l.createElement(E.Z.Item,{key:"provident_fund_empty"}),l.createElement(E.Z.Item,(0,c.Z)({label:B.name?function(){var e=l.createElement("div",{style:{minWidth:"200px"}},l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"险种"),l.createElement(Y.Z,{span:"8"},"公司"),l.createElement(Y.Z,{span:"8"},"个人")),l.createElement(U.Z,null,l.createElement(Y.Z,{span:"8"},"公积金"),l.createElement(Y.Z,{span:"8"},_e(n().get(B,"provident_fund.company_percent"))),l.createElement(Y.Z,{span:"8"},_e(n().get(B,"provident_fund.person_percent")))));return l.createElement(l.Fragment,null,l.createElement("span",{style:{marginRight:4}},"参保方案名称"),l.createElement(Me.Z,{placement:"top",title:e},l.createElement(Xe.Z,null)))}():"参保方案名称",shouldUpdate:function(e,t){return e.provident_fund_payment_plac!==t.provident_fund_payment_plac}},Ge),(function(e){var t=(0,e.getFieldValue)("provident_fund_payment_plac")||{};return l.createElement(E.Z.Item,{name:"provident_fund_program_id"},l.createElement(He,{city:t,onChange:se}))})),l.createElement(E.Z.Item,(0,c.Z)({label:"公积金缴费开始月份",name:"provident_fund_began_month"},Ge),l.createElement(j.Z,{picker:"month",disabledDate:ue})),l.createElement(E.Z.Item,(0,c.Z)({label:"公积金基数",name:"provident_fund",rules:[{validator:function(e,t){var a=B.provident_fund;return pe(void 0===a?{}:a,t)}}]},Ge),l.createElement(P.Z,{min:0,placeholder:"请输入公积金缴纳基数",style:{width:"100%"}}))],ge=[l.createElement(E.Z.Item,(0,c.Z)({label:"大额医疗保险-企业(元/月)",name:"big_medical_insurance_enterprise"},$e),l.createElement(P.Z,{min:0,placeholder:"请输入大额医疗保险(企业)",style:{width:"90%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"大额医疗保险-个人(元/月)",name:"big_medical_insurance_person"},$e),l.createElement(P.Z,{min:0,placeholder:"请输入大额医疗保险(个人)",style:{width:"90%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"其它费用-企业",name:"other_enterprise_fee"},$e),l.createElement(P.Z,{min:0,placeholder:"请输入其它费用(企业)",style:{width:"90%"}})),l.createElement(E.Z.Item,(0,c.Z)({label:"其它费用-个人",name:"other_person_fee"},$e),l.createElement(P.Z,{min:0,placeholder:"请输入其它费用(个人)",style:{width:"90%"}}))],Ee={is_salary_split:Boolean(k.is_salary_split),split_base:k.split_base?h.fbc.exchangePriceToYuan(k.split_base):void 0,social_security_payment_plac:{province:n().get(k,"social_security_payment_plac.province")?Number(n().get(k,"social_security_payment_plac.province")):void 0,city:n().get(k,"social_security_payment_plac.city")?Number(n().get(k,"social_security_payment_plac.city")):void 0},insurance_program_id:n().get(k,"insurance_program_info._id"),insurance_began_month:k.insurance_began_month?A()(String(k.insurance_began_month),"YYYYMM"):void 0,old_age_insurance:fe(k.old_age_insurance),medical_insurance:fe(k.medical_insurance),unemployment_insurance:fe(k.unemployment_insurance),occupational_insurance:fe(k.occupational_insurance),birth_insurance:fe(k.birth_insurance),provident_fund_payment_plac:{province:n().get(k,"provident_fund_payment_plac.province")?Number(n().get(k,"provident_fund_payment_plac.province")):void 0,city:n().get(k,"provident_fund_payment_plac.city")?n().get(k,"provident_fund_payment_plac.city"):void 0},provident_fund_program_id:n().get(k,"provident_fund_program_info._id"),provident_fund_began_month:k.provident_fund_began_month?A()(String(k.provident_fund_began_month),"YYYYMM"):void 0,provident_fund:fe(k.provident_fund),big_medical_insurance_enterprise:fe(k.big_medical_insurance_enterprise),big_medical_insurance_person:fe(k.big_medical_insurance_person),other_enterprise_fee:fe(k.other_enterprise_fee),other_person_fee:fe(k.other_person_fee)};return l.createElement(l.Fragment,null,l.createElement("div",{className:ne},l.createElement("div",{className:ie},l.createElement(E.Z,{form:O,initialValues:Ee,className:"affairs-flow-basic"},l.createElement(I.IT,{title:"工资信息"},l.createElement(I.Fp,{items:ye})),l.createElement(I.IT,{title:"社保信息"},l.createElement(I.Fp,{items:he})),l.createElement(I.IT,{title:"公积金信息"},l.createElement(I.Fp,{items:ve})),l.createElement(I.IT,{title:"其他信息"},l.createElement(I.Fp,{items:ge,cols:2})))),Z?l.createElement("div",{className:le},l.createElement(g.Z,{onClick:C,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:Q,style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:ae,type:"primary"},"提交")):l.createElement("div",{className:le},l.createElement(g.Z,{onClick:Q,style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:J,type:"primary",style:{marginRight:10}},"上一步"),v.By.isShowCode()?l.createElement(g.Z,{onClick:ee,type:"primary"},"下一步"):l.createElement(g.Z,{onClick:te,type:"primary"},"提交"))))})),Qe=Je,et=w.Z.Option,tt=(0,i.connect)((function(e){return{teamTypeList:e.employeeManage.teamTypeList}}))((function(e){var t=e.dispatch,a=e.teamTypeList,r=void 0===a?[]:a,n=e.value,i=e.onChange,c=e.disabled,o=void 0!==c&&c;return(0,l.useEffect)((function(){t({type:"employeeManage/getTeamTypeList",payload:{}})}),[t]),l.createElement(w.Z,{placeholder:"请选择tam类型",allowClear:!0,showSearch:!0,optionFilterProp:"children",value:n,onChange:i,disabled:o},r.map((function(e){return l.createElement(et,{key:e,value:e},e)})))})),at=w.Z.Option,rt=(0,i.connect)((function(e){return{teamList:e.employeeManage.teamList}}))((function(e){var t=e.dispatch,a=e.teamList,r=void 0===a?[]:a,n=e.teamType,i=e.value,c=e.onChange,o=e.initValue,m=void 0===o?{}:o,s=e.disabled,d=void 0!==s&&s,p=m.team_id,f=(0,l.useState)(!1),y=(0,u.Z)(f,2),h=y[0],g=y[1];(0,l.useEffect)((function(){return n?(g(!0),void t({type:"employeeManage/getTeamList",payload:{teamType:n,onsetFlagCallback:function(){g(!1)}}})):(t({type:"employeeManage/reduceTeamList",payload:[]}),function(){return t({type:"employeeManage/reduceTeamList",payload:[]})})}),[t,n]);var E=(0,_.Z)(r),Z=Array.isArray(r)?r.map((function(e){return e._id})):[];return p&&!Z.includes(p)&&n===v.P6.dotOptimal(m,"biz_meta.cate",void 0)&&(E=[{_id:p,name:m.name,disabled:!0}].concat((0,_.Z)(r))),h?l.createElement(w.Z,{disabled:!0}):l.createElement(w.Z,{placeholder:"请选择team",allowClear:!0,showSearch:!0,optionFilterProp:"children",onChange:c,value:i,disabled:d},E.map((function(e){return l.createElement(at,{key:e._id,value:e._id,disabled:e.disabled},e.name)})))})),nt={labelCol:{span:8},wrapperCol:{span:16}},it=(0,l.forwardRef)((function(e,t){var a=e.setTabKey,r=(e.onChangeTabKeys,e.dispatch,e.employeeId),n=e.employeeDetail,i=void 0===n?{}:n,o=e.onSave,m=e.onSubmit,s=e.onBack,d=E.Z.useForm(),_=(0,u.Z)(d,1)[0],p=(0,l.useState)(i.cost_team_type),f=(0,u.Z)(p,2),y=f[0],v=f[1];(0,l.useImperativeHandle)(t,(function(){return _}));var Z=i.profile_type!==h.Tv5.staff&&!1===i.is_can_update_cost,b=function(){a(h.eRk.welfare)},k=function(){_.validateFields().then((function(){m&&m()})).catch((function(e){_.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},w=function(){_.validateFields().then((function(e){o&&o(e)})).catch((function(e){_.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},C=function(){v(i.cost_team_type),_.resetFields()},F=[l.createElement(E.Z.Item,(0,c.Z)({label:"归属team类型",name:"cost_team_type",rules:[{required:!0,message:"请选择归属team类型"}]},nt),l.createElement(tt,{onChange:function(e){v(e),_.setFieldsValue({cost_team_id:void 0})},disabled:Z})),l.createElement(E.Z.Item,(0,c.Z)({label:"归属team",name:"cost_team_id",rules:[{required:!0,message:"请选择归属team"}]},nt),l.createElement(rt,{teamType:y,initValue:i.cost_team_info,disabled:Z}))],T={cost_team_type:i.cost_team_type||void 0,cost_team_id:i.cost_team_id||void 0};return l.createElement(l.Fragment,null,l.createElement("div",{className:ne},l.createElement("div",{className:ie},l.createElement(E.Z,{form:_,initialValues:T,className:"affairs-flow-basic"},l.createElement(I.Fp,{items:F}))),r?l.createElement("div",{className:le},l.createElement(g.Z,{onClick:s,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:C,style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:w,type:"primary"},"提交")):l.createElement("div",{className:le},l.createElement(g.Z,{onClick:C,style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:b,type:"primary",style:{marginRight:10}},"上一步"),l.createElement(g.Z,{onClick:k,type:"primary"},"提交"))))}));function lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ct(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):lt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ot=p.Z.TabPane,mt=(0,i.connect)((function(e){var t=e.society;return{staffSocietyPlanList:t.staffSocietyPlanList,staffFundPlanList:t.staffFundPlanList,departments:e.applicationCommon.departments,employeeDetail:e.employeeManage.employeeDetail,newContractInfo:e.fileChange.newContractInfo}}))((function(e){var t=e.dispatch,a=e.staffSocietyPlanList,r=e.staffFundPlanList,i=e.departments,s=e.employeeDetail,f=void 0===s?{}:s,g=e.location,E=void 0===g?{}:g,Z=e.newContractInfo,b=void 0===Z?{}:Z,k=(0,l.useRef)(),w=(0,l.useRef)(),I=(0,l.useRef)(),C=(0,l.useRef)(),F=(0,l.useRef)(),T=(0,l.useRef)(),O=n().get(E,"query.id"),P=n().get(E,"query.departmentId",void 0),j=n().get(E,"query.departmentName",void 0),R=[h.eRk.basic],S=[h.eRk.basic,h.eRk.work,h.eRk.contract,h.eRk.career,h.eRk.welfare,h.eRk.costCenter],A=(0,l.useState)(O?S:R),x=(0,u.Z)(A,2),V=x[0],q=x[1],N=(0,l.useState)(h.eRk.basic),D=(0,u.Z)(N,2),K=D[0],z=D[1],L=(0,l.useState)(!!O),M=(0,u.Z)(L,2),X=M[0],U=M[1],Y=(0,l.useState)(void 0),B=(0,u.Z)(Y,2),H=B[0],G=B[1];(0,l.useEffect)((function(){return t({type:"applicationCommon/fetchDepartments",payload:{isAuthorized:!0}}),function(){t({type:"employeeManage/reduceEmployeeDetail",payload:{}}),t({type:"fileChange/resetNewContractInfo",payload:{}})}}),[t]),(0,l.useEffect)((function(){Object.keys(f).length>0&&U(!1)}),[f]),(0,l.useEffect)((function(){f.identity_card_id&&t({type:"fileChange/fetchNewContractInfo",payload:{id:f.identity_card_id}})}),[t,f]);var W=function(){window.opener&&(window.opener.location.reload(),window.close())},$=function(){var e=(0,d.Z)(y().mark((function e(){var a,r,n,i,l,c,o,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.current.validateFields();case 2:return a=e.sent,e.next=5,w.current.validateFields();case 5:if(r=e.sent,!I||!I.current){e.next=12;break}return e.next=9,I.current.validateFields();case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0={};case 13:return n=e.t0,e.next=16,C.current.validateFields();case 16:return i=e.sent,e.next=19,F.current.validateFields();case 19:return l=e.sent,e.next=22,T.current.validateFields();case 22:return c=e.sent,e.next=25,t({type:"employeeManage/createEmployeeFile",payload:ct(ct(ct(ct(ct(ct({},a),r),n),i),l),c)});case 25:if(!(o=e.sent)||!o.zh_message){e.next=28;break}return e.abrupt("return",m.ZP.error(o.zh_message));case 28:if(!(o&&o.ok&&o.record)){e.next=35;break}return e.next=31,t({type:"employeeManage/createEmployeeContract",payload:ct({identity_card_id:o.record.identity_card_id,contract_no:o.record.contract_no,name:o.record.name,phone:o.record.phone,entry_date:o.record.entry_date},i)});case 31:if(!(s=e.sent)||!s.zh_message){e.next=34;break}return e.abrupt("return",m.ZP.error(s.zh_message));case 34:s&&s.ok&&(m.ZP.success("请求成功"),P&&j?W():window.location.href="/#/Employee/Manage?fileType=staff");case 35:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(){var e=(0,d.Z)(y().mark((function e(){var a,r,n,i,l=arguments;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,t({type:"employeeManage/updateEmployeeFile",payload:{_id:O,tab_type:Number(K),data:ct({},a)}});case 3:if(!(r=e.sent)||!r.zh_message){e.next=6;break}return e.abrupt("return",m.ZP.error(r.zh_message));case 6:if(!r||!r.ok){e.next=25;break}if(!P||!j){e.next=11;break}return m.ZP.success("请求成功"),W(),e.abrupt("return");case 11:if(K!==h.eRk.contract){e.next=22;break}return n=ct({name:f.name,phone:f.phone,identity_card_id:f.identity_card_id,entry_date:f.entry_date},a),e.next=15,t({type:"employeeManage/updateEmployeeContract",payload:ct({_id:O},n)});case 15:if(!(i=e.sent)||!i.ok){e.next=20;break}return m.ZP.success("请求成功"),e.next=20,t({type:"employeeManage/fetchEmployeeDetail",payload:{employeeId:O,fileType:"staff"}});case 20:e.next=25;break;case 22:return m.ZP.success("请求成功"),e.next=25,t({type:"employeeManage/fetchEmployeeDetail",payload:{employeeId:O,fileType:"staff"}});case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q={onChangeTabKeys:function(e){var t=V.includes(e)?V:[].concat((0,_.Z)(V),[e]);q(t)},setTabKey:z,onSubmit:$,departmentTree:i,employeeDetail:f,dispatch:t,employeeId:O,onSave:J,onResetStaff:function(e){G(ct(ct({},H),e)),re(e,{basicFormRef:k,workFormRef:w,costCenterFormRef:I,contractFormRef:C,welfareFormRef:F,careerFormRef:T})},newContractInfo:b,onBack:function(){window.location.href="/#/Employee/Manage?fileType=staff"},contractFormRef:C,setSpecialFields:G,specialFields:H};return l.createElement("div",{style:{background:"#F3F3F3",height:"100%"},className:"contract-content-wrap"},X?l.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,position:"absolute",top:0,left:0,background:"rgba(0, 0, 0, .1)"}},l.createElement(o.Z,{tip:"Loading..."})):null,!X&&l.createElement("div",{style:{height:"100%"},className:"contract-content-wrap"},l.createElement(p.Z,{activeKey:K,onChange:function(e){if(O)return z(e);var t;switch(K){case h.eRk.basic:t=k;break;case h.eRk.work:t=w;break;case h.eRk.contract:t=C;break;case h.eRk.career:t=T;break;case h.eRk.welfare:t=F;break;case h.eRk.costCenter:t=I;break;default:t=k}t&&K!==e&&t.current.validateFields().then((function(){z(e)})).catch((function(e){t.current.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},style:{background:"#fff",height:"100%"}},l.createElement(ot,{tab:"员工基础信息",key:h.eRk.basic,forceRender:!0,disabled:!V.includes(h.eRk.basic)},l.createElement(oe,(0,c.Z)({ref:k},Q))),l.createElement(ot,{tab:"系统信息",key:h.eRk.work,forceRender:!0,disabled:!V.includes(h.eRk.work)},l.createElement(Ie,(0,c.Z)({ref:w,departments:i},Q))),l.createElement(ot,{tab:"合同信息",key:h.eRk.contract,forceRender:!0,disabled:!V.includes(h.eRk.contract)},l.createElement(Ve,(0,c.Z)({ref:C},Q))),l.createElement(ot,{tab:"职业生涯",key:h.eRk.career,forceRender:!0,disabled:!V.includes(h.eRk.career)},l.createElement(Le,(0,c.Z)({ref:T,setTabKey:z},Q))),l.createElement(ot,{tab:"福利信息",key:h.eRk.welfare,forceRender:!0,disabled:!V.includes(h.eRk.welfare)},l.createElement(Qe,(0,c.Z)({ref:F,staffFundPlanList:r,staffSocietyPlanList:a},Q))),v.By.isShowCode()&&l.createElement(ot,{tab:"TEAM成本中心",key:h.eRk.costCenter,forceRender:!0,disabled:!V.includes(h.eRk.costCenter)},l.createElement(it,(0,c.Z)({ref:I},Q))))))})),st={labelCol:{span:8},wrapperCol:{span:16}},dt=w.Z.Option,_t=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,n=[l.createElement(E.Z.Item,(0,c.Z)({label:"姓名",name:"name",rules:[{required:!0,message:"请输入姓名"},{pattern:/^[\u4e00-\u9fa5a-zA-Z-z]+$/g,message:"只能输入字母,汉字"}]},st),l.createElement(b.Z,{placeholder:"请输入姓名",disabled:!0})),l.createElement(E.Z.Item,(0,c.Z)({label:"手机号",name:"phone",rules:[{required:!0,message:"请输入手机号"},{pattern:/^1[0-9]{10}$/g,message:"请输入正确的手机号"}]},st),l.createElement(b.Z,{placeholder:"请输入姓名",disabled:!0})),l.createElement(E.Z.Item,(0,c.Z)({label:"性别",name:"gender_id",rules:[{required:!0,message:"请选择性别"}]},st),l.createElement(R.ZP.Group,{disabled:!0},l.createElement(R.ZP,{value:h.Y0t.male},h.Y0t.description(h.Y0t.male)),l.createElement(R.ZP,{value:h.Y0t.female},h.Y0t.description(h.Y0t.female)))),l.createElement(E.Z.Item,(0,c.Z)({label:"民族",name:"national",rules:[{required:!0,message:"请选择民族"}]},st),l.createElement(x.rd,null)),l.createElement(E.Z.Item,(0,c.Z)({label:"出生日期",name:"born_in"},st),l.createElement(j.Z,{allowClear:!1,disabledDate:function(e){return e&&e>A()().endOf("day")}})),l.createElement(E.Z.Item,(0,c.Z)({label:"婚姻状况",name:"marital_status"},st),l.createElement(w.Z,{placeholder:"请选择婚姻状况"},l.createElement(dt,{value:h.dr7.married},h.dr7.description(h.dr7.married)),l.createElement(dt,{value:h.dr7.unmarried},h.dr7.description(h.dr7.unmarried)))),l.createElement(E.Z.Item,(0,c.Z)({label:"户口所在地",name:"native_place"},st),l.createElement(b.Z,{placeholder:"请输入户口所在地"})),l.createElement(E.Z.Item,(0,c.Z)({label:"常居地",name:"often_address",rules:[{required:!0}]},st),l.createElement(b.Z,{placeholder:"请输入常居地"})),l.createElement(E.Z.Item,(0,c.Z)({label:"紧急联系人",name:"emergency_contact"},st),l.createElement(b.Z,{placeholder:"请输入紧急联系人"})),l.createElement(E.Z.Item,(0,c.Z)({label:"紧急联系电话",name:"emergency_contact_phone",rules:[{required:!0,message:"请输入紧急联系电话"},{pattern:/^1[0-9]{10}$/g,message:"请输入正确的手机号"}]},st),l.createElement(b.Z,{placeholder:"请输入紧急联系电话"})),l.createElement(E.Z.Item,(0,c.Z)({label:"政治面貌",name:"politics_status"},st),l.createElement(w.Z,{placeholder:"请选择政治面貌"},l.createElement(dt,{value:h.IEy.partyMember},h.IEy.description(h.IEy.partyMember)),l.createElement(dt,{value:h.IEy.prepPartyMember},h.IEy.description(h.IEy.prepPartyMember)),l.createElement(dt,{value:h.IEy.member},h.IEy.description(h.IEy.member)),l.createElement(dt,{value:h.IEy.masses},h.IEy.description(h.IEy.masses)))),l.createElement(E.Z.Item,(0,c.Z)({label:"籍贯",name:"birth_place"},st),l.createElement(b.Z,{placeholder:"请输入籍贯"})),l.createElement(E.Z.Item,(0,c.Z)({label:"个人邮箱",name:"email",rules:[{type:"email",message:"请输入正确邮箱地址"}]},st),l.createElement(b.Z,{placeholder:"请输入个人邮箱"})),l.createElement(E.Z.Item,(0,c.Z)({label:"固定电话",name:"telephone"},st),l.createElement(b.Z,{placeholder:"请输入固定电话"})),l.createElement(E.Z.Item,(0,c.Z)({label:"身高",name:"height"},st),l.createElement(P.Z,{min:0,placeholder:"请输入身高",formatter:function(e){return"".concat(e,"cm")},parser:function(e){return e.replace("cm","")}})),l.createElement(E.Z.Item,(0,c.Z)({label:"体重",name:"weight"},st),l.createElement(P.Z,{min:0,placeholder:"请输入体重",formatter:function(e){return"".concat(e,"kg")},parser:function(e){return e.replace("kg","")}})),l.createElement(E.Z.Item,(0,c.Z)({label:"爱好",name:"interest"},st),l.createElement(b.Z,{placeholder:"请输入爱好"})),l.createElement(E.Z.Item,(0,c.Z)({label:"星座",name:"constellation"},st),l.createElement(x.vI,null)),l.createElement(E.Z.Item,(0,c.Z)({label:"特长",name:"speciality"},st),l.createElement(b.Z,{placeholder:"请输入特长"})),l.createElement(E.Z.Item,(0,c.Z)({label:"学历",name:"education",rules:[{required:!0,message:"请选择学历"}]},st),l.createElement(x.eA,{allowClear:!0}))];return l.createElement(I.IT,{title:"个人信息"},l.createElement(E.Z,{form:t,initialValues:Object.keys(r).length<1?{}:{name:r.name||void 0,phone:r.phone||void 0,gender_id:r.gender_id||void 0,national:r.national||void 0,born_in:r.born_in?A()(String(r.born_in)):"",marital_status:r.marital_status||void 0,native_place:r.native_place||void 0,often_address:r.often_address||void 0,emergency_contact:r.emergency_contact||void 0,emergency_contact_phone:r.emergency_contact_phone||void 0,email:r.email||void 0,telephone:r.telephone||void 0,height:r.height||void 0,weight:r.weight||void 0,interest:r.interest||void 0,constellation:r.constellation||void 0,speciality:r.speciality||void 0,education:r.education,politics_status:r.politics_status||void 0,birth_place:r.birth_place||void 0},className:"affairs-flow-basic"},l.createElement(I.Fp,{items:n})))},ut=w.Z.Option,pt={labelCol:{span:8},wrapperCol:{span:16}},ft=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,n=e.resetState,i=(0,l.useState)(r.recruitment_channel_id||h.ub1.other),o=(0,u.Z)(i,2),m=o[0],s=o[1];(0,l.useEffect)((function(){s(r.recruitment_channel_id)}),[n,r]);var d=r.supplier_list,p=[l.createElement(E.Z.Item,(0,c.Z)({label:"推荐渠道",name:"recruitment_channel_id",rules:[{required:!0,message:"请选择收款方式"}]},pt),l.createElement(w.Z,{placeholder:"请选择推荐渠道",onChange:function(e){return s(e)}},l.createElement(ut,{value:h.ub1.third},h.ub1.description(h.ub1.third)),l.createElement(ut,{value:h.ub1.recommend},h.ub1.description(h.ub1.recommend)),l.createElement(ut,{value:h.ub1.thirdPlatform},h.ub1.description(h.ub1.thirdPlatform)),l.createElement(ut,{value:h.ub1.personal},h.ub1.description(h.ub1.personal)),l.createElement(ut,{value:h.ub1.transfer},h.ub1.description(h.ub1.transfer)),l.createElement(ut,{value:h.ub1.other},h.ub1.description(h.ub1.other))))],f=[].concat(p);m===h.ub1.third&&(f=[].concat(p,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"推荐公司",name:"referrer_company_id",rules:[{required:!0,message:"请输入推荐公司"}]},pt),l.createElement(x.UW,{showSearch:!0,optionFilterProp:"children",placeholder:"请选择推荐公司",suppliers:d}))]))),m===h.ub1.recommend&&(f=[].concat(p,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"推荐人身份证",name:"referrer_identity_no",rules:[{required:!0,message:"请输入推荐人身份证"},{validator:Z.Hb}]},pt),l.createElement(b.Z,{placeholder:"请输入推荐人身份证"})),l.createElement(E.Z.Item,(0,c.Z)({label:"推荐人姓名",name:"referrer_name",rules:[{required:!0,message:"请输入推荐人姓名"}]},pt),l.createElement(b.Z,{placeholder:"请输入推荐人姓名"})),l.createElement(E.Z.Item,(0,c.Z)({label:"推荐人手机号",name:"referrer_phone",rules:[{required:!0,message:"请输入推荐人手机号"},{pattern:/^1[0-9]{10}$/g,message:"请输入正确的手机号"}]},pt),l.createElement(b.Z,{placeholder:"请输入手机号"}))]))),m===h.ub1.thirdPlatform&&(f=[].concat(p,(0,_.Z)([l.createElement(E.Z.Item,(0,c.Z)({label:"推荐平台",name:"referrer_platform",rules:[{required:!0,message:"请选择渠道"}]},pt),l.createElement(w.Z,{placeholder:"请选择推荐平台"},l.createElement(ut,{value:h.pHE.wuba},h.pHE.description(h.pHE.wuba))))])));var y={recruitment_channel_id:r.recruitment_channel_id||h.ub1.other,referrer_company_id:r.referrer_company_id||void 0,referrer_identity_no:r.referrer_identity_no||void 0,referrer_platform:r.referrer_platform||void 0,referrer_name:r.referrer_name||void 0,referrer_phone:r.referrer_phone||void 0};return l.createElement(I.IT,{title:"推荐来源"},l.createElement(E.Z,{form:t,initialValues:y,className:"affairs-flow-basic"},l.createElement(I.Fp,{items:f})))},yt=w.Z.Option,ht=j.Z.RangePicker,vt=qe.Z.Panel,gt={labelCol:{span:8},wrapperCol:{span:16}},Et=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,n=[l.createElement(E.Z.Item,(0,c.Z)({label:"最高学历",name:"highest_education"},gt),l.createElement(w.Z,{placeholder:"请选择最高学历",allowClear:!0},l.createElement(yt,{value:h.XT_.doctor},h.XT_.description(h.XT_.doctor)),l.createElement(yt,{value:h.XT_.master},h.XT_.description(h.XT_.master)),l.createElement(yt,{value:h.XT_.undergraduate},h.XT_.description(h.XT_.undergraduate)),l.createElement(yt,{value:h.XT_.juniorCollege},h.XT_.description(h.XT_.juniorCollege)),l.createElement(yt,{value:h.XT_.secondary},h.XT_.description(h.XT_.secondary)),l.createElement(yt,{value:h.XT_.highSchool},h.XT_.description(h.XT_.highSchool)),l.createElement(yt,{value:h.XT_.juniorHighSchool},h.XT_.description(h.XT_.juniorHighSchool)))),l.createElement(E.Z.Item,(0,c.Z)({label:"专业职称",name:"professional"},gt),l.createElement(b.Z,{placeholder:"请输入专业职称"})),l.createElement(E.Z.Item,(0,c.Z)({label:"外语及等级",name:"language_level"},gt),l.createElement(b.Z,{placeholder:"请输入外语及等级"}))],i=[l.createElement(E.Z.Item,(0,c.Z)({label:"毕业证",name:"degree"},gt),l.createElement(I.oI,{domain:"staff",multiple:!0,namespace:"degree"}))],o={highest_education:r.highest_education||void 0,professional:r.professional||void 0,language_level:r.language_level||void 0,academy_list:Array.isArray(r.academy_list)&&r.academy_list.length>0?r.academy_list.map((function(e){return{institution_name:e.institution_name,education:e.education,profession:e.profession,time:[e.start_time?A()(e.start_time):void 0,e.end_time?A()(e.end_time):void 0]}})):[{institution_name:void 0,education:void 0,profession:void 0,time:void 0}],degree:{keys:Array.isArray(r.degree)?r.degree:[],urls:Array.isArray(r.degree_url)?r.degree_url:[]}};return l.createElement(I.IT,null,l.createElement(E.Z,{form:t,initialValues:o,className:"affairs-flow-basic"},l.createElement(qe.Z,null,l.createElement(vt,{header:"学历信息"},l.createElement(I.Fp,{items:n}),l.createElement(E.Z.List,{name:"academy_list"},(function(e,t){var a=t.add,r=t.remove,n={institution_name:void 0,education:void 0,profession:void 0,time:void 0};return l.createElement(l.Fragment,null,e.map((function(t,i){return l.createElement(U.Z,{key:i},l.createElement(Y.Z,{span:5},l.createElement(E.Z.Item,(0,c.Z)({label:"院校名称",name:[t.name,"institution_name"],fieldKey:[t.fieldKey,i]},gt),l.createElement(b.Z,{placeholder:"请输入院校名称",allowClear:!0}))),l.createElement(Y.Z,{span:5},l.createElement(E.Z.Item,(0,c.Z)({label:"第一学历",name:[t.name,"education"],fieldKey:[t.fieldKey,i]},gt),l.createElement(x.eA,{allowClear:!0}))),l.createElement(Y.Z,{span:5},l.createElement(E.Z.Item,(0,c.Z)({label:"专业",name:[t.name,"profession"],fieldKey:[t.fieldKey,i]},gt),l.createElement(b.Z,{placeholder:"请输入专业",allowClear:!0}))),l.createElement(Y.Z,{span:7},l.createElement(E.Z.Item,(0,c.Z)({label:"时间",name:[t.name,"time"],fieldKey:[t.fieldKey,i]},gt),l.createElement(ht,null))),l.createElement(Y.Z,{span:2},e.length>1?l.createElement(g.Z,{onClick:function(){return r(t.name)},shape:"circle",icon:l.createElement(B.Z,null),style:{margin:"0 4px"}}):"",i===e.length-1?l.createElement(g.Z,{onClick:function(){return a(n)},shape:"circle",icon:l.createElement(H.Z,null),style:{margin:"0 4px"}}):""))})))})),l.createElement(I.Fp,{items:i})))))},Zt=j.Z.RangePicker,bt=qe.Z.Panel,kt={labelCol:{span:8},wrapperCol:{span:16}},wt=function(e){var t=e.form,a=e.employeeDetail,r=void 0===a?{}:a,n={work_experience:Array.isArray(r.work_experience)&&r.work_experience.length>0?r.work_experience.map((function(e){return{employer:e.employer,position:e.position,certifier_name:e.certifier_name,proof_phone:e.proof_phone,work_time:e.work_start_time&&e.work_end_time?[A()(String(e.work_start_time)),A()(String(e.work_end_time))]:void 0}})):[{employer:void 0,position:void 0,certifier_name:void 0,proof_phone:void 0,work_time:void 0}]};return l.createElement(I.IT,null,l.createElement(E.Z,{form:t,className:"affairs-flow-basic",initialValues:n},l.createElement(qe.Z,null,l.createElement(bt,{header:"工作经历"},l.createElement(E.Z.List,{name:"work_experience"},(function(e,t){var a=t.add,r=t.remove;return l.createElement(l.Fragment,null,e.map((function(t,n){return l.createElement(U.Z,{key:n},l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"工作单位",name:[t.name,"employer"],fieldKey:[t.fieldKey,n]},kt),l.createElement(b.Z,{placeholder:"请输入工作单位"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"曾任职岗位",name:[t.name,"position"],fieldKey:[t.fieldKey,n]},kt),l.createElement(b.Z,{placeholder:"请输入职位"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"证明人姓名",name:[t.name,"certifier_name"],fieldKey:[t.fieldKey,n]},kt),l.createElement(b.Z,{placeholder:"请输入证明人姓名"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"证明人电话",name:[t.name,"proof_phone"],fieldKey:[t.fieldKey,n]},kt),l.createElement(b.Z,{placeholder:"请输入证明人电话"}))),l.createElement(Y.Z,{span:8},l.createElement(E.Z.Item,(0,c.Z)({label:"工作时间",name:[t.name,"work_time"],fieldKey:[t.fieldKey,n]},kt),l.createElement(Zt,null))),l.createElement(Y.Z,{span:8},e.length>1?l.createElement(g.Z,{onClick:function(){return r(t.name)},shape:"circle",icon:l.createElement(B.Z,null),style:{marginRight:4}}):"",n===e.length-1?l.createElement(g.Z,{onClick:function(){return a()},shape:"circle",icon:l.createElement(H.Z,null)}):""))})))}))))))},It=a(22779),Ct=a(69315),Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.basicFormRef,r=e.bank_info,i=void 0===r?{}:r,l=Array.isArray(e.work_experience)&&e.work_experience.length>0?e.work_experience.map((function(e){return{employer:e.employer,position:e.position,certifier_name:e.certifier_name,proof_phone:e.proof_phone,work_time:e.work_start_time&&e.work_end_time?[A()(String(e.work_start_time)),A()(String(e.work_end_time))]:void 0}})):[{employer:void 0,position:void 0,certifier_name:void 0,proof_phone:void 0,work_time:void 0}];a&&a.current.setFieldsValue({identity_certificate_type:e.identity_certificate_type||void 0,identity_card_id:e.identity_card_id||void 0,identity_card_front:{keys:n().get(e,"identity_card_front")?[n().get(e,"identity_card_front")]:[],urls:n().get(e,"identity_card_front_url")?[n().get(e,"identity_card_front_url")]:[]},identity_card_back:{keys:n().get(e,"identity_card_back")?[n().get(e,"identity_card_back")]:[],urls:n().get(e,"identity_card_back_url")?[n().get(e,"identity_card_back_url")]:[]},identity_card_in_hand:{keys:n().get(e,"identity_card_in_hand")?[n().get(e,"identity_card_in_hand")]:[],urls:n().get(e,"identity_card_in_hand_url")?[n().get(e,"identity_card_in_hand_url")]:[]},health_certificate_type:e.health_certificate_type||void 0,health_certificate_no:e.health_certificate_no||void 0,health_certificate:{keys:n().get(e,"health_certificate")?[n().get(e,"health_certificate")]:[],urls:n().get(e,"health_certificate_url")?[n().get(e,"health_certificate_url")]:[]},health_certificate_back:{keys:n().get(e,"health_certificate_back")?[n().get(e,"health_certificate_back")]:[],urls:n().get(e,"health_certificate_back_url")?[n().get(e,"health_certificate_back_url")]:[]},health_certificate_in_hand:{keys:n().get(e,"health_certificate_in_hand")?[n().get(e,"health_certificate_in_hand")]:[],urls:n().get(e,"health_certificate_in_hand_url")?[n().get(e,"health_certificate_in_hand_url")]:[]},drive_certificate_type:e.drive_certificate_type||void 0,drive_certificate_no:e.drive_certificate_no||void 0,drive_certificate_front:{keys:n().get(e,"drive_certificate_front")?[n().get(e,"drive_certificate_front")]:[],urls:n().get(e,"drive_certificate_front_url")?[n().get(e,"drive_certificate_front_url")]:[]},drive_certificate_back:{keys:n().get(e,"drive_certificate_back")?[n().get(e,"drive_certificate_back")]:[],urls:n().get(e,"drive_certificate_back_url")?[n().get(e,"drive_certificate_back_url")]:[]},drive_certificate_in_hand:{keys:n().get(e,"drive_certificate_in_hand")?[n().get(e,"drive_certificate_in_hand")]:[],urls:n().get(e,"drive_certificate_in_hand_url")?[n().get(e,"drive_certificate_in_hand_url")]:[]},name:e.name||void 0,phone:e.phone||void 0,gender_id:e.gender_id||void 0,national:e.national||void 0,born_in:e.born_in?A()(String(e.born_in)):"",marital_status:e.marital_status||void 0,work_address:{province:e.work_province_code?Number(e.work_province_code):void 0,city:e.work_city_code?Number(e.work_city_code):void 0},native_place:e.native_place||void 0,often_address:e.often_address||void 0,emergency_contact:e.emergency_contact||void 0,emergency_contact_phone:e.emergency_contact_phone||void 0,work_email:e.work_email||void 0,email:e.email||void 0,telephone:e.telephone||void 0,height:e.height||void 0,weight:e.weight||void 0,interest:e.interest||void 0,constellation:e.constellation||void 0,speciality:e.speciality||void 0,education:e.education,politics_status:e.politics_status||void 0,birth_place:e.birth_place||void 0,candidates_photo_list:{keys:Array.isArray(e.candidates_photo_list)?e.candidates_photo_list:[],urls:Array.isArray(e.candidates_photo_url_list)?e.candidates_photo_url_list:[]},bank_location:{province:n().get(i,"bank_location.0"),city:n().get(i,"bank_location.1")},highest_education:e.highest_education||void 0,professional:e.professional,language_level:e.language_level,academy_list:Array.isArray(e.academy_list)&&e.academy_list.length>0?e.academy_list.map((function(e){return{institution_name:e.institution_name||void 0,education:e.education||void 0,profession:e.profession||void 0,time:[e.start_time?A()(e.start_time):void 0,e.end_time?A()(e.end_time):void 0]}})):[{institution_name:void 0,education:void 0,profession:void 0,time:void 0}],degree:{keys:Array.isArray(e.degree)?e.degree:[],urls:Array.isArray(e.degree_url)?e.degree_url:[]},certificate_photo_list:{keys:Array.isArray(e.certificate_photo_list)?e.certificate_photo_list:[],urls:Array.isArray(e.certificate_photo_url_list)?e.certificate_photo_url_list:[]},other_certificate_photo_list:{keys:Array.isArray(e.other_certificate_photo_list)?e.other_certificate_photo_list:[],urls:Array.isArray(e.other_certificate_photo_url_list)?e.other_certificate_photo_url_list:[]},recruitment_channel_id:e.recruitment_channel_id||h.ub1.other,referrer_company_id:e.referrer_company_id||void 0,referrer_identity_no:e.referrer_identity_no||void 0,referrer_name:e.referrer_name||void 0,referrer_phone:e.referrer_phone||void 0,referrer_platform:e.referrer_platform||void 0,work_experience:l})},Tt="wNtQ5JLpKI6x9NeoZjvH",Ot="udjfVo15NdLv4ri76UA6",Pt="qyp6vLKZ7ORMUY1whtcj",jt=(0,l.forwardRef)((function(e,t){var a=e.employeeDetail,r=e.onSave,n=e.onBack,i=E.Z.useForm(),c=(0,u.Z)(i,1)[0],o=(0,l.useState)(void 0),m=(0,u.Z)(o,2),s=m[0],d=m[1];(0,l.useImperativeHandle)(t,(function(){return c}));var _={form:c,employeeDetail:a,resetState:s};return l.createElement(l.Fragment,null,l.createElement("div",{className:Tt},l.createElement("div",{className:Ot},l.createElement(_t,_),l.createElement(ft,_),l.createElement(Et,_),l.createElement(wt,_),l.createElement(It.Z,_),l.createElement(Ct.Z,_)),l.createElement("div",{className:Pt},l.createElement(g.Z,{onClick:n,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:function(){d((0,Z.xv)(32)),Ft(a,{basicFormRef:{current:c}})},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:function(){c.validateFields().then((function(e){r&&r(e)})).catch((function(e){var t="born_in"===e.errorFields[0].name[0]?["national"]:e.errorFields[0].name;c.scrollToField(t,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},type:"primary"},"提交"))))})),Rt={labelCol:{span:8},wrapperCol:{span:16}},St=(0,l.forwardRef)((function(e,t){var a=e.onSave,r=e.employeeDetail,n=void 0===r?{}:r,i=e.onBack,o=E.Z.useForm(),m=(0,u.Z)(o,1)[0],s=(0,l.useState)(n.cost_team_type),d=(0,u.Z)(s,2),_=d[0],p=d[1];(0,l.useImperativeHandle)(t,(function(){return m}));var f=n.profile_type!==h.Tv5.staff&&!1===n.is_can_update_cost,y=[l.createElement(E.Z.Item,(0,c.Z)({label:"归属team类型",name:"cost_team_type",rules:[{required:!0,message:"请选择归属team类型"}]},Rt),l.createElement(tt,{onChange:function(e){p(e),m.setFieldsValue({cost_team_id:void 0})},disabled:f})),l.createElement(E.Z.Item,(0,c.Z)({label:"归属team",name:"cost_team_id",rules:[{required:!0,message:"请选择归属team"}]},Rt),l.createElement(rt,{teamType:_,initValue:n.cost_team_info,disabled:f}))],v={cost_team_type:n.cost_team_type||void 0,cost_team_id:n.cost_team_id||void 0};return l.createElement(l.Fragment,null,l.createElement("div",{className:Tt},l.createElement("div",{className:Ot},l.createElement(E.Z,{form:m,initialValues:v,className:"affairs-flow-basic"},l.createElement(I.Fp,{items:y}))),l.createElement("div",{className:Pt},f?l.createElement(g.Z,{onClick:i,style:{marginRight:10}},"返回"):l.createElement(l.Fragment,null,l.createElement(g.Z,{onClick:i,style:{marginRight:10}},"返回"),l.createElement(g.Z,{onClick:function(){p(n.cost_team_type),m.resetFields()},style:{marginRight:10}},"重置"),l.createElement(g.Z,{onClick:function(){m.validateFields().then((function(e){a&&a(e)})).catch((function(e){m.scrollToField(e.errorFields[0].name,{behavior:function(e){return e.forEach((function(e){var t=e.el,a=e.top;t.scrollTop=a-5}))}})}))},type:"primary"},"保存")))))})),At=a(18475),xt=a(84911);function Vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function qt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(a),!0).forEach((function(t){(0,s.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Nt=p.Z.TabPane,Dt=(0,i.connect)((function(e){var t=e.society;return{staffSocietyPlanList:t.staffSocietyPlanList,staffFundPlanList:t.staffFundPlanList,departments:e.applicationCommon.departments,employeeDetail:e.employeeManage.employeeDetail}}))((function(e){var t=e.dispatch,a=e.departments,r=e.employeeDetail,i=void 0===r?{}:r,s=e.location,_=(0,l.useRef)(),f=(0,l.useRef)(),g=n().get(s,"query.id"),E=(0,l.useState)(h.Ax7.basic),Z=(0,u.Z)(E,2),b=Z[0],k=Z[1],w=(0,l.useState)(!!g),I=(0,u.Z)(w,2),C=I[0],F=I[1];(0,l.useEffect)((function(){return t({type:"applicationCommon/fetchDepartments"}),function(){t({type:"employeeManage/reduceEmployeeDetail",payload:{}})}}),[t]),(0,l.useEffect)((function(){Object.keys(i).length>0&&F(!1)}),[i]);var T=function(){var e=(0,d.Z)(y().mark((function e(a){var r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"employeeManage/updateLaborerFile",payload:{_id:g,tab_type:Number(b),data:qt({},a)}});case 2:if(!(r=e.sent)||!r.zh_message){e.next=5;break}return e.abrupt("return",m.ZP.error(r.zh_message));case 5:if(!r||!r.ok){e.next=10;break}return e.next=8,t({type:"employeeManage/fetchEmployeeDetail",payload:{employeeId:g,fileType:"second"}});case 8:r&&r.record&&Ft(r.record,{basicFormRef:_,costCenterFormRef:f}),m.ZP.success("请求成功");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={setTabKey:k,onSave:T,departmentTree:a,employeeDetail:i,onBack:function(){window.location.href="/#/Employee/Manage?fileType=second"}};return l.createElement("div",{style:{background:"#F3F3F3",height:"100%"}},C?l.createElement("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,position:"absolute",top:0,left:0,background:"rgba(0, 0, 0, .1)"}},l.createElement(o.Z,{tip:"Loading..."})):null,!C&&l.createElement("div",{style:{height:"100%"},className:"contract-content-wrap"},l.createElement(p.Z,{activeKey:b,onChange:function(e){return k(e)},style:{background:"#fff",height:"100%"}},l.createElement(Nt,{tab:"劳动者基础信息",key:h.Ax7.basic},l.createElement(jt,(0,c.Z)({ref:_},O))),v.By.isShowCode&&i.is_tab&&l.createElement(Nt,{tab:"TEAM成本中心",key:h.Ax7.costCenter},l.createElement(St,(0,c.Z)({ref:f},O))),l.createElement(Nt,{tab:"系统信息",key:h.Ax7.work},l.createElement(At.Z,O)),l.createElement(Nt,{tab:"合同信息",key:h.Ax7.contract},l.createElement(xt.Z,O)))))})),Kt=(0,i.connect)((function(e){return{employeeDetail:e.employeeManage.employeeDetail}}))((function(e){var t=e.employeeDetail,a=e.location,r={employeeDetail:t,location:a};return"second"===n().get(a,"query.fileType")?l.createElement(Dt,r):l.createElement(mt,r)}))},90066:function(e,t){t.Z={"employee-popconfirm-radio-style":"Tun4pziqSIWd4dGXFZOA","app-comp-employee-compareType":"urit6NdXIxqmHXD9HQKm","alert-info":"rg3Eb7GR4t052hKfsruI","app-comp-employee-manage-menu-common-line-operation-termination":"_6dIj51CDEoIcPqdfyLC"}}}]);