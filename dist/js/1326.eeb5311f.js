"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[1326],{94243:function(e,t,n){var a=n(15671),o=n(97326),c=n(60136),r=n(82963),i=n(61120),s=n(4942),l=n(67294),u=n(96036),p=n(80385),d=n(8240);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,i.Z)(e);if(t){var o=(0,i.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,r.Z)(this,n)}}var b=u.Hr.Option,j=function(e){(0,c.Z)(n,e);var t=v(n);function n(){var e;(0,a.Z)(this,n);for(var c=arguments.length,r=new Array(c),i=0;i<c;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),(0,s.Z)((0,o.Z)(e),"render",(function(){var t=m({},e.props),n=(0,d.CE)(["dispatch","attributionData"],t);return l.createElement(u.Hr,n,l.createElement(b,{value:"".concat(p.F$Y.project)},p.F$Y.description(p.F$Y.project)),l.createElement(b,{value:"".concat(p.F$Y.headquarter)},p.F$Y.description(p.F$Y.headquarter)),l.createElement(b,{value:"".concat(p.F$Y.city)},p.F$Y.description(p.F$Y.city)),l.createElement(b,{value:"".concat(p.F$Y.district)},p.F$Y.description(p.F$Y.district)),l.createElement(b,{value:"".concat(p.F$Y.knight)},p.F$Y.description(p.F$Y.knight)),l.createElement(b,{value:"".concat(p.F$Y.headquarters)},p.F$Y.description(p.F$Y.headquarters)),l.createElement(b,{value:"".concat(p.F$Y.managementCost)},p.F$Y.description(p.F$Y.managementCost)),l.createElement(b,{value:"".concat(p.F$Y.operatingSupport)},p.F$Y.description(p.F$Y.operatingSupport)),l.createElement(b,{value:"".concat(p.F$Y.vehicleDirectly)},p.F$Y.description(p.F$Y.vehicleDirectly)),l.createElement(b,{value:"".concat(p.F$Y.vehicleIndirect)},p.F$Y.description(p.F$Y.vehicleIndirect)))})),e}return n}(l.Component);t.Z=j},21326:function(e,t,n){n.r(t),n.d(t,{default:function(){return B}});n(13062);var a=n(71230),o=(n(89032),n(15746)),c=(n(52560),n(71577)),r=(n(51838),n(48086)),i=n(15671),s=n(43144),l=n(97326),u=n(60136),p=n(82963),d=n(61120),f=n(4942),m=n(93517),v=n.n(m),b=n(45697),j=n.n(b),y=n(67294),h=n(55609),g=n(66939),Z=(n(98703),n(36037),n(47933)),x=(n(29093),n(16317)),P=(n(9070),n(20924)),C=n(94243),F=n(96036),E=n(88144),S=n(80385),O=n(5646);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,p.Z)(this,n)}}var U=F.Hr.Option,w=P.Z.TextArea,Y=function(e){(0,u.Z)(n,e);var t=D(n);function n(e){var a;return(0,i.Z)(this,n),a=t.call(this,e),(0,f.Z)((0,l.Z)(a),"componentDidMount",(function(){var e=a.props.subjectsDetail,t=(void 0===e?{}:e).level,n=void 0===t?"":t;if(n){var o={level:[n-1],page:1,limit:999999,state:[S.NF3.normal,S.NF3.disable]};a.props.dispatch({type:"expenseSubject/fetchExpenseSubjects",payload:o})}})),(0,f.Z)((0,l.Z)(a),"onChangeLevel",(function(e){var t=a.props.form,n=e-1,o={level:[n],page:1,limit:999999,state:[S.NF3.normal,S.NF3.disable]};t.setFieldsValue({attribution:void 0,superior:void 0,coding:void 0}),a.setState({accountingCode:""}),n&&a.props.dispatch({type:"expenseSubject/fetchExpenseSubjects",payload:o})})),(0,f.Z)((0,l.Z)(a),"onChangeSuperior",(function(e){var t=a.props,n=t.form,o=t.subjectsData,c=(void 0===o?{}:o).data,r=(void 0===c?[]:c).filter((function(t){return t.id===e}));r&&r.length>0&&(a.setState({accountingCode:r[0].accountingCode}),n.setFieldsValue({attribution:"".concat(r[0].costCenterType||"")})),n.setFieldsValue({coding:void 0})})),(0,f.Z)((0,l.Z)(a),"onChangeCostOf",(function(e){var t=a.props.form;e.target.value===S.HcC.no&&t.setFieldsValue({attribution:void 0})})),(0,f.Z)((0,l.Z)(a),"renderAttributionInfo",(function(){var e=a.props.form,t=e.getFieldDecorator,n=e.getFieldValue,o=a.props,c=o.subjectsDetail,r=void 0===c?{}:c,i=o.subjectsData,s=void 0===i?{}:i,l=r.level,u=void 0===l?"":l,p=r.parentInfo,d=(p=void 0===p?{}:p).id,f=void 0===d?"":d,m=r.costFlag,b=void 0!==m&&m,j=r.costCenterType,h=void 0===j?0:j,g=s.data,P=void 0===g?[]:g,O=[];O.push(P.map((function(e,t){return y.createElement(U,{key:t,value:e.id,disabled:e.state===S.NF3.disable},"".concat(e.name,"(").concat(e.accountingCode,")").concat(e.state===S.NF3.disable?"(停用)":""))})));var D=!0,w=!0,Y=n("level")?n("level"):u;D=Number(Y)!==S.xPU.one,w=n("costOf")!==S.HcC.no;var $=[{label:"级别 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:t("level",{rules:[{required:!0,message:"请选择科目级别"}],initialValue:"".concat(u)||void 0})(y.createElement(x.Z,{placeholder:"请选择科目级别",onChange:a.onChangeLevel},y.createElement(U,{value:"".concat(S.xPU.one)},S.xPU.description(S.xPU.one)),y.createElement(U,{value:"".concat(S.xPU.two)},S.xPU.description(S.xPU.two)),y.createElement(U,{value:"".concat(S.xPU.three)},S.xPU.description(S.xPU.three)),y.createElement(U,{value:"".concat(S.xPU.four)},S.xPU.description(S.xPU.four)),y.createElement(U,{value:"".concat(S.xPU.five)},S.xPU.description(S.xPU.five)),y.createElement(U,{value:"".concat(S.xPU.six)},S.xPU.description(S.xPU.six)),y.createElement(U,{value:"".concat(S.xPU.seven)},S.xPU.description(S.xPU.seven)),y.createElement(U,{value:"".concat(S.xPU.eight)},S.xPU.description(S.xPU.eight)),y.createElement(U,{value:"".concat(S.xPU.nine)},S.xPU.description(S.xPU.nine)),y.createElement(U,{value:"".concat(S.xPU.ten)},S.xPU.description(S.xPU.ten))))},{label:"上级科目",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:t("superior",{rules:[{required:D,message:"请选择上级科目"}],initialValue:"".concat(f||"")||void 0})(y.createElement(x.Z,{placeholder:"请选择上级科目",onChange:a.onChangeSuperior,disabled:!D,showSearch:!0,allowClear:!0,optionFilterProp:"children"},O))},{label:"是否成本类",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:t("costOf",{initialValue:b||S.HcC.no,rules:[{required:!0,message:"请选择"}]})(y.createElement(Z.ZP.Group,{onChange:a.onChangeCostOf},y.createElement(Z.ZP,{value:S.HcC.is},S.HcC.description(S.HcC.is)),y.createElement(Z.ZP,{value:S.HcC.no},S.HcC.description(S.HcC.no))))},{label:"成本归属 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:t("attribution",{rules:[{required:w,message:"请选择成本归属"}],initialValue:h?"".concat(h):void 0})(y.createElement(C.Z,{allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择成本归属"}))},{label:"适用场景",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:t("scense",{rules:[{required:!0,message:"请选择适用场景"}],initialValue:v().get(r,"industryCodes.0",void 0)})(y.createElement(E.UU,{enumeratedType:"subjectScense"}))}];return y.createElement(F.KP,{items:$})})),(0,f.Z)((0,l.Z)(a),"renderBasicInfo",(function(){var e=a.props,t=e.subjectsDetail,n=void 0===t?{}:t,o=e.form,c=(void 0===o?{}:o).getFieldDecorator,r=n.name,i=void 0===r?void 0:r,s=n.accountingCode,l=void 0===s?void 0:s,u=n.description,p=void 0===u?void 0:u,d=a.state.accountingCode,f=[{label:"科目名称 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:c("name",{rules:[{required:!0,message:"请填写科目名称"},{max:128,message:"长度不得超过128"}],initialValue:i||void 0})(y.createElement(P.Z,{type:"text",placeholder:"请输入科目名称"}))},{label:"科目编码 :",span:9,layout:{labelCol:{span:6},wrapperCol:{span:15}},form:y.createElement("span",null,d,c("coding",{rules:[{required:!0,message:"请填写科目编码"},{len:2,message:"必须是两位"},{pattern:/\S{2,}/,message:"输入的内容不能为空格"}],initialValue:l.slice(-2)})(y.createElement(P.Z,{className:O.Z["app-comp-expense-subject-components-coding"],type:"text",placeholder:"请输入科目编码"})))},{label:"科目描述 :",span:23,layout:{labelCol:{span:2},wrapperCol:{span:19}},form:c("describe",{rules:[{required:!1,message:"请输入科目描述"}],initialValue:p||void 0})(y.createElement(w,{placeholder:"请输入科目描述",className:O.Z["app-comp-expense-subject-components-describe"]}))}];return y.createElement(F.KP,{items:f})})),(0,f.Z)((0,l.Z)(a),"render",(function(){return y.createElement("div",null,y.createElement(F.IT,{title:"归属信息"},a.renderAttributionInfo()),y.createElement(F.IT,{title:"基本信息"},a.renderBasicInfo()))})),a.state={close:!1,disable:!0,isDefaultAccount:!0,accountingCode:void 0},a}return(0,s.Z)(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.subjectsDetail,a=void 0===n?{}:n,o=t.isDefaultAccount;return void 0!==o&&o&&Object.keys(a).length>0?{accountingCode:v().get(a,"accountingCode","").slice(0,-2),isDefaultAccount:!1}:null}}]),n}(y.Component);(0,f.Z)(Y,"propTypes",{subjectsDetail:j().object,subjectsData:j().object,form:j().object}),(0,f.Z)(Y,"defaultProps",{subjectsDetail:{},subjectsData:{},form:{}});var $=(0,h.connect)((function(e){var t=e.expenseSubject;return{subjectsData:t.subjectsData,subjectsDetail:t.subjectsDetail}}))(Y),k=n(57129);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.Z)(e);if(t){var o=(0,d.Z)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return(0,p.Z)(this,n)}}var V=function(e){(0,u.Z)(n,e);var t=H(n);function n(){var e;(0,i.Z)(this,n);for(var s=arguments.length,u=new Array(s),p=0;p<s;p++)u[p]=arguments[p];return e=t.call.apply(t,[this].concat(u)),(0,f.Z)((0,l.Z)(e),"onSave",(function(){var t=e.props,n=t.form,a=t.subjectsData,o=void 0===a?{}:a,c=t.subjectsDetail,r=(void 0===c?{}:c).id,i=void 0===r?void 0:r;n.validateFields((function(t,n){if(!t){var a=R({id:i,state:S.NF3.draft},n),c=n.superior,r=void 0===c?void 0:c,s=v().get(o,"data",[]).filter((function(e){return e.id===r}));s&&s.length>0&&(a.coding="".concat(s[0].accountingCode||"").concat(a.coding)),e.props.dispatch({type:"expenseSubject/updateSubject",payload:{params:a,onSuccessCallback:e.onSuccessSave,onFailureCallback:e.onFailureSaveSubmit}})}}))})),(0,f.Z)((0,l.Z)(e),"onSubmit",(function(){var t=e.props,n=t.form,a=t.subjectsData,o=void 0===a?{}:a,c=t.subjectsDetail,r=(void 0===c?{}:c).id,i=void 0===r?void 0:r;n.validateFields((function(t,n){if(!t){var a=R({id:i,state:S.NF3.normal},n),c=n.superior,r=void 0===c?void 0:c,s=v().get(o,"data",[]).filter((function(e){return e.id===r}));s&&s.length>0&&(a.coding="".concat(s[0].accountingCode||"").concat(a.coding)),e.props.dispatch({type:"expenseSubject/updateSubject",payload:{params:a,onSuccessCallback:e.onSuccessSubmit,onFailureCallback:e.onFailureSaveSubmit}})}}))})),(0,f.Z)((0,l.Z)(e),"onSuccessSubmit",(function(){r.ZP.success("科目编辑成功"),e.props.history.push("/Expense/Subject")})),(0,f.Z)((0,l.Z)(e),"onFailureSaveSubmit",(function(e){r.ZP.error(e.zh_message)})),(0,f.Z)((0,l.Z)(e),"onSuccessSave",(function(){r.ZP.success("科目编辑成功")})),(0,f.Z)((0,l.Z)(e),"renderUpdateInfo",(function(){var t=e.props,n=t.form,a=t.subjectsDetail;return Object.keys(a).length<1?null:y.createElement($,{form:n,subjectsDetail:a})})),(0,f.Z)((0,l.Z)(e),"renderOprations",(function(){var t=[y.createElement(o.Z,{key:"save",className:k.Z["app-comp-expense-subject-update-save"]},y.createElement(c.Z,{type:"primary",size:"large",onClick:e.onSave},"保存"))];return t.push(y.createElement(o.Z,{key:"submit",className:k.Z["app-comp-expense-subject-update-submit"]},y.createElement(c.Z,{type:"primary",size:"large",onClick:e.onSubmit},"提交"))),y.createElement(a.Z,{type:"flex",align:"middle",justify:"center",className:k.Z["app-comp-expense-subject-update-button"]},t)})),(0,f.Z)((0,l.Z)(e),"render",(function(){return y.createElement(g.Z,{layout:"horizontal"},e.renderUpdateInfo(),e.renderOprations())})),e}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){var e={id:this.props.location.query.subjiectId};this.props.dispatch({type:"expenseSubject/fetchSubjectsDetail",payload:e})}},{key:"componentWillUnmount",value:function(){var e=this.props.dispatch;e({type:"expenseSubject/resetSubjectsDetail"}),e({type:"expenseSubject/resetSubjects"})}}]),n}(y.Component);(0,f.Z)(V,"propTypes",{subjectsDetail:j().object,subjectsData:j().object}),(0,f.Z)(V,"defaultProps",{subjectsDetail:{},subjectsData:{}});var B=(0,h.connect)((function(e){var t=e.expenseSubject;return{subjectsDetail:t.subjectsDetail,subjectsData:t.subjectsData}}))(g.Z.create()(V))},5646:function(e,t){t.Z={"app-comp-expense-subject-components-coding":"oKuzPEVGLqeAthCNdIET","app-comp-expense-subject-components-describe":"BiBmO1DMBm5ZCZ99_7DJ"}},57129:function(e,t){t.Z={"app-comp-expense-subject-operation-update":"RpJQ2mLrg7Xi8ec6gsMZ","app-comp-expense-subject":"PN7e9tv0En5YZ_HMkT2O","app-comp-expense-subject-operation-detele":"fn5P_0ya077Nru8ZeKZq","app-comp-expense-subject-operation-enable":"pc8gj8FKRzH6BrevLQGm","app-comp-expense-subject-operation-disable":"fipYabxrAmO8k8eoHmNO","app-comp-expense-subject-update-save":"f2Ex550dRuIQAovMMXgw","app-comp-expense-subject-update-submit":"IWGzV3xSPyTIPE_22TzI","app-comp-expense-subject-update-button":"wNJB1W725VHyFTr415NA","app-comp-expense-subject-create-save":"RUK2U5uLgZm_csoEHFQ4","app-comp-expense-subject-create-primary":"fE0tpD6WcilsXwnB4VwF","app-comp-expense-subject-create-button":"f91EN3DBQNoGu5MOLXTx","app-comp-expense-subject-detail-common-title":"fkLwf_kttofnJHjPWp7v","app-comp-expense-subject-detail-common-content":"uJeeC13TvHh47jG9aLLA","app-comp-expense-subject-detail-common-text":"dukmSL9TTFMXGm0ROaK0","app-comp-expense-subject-detail-common-button":"VHgoFTiAzeXBvSlVtwZJ","app-comp-expense-subject-detail-common-distance":"OpbXe6PevRXzPp5HqRK0"}}}]);