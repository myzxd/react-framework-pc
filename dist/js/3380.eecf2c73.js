"use strict";(self.webpackChunkaoaoBoss=self.webpackChunkaoaoBoss||[]).push([[3380],{61397:function(e,t,n){n(29093);var r=n(16317),a=n(55609),o=n(67294),c=(n(80385),r.Z.Option);t.Z=(0,a.connect)((function(e){return{subjectList:e.codeFlow.subjectList}}))((function(e){var t=e.dispatch,n=e.subjectList,a=void 0===n?{}:n,i=e.value,l=e.onChange,d=e.type,u=e.selectDisabled;(0,o.useEffect)((function(){return t({type:"codeFlow/getSubjectList",payload:{page:1,limit:9999,type:d}}),function(){t({type:"codeFlow/resetSubjectList"})}}),[t,d]);var s=a.data,m=void 0===s?[]:s;return o.createElement(r.Z,{value:i,onChange:l,placeholder:"请选择",mode:"multiple",allowClear:!0,showSearch:!0,optionFilterProp:"children",disabled:u,showArrow:!0},m.map((function(e){return o.createElement(c,{value:"".concat(e._id,"=").concat(e.ac_code),key:e._id},e.name,"(",e.ac_code,")")})))}))},83380:function(e,t,n){n.r(t),n.d(t,{default:function(){return V}});var r=n(4942),a=n(29439),o=n(55609),c=n(67294),i=(n(21316),n(75443)),l=(n(52560),n(71577)),d=(n(9070),n(20924)),u=(n(35668),n(86585)),s=n(15861),m=(n(54071),n(14072)),p=(n(29093),n(16317)),f=n(87757),h=n.n(f),y=n(80385),v=n(96036),g=n(88144),b=n(61397),E=n(93433),w=p.Z.Option,C=(0,o.connect)((function(e){var t=e.codeRecord;return{codeCostCenterTypeList:t.codeCostCenterTypeList,teamCostCenterTypeList:t.teamCostCenterTypeList}}))((function(e){var t=e.dispatch,n=e.value,r=e.onChange,a=e.codeCostCenterTypeList,o=void 0===a?[]:a,i=e.teamCostCenterTypeList,l=void 0===i?[]:i;(0,c.useEffect)((function(){return t({type:"codeRecord/getCodeCostCenterTypeList",payload:{}}),t({type:"codeRecord/getTeamCostCenterTypeList",payload:{}}),function(){t({type:"codeRecord/resetCodeCostCenterTypeList"}),t({type:"codeRecord/resetTeamCostCenterTypeList"})}}),[t]);var d=[];return Array.isArray(o)&&Array.isArray(l)&&(d=[].concat((0,E.Z)(o),(0,E.Z)(l))),c.createElement(p.Z,{value:n,onChange:r,placeholder:"请选择",mode:"multiple",allowClear:!0,optionFilterProp:"children",showArrow:!0},d.map((function(e){return c.createElement(w,{value:e._id,key:e._id},e.name)})))})),_=p.Z.Option,I=(0,o.connect)((function(e){return{enumeratedValue:e.codeRecord.enumeratedValue}}))((function(e){var t=e.dispatch,n=e.value,r=e.onChange,a=e.enumeratedValue,o=void 0===a?{}:a;(0,c.useEffect)((function(){return t({type:"codeRecord/getEnumeratedValue",payload:{}}),function(){t({type:"codeRecord/resetEnumerateValue",payload:{}})}}),[t]);var i=o.code_invoice_titles||[],l=o.team_invoice_titles||[],d=(0,E.Z)(new Set([].concat((0,E.Z)(i),(0,E.Z)(l))));return c.createElement(p.Z,{placeholder:"请选择",allowClear:!0,showSearch:!0,dropdownMatchSelectWidth:!1,value:n,onChange:r},d.map((function(e,t){return c.createElement(_,{value:e.name,key:t},e.name)})))})),O=n(45430);function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=p.Z.Option,j=m.Z.MonthPicker,D=m.Z.RangePicker,P=function(e){var t=e.onSearch,n=e.onReset,r=e.dispatch,o=e.searchVal,m=(0,c.useState)({}),f=(0,a.Z)(m,2),E=f[0],w=f[1];(0,c.useEffect)((function(){E&&E.resetFields&&E.resetFields()}),[E]);var _=function(){var e=(0,s.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.validateFields();case 2:t=e.sent,r({type:"codeRecord/onExportRecords",payload:x(x({},o),t)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z={items:[c.createElement(u.Z.Item,{label:"提报类型",name:"reportType"},c.createElement(p.Z,{placeholder:"请选择",allowClear:!0},c.createElement(T,{value:y.Xr3.code},y.Xr3.description(y.Xr3.code)),c.createElement(T,{value:y.Xr3.team},y.Xr3.description(y.Xr3.team)))),c.createElement(u.Z.Item,{label:"科目名称",name:"subject"},c.createElement(b.Z,null)),c.createElement(u.Z.Item,{label:"核算中心",name:"accountCenter"},c.createElement(C,null)),c.createElement(u.Z.Item,{label:"单据状态",name:"state"},c.createElement(p.Z,{placeholder:"请选择",allowClear:!0},c.createElement(T,{value:y.DU5.processing},y.DU5.description(y.DU5.processing)),c.createElement(T,{value:y.DU5.finish},y.DU5.description(y.DU5.finish)),c.createElement(T,{value:y.DU5.close},y.DU5.description(y.DU5.close)))),c.createElement(u.Z.Item,{label:"费用单号",name:"costOrderId"},c.createElement(d.Z,{placeholder:"请输入费用单号",allowClear:!0})),c.createElement(u.Z.Item,{label:"审批单号",name:"orderId"},c.createElement(d.Z,{placeholder:"请输入审批单号",allowClear:!0})),c.createElement(u.Z.Item,{label:"记账月份",name:"belongTime"},c.createElement(j,{inputReadOnly:!0,allowClear:!0})),c.createElement(u.Z.Item,{label:"提报时间",name:"reportAt"},c.createElement(D,{format:"YYYY-MM-DD",disabledDate:function(e){return e&&e>new Date},allowClear:!0,inputReadOnly:!0})),c.createElement(u.Z.Item,{label:"付款时间",name:"payAt"},c.createElement(D,{format:"YYYY-MM-DD",disabledDate:function(e){return e&&e>new Date},allowClear:!0,inputReadOnly:!0})),c.createElement(u.Z.Item,{label:"申请人",name:"applicant"},c.createElement(g.Di,{allowClear:!0,showSearch:!0,optionFilterProp:"children",placeholder:"请选择"})),c.createElement(u.Z.Item,{label:"是否红冲",name:"billRedPushState"},c.createElement(p.Z,{allowClear:!0,placeholder:"请选择"},c.createElement(T,{value:y.v7n.right},y.v7n.description(y.v7n.right)),c.createElement(T,{value:y.v7n.negate},y.v7n.description(y.v7n.negate)))),c.createElement(u.Z.Item,{label:"付款状态",name:"payStatus"},c.createElement(p.Z,{allowClear:!0,placeholder:"请选择付款状态"},c.createElement(T,{value:y.rTI.done},y.rTI.description(y.rTI.done)),c.createElement(T,{value:y.rTI.abnormal},y.rTI.description(y.rTI.abnormal)),c.createElement(T,{value:y.rTI.untreated},y.rTI.description(y.rTI.untreated)),c.createElement(T,{value:y.rTI.noNeed},y.rTI.description(y.rTI.noNeed))))],expandItems:[c.createElement(u.Z.Item,{label:"发票抬头",name:"invoiceTitle",labelCol:{span:5},wrapperCol:{span:19},style:{marginLeft:8}},c.createElement(I,null))],onSearch:t,onReset:n,onHookForm:function(e){return w(e)},operations:O.ZP.canOperateOperateCodeRecordExport()?c.createElement(i.Z,{title:"创建下载任务？",onConfirm:_,okText:"确认",cancelText:"取消"},c.createElement(l.Z,{type:"primary"},"导出EXCEL")):""};return c.createElement(v.IT,null,c.createElement(v.j6,Z))},R=(n(20186),n(75385)),L=(n(55295),n(69713)),S=n(94315),k=n.n(S),F=n(93517),M=n.n(F),Y=n(30381),z=n.n(Y),A=function(e){var t=e.onShowSizeChange,n=void 0===t?function(){}:t,r=e.onChangePage,a=void 0===r?function(){}:r,o=e.recordList,i=void 0===o?{}:o,l=e.loading,d=i.data,u=void 0===d?[]:d,s=i._meta,m=void 0===s?{}:s,p=[{title:"编号",dataIndex:"_id",key:"number",fixed:"left",width:50,render:function(e,t,n){return m.page_size*(m.page-1)+n+1}},{title:"费用单号",dataIndex:"_id",key:"cost_id",fixed:"left",width:120,render:function(e){return e||"--"}},{title:"审批单号",dataIndex:"oa_order_id",fixed:"left",width:120,render:function(e){return e||"--"}},{title:"主题标签",dataIndex:"theme_label_list",fixed:"left",width:120,render:function(e){return function(e,t){if(Array.isArray(e)&&e.length>3){var n="inspect"===t?e.map((function(e){return e.name})).join(" 、 "):e.map((function(e){return e})).join(" 、 ");return c.createElement(L.Z,{title:n},c.createElement("div",null,"inspect"===t?e.slice(0,3).map((function(e){return e.name})).join(" 、 "):e.slice(0,3).map((function(e){return e})).join(" 、 "),"..."))}return Array.isArray(e)&&e.length<=3&&e.length>0?c.createElement("div",null,"inspect"===t?e.map((function(e){return e.name})).join("、"):e.map((function(e){return e})).join("、")):"--"}(e)}},{title:"提报类型",dataIndex:"cost_center_type",key:"type",width:80,render:function(e){return e?y.Xr3.description(e):"--"}},{title:"科目名称",dataIndex:"biz_account_info",width:200,render:function(e){var t=e.name,n=e.ac_code;return c.createElement("span",null,t||"--",n?"(".concat(n,")"):"")}},{title:"核算中心",dataIndex:"cost_center_type",key:"cost_center_type",width:120,render:function(e,t){var n="--";return e===y.Xr3.code&&(n=M().get(t,"biz_code_info.name","--")),e===y.Xr3.team&&(n=M().get(t,"biz_team_info.name","--")),n}},{title:"发票抬头",dataIndex:"invoice_title",width:200,render:function(e){return e||"--"}},{title:"提报金额",dataIndex:"total_money",width:120,render:function(e){return e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"应付款金额",dataIndex:"payment_total_money",width:120,render:function(e){return e?y.fbc.exchangePriceCentToMathFormat(e):"--"}},{title:"税金",dataIndex:"total_tax_amount_amount",key:"total_tax_amount_amount",width:120,render:function(e){return e?y.fbc.exchangePriceCentToMathFormat(e):y.fbc.exchangePriceCentToMathFormat(0)}},{title:"红冲金额",dataIndex:"total_tax_amount_amount",key:"red_push",width:120,render:function(e,t){return t.bill_red_push_state===y.v7n.right&&e?y.fbc.exchangePriceCentToMathFormat(e):y.fbc.exchangePriceCentToMathFormat(0)}},{title:"记账月份",dataIndex:"book_month",width:120,render:function(e,t){return t.cost_allocation_state===y.Izm.manualEntered?"按分摊规则记账":e||"--"}},{title:"是否红冲",dataIndex:"bill_red_push_state",width:100,render:function(e){return e?y.v7n.description(e):"--"}},{title:"单据状态",dataIndex:"state",width:100,render:function(e){return e?y.DU5.description(e):"--"}},{title:"付款状态",dataIndex:"paid_state",width:100,render:function(e){return e?y.rTI.description(e):"--"}},{title:"申请人",dataIndex:"apply_account_info",width:100,render:function(e){return k().existy(e)&&k().not.empty(e)?e.state===y.m3m.off?e.name?"".concat(e.name,"(").concat(y.m3m.description(e.state),")"):"--":e.name?e.name:"--":"--"}},{title:"提报时间",dataIndex:"submit_at",width:160,render:function(e){return e?z()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"付款时间",dataIndex:"paid_at",width:160,render:function(e){return e?z()(e).format("YYYY-MM-DD HH:mm:ss"):"--"}},{title:"操作",dataIndex:"_id",key:"operate",fixed:"right",width:80,render:function(e){return t=e,O.ZP.canOperateModuleCodeRecordDetail()?c.createElement("a",{href:"/#/Code/Record/Detail?recordId=".concat(t)},"查看"):"--";var t}}],f={current:m.page||1,defaultPageSize:30,pageSize:m.page_size||30,showQuickJumper:!0,showSizeChanger:!0,onChange:a,onShowSizeChange:n,showTotal:function(e){return"总共".concat(e,"条")},total:m.result_count,pageSizeOptions:["10","20","30","40"]};return c.createElement(v.IT,{title:"费用记录明细列表"},c.createElement(R.Z,{rowKey:function(e,t){return e._id||t},columns:p,dataSource:u,pagination:f,bordered:!0,loading:l,scroll:{y:500,x:2410}}))};function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V=(0,o.connect)((function(e){return{recordList:e.codeRecord.recordList}}))((function(e){var t=e.dispatch,n=e.recordList,r=void 0===n?{}:n,o=(0,c.useState)(!0),i=(0,a.Z)(o,2),l=i[0],d=i[1],u=(0,c.useRef)({page:1,limit:30});(0,c.useEffect)((function(){return t({type:"codeRecord/getRecordList",payload:X(X({},u.current),{},{setLoading:function(){return d(!1)}})}),function(){t({type:"codeRecord/resetRecordList"})}}),[t]);var s=function(){d(!0),t({type:"codeRecord/resetRecordList"}),t({type:"codeRecord/getRecordList",payload:X(X({},u.current),{},{setLoading:function(){return d(!1)}})})},m=function(e,t){u.current=X(X({},u.current),{},{page:e,limit:t}),s()},p={onSearch:function(e){u.current=X(X({},u.current),e),s()},onReset:function(e){u.current=X(X(X({},u.current),e),{},{page:1,limit:30}),s()},dispatch:t},f={onChangePage:m,onShowSizeChange:m,recordList:r,dispatch:t,getRecordList:s,loading:l};return c.createElement(c.Fragment,null,c.createElement(P,p),c.createElement(A,f))}))}}]);